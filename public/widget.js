(function(){"use strict";var se,T,Xe,W,Ye,Ve,Ge,Je,_e,be,Se,V={},Ke=[],go=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,le=Array.isArray;function F(e,t){for(var o in t)e[o]=t[o];return e}function ve(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function n(e,t,o){var r,s,i,l={};for(i in t)i=="key"?r=t[i]:i=="ref"?s=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?se.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)l[i]===void 0&&(l[i]=e.defaultProps[i]);return ae(e,l,r,s,null)}function ae(e,t,o,r,s){var i={type:e,props:t,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Xe,__i:-1,__u:0};return s==null&&T.vnode!=null&&T.vnode(i),i}function ce(e){return e.children}function de(e,t){this.props=e,this.context=t}function Y(e,t){if(t==null)return e.__?Y(e.__,e.__i+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?Y(e):null}function Qe(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return Qe(e)}}function Ze(e){(!e.__d&&(e.__d=!0)&&W.push(e)&&!pe.__r++||Ye!=T.debounceRendering)&&((Ye=T.debounceRendering)||Ve)(pe)}function pe(){for(var e,t,o,r,s,i,l,u=1;W.length;)W.length>u&&W.sort(Ge),e=W.shift(),u=W.length,e.__d&&(o=void 0,r=void 0,s=(r=(t=e).__v).__e,i=[],l=[],t.__P&&((o=F({},r)).__v=r.__v+1,T.vnode&&T.vnode(o),we(t.__P,o,r,t.__n,t.__P.namespaceURI,32&r.__u?[s]:null,i,s??Y(r),!!(32&r.__u),l),o.__v=r.__v,o.__.__k[o.__i]=o,rt(i,o,l),r.__e=r.__=null,o.__e!=s&&Qe(o)));pe.__r=0}function et(e,t,o,r,s,i,l,u,f,a,p){var c,g,h,x,_,S,m,v=r&&r.__k||Ke,C=t.length;for(f=ho(o,t,v,f,C),c=0;c<C;c++)(h=o.__k[c])!=null&&(g=h.__i==-1?V:v[h.__i]||V,h.__i=c,S=we(e,h,g,s,i,l,u,f,a,p),x=h.__e,h.ref&&g.ref!=h.ref&&(g.ref&&Ce(g.ref,null,h),p.push(h.ref,h.__c||x,h)),_==null&&x!=null&&(_=x),(m=!!(4&h.__u))||g.__k===h.__k?f=tt(h,f,e,m):typeof h.type=="function"&&S!==void 0?f=S:x&&(f=x.nextSibling),h.__u&=-7);return o.__e=_,f}function ho(e,t,o,r,s){var i,l,u,f,a,p=o.length,c=p,g=0;for(e.__k=new Array(s),i=0;i<s;i++)(l=t[i])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=e.__k[i]=ae(null,l,null,null,null):le(l)?l=e.__k[i]=ae(ce,{children:l},null,null,null):l.constructor===void 0&&l.__b>0?l=e.__k[i]=ae(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):e.__k[i]=l,f=i+g,l.__=e,l.__b=e.__b+1,u=null,(a=l.__i=xo(l,o,f,c))!=-1&&(c--,(u=o[a])&&(u.__u|=2)),u==null||u.__v==null?(a==-1&&(s>p?g--:s<p&&g++),typeof l.type!="function"&&(l.__u|=4)):a!=f&&(a==f-1?g--:a==f+1?g++:(a>f?g--:g++,l.__u|=4))):e.__k[i]=null;if(c)for(i=0;i<p;i++)(u=o[i])!=null&&(2&u.__u)==0&&(u.__e==r&&(r=Y(u)),st(u,u));return r}function tt(e,t,o,r){var s,i;if(typeof e.type=="function"){for(s=e.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=e,t=tt(s[i],t,o,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=Y(e)),o.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function xo(e,t,o,r){var s,i,l,u=e.key,f=e.type,a=t[o],p=a!=null&&(2&a.__u)==0;if(a===null&&u==null||p&&u==a.key&&f==a.type)return o;if(r>(p?1:0)){for(s=o-1,i=o+1;s>=0||i<t.length;)if((a=t[l=s>=0?s--:i++])!=null&&(2&a.__u)==0&&u==a.key&&f==a.type)return l}return-1}function ot(e,t,o){t[0]=="-"?e.setProperty(t,o??""):e[t]=o==null?"":typeof o!="number"||go.test(t)?o:o+"px"}function ue(e,t,o,r,s){var i,l;e:if(t=="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)o&&t in o||ot(e.style,t,"");if(o)for(t in o)r&&o[t]==r[t]||ot(e.style,t,o[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(Je,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=o,o?r?o.u=r.u:(o.u=_e,e.addEventListener(t,i?Se:be,i)):e.removeEventListener(t,i?Se:be,i);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&o==1?"":o))}}function nt(e){return function(t){if(this.l){var o=this.l[t.type+e];if(t.t==null)t.t=_e++;else if(t.t<o.u)return;return o(T.event?T.event(t):t)}}}function we(e,t,o,r,s,i,l,u,f,a){var p,c,g,h,x,_,S,m,v,C,k,L,P,O,I,E,R,w=t.type;if(t.constructor!==void 0)return null;128&o.__u&&(f=!!(32&o.__u),i=[u=t.__e=o.__e]),(p=T.__b)&&p(t);e:if(typeof w=="function")try{if(m=t.props,v="prototype"in w&&w.prototype.render,C=(p=w.contextType)&&r[p.__c],k=p?C?C.props.value:p.__:r,o.__c?S=(c=t.__c=o.__c).__=c.__E:(v?t.__c=c=new w(m,k):(t.__c=c=new de(m,k),c.constructor=w,c.render=yo),C&&C.sub(c),c.state||(c.state={}),c.__n=r,g=c.__d=!0,c.__h=[],c._sb=[]),v&&c.__s==null&&(c.__s=c.state),v&&w.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=F({},c.__s)),F(c.__s,w.getDerivedStateFromProps(m,c.__s))),h=c.props,x=c.state,c.__v=t,g)v&&w.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),v&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(v&&w.getDerivedStateFromProps==null&&m!==h&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(m,k),t.__v==o.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(m,c.__s,k)===!1){for(t.__v!=o.__v&&(c.props=m,c.state=c.__s,c.__d=!1),t.__e=o.__e,t.__k=o.__k,t.__k.some(function(y){y&&(y.__=t)}),L=0;L<c._sb.length;L++)c.__h.push(c._sb[L]);c._sb=[],c.__h.length&&l.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(m,c.__s,k),v&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(h,x,_)})}if(c.context=k,c.props=m,c.__P=e,c.__e=!1,P=T.__r,O=0,v){for(c.state=c.__s,c.__d=!1,P&&P(t),p=c.render(c.props,c.state,c.context),I=0;I<c._sb.length;I++)c.__h.push(c._sb[I]);c._sb=[]}else do c.__d=!1,P&&P(t),p=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++O<25);c.state=c.__s,c.getChildContext!=null&&(r=F(F({},r),c.getChildContext())),v&&!g&&c.getSnapshotBeforeUpdate!=null&&(_=c.getSnapshotBeforeUpdate(h,x)),E=p,p!=null&&p.type===ce&&p.key==null&&(E=it(p.props.children)),u=et(e,le(E)?E:[E],t,o,r,s,i,l,u,f,a),c.base=t.__e,t.__u&=-161,c.__h.length&&l.push(c),S&&(c.__E=c.__=null)}catch(y){if(t.__v=null,f||i!=null)if(y.then){for(t.__u|=f?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;i[i.indexOf(u)]=null,t.__e=u}else{for(R=i.length;R--;)ve(i[R]);ke(t)}else t.__e=o.__e,t.__k=o.__k,y.then||ke(t);T.__e(y,t,o)}else i==null&&t.__v==o.__v?(t.__k=o.__k,t.__e=o.__e):u=t.__e=mo(o.__e,t,o,r,s,i,l,f,a);return(p=T.diffed)&&p(t),128&t.__u?void 0:u}function ke(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(ke)}function rt(e,t,o){for(var r=0;r<o.length;r++)Ce(o[r],o[++r],o[++r]);T.__c&&T.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){T.__e(i,s.__v)}})}function it(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:le(e)?e.map(it):F({},e)}function mo(e,t,o,r,s,i,l,u,f){var a,p,c,g,h,x,_,S=o.props||V,m=t.props,v=t.type;if(v=="svg"?s="http://www.w3.org/2000/svg":v=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(a=0;a<i.length;a++)if((h=i[a])&&"setAttribute"in h==!!v&&(v?h.localName==v:h.nodeType==3)){e=h,i[a]=null;break}}if(e==null){if(v==null)return document.createTextNode(m);e=document.createElementNS(s,v,m.is&&m),u&&(T.__m&&T.__m(t,i),u=!1),i=null}if(v==null)S===m||u&&e.data==m||(e.data=m);else{if(i=i&&se.call(e.childNodes),!u&&i!=null)for(S={},a=0;a<e.attributes.length;a++)S[(h=e.attributes[a]).name]=h.value;for(a in S)if(h=S[a],a!="children"){if(a=="dangerouslySetInnerHTML")c=h;else if(!(a in m)){if(a=="value"&&"defaultValue"in m||a=="checked"&&"defaultChecked"in m)continue;ue(e,a,null,h,s)}}for(a in m)h=m[a],a=="children"?g=h:a=="dangerouslySetInnerHTML"?p=h:a=="value"?x=h:a=="checked"?_=h:u&&typeof h!="function"||S[a]===h||ue(e,a,h,S[a],s);if(p)u||c&&(p.__html==c.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(c&&(e.innerHTML=""),et(t.type=="template"?e.content:e,le(g)?g:[g],t,o,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,l,i?i[0]:o.__k&&Y(o,0),u,f),i!=null)for(a=i.length;a--;)ve(i[a]);u||(a="value",v=="progress"&&x==null?e.removeAttribute("value"):x!=null&&(x!==e[a]||v=="progress"&&!x||v=="option"&&x!=S[a])&&ue(e,a,x,S[a],s),a="checked",_!=null&&_!=e[a]&&ue(e,a,_,S[a],s))}return e}function Ce(e,t,o){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(s){T.__e(s,o)}}function st(e,t,o){var r,s;if(T.unmount&&T.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||Ce(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){T.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&st(r[s],t,o||typeof e.type!="function");o||ve(e.__e),e.__c=e.__=e.__e=void 0}function yo(e,t,o){return this.constructor(e,o)}function lt(e,t,o){var r,s,i,l;t==document&&(t=document.documentElement),T.__&&T.__(e,t),s=(r=!1)?null:t.__k,i=[],l=[],we(t,e=t.__k=n(ce,null,[e]),s||V,V,t.namespaceURI,s?null:t.firstChild?se.call(t.childNodes):null,i,s?s.__e:t.firstChild,r,l),rt(i,e,l)}se=Ke.slice,T={__e:function(e,t,o,r){for(var s,i,l;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),l=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),l=s.__d),l)return s.__E=s}catch(u){e=u}throw e}},Xe=0,de.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=F({},this.state),typeof e=="function"&&(e=e(F({},o),this.props)),e&&F(o,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ze(this))},de.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ze(this))},de.prototype.render=ce,W=[],Ve=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ge=function(e,t){return e.__v.__b-t.__v.__b},pe.__r=0,Je=/(PointerCapture)$|Capture$/i,_e=0,be=nt(!1),Se=nt(!0);var G,z,$e,at,J=0,ct=[],H=T,dt=H.__b,pt=H.__r,ut=H.diffed,ft=H.__c,gt=H.unmount,ht=H.__;function Be(e,t){H.__h&&H.__h(z,e,J||t),J=0;var o=z.__H||(z.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function b(e){return J=1,_o(_t,e)}function _o(e,t,o){var r=Be(G++,2);if(r.t=e,!r.__c&&(r.__=[_t(void 0,t),function(u){var f=r.__N?r.__N[0]:r.__[0],a=r.t(f,u);f!==a&&(r.__N=[a,r.__[1]],r.__c.setState({}))}],r.__c=z,!z.__f)){var s=function(u,f,a){if(!r.__c.__H)return!0;var p=r.__c.__H.__.filter(function(g){return!!g.__c});if(p.every(function(g){return!g.__N}))return!i||i.call(this,u,f,a);var c=r.__c.props!==u;return p.forEach(function(g){if(g.__N){var h=g.__[0];g.__=g.__N,g.__N=void 0,h!==g.__[0]&&(c=!0)}}),i&&i.call(this,u,f,a)||c};z.__f=!0;var i=z.shouldComponentUpdate,l=z.componentWillUpdate;z.componentWillUpdate=function(u,f,a){if(this.__e){var p=i;i=void 0,s(u,f,a),i=p}l&&l.call(this,u,f,a)},z.shouldComponentUpdate=s}return r.__N||r.__}function A(e,t){var o=Be(G++,3);!H.__s&&yt(o.__H,t)&&(o.__=e,o.u=t,z.__H.__h.push(o))}function N(e){return J=5,xt(function(){return{current:e}},[])}function xt(e,t){var o=Be(G++,7);return yt(o.__H,t)&&(o.__=e(),o.__H=t,o.__h=e),o.__}function $(e,t){return J=8,xt(function(){return e},t)}function bo(){for(var e;e=ct.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(fe),e.__H.__h.forEach(Te),e.__H.__h=[]}catch(t){e.__H.__h=[],H.__e(t,e.__v)}}H.__b=function(e){z=null,dt&&dt(e)},H.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ht&&ht(e,t)},H.__r=function(e){pt&&pt(e),G=0;var t=(z=e.__c).__H;t&&($e===z?(t.__h=[],z.__h=[],t.__.forEach(function(o){o.__N&&(o.__=o.__N),o.u=o.__N=void 0})):(t.__h.forEach(fe),t.__h.forEach(Te),t.__h=[],G=0)),$e=z},H.diffed=function(e){ut&&ut(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ct.push(t)!==1&&at===H.requestAnimationFrame||((at=H.requestAnimationFrame)||So)(bo)),t.__H.__.forEach(function(o){o.u&&(o.__H=o.u),o.u=void 0})),$e=z=null},H.__c=function(e,t){t.some(function(o){try{o.__h.forEach(fe),o.__h=o.__h.filter(function(r){return!r.__||Te(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],H.__e(r,o.__v)}}),ft&&ft(e,t)},H.unmount=function(e){gt&&gt(e);var t,o=e.__c;o&&o.__H&&(o.__H.__.forEach(function(r){try{fe(r)}catch(s){t=s}}),o.__H=void 0,t&&H.__e(t,o.__v))};var mt=typeof requestAnimationFrame=="function";function So(e){var t,o=function(){clearTimeout(r),mt&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(o,35);mt&&(t=requestAnimationFrame(o))}function fe(e){var t=z,o=e.__c;typeof o=="function"&&(e.__c=void 0,o()),z=t}function Te(e){var t=z;e.__c=e.__(),z=t}function yt(e,t){return!e||e.length!==t.length||t.some(function(o,r){return o!==e[r]})}function _t(e,t){return typeof t=="function"?t(e):t}const d={fabBg:"#3b82f6",fabBgHover:"#2563eb",panelBg:"#0f172a",panelBorder:"#1e293b",panelHeaderBg:"#1e293b",toolBtnBg:"#1e293b",toolBtnBgHover:"#334155",toolBtnBgActive:"#3b82f6",text:"#e2e8f0",textMuted:"#94a3b8",textBright:"#f8fafc",closeBtnHover:"#ef4444",shadow:"rgba(0, 0, 0, 0.4)"},bt=48,Ee=300,vo=5,wo={position:"fixed",width:`${bt}px`,height:`${bt}px`,borderRadius:"50%",backgroundColor:d.fabBg,color:"#fff",border:"none",cursor:"grab",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999,boxShadow:`0 4px 12px ${d.shadow}`,transition:"background-color 0.15s ease, box-shadow 0.15s ease",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},ko={position:"fixed",width:`${Ee}px`,backgroundColor:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:"8px",zIndex:999998,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",color:d.text,boxShadow:`0 8px 32px ${d.shadow}`,overflow:"hidden"},Co={display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"12px 16px",backgroundColor:d.panelHeaderBg,borderBottom:`1px solid ${d.panelBorder}`,flexShrink:"0"},$o={fontSize:"14px",fontWeight:"600",color:d.textBright,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"220px"},Bo={width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",lineHeight:"1",flexShrink:"0"},To={display:"flex",flexDirection:"column",gap:"4px",padding:"12px",overflowY:"auto",flex:"1"},Eo={display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"8px",border:"none",backgroundColor:d.toolBtnBg,color:d.text,cursor:"pointer",fontSize:"13px",fontWeight:"500",textAlign:"left",transition:"background-color 0.12s ease",width:"100%"},Ro={width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",flexShrink:"0"},Mo={flex:"1",padding:"16px",overflowY:"auto",fontSize:"13px",color:d.textMuted,display:"flex",alignItems:"center",justifyContent:"center"},zo=500;let Lo=1;const K=[],Q=[];function Do(){const e=new WeakSet;return(t,o)=>{if(typeof o=="object"&&o!==null){if(e.has(o))return"[Circular]";e.add(o)}return o}}function Ho(e){if(e===null)return"null";if(e===void 0)return"undefined";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(e instanceof Error)return`${e.name}: ${e.message}`;try{return JSON.stringify(e,Do(),2)}catch{return String(e)}}function Io(e,t){const o={id:Lo++,level:e,args:t.map(Ho),timestamp:Date.now()};K.length>=zo&&K.shift(),K.push(o);for(const r of Q)r()}function U(){return[...K]}function Po(){K.length=0;for(const e of Q)e()}function St(e){return Q.push(e),()=>{const t=Q.indexOf(e);t!==-1&&Q.splice(t,1)}}function Ao(){const e=["log","warn","error","info"];for(const t of e){const o=console[t].bind(console);console[t]=(...r)=>{Io(t,r),o(...r)}}}function Re(e){const t=new Date(e.timestamp).toLocaleTimeString();return`[${e.level.toUpperCase()}] ${e.args.join(" ")} — ${t}`}function Me(e){return`[NETWORK] ${e.method} ${e.url} → ${e.status}  ${e.duration}ms`}function vt(e){const t=e.stack?`
  ${e.stack}`:"";return`[ERROR] ${e.message}${t}`}function wt(e){return`[${e.severity.toUpperCase()}] ${e.message}${e.detail?` — ${e.detail}`:""}`}function Oo(e){return`### Console (${e.length})
${e.map(Re).join(`
`)}`}function No(e){return`### Network (${e.length})
${e.map(Me).join(`
`)}`}function kt(e){return`### Errors (${e.length})
${e.map(vt).join(`

`)}`}function Ct(e){return`### Health Issues (${e.length})
${e.map(wt).join(`
`)}`}function Fo(e,t,o,r){const s=o.slice(0,10),i=e.filter(a=>a.level==="warn").slice(0,10),l=t.filter(a=>a.status>=400).slice(0,10),u=new Date().toLocaleString(),f=[`## Page Context — ${window.location.href}`,`**Captured:** ${u}`];return s.length>0&&f.push(kt(s)),i.length>0&&f.push(`### Console Warnings (${i.length})
${i.map(Re).join(`
`)}`),l.length>0&&f.push(`### Network Issues (${l.length})
${l.map(Me).join(`
`)}`),r.length>0&&f.push(Ct(r)),f.join(`

`)}const $t={log:"#94a3b8",info:"#3b82f6",warn:"#eab308",error:"#ef4444"},jo={log:"rgba(148, 163, 184, 0.15)",info:"rgba(59, 130, 246, 0.15)",warn:"rgba(234, 179, 8, 0.15)",error:"rgba(239, 68, 68, 0.15)"},Bt=["log","info","warn","error"];function Wo(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${o}:${r}:${s}.${i}`}const Uo={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},qo={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Xo={display:"flex",gap:"4px",flexWrap:"wrap"},Yo={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Vo={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},Go={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Jo={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",position:"relative"},Ko={display:"flex",alignItems:"center",gap:"6px"},Qo={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},Zo={fontSize:"10px",color:d.textMuted,flexShrink:"0"},en={color:d.text,whiteSpace:"pre-wrap",lineHeight:"1.4"},tn={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function on(e,t){return{padding:"2px 6px",borderRadius:"3px",border:"none",backgroundColor:e?$t[t]:d.toolBtnBg,color:e?"#fff":d.textMuted,cursor:"pointer",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"}}function nn(){const[e,t]=b(U),[o,r]=b(new Set(Bt)),[s,i]=b(null);A(()=>St(()=>{t(U())}),[]);const l=$(()=>{Po(),t([])},[]),u=$(a=>{r(p=>{const c=new Set(p);return c.has(a)?c.delete(a):c.add(a),c})},[]),f=e.filter(a=>o.has(a.level));return n("div",{style:Uo},n("div",{style:qo},n("div",{style:Xo},Bt.map(a=>n("button",{key:a,style:on(o.has(a),a),onClick:()=>u(a),title:`Toggle ${a} entries`},a))),n("button",{style:Vo,onClick:()=>navigator.clipboard.writeText(Oo(f)).catch(()=>{}),title:"Copy all console entries"},"Copy Console"),n("button",{style:Yo,onClick:l,title:"Clear console entries"},"Clear")),f.length===0?n("div",{style:tn},"No console entries"):n("div",{style:Go},f.map((a,p)=>n("div",{key:a.id,style:{...Jo,backgroundColor:jo[a.level]},onMouseEnter:()=>i(p),onMouseLeave:()=>i(null)},n("div",{style:Ko},n("span",{style:{...Qo,backgroundColor:$t[a.level],color:"#fff"}},a.level),n("span",{style:Zo},Wo(a.timestamp)),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:s===p?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:c=>{c.stopPropagation(),navigator.clipboard.writeText(Re(a)).catch(()=>{})},title:"Copy row"},"⧇")),n("div",{style:en},a.args.join(" "))))))}const rn=200;let ze=1;const Z=[],ee=[];function sn(e){if(!e.response)return 0;if(typeof e.response=="string")return e.response.length;if(e.response instanceof Blob)return e.response.size;if(e.response instanceof ArrayBuffer)return e.response.byteLength;try{return JSON.stringify(e.response).length}catch{return 0}}function Tt(e){if(e==null)return 0;if(typeof e=="string")return e.length;if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(e instanceof FormData){let t=0;return e.forEach(o=>{typeof o=="string"?t+=o.length:o instanceof Blob&&(t+=o.size)}),t}return e instanceof URLSearchParams?e.toString().length:0}function Et(e){const t={};return e.forEach((o,r)=>{t[r]=o}),t}function Le(e){Z.length>=rn&&Z.shift(),Z.push(e);for(const t of ee)t()}function q(){return[...Z]}function ln(){Z.length=0;for(const e of ee)e()}function Rt(e){return ee.push(e),()=>{const t=ee.indexOf(e);t!==-1&&ee.splice(t,1)}}function an(){const e=XMLHttpRequest.prototype,t=e.open,o=e.setRequestHeader,r=e.send,s=new WeakMap;e.open=function(i,l,...u){return s.set(this,{method:i.toUpperCase(),url:typeof l=="string"?l:String(l),requestHeaders:{},requestSize:0,startTime:0,timestamp:0}),t.call(this,i,l,...u)},e.setRequestHeader=function(i,l){const u=s.get(this);return u&&(u.requestHeaders[i]=l),o.call(this,i,l)},e.send=function(i){const l=s.get(this);return l&&(l.requestSize=Tt(i??null),l.startTime=performance.now(),l.timestamp=Date.now(),this.addEventListener("loadend",()=>{const u=performance.now()-l.startTime,f={},a=this.getAllResponseHeaders();for(const c of a.trim().split(`\r
`)){const g=c.indexOf(": ");g!==-1&&(f[c.slice(0,g).toLowerCase()]=c.slice(g+2))}const p={id:ze++,method:l.method,url:l.url,status:this.status,statusText:this.statusText||(this.status===0?"Network Error":""),duration:Math.round(u),requestSize:l.requestSize,responseSize:sn(this),requestHeaders:l.requestHeaders,responseHeaders:f,startTime:l.startTime,timestamp:l.timestamp};Le(p),s.delete(this)})),r.call(this,i)}}function cn(){const e=window.fetch.bind(window);window.fetch=async(t,o)=>{const r=(o?.method??"GET").toUpperCase(),s=typeof t=="string"?t:t instanceof URL?t.href:t.url,i=Tt(o?.body??null);let l={};if(o?.headers)if(o.headers instanceof Headers)l=Et(o.headers);else if(Array.isArray(o.headers))for(const[a,p]of o.headers)l[a]=p;else l={...o.headers};const u=performance.now(),f=Date.now();try{const a=await e(t,o),p=performance.now()-u,c=a.clone();let g=0;try{g=(await c.blob()).size}catch{g=0}const h={id:ze++,method:r,url:s,status:a.status,statusText:a.statusText,duration:Math.round(p),requestSize:i,responseSize:g,requestHeaders:l,responseHeaders:Et(a.headers),startTime:u,timestamp:f};return Le(h),a}catch(a){const p=performance.now()-u,c={id:ze++,method:r,url:s,status:0,statusText:"Network Error",duration:Math.round(p),requestSize:i,responseSize:0,requestHeaders:l,responseHeaders:{},startTime:u,timestamp:f};throw Le(c),a}},an()}const dn={GET:"#22c55e",POST:"#3b82f6",PUT:"#eab308",DELETE:"#ef4444",PATCH:"#a855f7"},pn="#94a3b8";function un(e){return dn[e]??pn}function fn(e){return e===0?"#ef4444":e<300?"#22c55e":e<400?"#3b82f6":e<500?"#eab308":"#ef4444"}function Mt(e){return e===0?"rgba(239, 68, 68, 0.15)":e<300?"rgba(34, 197, 94, 0.15)":e<400?"rgba(59, 130, 246, 0.15)":e<500?"rgba(234, 179, 8, 0.15)":"rgba(239, 68, 68, 0.15)"}function zt(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${o}:${r}:${s}.${i}`}function Lt(e){return e<1e3?`${e}ms`:`${(e/1e3).toFixed(1)}s`}function Dt(e){return e===0?"0 B":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function gn(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}const hn={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},xn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},mn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},yn={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},_n={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},bn={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Sn={display:"flex",flexDirection:"column",padding:"5px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",cursor:"pointer",transition:"background-color 0.1s ease",position:"relative"},vn={display:"flex",alignItems:"center",gap:"6px",minWidth:"0"},wn={padding:"1px 5px",borderRadius:"3px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},kn={padding:"1px 4px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",flexShrink:"0"},Cn={flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:d.text,fontSize:"10px",minWidth:"0"},$n={fontSize:"10px",color:d.textMuted,flexShrink:"0",textAlign:"right",minWidth:"40px"},Bn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Tn={marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5",wordBreak:"break-all"},De={fontWeight:"600",color:d.textBright,marginBottom:"2px",marginTop:"6px",display:"block"},En={color:d.textMuted},Ht={display:"flex",gap:"4px",color:d.textMuted,padding:"1px 0"},It={color:"#93c5fd",flexShrink:"0"},Rn={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function Mn({entry:e}){const t=Object.entries(e.requestHeaders),o=Object.entries(e.responseHeaders);return n("div",{style:Tn},n("span",{style:{...De,marginTop:"0"}},"General"),n("div",{style:En},n("div",null,`URL: ${e.url}`),n("div",null,`Method: ${e.method}`),n("div",null,`Status: ${e.status} ${e.statusText}`),n("div",null,`Duration: ${Lt(e.duration)}`),n("div",null,`Request size: ${Dt(e.requestSize)}`),n("div",null,`Response size: ${Dt(e.responseSize)}`),n("div",null,`Time: ${zt(e.timestamp)}`)),t.length>0?n("div",null,n("span",{style:De},"Request Headers"),t.map(([r,s])=>n("div",{key:r,style:Ht},n("span",{style:It},`${r}:`),n("span",null,s)))):null,o.length>0?n("div",null,n("span",{style:De},"Response Headers"),o.map(([r,s])=>n("div",{key:r,style:Ht},n("span",{style:It},`${r}:`),n("span",null,s)))):null)}function zn(){const[e,t]=b(q),[o,r]=b(null),[s,i]=b(null);A(()=>Rt(()=>{t(q())}),[]);const l=$(()=>{ln(),t([]),r(null)},[]),u=$(f=>{r(a=>a===f?null:f)},[]);return n("div",{style:hn},n("div",{style:xn},n("span",{style:mn},`${e.length} request${e.length!==1?"s":""}`),n("button",{style:_n,onClick:()=>navigator.clipboard.writeText(No(e)).catch(()=>{}),title:"Copy all network entries"},"Copy Network"),n("button",{style:yn,onClick:l,title:"Clear network entries"},"Clear")),e.length===0?n("div",{style:Rn},"No network requests"):n("div",{style:bn},e.map((f,a)=>{const p=o===f.id;return n("div",{key:f.id,style:{...Sn,backgroundColor:p?"rgba(59, 130, 246, 0.12)":Mt(f.status)},onClick:()=>u(f.id),onMouseEnter:()=>i(a),onMouseLeave:()=>i(null)},n("div",{style:vn},n("span",{style:{...wn,backgroundColor:un(f.method)}},f.method),n("span",{style:{...kn,color:fn(f.status),backgroundColor:Mt(f.status)}},f.status===0?"ERR":String(f.status)),n("span",{style:Cn,title:f.url},gn(f.url,40)),n("span",{style:$n},Lt(f.duration)),n("span",{style:Bn},zt(f.timestamp)),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:s===a?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:c=>{c.stopPropagation(),navigator.clipboard.writeText(Me(f)).catch(()=>{})},title:"Copy row"},"⧇")),p?n(Mn,{entry:f}):null)})))}const Ln=100;let Pt=1;const te=[],oe=[];let He=null;function At(e){He=e}function Ot(e){te.length>=Ln&&te.shift(),te.push(e);for(const t of oe)t();He&&He(e)}function X(){return[...te]}function Dn(){te.length=0;for(const e of oe)e()}function Nt(e){return oe.push(e),()=>{const t=oe.indexOf(e);t!==-1&&oe.splice(t,1)}}function Hn(){const e=window.onerror;window.onerror=(t,o,r,s,i)=>{const l={id:Pt++,message:typeof t=="string"?t:"Unknown error",stack:i?.stack??"",source:o??"",line:r??0,col:s??0,timestamp:Date.now(),type:"error"};return Ot(l),typeof e=="function"?e(t,o,r,s,i):!1},window.addEventListener("unhandledrejection",t=>{const o=t.reason,r=o instanceof Error,s=r?o.message:typeof o=="string"?o:"Unhandled promise rejection",i=r?o.stack??"":"",l={id:Pt++,message:s,stack:i,source:"",line:0,col:0,timestamp:Date.now(),type:"unhandledrejection"};Ot(l)})}const In="#ef4444",Pn="rgba(239, 68, 68, 0.15)",An="#f97316",On="rgba(249, 115, 22, 0.15)",Nn={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Fn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},jn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Wn={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Un={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},qn={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Xn={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",cursor:"pointer",position:"relative"},Yn={display:"flex",alignItems:"center",gap:"6px"},Vn={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},Gn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Ft={padding:"1px 0",wordBreak:"break-all"},Jn={...Ft,opacity:"0.5"},Kn={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500",backgroundColor:"#dc2626",color:"#fff"},Qn={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function Zn(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${o}:${r}:${s}.${i}`}function er(e){return e==="error"?In:An}function tr(e){return e==="error"?Pn:On}function or(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function nr(e){return e.includes("node_modules")}function rr({onReportBug:e}){const[t,o]=b(X),[r,s]=b(null),[i,l]=b(null);A(()=>Nt(()=>{o(X())}),[]);const u=$(()=>{Dn(),o([]),s(null)},[]),f=$(a=>{s(p=>p===a?null:a)},[]);return n("div",{style:Nn},n("div",{style:Fn},n("span",{style:jn},`${t.length} error${t.length!==1?"s":""}`),n("button",{style:Un,onClick:()=>navigator.clipboard.writeText(kt(t)).catch(()=>{}),title:"Copy all error entries"},"Copy Errors"),n("button",{style:Wn,onClick:u,title:"Clear error entries"},"Clear")),t.length===0?n("div",{style:Qn},"No errors captured"):n("div",{style:qn},t.map((a,p)=>{const c=r===a.id,g=or(a.stack);return n("div",{key:a.id,style:{...Xn,backgroundColor:c?"rgba(239, 68, 68, 0.12)":tr(a.type)},onClick:()=>f(a.id),onMouseEnter:()=>l(p),onMouseLeave:()=>l(null)},n("div",{style:Yn},n("span",{style:{...Vn,backgroundColor:er(a.type)}},a.type==="error"?"ERR":"REJ"),n("span",{style:{flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:d.text,fontSize:"10px"}},a.message),n("span",{style:Gn},Zn(a.timestamp)),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:i===p?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:h=>{h.stopPropagation(),navigator.clipboard.writeText(vt(a)).catch(()=>{})},title:"Copy row"},"⧇")),c?n("div",{style:{marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5"}},a.source?n("div",{style:{color:"#93c5fd",marginBottom:"4px"}},`${a.source}:${a.line}:${a.col}`):null,g.length>0?g.map((h,x)=>n("div",{key:x,style:nr(h)?Jn:Ft},h)):n("span",{style:{color:d.textMuted}},"No stack trace available"),e?n("button",{style:{...Kn,marginTop:"8px",width:"100%"},onClick:h=>{h.stopPropagation(),e(a)}},"Report Bug"):null):null)})))}const ir=["low","medium","high","critical"],sr={low:"#22c55e",medium:"#eab308",high:"#f97316",critical:"#ef4444"},jt={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},ge={fontSize:"11px",fontWeight:"600",color:d.textBright,marginBottom:"3px",display:"block"},Wt={width:"100%",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:d.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},lr={...Wt,minHeight:"60px",resize:"vertical",lineHeight:"1.4"},ar={display:"flex",gap:"4px"},cr={padding:"4px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flex:"1",textAlign:"center"},Ie={padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",width:"100%",marginTop:"4px"},dr={...Ie,opacity:"0.5",cursor:"not-allowed"},Ut={padding:"8px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textAlign:"center"},pr={...Ut,backgroundColor:"rgba(34, 197, 94, 0.15)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},ur={...Ut,backgroundColor:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"},fr={fontSize:"10px",fontFamily:"monospace",color:d.textMuted,backgroundColor:"rgba(0, 0, 0, 0.3)",padding:"6px 8px",borderRadius:"4px",maxHeight:"60px",overflowY:"auto",lineHeight:"1.4",whiteSpace:"pre-wrap",wordBreak:"break-all"},qt={padding:"4px 8px",borderRadius:"4px",border:"none",backgroundColor:"rgba(255, 255, 255, 0.1)",color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",alignSelf:"flex-end"};function Xt({apiClient:e,projectId:t,prefillTitle:o,prefillStack:r,onClose:s}){const[i,l]=b(o??""),[u,f]=b(""),[a,p]=b("medium"),[c,g]=b("idle"),[h,x]=b(""),_=i.trim().length>0&&c!=="submitting",S=$(async()=>{if(_){g("submitting"),x("");try{const m={projectId:t,title:i.trim(),description:u.trim(),severity:a,url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()};r&&(m.stackTrace=r),await e.createBug(m),g("success"),l(""),f(""),p("medium")}catch(m){g("error");const v=m instanceof Error?m.message:"Failed to submit bug report";x(v)}}},[_,i,u,a,t,r,e]);return c==="success"?n("div",{style:jt},n("div",{style:pr},"Bug report submitted."),n("button",{style:{...Ie,marginTop:"8px"},onClick:()=>g("idle")},"Report Another"),s?n("button",{style:{...qt,marginTop:"4px",alignSelf:"center"},onClick:s},"Close"):null):n("div",{style:jt},s?n("button",{style:qt,onClick:s},"Back"):null,n("div",null,n("label",{style:ge},"Title"),n("input",{style:Wt,type:"text",value:i,placeholder:"Describe the bug briefly",onInput:m=>{l(m.target.value)}})),n("div",null,n("label",{style:ge},"Description"),n("textarea",{style:lr,value:u,placeholder:"Steps to reproduce, expected vs actual behavior",onInput:m=>{f(m.target.value)}})),r?n("div",null,n("label",{style:ge},"Stack Trace"),n("div",{style:fr},r)):null,n("div",null,n("label",{style:ge},"Severity"),n("div",{style:ar},ir.map(m=>n("button",{key:m,style:{...cr,backgroundColor:a===m?sr[m]:d.toolBtnBg,color:a===m?"#fff":d.textMuted},onClick:()=>p(m)},m)))),c==="error"?n("div",{style:ur},h||"Submission failed"):null,n("button",{style:_?Ie:dr,onClick:S,disabled:!_},c==="submitting"?"Submitting...":"Submit Bug Report"))}const gr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},hr={display:"flex",gap:"6px",flexShrink:"0"},xr={flex:"1",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:d.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},Yt={padding:"6px 10px",borderRadius:"4px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",flexShrink:"0"},mr={...Yt,opacity:"0.5",cursor:"not-allowed"},Vt={flex:"1",overflowY:"auto",fontSize:"12px",lineHeight:"1.5",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"8px",borderRadius:"4px",minHeight:"80px"},yr={...Vt,color:d.textMuted,display:"flex",alignItems:"center",justifyContent:"center",fontStyle:"italic"},_r={padding:"8px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px"};function br(){const e=X().slice(0,5).map(s=>`- ${s.message}`).join(`
`),t=q().filter(s=>s.status>=400).slice(0,5).map(s=>`- ${s.method} ${s.url} → ${s.status}`).join(`
`),o=U().filter(s=>s.level==="error"||s.level==="warn").slice(0,5).map(s=>`[${s.level}] ${s.args.join(" ")}`).join(`
`);return[`Page: ${window.location.href}`,e&&`Recent errors:
${e}`,t&&`Network issues:
${t}`,o&&`Console issues:
${o}`].filter(Boolean).join(`

`)}function Sr({apiBase:e,pinHash:t}){const[o,r]=b(""),[s,i]=b(""),[l,u]=b("idle"),[f,a]=b(""),p=N(null),c=N(0),g=o.trim().length>0&&l!=="loading"&&l!=="streaming",h=$(async()=>{if(o.trim().length===0||l==="loading"||l==="streaming")return;const _=o.trim(),S=c.current===0?br():"",v=(S?`Context:
${S}

---

${_}`:_).slice(0,2e3);i(""),u("loading"),a(""),p.current&&p.current.abort();const C=new AbortController;p.current=C;try{const k=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:v,context:window.location.href}),signal:C.signal});if(!k.ok)throw new Error(`Request failed (${k.status})`);const L=k.body?.getReader();if(!L)throw new Error("No response stream");u("streaming");const P=new TextDecoder;for(;;){const{done:O,value:I}=await L.read();if(O)break;const E=P.decode(I,{stream:!0});E&&i(R=>R+E)}c.current+=1,u("idle")}catch(k){if(k.name==="AbortError")return;u("error");const L=k instanceof Error?k.message:"Analysis failed";a(L)}},[o,l,e,t]),x=$(_=>{_.key==="Enter"&&!_.shiftKey&&g&&(_.preventDefault(),h())},[g,h]);return n("div",{style:gr},n("div",{style:hr},n("input",{style:xr,type:"text",value:o,placeholder:"Ask about code, errors, concepts...",onInput:_=>{r(_.target.value)},onKeyDown:x}),n("button",{style:g?Yt:mr,onClick:h,disabled:!g},l==="loading"||l==="streaming"?"...":"Send")),l==="error"?n("div",{style:_r},f):null,s?n("div",{style:Vt},s):n("div",{style:yr},l==="loading"?"Thinking...":"Response will appear here"))}const vr=100,wr={LCP:[2500,4e3],CLS:[.1,.25],INP:[200,500],FCP:[1800,3e3],TTFB:[800,1800]};let kr=1;const ne=[],he=[];function Cr(e,t){const o=wr[e];return t<=o[0]?"good":t<=o[1]?"needs-improvement":"poor"}function re(e,t){const o={id:kr++,timestamp:Date.now(),metric:e,value:Math.round(e==="CLS"?t*1e3:t)/(e==="CLS"?1e3:1),rating:Cr(e,t)};ne.length>=vr&&ne.shift(),ne.push(o);for(const r of he)r(o)}function Gt(){return[...ne]}function $r(){ne.length=0}function Jt(e){return he.push(e),()=>{const t=he.indexOf(e);t!==-1&&he.splice(t,1)}}function Br(){if(!(typeof PerformanceObserver>"u")){try{new PerformanceObserver(t=>{const o=t.getEntries(),r=o[o.length-1];r&&re("LCP",r.startTime)}).observe({type:"largest-contentful-paint",buffered:!0})}catch{}try{let e=0;new PerformanceObserver(o=>{for(const r of o.getEntries()){const s=r;!s.hadRecentInput&&typeof s.value=="number"&&(e+=s.value,re("CLS",e))}}).observe({type:"layout-shift",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const o of t.getEntries())o.duration>0&&re("INP",o.duration)}).observe({type:"event",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const o of t.getEntries())o.name==="first-contentful-paint"&&re("FCP",o.startTime)}).observe({type:"paint",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const o of t.getEntries()){const r=o;r.responseStart>0&&re("TTFB",r.responseStart-r.requestStart)}}).observe({type:"navigation",buffered:!0})}catch{}}}const Pe={good:"#22c55e","needs-improvement":"#eab308",poor:"#ef4444"},Tr={good:"rgba(34, 197, 94, 0.15)","needs-improvement":"rgba(234, 179, 8, 0.15)",poor:"rgba(239, 68, 68, 0.15)"},Er={LCP:"Largest Contentful Paint",CLS:"Cumulative Layout Shift",INP:"Interaction to Next Paint",FCP:"First Contentful Paint",TTFB:"Time to First Byte"},Kt={LCP:"ms",CLS:"",INP:"ms",FCP:"ms",TTFB:"ms"},Rr=["LCP","FCP","CLS","INP","TTFB"];function Mr(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${o}:${r}:${s}`}function zr(e){const t={};for(const o of e){const r=t[o.metric];(!r||o.id>r.id)&&(t[o.metric]=o)}return t}const Lr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Dr={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",flexShrink:"0"},Hr={fontSize:"11px",fontWeight:"600",color:d.textBright,textTransform:"uppercase",letterSpacing:"0.5px"},Ir={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Pr={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px",padding:"4px 8px 8px",flexShrink:"0"},Ar={display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",padding:"8px 6px",borderRadius:"6px",backgroundColor:d.toolBtnBg},Or={fontSize:"16px",fontWeight:"700",fontFamily:"monospace"},Nr={fontSize:"9px",fontWeight:"500",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},Fr={height:"1px",backgroundColor:d.panelBorder,margin:"0 8px",flexShrink:"0"},jr={fontSize:"10px",fontWeight:"600",color:d.textMuted,padding:"6px 8px 2px",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},Wr={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Ur={display:"flex",alignItems:"center",gap:"6px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace"},qr={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flexShrink:"0",color:"#fff"},Xr={fontWeight:"600",color:d.text,flexShrink:"0",minWidth:"32px"},Yr={color:d.textBright,flex:"1"},Vr={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Gr={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function Jr(e){return e==="good"?"Good":e==="needs-improvement"?"OK":"Poor"}function Kr(){const[e,t]=b(Gt);A(()=>Jt(()=>{t(Gt())}),[]);const o=$(()=>{$r(),t([])},[]),r=zr(e),s=Rr.map(i=>{const l=r[i];if(!l)return null;const u=Kt[i],f=i==="CLS"?l.value.toFixed(3):`${Math.round(l.value)}`;return{metric:i,entry:l,displayValue:f,unit:u}}).filter(Boolean);return n("div",{style:Lr},n("div",{style:Dr},n("span",{style:Hr},"Web Vitals"),n("button",{style:Ir,onClick:o,title:"Clear performance entries"},"Clear")),s.length>0?n("div",{style:Pr},s.map(i=>n("div",{key:i.metric,style:{...Ar,borderLeft:`3px solid ${Pe[i.entry.rating]}`},title:Er[i.metric]},n("span",{style:{...Or,color:Pe[i.entry.rating]}},`${i.displayValue}${i.unit}`),n("span",{style:Nr},i.metric)))):null,e.length>0?n("div",{style:Fr}):null,e.length>0?n("div",{style:jr},"Event Log"):null,e.length===0?n("div",{style:Gr},"Waiting for Web Vitals data..."):n("div",{style:Wr},[...e].reverse().map(i=>{const l=Kt[i.metric],u=i.metric==="CLS"?i.value.toFixed(3):`${Math.round(i.value)}`;return n("div",{key:i.id,style:{...Ur,backgroundColor:Tr[i.rating]}},n("span",{style:{...qr,backgroundColor:Pe[i.rating]}},Jr(i.rating)),n("span",{style:Xr},i.metric),n("span",{style:Yr},`${u}${l}`),n("span",{style:Vr},Mr(i.timestamp)))})))}const Ae="devtools-debug-snapshots",Qr=5;function Zr(){try{const e=localStorage.getItem(Ae);return e?JSON.parse(e):[]}catch{return[]}}function Qt(e){try{localStorage.setItem(Ae,JSON.stringify(e))}catch{}}let ei=1;function ie(e){return String(e).padStart(2,"0")}function Zt(e){const t=new Date(e);return`${ie(t.getHours())}:${ie(t.getMinutes())}:${ie(t.getSeconds())}`}function ti(){const e=[];try{const t=Object.keys(localStorage).filter(o=>o!==Ae);if(t.length){const o=t.slice(0,30).map(r=>{const s=localStorage.getItem(r)??"";return`  ${r}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`localStorage (${t.length} keys):
${o.join(`
`)}`)}}catch{}try{const t=Object.keys(sessionStorage);if(t.length){const o=t.slice(0,30).map(r=>{const s=sessionStorage.getItem(r)??"";return`  ${r}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`sessionStorage (${t.length} keys):
${o.join(`
`)}`)}}catch{}return e.length?e.join(`

`):"(empty)"}function oi(){try{const t=performance.getEntriesByType("navigation")[0];return t?[`DNS: ${Math.round(t.domainLookupEnd-t.domainLookupStart)}ms`,`Connect: ${Math.round(t.connectEnd-t.connectStart)}ms`,`TTFB: ${Math.round(t.responseStart-t.requestStart)}ms`,`DOM Ready: ${Math.round(t.domContentLoadedEventEnd)}ms`,`Page Load: ${Math.round(t.loadEventEnd)}ms`].join(" | "):"(not available)"}catch{return"(not available)"}}function ni(){try{const e=document.cookie.split(";").map(t=>t.trim().split("=")[0]).filter(Boolean);return e.length?e.join(", "):"(none)"}catch{return"(unavailable)"}}function ri(e,t,o){const s=new Date().toISOString().replace("T"," ").slice(0,19),i=U(),l=q(),u=X(),f=t?i.filter(h=>h.level==="error"||h.level==="warn"):[...i],a=t?l.filter(h=>h.status===0||h.status>=400):[...l],p=[];p.push(`# Debug Snapshot — ${s}`),p.push(""),p.push(`**URL:** ${window.location.href}`),document.title&&p.push(`**Page:** ${document.title}`),p.push(`**Viewport:** ${window.innerWidth} x ${window.innerHeight}`),p.push(`**User-Agent:** ${navigator.userAgent}`),p.push(`**Cookies:** ${ni()}`),p.push(""),o.trim()&&(p.push("## Notes"),p.push(o.trim()),p.push("")),e.length&&(p.push(`## Screenshots (${e.length} downloaded to ~/Downloads)`),p.push(e.map(h=>h.name).join(", ")),p.push(""));const c=t?`${f.length} warnings/errors of ${i.length} total`:`${f.length} entries`;if(p.push(`## Console — ${c}`),!f.length)p.push("(none)");else for(const h of f.slice(-60))p.push(`[${Zt(h.timestamp)}] ${h.level.toUpperCase().padEnd(5)} ${h.args.join(" ")}`);p.push("");const g=t?`${a.length} errors of ${l.length} total`:`${a.length} requests`;if(p.push(`## Network — ${g}`),!a.length)p.push("(none)");else for(const h of a.slice(-40)){const x=h.status===0?"ERR":String(h.status);p.push(`${h.method.padEnd(6)} ${h.url} — ${x} (${h.duration}ms)`)}if(p.push(""),p.push(`## JavaScript Errors — ${u.length}`),!u.length)p.push("(none)");else for(const h of u){const x=h.type==="unhandledrejection"?"UnhandledRejection":"Error";if(p.push(`[${Zt(h.timestamp)}] ${x}: ${h.message}`),h.source&&p.push(`  at ${h.source}:${h.line}:${h.col}`),h.stack){const _=h.stack.split(`
`).slice(1,7).map(S=>S.trim()).filter(Boolean);for(const S of _)p.push(`  ${S}`)}}return p.push(""),p.push("## Storage"),p.push(ti()),p.push(""),p.push("## Page Timing"),p.push(oi()),p.join(`
`)}function ii(e){for(const t of e){const o=document.createElement("a");o.href=t.url,o.download=t.name,document.body.appendChild(o),o.click(),document.body.removeChild(o)}}async function si(e){return new Promise(t=>{const o=URL.createObjectURL(e),r=new Image;r.onload=()=>{const s=document.createElement("canvas");s.width=r.naturalWidth,s.height=r.naturalHeight,s.getContext("2d").drawImage(r,0,0),s.toBlob(i=>t(i??e),"image/webp",.82),URL.revokeObjectURL(o)},r.onerror=()=>{URL.revokeObjectURL(o),t(e)},r.src=o})}async function li(){let e=null;try{e=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser"},preferCurrentTab:!0});const t=document.createElement("video");t.srcObject=e,t.muted=!0,await new Promise(u=>{t.onloadedmetadata=()=>{t.play().then(u).catch(u)}}),await new Promise(u=>setTimeout(u,120));const r=Math.min(1,1440/t.videoWidth),s=document.createElement("canvas");s.width=Math.round(t.videoWidth*r),s.height=Math.round(t.videoHeight*r);const i=s.getContext("2d");let l=null;return i&&(i.drawImage(t,0,0,s.width,s.height),l=await new Promise(u=>s.toBlob(u,"image/webp",.82))),t.srcObject=null,l}finally{e?.getTracks().forEach(t=>t.stop())}}const ai={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",boxSizing:"border-box"},ci={display:"flex",flexShrink:"0",borderBottom:`1px solid ${d.panelBorder}`};function eo(e){return{flex:"1",padding:"7px 4px",border:"none",borderBottom:e?`2px solid ${d.fabBg}`:"2px solid transparent",backgroundColor:"transparent",color:e?d.textBright:d.textMuted,fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"color 0.1s",boxSizing:"border-box"}}const to={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"8px",display:"flex",flexDirection:"column",gap:"8px",boxSizing:"border-box"},Oe={fontSize:"10px",fontWeight:"600",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.4px",marginBottom:"4px",display:"block"},di={display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"4px"};function Ne(e,t){return{padding:"6px",borderRadius:"4px",backgroundColor:e>0?`${t}22`:d.toolBtnBg,border:`1px solid ${e>0?t:d.panelBorder}`,textAlign:"center"}}const Fe={fontSize:"16px",fontWeight:"700",color:d.textBright,display:"block"},je={fontSize:"9px",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},pi={border:`1px dashed ${d.panelBorder}`,borderRadius:"6px",padding:"10px",minHeight:"64px",display:"flex",flexDirection:"column",gap:"6px"},ui={display:"flex",flexWrap:"wrap",gap:"4px"},fi={position:"relative",width:"56px",height:"40px",borderRadius:"3px",overflow:"hidden",flexShrink:"0",border:`1px solid ${d.panelBorder}`,cursor:"default"},gi={width:"100%",height:"100%",objectFit:"cover"},hi={position:"absolute",top:"1px",right:"1px",width:"14px",height:"14px",borderRadius:"2px",border:"none",backgroundColor:"rgba(0,0,0,0.7)",color:"#fff",fontSize:"9px",lineHeight:"1",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},xi={fontSize:"11px",color:d.textMuted,textAlign:"center"},oo={display:"flex",gap:"4px"};function xe(e="muted"){const t=e==="primary"?d.fabBg:e==="danger"?"#7f1d1d":d.toolBtnBg,o=e==="primary"?"#fff":e==="danger"?"#fca5a5":d.textMuted;return{flex:"1",padding:"5px 8px",borderRadius:"4px",border:"none",backgroundColor:t,color:o,fontSize:"11px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap"}}const mi=e=>({width:"100%",padding:"9px 12px",borderRadius:"6px",border:"none",backgroundColor:e?"#1e293b":d.fabBg,color:e?d.textMuted:"#fff",fontSize:"12px",fontWeight:"600",cursor:e?"not-allowed":"pointer"}),yi=e=>({padding:"3px 8px",borderRadius:"4px",border:`1px solid ${e?d.fabBg:d.panelBorder}`,backgroundColor:e?`${d.fabBg}33`:"transparent",color:e?"#93c5fd":d.textMuted,fontSize:"10px",cursor:"pointer",fontWeight:"500"}),_i={borderRadius:"6px",border:`1px solid ${d.panelBorder}`,backgroundColor:d.toolBtnBg,padding:"8px",display:"flex",flexDirection:"column",gap:"4px"},bi={fontSize:"10px",color:d.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Si={fontSize:"10px",color:d.textMuted},vi={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px",padding:"20px",textAlign:"center"};function wi(){const[e,t]=b("capture"),[o,r]=b([]),s=N(o),[i,l]=b(Zr),[u,f]=b(!1),[a,p]=b(null),[c,g]=b(!0),[h,x]=b("");A(()=>{s.current=o},[o]),A(()=>()=>{for(const y of s.current)URL.revokeObjectURL(y.url)},[]),A(()=>{if(e!=="capture")return;function y(B){const M=B.clipboardData?.items;if(M){for(const D of Array.from(M))if(D.type.startsWith("image/")){const j=D.getAsFile();j&&si(j).then(qe=>_(qe))}}}return window.addEventListener("paste",y),()=>window.removeEventListener("paste",y)},[e]);function _(y){const B=ei++,M=URL.createObjectURL(y),D=y.type==="image/webp"?"webp":y.type==="image/jpeg"?"jpg":"png";r(j=>[...j,{id:B,url:M,blob:y,name:`screenshot-${B}.${D}`}])}const S=$(async()=>{f(!0);try{const y=await li();y&&_(y)}catch{}f(!1)},[]),m=$(y=>{r(B=>{const M=B.find(D=>D.id===y);return M&&URL.revokeObjectURL(M.url),B.filter(D=>D.id!==y)})},[]),v=$(()=>{r(y=>{for(const B of y)URL.revokeObjectURL(B.url);return[]})},[]),C=$(y=>{p(y),setTimeout(()=>p(null),2e3)},[]),k=$(async()=>{const y=ri(o,c,h);o.length>0&&ii(o);const B={id:String(Date.now()),timestamp:Date.now(),pageUrl:window.location.href,report:y};l(M=>{const D=[B,...M].slice(0,Qr);return Qt(D),D}),await navigator.clipboard.writeText(y),C(B.id)},[o,c,h,C]),L=$(async y=>{await navigator.clipboard.writeText(y.report),C(y.id)},[C]),P=$(y=>{l(B=>{const M=B.filter(D=>D.id!==y);return Qt(M),M})},[]),O=U(),I=q(),E=X(),R=O.filter(y=>y.level==="error"||y.level==="warn").length,w=I.filter(y=>y.status===0||y.status>=400).length;return n("div",{style:ai},n("div",{style:ci},n("button",{style:eo(e==="capture"),onClick:()=>t("capture")},"Capture"),n("button",{style:eo(e==="history"),onClick:()=>t("history")},`History (${i.length})`)),e==="capture"?n("div",{style:to},n("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},n("span",{style:Oe},"Report data"),n("button",{style:yi(c),onClick:()=>g(y=>!y)},c?"Errors only":"All entries")),n("div",{style:di},n("div",{style:Ne(R,"#eab308")},n("span",{style:Fe},String(R)),n("span",{style:je},"Console")),n("div",{style:Ne(w,"#ef4444")},n("span",{style:Fe},String(w)),n("span",{style:je},"Net Errors")),n("div",{style:Ne(E.length,"#ef4444")},n("span",{style:Fe},String(E.length)),n("span",{style:je},"JS Errors"))),n("div",null,n("span",{style:Oe},`Screenshots (${o.length})`),n("div",{style:pi},o.length===0?n("div",{style:xi},"Cmd+V to paste a screenshot",n("br",null),"or click Capture below"):n("div",{style:ui},o.map(y=>n("div",{key:y.id,style:fi,title:y.name},n("img",{src:y.url,style:gi,alt:y.name}),n("button",{style:hi,onClick:()=>m(y.id),title:"Remove"},"×")))),n("div",{style:oo},n("button",{style:xe("muted"),onClick:S,disabled:u,title:"Capture current screen (opens share dialog)"},u?"Capturing...":"Capture Screen"),o.length>0?n("button",{style:xe("danger"),onClick:v,title:"Delete all screenshots"},"Delete All"):null))),n("div",null,n("span",{style:Oe},"Notes (optional)"),n("textarea",{value:h,onInput:y=>x(y.target.value),placeholder:"Add your own comments or context…",rows:3,style:{width:"100%",background:d.toolBtnBg,border:`1px solid ${d.panelBorder}`,borderRadius:"4px",color:d.text,fontSize:"11px",padding:"5px 6px",resize:"vertical",fontFamily:"system-ui, -apple-system, sans-serif",boxSizing:"border-box"}})),n("button",{style:mi(!1),onClick:k,title:"Copy debug report to clipboard. Screenshots (if any) download as files."},a?"Copied!":"Copy Report & Download Screenshots"),n("p",{style:{fontSize:10,color:d.textMuted,textAlign:"center",padding:"4px 8px"}},"Screenshots save to ~/Downloads · ",n("a",{style:{color:"#475569",textDecoration:"underline",cursor:"pointer"},href:"/settings/widget",target:"_blank"},"Set label in Settings"))):n("div",{style:{...to,gap:"6px"}},i.length===0?n("div",{style:vi},"No snapshots yet. Copy a report from the Capture tab to save it here."):i.map(y=>{const B=new Date(y.timestamp),M=`${B.toLocaleDateString()} ${ie(B.getHours())}:${ie(B.getMinutes())}`,D=a===y.id;return n("div",{key:y.id,style:_i},n("div",{style:Si},M),n("div",{style:bi,title:y.pageUrl},y.pageUrl),n("div",{style:oo},n("button",{style:xe(D?"primary":"muted"),onClick:()=>L(y)},D?"Copied!":"Copy Report"),n("button",{style:xe("danger"),onClick:()=>P(y.id)},"Delete")))})))}let no={localStorage:{},sessionStorage:{},cookies:""};function ki(){const e={};try{for(let o=0;o<window.localStorage.length;o++){const r=window.localStorage.key(o);e[r]=window.localStorage.getItem(r)??""}}catch{}const t={};try{for(let o=0;o<window.sessionStorage.length;o++){const r=window.sessionStorage.key(o);t[r]=window.sessionStorage.getItem(r)??""}}catch{}return no={localStorage:e,sessionStorage:t,cookies:document.cookie},no}function Ci(){const[e,t]=b({localStorage:{},sessionStorage:{},cookies:""}),[o,r]=b("ls");A(()=>{t(ki())},[]);const s=(u,f)=>n("button",{style:{padding:"4px 10px",fontSize:11,cursor:"pointer",border:"none",fontFamily:"inherit",background:o===u?d.toolBtnBgActive:"transparent",color:o===u?"#fff":d.textMuted,borderRadius:4},onClick:()=>r(u)},f),i=o==="ls"?e.localStorage:o==="ss"?e.sessionStorage:null,l=i?Object.entries(i):[];return n("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},n("div",{style:{display:"flex",gap:4,padding:"6px 8px",borderBottom:`1px solid ${d.panelBorder}`}},s("ls","localStorage"),s("ss","sessionStorage"),s("cookies","Cookies")),n("div",{style:{flex:1,overflowY:"auto"}},o==="cookies"?n("pre",{style:{padding:12,fontSize:10,color:d.text,fontFamily:"monospace",whiteSpace:"pre-wrap"}},e.cookies||"(empty)"):l.length===0?n("p",{style:{padding:12,fontSize:11,color:d.textMuted}},"(empty)"):l.map(([u,f])=>n("div",{key:u,style:{display:"flex",gap:8,padding:"4px 12px",borderBottom:`1px solid ${d.panelBorder}`,fontSize:11}},n("span",{style:{color:d.textMuted,flexShrink:0,width:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},u),n("span",{style:{color:d.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontFamily:"monospace"}},f)))))}const ro=[],me=[];let io=!1;function ye(e){ro.push(e),me.forEach(t=>t())}function We(){return[...ro]}function $i(e){return me.push(e),()=>{const t=me.indexOf(e);t!==-1&&me.splice(t,1)}}function Bi(){if(io)return;io=!0,document.querySelectorAll("img").forEach(o=>{o.complete&&o.naturalWidth===0&&o.src&&ye({severity:"error",category:"image",message:"Broken image",detail:o.src})});const e=document.querySelectorAll("img:not([alt])");e.length>0&&ye({severity:"warn",category:"alt-text",message:`${e.length} image(s) missing alt text`});const t=o=>{ye({severity:"error",category:"mixed-content",message:"Mixed content blocked",detail:o.blockedURI})};document.addEventListener("securitypolicyviolation",t);try{new PerformanceObserver(r=>{for(const s of r.getEntries()){const i=s;i.duration>2e3&&ye({severity:"warn",category:"slow-resource",message:`Slow resource: ${Math.round(i.duration)}ms`,detail:i.name})}}).observe({type:"resource",buffered:!0})}catch{}}function Ti(){const[e,t]=b([]),[o,r]=b(null);return A(()=>(t(We()),$i(()=>t(We()))),[]),n("div",{style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden"}},n("div",{style:{display:"flex",alignItems:"center",padding:"4px 12px",borderBottom:`1px solid ${d.panelBorder}`,flexShrink:0}},n("span",{style:{fontSize:10,color:d.textMuted}},`${e.length} issue${e.length!==1?"s":""}`),n("button",{style:{marginLeft:"auto",background:"none",border:`1px solid ${d.panelBorder}`,borderRadius:4,color:d.textMuted,cursor:"pointer",fontSize:10,padding:"2px 8px",fontFamily:"inherit"},onClick:()=>navigator.clipboard.writeText(Ct(e)).catch(()=>{}),title:"Copy all health issues"},"Copy Health")),n("div",{style:{flex:1,overflowY:"auto"}},e.length===0?n("p",{style:{padding:16,fontSize:12,color:d.textMuted}},"No health issues detected."):e.map((s,i)=>n("div",{key:`${s.category}:${s.message}:${i}`,style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`,display:"flex",flexDirection:"column",gap:2,position:"relative"},onMouseEnter:()=>r(i),onMouseLeave:()=>r(null)},n("div",{style:{display:"flex",alignItems:"center",gap:6}},n("span",{style:{fontSize:10,fontWeight:600,color:s.severity==="error"?"#ef4444":"#f59e0b",textTransform:"uppercase"}},s.severity),n("span",{style:{fontSize:11,color:d.text}},s.message),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:o===i?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:l=>{l.stopPropagation(),navigator.clipboard.writeText(wt(s)).catch(()=>{})},title:"Copy row"},"⧇")),s.detail&&n("span",{style:{fontSize:10,color:d.textMuted,fontFamily:"monospace",marginLeft:12}},s.detail)))))}function Ei({apiBase:e,pinHash:t,projectId:o}){const[r,s]=b([]),[i,l]=b(null),[u,f]=b([]),a={"X-DevTools-Pin":t,"Content-Type":"application/json"};A(()=>{const _=new AbortController,S=_.signal;return fetch(`${e}/api/routines?projectId=${o}`,{headers:a,signal:S}).then(m=>{if(!m.ok)throw new Error(m.statusText);return m.json()}).then(s).catch(()=>{}),fetch(`${e}/api/routines/runs?projectId=${o}`,{headers:a,signal:S}).then(m=>{if(!m.ok)throw new Error(m.statusText);return m.json()}).then(async m=>{if(!m)return;l(m);const v=await fetch(`${e}/api/routines/${m.checklistId}/items`,{headers:a,signal:S}).then(C=>{if(!C.ok)throw new Error(C.statusText);return C.json()}).catch(()=>[]);f(v)}).catch(()=>{}),()=>_.abort()},[o,t]);async function p(_){try{const S=await fetch(`${e}/api/routines/${_}/runs`,{method:"POST",headers:a});if(!S.ok)return;const m=await S.json(),[v,C]=await Promise.all([fetch(`${e}/api/routines/runs/${m.id}`,{headers:a}).then(k=>{if(!k.ok)throw new Error(k.statusText);return k.json()}),fetch(`${e}/api/routines/${_}/items`,{headers:a}).then(k=>{if(!k.ok)throw new Error(k.statusText);return k.json()})]);l(v),f(C)}catch{}}async function c(_,S){i&&(await fetch(`${e}/api/routines/runs/${i.id}/items?itemId=${_}`,{method:"PUT",headers:a,body:JSON.stringify({checked:S})}).catch(()=>{}),l(m=>m?{...m,items:m.items?.map(v=>v.itemId===_?{...v,checked:S?1:0}:v)}:null))}const g=i?.items?.length??0,h=i?.items?.filter(_=>_.checked).length??0,x=g>0?Math.round(h/g*100):0;return i?n("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},n("div",{style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`}},n("div",{style:{height:4,background:"#1e293b",borderRadius:2,overflow:"hidden"}},n("div",{style:{height:"100%",background:"#6366f1",borderRadius:2,width:`${x}%`,transition:"width .2s"}})),n("span",{style:{fontSize:10,color:d.textMuted,marginTop:4,display:"block"}},`${h} / ${g} complete`)),n("div",{style:{flex:1,overflowY:"auto",padding:"4px 0"}},(i.items??[]).map(_=>{const S=u.find(m=>m.id===_.itemId);return n("div",{key:_.id,style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`}},n("div",{style:{display:"flex",alignItems:"center",gap:8}},n("input",{type:"checkbox",checked:_.checked===1,onChange:m=>c(_.itemId,m.target.checked)}),n("span",{style:{fontSize:11,color:_.checked?d.textMuted:d.text,textDecoration:_.checked?"line-through":"none"}},S?.name??`Item ${_.itemId}`)),S?.snippet&&n("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:4,marginLeft:22}},n("code",{style:{fontSize:10,color:"#94a3b8",background:"#0a0f1a",padding:"2px 6px",borderRadius:3,fontFamily:"monospace",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},S.snippet),n("button",{style:{background:"none",border:"none",color:d.textMuted,cursor:"pointer",fontSize:12},onClick:()=>navigator.clipboard.writeText(S.snippet??"").catch(()=>{})},"⧇")))})),n("button",{style:{margin:8,padding:"6px 0",border:`1px solid ${d.panelBorder}`,borderRadius:6,background:"none",color:d.textMuted,fontSize:11,cursor:"pointer",fontFamily:"inherit"},onClick:async()=>{i&&await fetch(`${e}/api/routines/runs/${i.id}`,{method:"PUT",headers:a,body:JSON.stringify({close:!0})}).catch(()=>{}),l(null)}},"Close Run")):n("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:8}},n("p",{style:{fontSize:11,color:d.textMuted}},"Start a checklist run:"),...r.map(_=>n("button",{key:_.id,style:{padding:"7px 12px",borderRadius:6,background:d.toolBtnBg,border:`1px solid ${d.panelBorder}`,color:d.text,fontSize:11,cursor:"pointer",textAlign:"left",fontFamily:"inherit"},onClick:()=>p(_.id)},"▶ "+_.name)),r.length===0&&n("p",{style:{fontSize:10,color:d.textMuted}},"No checklists. Create one in Dashboard → Routines."))}const so=[{id:"debug",label:"Debug Snapshot",icon:"⊚"},{id:"console",label:"Console Viewer",icon:">"},{id:"network",label:"Network Viewer",icon:"⇅"},{id:"errors",label:"Error Log",icon:"⚠"},{id:"bugs",label:"Bug Reporter",icon:"🐛"},{id:"perf",label:"Performance",icon:"⚡"},{id:"storage",label:"Storage",icon:"🗄"},{id:"health",label:"Health",icon:"❤"},{id:"routines",label:"Routines",icon:"✓"},{id:"ai",label:"AI Assistant",icon:"✨"}];function Ri({projectId:e,isOpen:t,onClose:o,apiClient:r,apiBase:s,pinHash:i}){const[l,u]=b(null),[f,a]=b(!1),[p,c]=b(null),[g,h]=b(""),[x,_]=b(""),[S,m]=b(()=>({x:Math.max(0,window.innerWidth-Ee-4),y:0})),[v,C]=b(!1),k=N(null),L=$(w=>{w.target.closest("button")||(w.currentTarget.setPointerCapture(w.pointerId),k.current={startX:w.clientX,startY:w.clientY,originX:S.x,originY:S.y},C(!0))},[S.x,S.y]),P=$(w=>{if(!k.current)return;const{startX:y,startY:B,originX:M,originY:D}=k.current,j=window.innerWidth-Ee,qe=window.innerHeight-48;m({x:Math.max(0,Math.min(j,M+(w.clientX-y))),y:Math.max(0,Math.min(qe,D+(w.clientY-B)))})},[]),O=$(()=>{k.current=null,C(!1)},[]),I=$(w=>{u(y=>(y==="bugs"&&w!=="bugs"&&(h(""),_("")),y===w?null:w))},[]),E=$(w=>{h(w.message),_(w.stack),u("bugs")},[]),R=l?so.find(w=>w.id===l):null;return n("div",{style:{...ko,left:`${S.x}px`,top:`${S.y}px`,height:"min(85vh, 700px)",opacity:t?"1":"0",transition:"opacity 0.2s ease",pointerEvents:t?"auto":"none"},"aria-hidden":!t},n("div",{style:{...Co,cursor:v?"grabbing":"grab",userSelect:"none"},onPointerDown:L,onPointerMove:P,onPointerUp:O},n("span",{style:$o,title:e},e),n("button",{style:{background:"none",border:`1px solid ${d.panelBorder}`,color:d.textMuted,cursor:"pointer",fontSize:9,padding:"2px 6px",borderRadius:4,fontFamily:"inherit",marginLeft:"auto",marginRight:6},title:"Copy full page context for Claude",onClick:()=>{const w=Fo([...U()],[...q()],[...X()],We());navigator.clipboard.writeText(w).catch(()=>{})}},"⧇ Copy for Claude"),n("button",{style:{...Bo,backgroundColor:f?d.closeBtnHover:"transparent",color:f?"#fff":d.textMuted},onClick:o,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),"aria-label":"Close panel",title:"Close"},"✕")),n("div",{style:To},so.map(w=>{const y=l===w.id,B=p===w.id;let M=d.toolBtnBg;return y?M=d.toolBtnBgActive:B&&(M=d.toolBtnBgHover),n("button",{key:w.id,style:{...Eo,backgroundColor:M,color:y?"#fff":d.text},onClick:()=>I(w.id),onMouseEnter:()=>c(w.id),onMouseLeave:()=>c(null)},n("span",{style:Ro},w.icon),n("span",null,w.label))})),R?n("div",{style:{...Mo,borderTop:`1px solid ${d.panelBorder}`,...l==="debug"||l==="console"||l==="network"||l==="errors"||l==="bugs"||l==="perf"||l==="storage"||l==="health"||l==="routines"||l==="ai"?{alignItems:"stretch",justifyContent:"stretch",padding:"0"}:{}}},l==="debug"?n(wi,null):l==="console"?n(nn,null):l==="network"?n(zn,null):l==="errors"?n(rr,{onReportBug:E}):l==="bugs"?n(Xt,{apiClient:r,projectId:e,prefillTitle:g||void 0,prefillStack:x||void 0}):l==="perf"?n(Kr,null):l==="storage"?n(Ci,null):l==="health"?n(Ti,null):l==="routines"?n(Ei,{apiBase:s,pinHash:i,projectId:e}):l==="ai"?n(Sr,{apiBase:s,pinHash:i}):n("span",null,`${R.label} -- coming soon`)):null)}const lo={isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0,moved:!1},Mi=n("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},n("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}));function zi({projectId:e,pinHash:t,apiBase:o,apiClient:r}){const[s,i]=b(!1),[l,u]=b(!1),[f,a]=b({x:0,y:0}),[p,c]=b(!1),g=N(lo),h=N(null),x=$(C=>{C.currentTarget.setPointerCapture(C.pointerId),g.current={isDragging:!0,startX:C.clientX,startY:C.clientY,offsetX:f.x,offsetY:f.y,moved:!1},c(!0)},[f.x,f.y]),_=$(C=>{const k=g.current;if(!k.isDragging)return;const L=C.clientX-k.startX,P=C.clientY-k.startY;Math.sqrt(L*L+P*P)>vo&&(g.current={...k,moved:!0}),a({x:k.offsetX+L,y:k.offsetY+P})},[]),S=$(()=>{const k=g.current.moved;g.current={...lo},c(!1),k||i(L=>!L)},[]),m=$(()=>{i(!1)},[]),v={...wo,bottom:`${20-f.y}px`,right:`${20-f.x}px`,backgroundColor:l?d.fabBgHover:d.fabBg,boxShadow:l?`0 6px 16px ${d.shadow}`:`0 4px 12px ${d.shadow}`,cursor:p?"grabbing":"grab"};return n("div",null,n("button",{ref:h,style:v,title:`DevTools (${e})`,"aria-label":"Toggle DevTools panel",onPointerDown:x,onPointerMove:_,onPointerUp:S,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)},Mi),n(Ri,{projectId:e,isOpen:s,onClose:m,apiClient:r,apiBase:o,pinHash:t}))}function ao(e,t){async function o(r,s={}){return(await fetch(`${e}${r}`,{...s,headers:{"Content-Type":"application/json","X-DevTools-Pin":t,...s.headers}})).json()}return{createBug:r=>o("/api/bugs",{method:"POST",body:JSON.stringify(r)}),createDevLog:r=>o("/api/devlog",{method:"POST",body:JSON.stringify(r)}),sendEvents:r=>o("/api/widget/event",{method:"POST",body:JSON.stringify({events:r})})}}const Li=console.warn.bind(console),Di=1e4,Hi=50,Ii=200,Pi=new Set(["log","info","warn","error","debug"]);function Ai(e,t,o){let r=[];function s(p){r.length>=Ii||(r.push(p),r.length>=Hi&&i())}function i(){if(r.length===0)return;const p=[...r];r=[],t.sendEvents(p).catch(c=>{Li("[DevTools] Failed to send events:",c)})}function l(){if(r.length===0)return;const p=[...r];r=[];const c=JSON.stringify({events:p}),g=`${o}/api/widget/event`;try{const h=new Blob([c],{type:"application/json"});navigator.sendBeacon(g,h)}catch{}}let u=0;Nt(()=>{const c=X().filter(g=>g.id>u);if(c.length>0){u=c[c.length-1].id;for(const g of c)s({type:"error",title:g.message,content:g.stack,metadata:{errorType:g.type,source:g.source,line:g.line,col:g.col},projectId:e})}}),Jt(p=>{s({type:"perf",title:`${p.metric}: ${p.value}`,content:`Rating: ${p.rating}`,metadata:{metric:p.metric,value:p.value,rating:p.rating},projectId:e})});let f=0;St(()=>{const c=U().filter(g=>g.id>f);if(c.length>0){f=c[c.length-1].id;for(const g of c){if(!Pi.has(g.level))continue;const h=g.args.join(" ");h.includes("/api/widget/")||h.includes("/api/ai/analyze")||s({type:"console",title:h.slice(0,500),content:g.args.join(`
`).slice(0,2e3),metadata:{level:g.level,argCount:g.args.length},projectId:e})}}});let a=0;Rt(()=>{const c=q().filter(g=>g.id>a);if(c.length>0){a=c[c.length-1].id;for(const g of c)g.url.includes("/api/widget/")||g.url.includes("/api/bugs")||g.url.includes("/api/ai/analyze")||s({type:"network",title:`${g.method} ${g.url}`.slice(0,500),content:`${g.status} ${g.statusText} (${g.duration}ms)`,metadata:{method:g.method,url:g.url,status:g.status,statusText:g.statusText,duration:g.duration,requestSize:g.requestSize,responseSize:g.responseSize},projectId:e})}}),setInterval(i,Di),window.addEventListener("beforeunload",l)}function Oi(e,t,o){Ao(),cn(),Hn(),Br();const r=ao(o,t);Ai(e,r,o)}const Ni=1e4,Fi={position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"280px",backgroundColor:"#1a0000",border:"1px solid #dc2626",borderRadius:"8px",boxShadow:"0 8px 24px rgba(220, 38, 38, 0.3)",zIndex:"999997",fontFamily:"system-ui, -apple-system, sans-serif",color:d.text,overflow:"hidden",display:"flex",flexDirection:"column"},ji={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:"rgba(220, 38, 38, 0.2)",borderBottom:"1px solid #dc2626",flexShrink:"0"},Wi={fontSize:"12px",fontWeight:"600",color:"#fca5a5"},Ui={display:"flex",gap:"6px"},co={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500"},qi={...co,backgroundColor:"#dc2626",color:"#fff"},Xi={...co,backgroundColor:"rgba(255, 255, 255, 0.1)",color:d.textMuted},Yi={padding:"8px 12px",overflowY:"auto",flex:"1"},Vi={fontSize:"12px",fontWeight:"500",color:"#fca5a5",marginBottom:"6px",wordBreak:"break-word"},Gi={fontSize:"10px",fontFamily:"monospace",lineHeight:"1.6",color:d.textMuted},po={padding:"1px 0",wordBreak:"break-all"},Ji={...po,opacity:"0.5"};function Ki(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function Qi(e){return e.includes("node_modules")}function Zi({onReportBug:e}){const[t,o]=b(null),r=N(null),s=$(()=>{o(null),r.current&&(clearTimeout(r.current),r.current=null)},[]),i=$(()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{o(null),r.current=null},Ni)},[]);A(()=>(At(p=>{o(p),i()}),()=>{At(null),r.current&&clearTimeout(r.current)}),[i]);const l=$(()=>{r.current&&(clearTimeout(r.current),r.current=null)},[]),u=$(()=>{t&&i()},[t,i]),f=$(()=>{t&&(e(t),s())},[t,e,s]);if(!t)return null;const a=Ki(t.stack);return n("div",{style:Fi,onMouseEnter:l,onMouseLeave:u},n("div",{style:ji},n("span",{style:Wi},t.type==="error"?"Uncaught Error":"Unhandled Rejection"),n("div",{style:Ui},n("button",{style:qi,onClick:f},"Report Bug"),n("button",{style:Xi,onClick:s},"Dismiss"))),n("div",{style:Yi},n("div",{style:Vi},t.message),a.length>0?n("div",{style:Gi},a.slice(0,8).map((p,c)=>n("div",{key:c,style:Qi(p)?Ji:po},p))):null))}const es={position:"fixed",padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",zIndex:999999,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"4px",fontFamily:"system-ui, -apple-system, sans-serif"},ts={position:"fixed",width:"360px",maxHeight:"320px",backgroundColor:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:999999,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",overflow:"hidden"},os={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:d.panelHeaderBg,borderBottom:`1px solid ${d.panelBorder}`,flexShrink:0},ns={fontSize:"12px",fontWeight:"600",color:d.textBright},rs={width:"24px",height:"24px",borderRadius:"4px",border:"none",backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",lineHeight:"1"},is={padding:"12px",overflowY:"auto",flex:1,fontSize:"13px",lineHeight:"1.5",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word"},ss={padding:"16px 12px",fontSize:"12px",color:d.textMuted,textAlign:"center"},ls={padding:"12px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",margin:"8px 12px"};function uo(e,t,o,r){const s=Math.min(Math.max(e,8),window.innerWidth-o-8),i=Math.min(Math.max(t,8),window.innerHeight-r-8);return{x:s,y:i}}function as({apiBase:e,pinHash:t}){const[o,r]=b(""),[s,i]=b(null),[l,u]=b(null),[f,a]=b("idle"),[p,c]=b(""),[g,h]=b(""),[x,_]=b(!1),[S,m]=b(!1),v=N(null),C=N(null),k=$(()=>{i(null),u(null),r(""),a("idle"),c(""),h(""),v.current&&(v.current.abort(),v.current=null)},[]);A(()=>{function I(E){if(E.target.closest?.("[data-quickai]"))return;const y=window.getSelection()?.toString().trim()??"";if(y.length>10){r(y);const B=uo(E.clientX,E.clientY-40,90,30);i(B)}else l||(i(null),r(""))}return document.addEventListener("mouseup",I),()=>document.removeEventListener("mouseup",I)},[l]),A(()=>{if(!l)return;function I(R){R.target.closest?.("[data-quickai]")||k()}const E=setTimeout(()=>{document.addEventListener("mousedown",I)},100);return()=>{clearTimeout(E),document.removeEventListener("mousedown",I)}},[l,k]);const L=$(async()=>{if(!o)return;const I=s?uo(s.x,s.y+36,360,320):{x:100,y:100};u(I),i(null),a("loading"),c(""),h(""),v.current&&v.current.abort();const E=new AbortController;v.current=E;try{const R=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:o,context:window.location.href}),signal:E.signal});if(!R.ok)throw new Error(`Analysis failed (${R.status})`);const w=R.body?.getReader();if(!w)throw new Error("No response stream");a("streaming");const y=new TextDecoder;for(;;){const{done:B,value:M}=await w.read();if(B)break;const D=y.decode(M,{stream:!0});D&&c(j=>j+D)}a("done")}catch(R){if(R.name==="AbortError")return;a("error");const w=R instanceof Error?R.message:"Analysis failed";h(w)}},[o,s,e,t]),P=s?n("button",{"data-quickai":"btn",style:{...es,left:`${s.x}px`,top:`${s.y}px`,backgroundColor:x?d.fabBgHover:d.fabBg},onClick:L,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1)},"✨ Analyze"):null,O=l?n("div",{ref:C,"data-quickai":"popup",style:{...ts,left:`${l.x}px`,top:`${l.y}px`}},n("div",{style:os},n("span",{style:ns},"AI Analysis"),n("button",{style:{...rs,backgroundColor:S?d.closeBtnHover:"transparent",color:S?"#fff":d.textMuted},onClick:k,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),"aria-label":"Close"},"✕")),f==="loading"?n("div",{style:ss},"Analyzing..."):f==="error"?n("div",{style:ls},g):n("div",{style:is},p||"Waiting...")):null;return n("div",{"data-quickai":"root"},P,O)}const cs=["All","Standards","Git","API","Deploy"];function ds({apiBase:e,pinHash:t,onClose:o}){const[r,s]=b(""),[i,l]=b("All"),[u,f]=b([]),[a,p]=b(null),c=N(null);A(()=>{fetch(`${e}/api/hub/kb`,{headers:{"X-DevTools-Pin":t}}).then(x=>{if(!x.ok)throw new Error(x.statusText);return x.json()}).then(x=>{Array.isArray(x)&&f(x)}).catch(()=>{}),setTimeout(()=>c.current?.focus(),50)},[e,t]);function g(x){navigator.clipboard.writeText(x.snippet??x.title).then(()=>{p(x.id),setTimeout(()=>p(null),1500)}).catch(()=>{})}const h=u.filter(x=>{const _=i==="All"||x.type===i,S=!r||x.title.toLowerCase().includes(r.toLowerCase())||(x.snippet??"").toLowerCase().includes(r.toLowerCase());return _&&S});return n("div",{style:{position:"fixed",inset:0,zIndex:2147483647,background:"rgba(0,0,0,0.75)",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:96},onClick:o},n("div",{style:{width:"100%",maxWidth:600,background:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:8,overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.8)",fontFamily:"system-ui,sans-serif"},onClick:x=>x.stopPropagation()},n("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",borderBottom:`1px solid ${d.panelBorder}`}},n("input",{ref:c,value:r,style:{flex:1,background:"transparent",border:"none",outline:"none",color:d.text,fontSize:13,fontFamily:"inherit"},placeholder:"Search knowledge base...",onInput:x=>s(x.target.value)}),n("button",{style:{background:"none",border:"none",color:d.textMuted,cursor:"pointer",fontSize:16},onClick:o},"✕")),n("div",{style:{display:"flex",gap:4,padding:"6px 10px",borderBottom:`1px solid ${d.panelBorder}`}},cs.map(x=>n("button",{key:x,style:{padding:"2px 10px",borderRadius:99,fontSize:11,cursor:"pointer",border:"none",fontFamily:"inherit",background:i===x?d.toolBtnBgActive:d.toolBtnBg,color:i===x?"#fff":d.textMuted},onClick:()=>l(x)},x))),n("div",{style:{maxHeight:360,overflowY:"auto"}},h.length===0?n("p",{style:{padding:"24px 14px",textAlign:"center",color:d.textMuted,fontSize:12}},"No results"):h.map(x=>n("div",{key:x.id,style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"10px 14px",borderBottom:`1px solid ${d.panelBorder}`}},n("div",{style:{display:"flex",flexDirection:"column",gap:3,minWidth:0}},n("span",{style:{fontSize:12,color:d.text,fontWeight:500}},x.title),x.description&&n("span",{style:{fontSize:10,color:d.textMuted}},x.description),x.snippet&&n("code",{style:{fontSize:10,background:"#0a0f1a",color:"#94a3b8",padding:"2px 6px",borderRadius:4,fontFamily:"monospace",maxWidth:400,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},x.snippet)),x.snippet&&n("button",{style:{background:"none",border:"none",cursor:"pointer",color:a===x.id?"#34d399":d.textMuted,fontSize:14,marginLeft:8,flexShrink:0},onClick:()=>g(x)},"⧉"))))))}const Ue=document.currentScript,ps=[":host { all: initial; }","#devtools-root { font-family: system-ui, sans-serif; }"].join(`
`);function us({projectId:e,pinHash:t,apiBase:o,apiClient:r}){const[s,i]=b(null),l=$(f=>{i(f)},[]),u=$(()=>{i(null)},[]);return n("div",null,n(zi,{projectId:e,pinHash:t,apiBase:o,apiClient:r}),n(Zi,{onReportBug:l}),n(as,{apiBase:o,pinHash:t}),s?n("div",{style:{position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"400px",backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:"999997",overflow:"auto"}},n(Xt,{apiClient:r,projectId:e,prefillTitle:s.message,prefillStack:s.stack,onClose:u})):null)}function fo(){if(document.getElementById("devtools-widget"))return;const e=Ue?.getAttribute("data-project")||"default",t=Ue?.getAttribute("data-pin")||"",o=Ue?.src.replace("/widget.js","")||"",r=ao(o,t),s=document.createElement("div");s.id="devtools-widget",document.body.appendChild(s);const i=s.attachShadow({mode:"open"}),l=document.createElement("style");l.textContent=ps,i.appendChild(l);const u=document.createElement("div");u.id="devtools-root",i.appendChild(u),lt(n(us,{projectId:e,pinHash:t,apiBase:o,apiClient:r}),u),Oi(e,t,o),Bi();let f=null;document.addEventListener("keydown",a=>{a.key.toLowerCase()==="k"&&a.metaKey&&a.shiftKey&&(a.preventDefault(),f?(i.removeChild(f),f=null):(f=document.createElement("div"),i.appendChild(f),lt(n(ds,{apiBase:o,pinHash:t,onClose:()=>{f&&(i.removeChild(f),f=null)}}),f))),a.key==="Escape"&&f&&(i.removeChild(f),f=null)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",fo):fo()})();
