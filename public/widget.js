(function(){"use strict";var le,T,Xe,q,Ye,Ve,Ge,Je,_e,Se,ve,V={},Ke=[],go=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ae=Array.isArray;function j(e,t){for(var o in t)e[o]=t[o];return e}function we(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function n(e,t,o){var r,s,i,a={};for(i in t)i=="key"?r=t[i]:i=="ref"?s=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?le.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return ce(e,a,r,s,null)}function ce(e,t,o,r,s){var i={type:e,props:t,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Xe,__i:-1,__u:0};return s==null&&T.vnode!=null&&T.vnode(i),i}function de(e){return e.children}function pe(e,t){this.props=e,this.context=t}function Y(e,t){if(t==null)return e.__?Y(e.__,e.__i+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?Y(e):null}function Qe(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return Qe(e)}}function Ze(e){(!e.__d&&(e.__d=!0)&&q.push(e)&&!ue.__r++||Ye!=T.debounceRendering)&&((Ye=T.debounceRendering)||Ve)(ue)}function ue(){for(var e,t,o,r,s,i,a,u=1;q.length;)q.length>u&&q.sort(Ge),e=q.shift(),u=q.length,e.__d&&(o=void 0,r=void 0,s=(r=(t=e).__v).__e,i=[],a=[],t.__P&&((o=j({},r)).__v=r.__v+1,T.vnode&&T.vnode(o),ke(t.__P,o,r,t.__n,t.__P.namespaceURI,32&r.__u?[s]:null,i,s??Y(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,rt(i,o,a),r.__e=r.__=null,o.__e!=s&&Qe(o)));ue.__r=0}function et(e,t,o,r,s,i,a,u,f,l,p){var c,g,h,x,b,S,y,v=r&&r.__k||Ke,C=t.length;for(f=ho(o,t,v,f,C),c=0;c<C;c++)(h=o.__k[c])!=null&&(g=h.__i==-1?V:v[h.__i]||V,h.__i=c,S=ke(e,h,g,s,i,a,u,f,l,p),x=h.__e,h.ref&&g.ref!=h.ref&&(g.ref&&$e(g.ref,null,h),p.push(h.ref,h.__c||x,h)),b==null&&x!=null&&(b=x),(y=!!(4&h.__u))||g.__k===h.__k?f=tt(h,f,e,y):typeof h.type=="function"&&S!==void 0?f=S:x&&(f=x.nextSibling),h.__u&=-7);return o.__e=b,f}function ho(e,t,o,r,s){var i,a,u,f,l,p=o.length,c=p,g=0;for(e.__k=new Array(s),i=0;i<s;i++)(a=t[i])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[i]=ce(null,a,null,null,null):ae(a)?a=e.__k[i]=ce(de,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=e.__k[i]=ce(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[i]=a,f=i+g,a.__=e,a.__b=e.__b+1,u=null,(l=a.__i=xo(a,o,f,c))!=-1&&(c--,(u=o[l])&&(u.__u|=2)),u==null||u.__v==null?(l==-1&&(s>p?g--:s<p&&g++),typeof a.type!="function"&&(a.__u|=4)):l!=f&&(l==f-1?g--:l==f+1?g++:(l>f?g--:g++,a.__u|=4))):e.__k[i]=null;if(c)for(i=0;i<p;i++)(u=o[i])!=null&&(2&u.__u)==0&&(u.__e==r&&(r=Y(u)),st(u,u));return r}function tt(e,t,o,r){var s,i;if(typeof e.type=="function"){for(s=e.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=e,t=tt(s[i],t,o,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=Y(e)),o.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function xo(e,t,o,r){var s,i,a,u=e.key,f=e.type,l=t[o],p=l!=null&&(2&l.__u)==0;if(l===null&&u==null||p&&u==l.key&&f==l.type)return o;if(r>(p?1:0)){for(s=o-1,i=o+1;s>=0||i<t.length;)if((l=t[a=s>=0?s--:i++])!=null&&(2&l.__u)==0&&u==l.key&&f==l.type)return a}return-1}function ot(e,t,o){t[0]=="-"?e.setProperty(t,o??""):e[t]=o==null?"":typeof o!="number"||go.test(t)?o:o+"px"}function fe(e,t,o,r,s){var i,a;e:if(t=="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)o&&t in o||ot(e.style,t,"");if(o)for(t in o)r&&o[t]==r[t]||ot(e.style,t,o[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(Je,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=o,o?r?o.u=r.u:(o.u=_e,e.addEventListener(t,i?ve:Se,i)):e.removeEventListener(t,i?ve:Se,i);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&o==1?"":o))}}function nt(e){return function(t){if(this.l){var o=this.l[t.type+e];if(t.t==null)t.t=_e++;else if(t.t<o.u)return;return o(T.event?T.event(t):t)}}}function ke(e,t,o,r,s,i,a,u,f,l){var p,c,g,h,x,b,S,y,v,C,k,I,H,O,P,R,L,M=t.type;if(t.constructor!==void 0)return null;128&o.__u&&(f=!!(32&o.__u),i=[u=t.__e=o.__e]),(p=T.__b)&&p(t);e:if(typeof M=="function")try{if(y=t.props,v="prototype"in M&&M.prototype.render,C=(p=M.contextType)&&r[p.__c],k=p?C?C.props.value:p.__:r,o.__c?S=(c=t.__c=o.__c).__=c.__E:(v?t.__c=c=new M(y,k):(t.__c=c=new pe(y,k),c.constructor=M,c.render=mo),C&&C.sub(c),c.state||(c.state={}),c.__n=r,g=c.__d=!0,c.__h=[],c._sb=[]),v&&c.__s==null&&(c.__s=c.state),v&&M.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=j({},c.__s)),j(c.__s,M.getDerivedStateFromProps(y,c.__s))),h=c.props,x=c.state,c.__v=t,g)v&&M.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),v&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(v&&M.getDerivedStateFromProps==null&&y!==h&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(y,k),t.__v==o.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(y,c.__s,k)===!1){for(t.__v!=o.__v&&(c.props=y,c.state=c.__s,c.__d=!1),t.__e=o.__e,t.__k=o.__k,t.__k.some(function(m){m&&(m.__=t)}),I=0;I<c._sb.length;I++)c.__h.push(c._sb[I]);c._sb=[],c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(y,c.__s,k),v&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(h,x,b)})}if(c.context=k,c.props=y,c.__P=e,c.__e=!1,H=T.__r,O=0,v){for(c.state=c.__s,c.__d=!1,H&&H(t),p=c.render(c.props,c.state,c.context),P=0;P<c._sb.length;P++)c.__h.push(c._sb[P]);c._sb=[]}else do c.__d=!1,H&&H(t),p=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++O<25);c.state=c.__s,c.getChildContext!=null&&(r=j(j({},r),c.getChildContext())),v&&!g&&c.getSnapshotBeforeUpdate!=null&&(b=c.getSnapshotBeforeUpdate(h,x)),R=p,p!=null&&p.type===de&&p.key==null&&(R=it(p.props.children)),u=et(e,ae(R)?R:[R],t,o,r,s,i,a,u,f,l),c.base=t.__e,t.__u&=-161,c.__h.length&&a.push(c),S&&(c.__E=c.__=null)}catch(m){if(t.__v=null,f||i!=null)if(m.then){for(t.__u|=f?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;i[i.indexOf(u)]=null,t.__e=u}else{for(L=i.length;L--;)we(i[L]);Ce(t)}else t.__e=o.__e,t.__k=o.__k,m.then||Ce(t);T.__e(m,t,o)}else i==null&&t.__v==o.__v?(t.__k=o.__k,t.__e=o.__e):u=t.__e=yo(o.__e,t,o,r,s,i,a,f,l);return(p=T.diffed)&&p(t),128&t.__u?void 0:u}function Ce(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Ce)}function rt(e,t,o){for(var r=0;r<o.length;r++)$e(o[r],o[++r],o[++r]);T.__c&&T.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){T.__e(i,s.__v)}})}function it(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ae(e)?e.map(it):j({},e)}function yo(e,t,o,r,s,i,a,u,f){var l,p,c,g,h,x,b,S=o.props||V,y=t.props,v=t.type;if(v=="svg"?s="http://www.w3.org/2000/svg":v=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((h=i[l])&&"setAttribute"in h==!!v&&(v?h.localName==v:h.nodeType==3)){e=h,i[l]=null;break}}if(e==null){if(v==null)return document.createTextNode(y);e=document.createElementNS(s,v,y.is&&y),u&&(T.__m&&T.__m(t,i),u=!1),i=null}if(v==null)S===y||u&&e.data==y||(e.data=y);else{if(i=i&&le.call(e.childNodes),!u&&i!=null)for(S={},l=0;l<e.attributes.length;l++)S[(h=e.attributes[l]).name]=h.value;for(l in S)if(h=S[l],l!="children"){if(l=="dangerouslySetInnerHTML")c=h;else if(!(l in y)){if(l=="value"&&"defaultValue"in y||l=="checked"&&"defaultChecked"in y)continue;fe(e,l,null,h,s)}}for(l in y)h=y[l],l=="children"?g=h:l=="dangerouslySetInnerHTML"?p=h:l=="value"?x=h:l=="checked"?b=h:u&&typeof h!="function"||S[l]===h||fe(e,l,h,S[l],s);if(p)u||c&&(p.__html==c.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(c&&(e.innerHTML=""),et(t.type=="template"?e.content:e,ae(g)?g:[g],t,o,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,a,i?i[0]:o.__k&&Y(o,0),u,f),i!=null)for(l=i.length;l--;)we(i[l]);u||(l="value",v=="progress"&&x==null?e.removeAttribute("value"):x!=null&&(x!==e[l]||v=="progress"&&!x||v=="option"&&x!=S[l])&&fe(e,l,x,S[l],s),l="checked",b!=null&&b!=e[l]&&fe(e,l,b,S[l],s))}return e}function $e(e,t,o){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(s){T.__e(s,o)}}function st(e,t,o){var r,s;if(T.unmount&&T.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||$e(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){T.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&st(r[s],t,o||typeof e.type!="function");o||we(e.__e),e.__c=e.__=e.__e=void 0}function mo(e,t,o){return this.constructor(e,o)}function lt(e,t,o){var r,s,i,a;t==document&&(t=document.documentElement),T.__&&T.__(e,t),s=(r=!1)?null:t.__k,i=[],a=[],ke(t,e=t.__k=n(de,null,[e]),s||V,V,t.namespaceURI,s?null:t.firstChild?le.call(t.childNodes):null,i,s?s.__e:t.firstChild,r,a),rt(i,e,a)}le=Ke.slice,T={__e:function(e,t,o,r){for(var s,i,a;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),a=s.__d),a)return s.__E=s}catch(u){e=u}throw e}},Xe=0,pe.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=j({},this.state),typeof e=="function"&&(e=e(j({},o),this.props)),e&&j(o,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ze(this))},pe.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ze(this))},pe.prototype.render=de,q=[],Ve=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ge=function(e,t){return e.__v.__b-t.__v.__b},ue.__r=0,Je=/(PointerCapture)$|Capture$/i,_e=0,Se=nt(!1),ve=nt(!0);var G,z,Be,at,J=0,ct=[],D=T,dt=D.__b,pt=D.__r,ut=D.diffed,ft=D.__c,gt=D.unmount,ht=D.__;function Te(e,t){D.__h&&D.__h(z,e,J||t),J=0;var o=z.__H||(z.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function _(e){return J=1,bo(bt,e)}function bo(e,t,o){var r=Te(G++,2);if(r.t=e,!r.__c&&(r.__=[bt(void 0,t),function(u){var f=r.__N?r.__N[0]:r.__[0],l=r.t(f,u);f!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=z,!z.__f)){var s=function(u,f,l){if(!r.__c.__H)return!0;var p=r.__c.__H.__.filter(function(g){return!!g.__c});if(p.every(function(g){return!g.__N}))return!i||i.call(this,u,f,l);var c=r.__c.props!==u;return p.forEach(function(g){if(g.__N){var h=g.__[0];g.__=g.__N,g.__N=void 0,h!==g.__[0]&&(c=!0)}}),i&&i.call(this,u,f,l)||c};z.__f=!0;var i=z.shouldComponentUpdate,a=z.componentWillUpdate;z.componentWillUpdate=function(u,f,l){if(this.__e){var p=i;i=void 0,s(u,f,l),i=p}a&&a.call(this,u,f,l)},z.shouldComponentUpdate=s}return r.__N||r.__}function A(e,t){var o=Te(G++,3);!D.__s&&mt(o.__H,t)&&(o.__=e,o.u=t,z.__H.__h.push(o))}function N(e){return J=5,xt(function(){return{current:e}},[])}function xt(e,t){var o=Te(G++,7);return mt(o.__H,t)&&(o.__=e(),o.__H=t,o.__h=e),o.__}function $(e,t){return J=8,xt(function(){return e},t)}function _o(){for(var e;e=ct.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ge),e.__H.__h.forEach(Ee),e.__H.__h=[]}catch(t){e.__H.__h=[],D.__e(t,e.__v)}}D.__b=function(e){z=null,dt&&dt(e)},D.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ht&&ht(e,t)},D.__r=function(e){pt&&pt(e),G=0;var t=(z=e.__c).__H;t&&(Be===z?(t.__h=[],z.__h=[],t.__.forEach(function(o){o.__N&&(o.__=o.__N),o.u=o.__N=void 0})):(t.__h.forEach(ge),t.__h.forEach(Ee),t.__h=[],G=0)),Be=z},D.diffed=function(e){ut&&ut(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ct.push(t)!==1&&at===D.requestAnimationFrame||((at=D.requestAnimationFrame)||So)(_o)),t.__H.__.forEach(function(o){o.u&&(o.__H=o.u),o.u=void 0})),Be=z=null},D.__c=function(e,t){t.some(function(o){try{o.__h.forEach(ge),o.__h=o.__h.filter(function(r){return!r.__||Ee(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],D.__e(r,o.__v)}}),ft&&ft(e,t)},D.unmount=function(e){gt&&gt(e);var t,o=e.__c;o&&o.__H&&(o.__H.__.forEach(function(r){try{ge(r)}catch(s){t=s}}),o.__H=void 0,t&&D.__e(t,o.__v))};var yt=typeof requestAnimationFrame=="function";function So(e){var t,o=function(){clearTimeout(r),yt&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(o,35);yt&&(t=requestAnimationFrame(o))}function ge(e){var t=z,o=e.__c;typeof o=="function"&&(e.__c=void 0,o()),z=t}function Ee(e){var t=z;e.__c=e.__(),z=t}function mt(e,t){return!e||e.length!==t.length||t.some(function(o,r){return o!==e[r]})}function bt(e,t){return typeof t=="function"?t(e):t}const d={fabBg:"#3b82f6",fabBgHover:"#2563eb",panelBg:"#0f172a",panelBorder:"#1e293b",panelHeaderBg:"#1e293b",toolBtnBg:"#1e293b",toolBtnBgActive:"#3b82f6",text:"#e2e8f0",textMuted:"#94a3b8",textBright:"#f8fafc",closeBtnHover:"#ef4444",shadow:"rgba(0, 0, 0, 0.4)"},_t=48,Re=580,vo=5,wo={position:"fixed",width:`${_t}px`,height:`${_t}px`,borderRadius:"50%",backgroundColor:d.fabBg,color:"#fff",border:"none",cursor:"grab",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999,boxShadow:`0 4px 12px ${d.shadow}`,transition:"background-color 0.15s ease, box-shadow 0.15s ease",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},ko={position:"fixed",width:`${Re}px`,backgroundColor:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:"12px",zIndex:999998,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",color:d.text,boxShadow:"0 24px 64px rgba(0,0,0,0.7)",overflow:"hidden"},Co={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px 0",flexShrink:0,cursor:"grab",userSelect:"none"},$o={width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",lineHeight:"1",flexShrink:"0"},Bo={flex:1,overflowY:"auto",padding:"10px 12px",fontSize:"13px",color:d.textMuted,display:"block"},To={fontSize:11,color:"#475569",display:"flex",alignItems:"center",gap:4},Eo={width:6,height:6,borderRadius:"50%",background:"#4ade80",flexShrink:0},Ro={display:"flex",gap:4,alignItems:"center"},Mo={background:"none",border:"none",color:"#475569",cursor:"pointer",padding:4,borderRadius:4,fontSize:12,lineHeight:"1",display:"flex",alignItems:"center",justifyContent:"center"},zo={background:"#1a2547",border:"1px solid #2d3b6e",color:"#a5b4fc",fontSize:10,padding:"3px 8px",borderRadius:4,whiteSpace:"nowrap",fontFamily:"inherit",lineHeight:"1.4",cursor:"pointer"},Io={display:"flex",borderBottom:`1px solid ${d.panelBorder}`,overflowX:"auto",scrollbarWidth:"none",flexShrink:0,marginTop:6},Lo={padding:"6px 10px",fontSize:11,color:"#475569",cursor:"pointer",borderBottom:"2px solid transparent",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:4,flexShrink:0,userSelect:"none",background:"none",border:"none",fontFamily:"inherit"},Do={color:"#a5b4fc",borderBottom:"2px solid #6366f1"},St={background:"#ef4444",color:"#fff",borderRadius:6,padding:"0 4px",fontSize:9,fontWeight:"700",lineHeight:"14px"},Ho=500;let Po=1;const K=[],Q=[];function Ao(){const e=new WeakSet;return(t,o)=>{if(typeof o=="object"&&o!==null){if(e.has(o))return"[Circular]";e.add(o)}return o}}function Oo(e){if(e===null)return"null";if(e===void 0)return"undefined";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(e instanceof Error)return`${e.name}: ${e.message}`;try{return JSON.stringify(e,Ao(),2)}catch{return String(e)}}function Fo(e,t){const o={id:Po++,level:e,args:t.map(Oo),timestamp:Date.now()};K.length>=Ho&&K.shift(),K.push(o);for(const r of Q)r()}function W(){return[...K]}function No(){K.length=0;for(const e of Q)e()}function vt(e){return Q.push(e),()=>{const t=Q.indexOf(e);t!==-1&&Q.splice(t,1)}}function jo(){const e=["log","warn","error","info"];for(const t of e){const o=console[t].bind(console);console[t]=(...r)=>{Fo(t,r),o(...r)}}}function Me(e){const t=new Date(e.timestamp).toLocaleTimeString();return`[${e.level.toUpperCase()}] ${e.args.join(" ")} — ${t}`}function ze(e){return`[NETWORK] ${e.method} ${e.url} → ${e.status}  ${e.duration}ms`}function wt(e){const t=e.stack?`
  ${e.stack}`:"";return`[ERROR] ${e.message}${t}`}function kt(e){return`[${e.severity.toUpperCase()}] ${e.message}${e.detail?` — ${e.detail}`:""}`}function Wo(e){return`### Console (${e.length})
${e.map(Me).join(`
`)}`}function Uo(e){return`### Network (${e.length})
${e.map(ze).join(`
`)}`}function Ct(e){return`### Errors (${e.length})
${e.map(wt).join(`

`)}`}function $t(e){return`### Health Issues (${e.length})
${e.map(kt).join(`
`)}`}function qo(e,t,o,r){const s=o.slice(0,10),i=e.filter(l=>l.level==="warn").slice(0,10),a=t.filter(l=>l.status>=400).slice(0,10),u=new Date().toLocaleString(),f=[`## Page Context — ${window.location.href}`,`**Captured:** ${u}`];return s.length>0&&f.push(Ct(s)),i.length>0&&f.push(`### Console Warnings (${i.length})
${i.map(Me).join(`
`)}`),a.length>0&&f.push(`### Network Issues (${a.length})
${a.map(ze).join(`
`)}`),r.length>0&&f.push($t(r)),f.join(`

`)}const Bt={log:"#94a3b8",info:"#3b82f6",warn:"#eab308",error:"#ef4444"},Xo={log:"rgba(148, 163, 184, 0.15)",info:"rgba(59, 130, 246, 0.15)",warn:"rgba(234, 179, 8, 0.15)",error:"rgba(239, 68, 68, 0.15)"},Tt=["log","info","warn","error"];function Yo(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${o}:${r}:${s}.${i}`}const Vo={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Go={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Jo={display:"flex",gap:"4px",flexWrap:"wrap"},Ko={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Qo={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},Zo={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},en={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",position:"relative"},tn={display:"flex",alignItems:"center",gap:"6px"},on={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},nn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},rn={color:d.text,whiteSpace:"pre-wrap",lineHeight:"1.4"},sn={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function ln(e,t){return{padding:"2px 6px",borderRadius:"3px",border:"none",backgroundColor:e?Bt[t]:d.toolBtnBg,color:e?"#fff":d.textMuted,cursor:"pointer",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"}}function an(){const[e,t]=_(W),[o,r]=_(new Set(Tt)),[s,i]=_(null);A(()=>vt(()=>{t(W())}),[]);const a=$(()=>{No(),t([])},[]),u=$(l=>{r(p=>{const c=new Set(p);return c.has(l)?c.delete(l):c.add(l),c})},[]),f=e.filter(l=>o.has(l.level));return n("div",{style:Vo},n("div",{style:Go},n("div",{style:Jo},Tt.map(l=>n("button",{key:l,style:ln(o.has(l),l),onClick:()=>u(l),title:`Toggle ${l} entries`},l))),n("button",{style:Qo,onClick:()=>navigator.clipboard.writeText(Wo(f)).catch(()=>{}),title:"Copy all console entries"},"Copy Console"),n("button",{style:Ko,onClick:a,title:"Clear console entries"},"Clear")),f.length===0?n("div",{style:sn},"No console entries"):n("div",{style:Zo},f.map((l,p)=>n("div",{key:l.id,style:{...en,backgroundColor:Xo[l.level]},onMouseEnter:()=>i(p),onMouseLeave:()=>i(null)},n("div",{style:tn},n("span",{style:{...on,backgroundColor:Bt[l.level],color:"#fff"}},l.level),n("span",{style:nn},Yo(l.timestamp)),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:s===p?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:c=>{c.stopPropagation(),navigator.clipboard.writeText(Me(l)).catch(()=>{})},title:"Copy row"},"⧇")),n("div",{style:rn},l.args.join(" "))))))}const cn=200;let Ie=1;const Z=[],ee=[];function dn(e){if(!e.response)return 0;if(typeof e.response=="string")return e.response.length;if(e.response instanceof Blob)return e.response.size;if(e.response instanceof ArrayBuffer)return e.response.byteLength;try{return JSON.stringify(e.response).length}catch{return 0}}function Et(e){if(e==null)return 0;if(typeof e=="string")return e.length;if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(e instanceof FormData){let t=0;return e.forEach(o=>{typeof o=="string"?t+=o.length:o instanceof Blob&&(t+=o.size)}),t}return e instanceof URLSearchParams?e.toString().length:0}function Rt(e){const t={};return e.forEach((o,r)=>{t[r]=o}),t}function Le(e){Z.length>=cn&&Z.shift(),Z.push(e);for(const t of ee)t()}function X(){return[...Z]}function pn(){Z.length=0;for(const e of ee)e()}function Mt(e){return ee.push(e),()=>{const t=ee.indexOf(e);t!==-1&&ee.splice(t,1)}}function un(){const e=XMLHttpRequest.prototype,t=e.open,o=e.setRequestHeader,r=e.send,s=new WeakMap;e.open=function(i,a,...u){return s.set(this,{method:i.toUpperCase(),url:typeof a=="string"?a:String(a),requestHeaders:{},requestSize:0,startTime:0,timestamp:0}),t.call(this,i,a,...u)},e.setRequestHeader=function(i,a){const u=s.get(this);return u&&(u.requestHeaders[i]=a),o.call(this,i,a)},e.send=function(i){const a=s.get(this);return a&&(a.requestSize=Et(i??null),a.startTime=performance.now(),a.timestamp=Date.now(),this.addEventListener("loadend",()=>{const u=performance.now()-a.startTime,f={},l=this.getAllResponseHeaders();for(const c of l.trim().split(`\r
`)){const g=c.indexOf(": ");g!==-1&&(f[c.slice(0,g).toLowerCase()]=c.slice(g+2))}const p={id:Ie++,method:a.method,url:a.url,status:this.status,statusText:this.statusText||(this.status===0?"Network Error":""),duration:Math.round(u),requestSize:a.requestSize,responseSize:dn(this),requestHeaders:a.requestHeaders,responseHeaders:f,startTime:a.startTime,timestamp:a.timestamp};Le(p),s.delete(this)})),r.call(this,i)}}function fn(){const e=window.fetch.bind(window);window.fetch=async(t,o)=>{const r=(o?.method??"GET").toUpperCase(),s=typeof t=="string"?t:t instanceof URL?t.href:t.url,i=Et(o?.body??null);let a={};if(o?.headers)if(o.headers instanceof Headers)a=Rt(o.headers);else if(Array.isArray(o.headers))for(const[l,p]of o.headers)a[l]=p;else a={...o.headers};const u=performance.now(),f=Date.now();try{const l=await e(t,o),p=performance.now()-u,c=l.clone();let g=0;try{g=(await c.blob()).size}catch{g=0}const h={id:Ie++,method:r,url:s,status:l.status,statusText:l.statusText,duration:Math.round(p),requestSize:i,responseSize:g,requestHeaders:a,responseHeaders:Rt(l.headers),startTime:u,timestamp:f};return Le(h),l}catch(l){const p=performance.now()-u,c={id:Ie++,method:r,url:s,status:0,statusText:"Network Error",duration:Math.round(p),requestSize:i,responseSize:0,requestHeaders:a,responseHeaders:{},startTime:u,timestamp:f};throw Le(c),l}},un()}const gn={GET:"#22c55e",POST:"#3b82f6",PUT:"#eab308",DELETE:"#ef4444",PATCH:"#a855f7"},hn="#94a3b8";function xn(e){return gn[e]??hn}function yn(e){return e===0?"#ef4444":e<300?"#22c55e":e<400?"#3b82f6":e<500?"#eab308":"#ef4444"}function zt(e){return e===0?"rgba(239, 68, 68, 0.15)":e<300?"rgba(34, 197, 94, 0.15)":e<400?"rgba(59, 130, 246, 0.15)":e<500?"rgba(234, 179, 8, 0.15)":"rgba(239, 68, 68, 0.15)"}function It(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${o}:${r}:${s}.${i}`}function Lt(e){return e<1e3?`${e}ms`:`${(e/1e3).toFixed(1)}s`}function Dt(e){return e===0?"0 B":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function mn(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}const bn={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},_n={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Sn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},vn={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},wn={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},kn={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Cn={display:"flex",flexDirection:"column",padding:"5px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",cursor:"pointer",transition:"background-color 0.1s ease",position:"relative"},$n={display:"flex",alignItems:"center",gap:"6px",minWidth:"0"},Bn={padding:"1px 5px",borderRadius:"3px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},Tn={padding:"1px 4px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",flexShrink:"0"},En={flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:d.text,fontSize:"10px",minWidth:"0"},Rn={fontSize:"10px",color:d.textMuted,flexShrink:"0",textAlign:"right",minWidth:"40px"},Mn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},zn={marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5",wordBreak:"break-all"},De={fontWeight:"600",color:d.textBright,marginBottom:"2px",marginTop:"6px",display:"block"},In={color:d.textMuted},Ht={display:"flex",gap:"4px",color:d.textMuted,padding:"1px 0"},Pt={color:"#93c5fd",flexShrink:"0"},Ln={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function Dn({entry:e}){const t=Object.entries(e.requestHeaders),o=Object.entries(e.responseHeaders);return n("div",{style:zn},n("span",{style:{...De,marginTop:"0"}},"General"),n("div",{style:In},n("div",null,`URL: ${e.url}`),n("div",null,`Method: ${e.method}`),n("div",null,`Status: ${e.status} ${e.statusText}`),n("div",null,`Duration: ${Lt(e.duration)}`),n("div",null,`Request size: ${Dt(e.requestSize)}`),n("div",null,`Response size: ${Dt(e.responseSize)}`),n("div",null,`Time: ${It(e.timestamp)}`)),t.length>0?n("div",null,n("span",{style:De},"Request Headers"),t.map(([r,s])=>n("div",{key:r,style:Ht},n("span",{style:Pt},`${r}:`),n("span",null,s)))):null,o.length>0?n("div",null,n("span",{style:De},"Response Headers"),o.map(([r,s])=>n("div",{key:r,style:Ht},n("span",{style:Pt},`${r}:`),n("span",null,s)))):null)}function Hn(){const[e,t]=_(X),[o,r]=_(null),[s,i]=_(null);A(()=>Mt(()=>{t(X())}),[]);const a=$(()=>{pn(),t([]),r(null)},[]),u=$(f=>{r(l=>l===f?null:f)},[]);return n("div",{style:bn},n("div",{style:_n},n("span",{style:Sn},`${e.length} request${e.length!==1?"s":""}`),n("button",{style:wn,onClick:()=>navigator.clipboard.writeText(Uo(e)).catch(()=>{}),title:"Copy all network entries"},"Copy Network"),n("button",{style:vn,onClick:a,title:"Clear network entries"},"Clear")),e.length===0?n("div",{style:Ln},"No network requests"):n("div",{style:kn},e.map((f,l)=>{const p=o===f.id;return n("div",{key:f.id,style:{...Cn,backgroundColor:p?"rgba(59, 130, 246, 0.12)":zt(f.status)},onClick:()=>u(f.id),onMouseEnter:()=>i(l),onMouseLeave:()=>i(null)},n("div",{style:$n},n("span",{style:{...Bn,backgroundColor:xn(f.method)}},f.method),n("span",{style:{...Tn,color:yn(f.status),backgroundColor:zt(f.status)}},f.status===0?"ERR":String(f.status)),n("span",{style:En,title:f.url},mn(f.url,40)),n("span",{style:Rn},Lt(f.duration)),n("span",{style:Mn},It(f.timestamp)),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:s===l?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:c=>{c.stopPropagation(),navigator.clipboard.writeText(ze(f)).catch(()=>{})},title:"Copy row"},"⧇")),p?n(Dn,{entry:f}):null)})))}const Pn=100;let At=1;const te=[],oe=[];let He=null;function Ot(e){He=e}function Ft(e){te.length>=Pn&&te.shift(),te.push(e);for(const t of oe)t();He&&He(e)}function U(){return[...te]}function An(){te.length=0;for(const e of oe)e()}function Nt(e){return oe.push(e),()=>{const t=oe.indexOf(e);t!==-1&&oe.splice(t,1)}}function On(){const e=window.onerror;window.onerror=(t,o,r,s,i)=>{const a={id:At++,message:typeof t=="string"?t:"Unknown error",stack:i?.stack??"",source:o??"",line:r??0,col:s??0,timestamp:Date.now(),type:"error"};return Ft(a),typeof e=="function"?e(t,o,r,s,i):!1},window.addEventListener("unhandledrejection",t=>{const o=t.reason,r=o instanceof Error,s=r?o.message:typeof o=="string"?o:"Unhandled promise rejection",i=r?o.stack??"":"",a={id:At++,message:s,stack:i,source:"",line:0,col:0,timestamp:Date.now(),type:"unhandledrejection"};Ft(a)})}const Fn="#ef4444",Nn="rgba(239, 68, 68, 0.15)",jn="#f97316",Wn="rgba(249, 115, 22, 0.15)",Un={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},qn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Xn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Yn={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Vn={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},Gn={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Jn={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",cursor:"pointer",position:"relative"},Kn={display:"flex",alignItems:"center",gap:"6px"},Qn={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},Zn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},jt={padding:"1px 0",wordBreak:"break-all"},er={...jt,opacity:"0.5"},tr={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500",backgroundColor:"#dc2626",color:"#fff"},or={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function nr(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${o}:${r}:${s}.${i}`}function rr(e){return e==="error"?Fn:jn}function ir(e){return e==="error"?Nn:Wn}function sr(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function lr(e){return e.includes("node_modules")}function ar({onReportBug:e}){const[t,o]=_(U),[r,s]=_(null),[i,a]=_(null);A(()=>Nt(()=>{o(U())}),[]);const u=$(()=>{An(),o([]),s(null)},[]),f=$(l=>{s(p=>p===l?null:l)},[]);return n("div",{style:Un},n("div",{style:qn},n("span",{style:Xn},`${t.length} error${t.length!==1?"s":""}`),n("button",{style:Vn,onClick:()=>navigator.clipboard.writeText(Ct(t)).catch(()=>{}),title:"Copy all error entries"},"Copy Errors"),n("button",{style:Yn,onClick:u,title:"Clear error entries"},"Clear")),t.length===0?n("div",{style:or},"No errors captured"):n("div",{style:Gn},t.map((l,p)=>{const c=r===l.id,g=sr(l.stack);return n("div",{key:l.id,style:{...Jn,backgroundColor:c?"rgba(239, 68, 68, 0.12)":ir(l.type)},onClick:()=>f(l.id),onMouseEnter:()=>a(p),onMouseLeave:()=>a(null)},n("div",{style:Kn},n("span",{style:{...Qn,backgroundColor:rr(l.type)}},l.type==="error"?"ERR":"REJ"),n("span",{style:{flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:d.text,fontSize:"10px"}},l.message),n("span",{style:Zn},nr(l.timestamp)),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:i===p?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:h=>{h.stopPropagation(),navigator.clipboard.writeText(wt(l)).catch(()=>{})},title:"Copy row"},"⧇")),c?n("div",{style:{marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5"}},l.source?n("div",{style:{color:"#93c5fd",marginBottom:"4px"}},`${l.source}:${l.line}:${l.col}`):null,g.length>0?g.map((h,x)=>n("div",{key:x,style:lr(h)?er:jt},h)):n("span",{style:{color:d.textMuted}},"No stack trace available"),e?n("button",{style:{...tr,marginTop:"8px",width:"100%"},onClick:h=>{h.stopPropagation(),e(l)}},"Report Bug"):null):null)})))}const cr=["low","medium","high","critical"],dr={low:"#22c55e",medium:"#eab308",high:"#f97316",critical:"#ef4444"},Wt={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},he={fontSize:"11px",fontWeight:"600",color:d.textBright,marginBottom:"3px",display:"block"},Ut={width:"100%",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:d.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},pr={...Ut,minHeight:"60px",resize:"vertical",lineHeight:"1.4"},ur={display:"flex",gap:"4px"},fr={padding:"4px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flex:"1",textAlign:"center"},Pe={padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",width:"100%",marginTop:"4px"},gr={...Pe,opacity:"0.5",cursor:"not-allowed"},qt={padding:"8px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textAlign:"center"},hr={...qt,backgroundColor:"rgba(34, 197, 94, 0.15)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},xr={...qt,backgroundColor:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"},yr={fontSize:"10px",fontFamily:"monospace",color:d.textMuted,backgroundColor:"rgba(0, 0, 0, 0.3)",padding:"6px 8px",borderRadius:"4px",maxHeight:"60px",overflowY:"auto",lineHeight:"1.4",whiteSpace:"pre-wrap",wordBreak:"break-all"},Xt={padding:"4px 8px",borderRadius:"4px",border:"none",backgroundColor:"rgba(255, 255, 255, 0.1)",color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",alignSelf:"flex-end"};function Yt({apiClient:e,projectId:t,prefillTitle:o,prefillStack:r,onClose:s}){const[i,a]=_(o??""),[u,f]=_(""),[l,p]=_("medium"),[c,g]=_("idle"),[h,x]=_(""),b=i.trim().length>0&&c!=="submitting",S=$(async()=>{if(b){g("submitting"),x("");try{const y={projectId:t,title:i.trim(),description:u.trim(),severity:l,url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()};r&&(y.stackTrace=r),await e.createBug(y),g("success"),a(""),f(""),p("medium")}catch(y){g("error");const v=y instanceof Error?y.message:"Failed to submit bug report";x(v)}}},[b,i,u,l,t,r,e]);return c==="success"?n("div",{style:Wt},n("div",{style:hr},"Bug report submitted."),n("button",{style:{...Pe,marginTop:"8px"},onClick:()=>g("idle")},"Report Another"),s?n("button",{style:{...Xt,marginTop:"4px",alignSelf:"center"},onClick:s},"Close"):null):n("div",{style:Wt},s?n("button",{style:Xt,onClick:s},"Back"):null,n("div",null,n("label",{style:he},"Title"),n("input",{style:Ut,type:"text",value:i,placeholder:"Describe the bug briefly",onInput:y=>{a(y.target.value)}})),n("div",null,n("label",{style:he},"Description"),n("textarea",{style:pr,value:u,placeholder:"Steps to reproduce, expected vs actual behavior",onInput:y=>{f(y.target.value)}})),r?n("div",null,n("label",{style:he},"Stack Trace"),n("div",{style:yr},r)):null,n("div",null,n("label",{style:he},"Severity"),n("div",{style:ur},cr.map(y=>n("button",{key:y,style:{...fr,backgroundColor:l===y?dr[y]:d.toolBtnBg,color:l===y?"#fff":d.textMuted},onClick:()=>p(y)},y)))),c==="error"?n("div",{style:xr},h||"Submission failed"):null,n("button",{style:b?Pe:gr,onClick:S,disabled:!b},c==="submitting"?"Submitting...":"Submit Bug Report"))}const mr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},br={display:"flex",gap:"6px",flexShrink:"0"},_r={flex:"1",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:d.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},Vt={padding:"6px 10px",borderRadius:"4px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",flexShrink:"0"},Sr={...Vt,opacity:"0.5",cursor:"not-allowed"},Gt={flex:"1",overflowY:"auto",fontSize:"12px",lineHeight:"1.5",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"8px",borderRadius:"4px",minHeight:"80px"},vr={...Gt,color:d.textMuted,display:"flex",alignItems:"center",justifyContent:"center",fontStyle:"italic"},wr={padding:"8px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px"};function kr(){const e=U().slice(0,5).map(s=>`- ${s.message}`).join(`
`),t=X().filter(s=>s.status>=400).slice(0,5).map(s=>`- ${s.method} ${s.url} → ${s.status}`).join(`
`),o=W().filter(s=>s.level==="error"||s.level==="warn").slice(0,5).map(s=>`[${s.level}] ${s.args.join(" ")}`).join(`
`);return[`Page: ${window.location.href}`,e&&`Recent errors:
${e}`,t&&`Network issues:
${t}`,o&&`Console issues:
${o}`].filter(Boolean).join(`

`)}function Cr({apiBase:e,pinHash:t}){const[o,r]=_(""),[s,i]=_(""),[a,u]=_("idle"),[f,l]=_(""),p=N(null),c=N(0),g=o.trim().length>0&&a!=="loading"&&a!=="streaming",h=$(async()=>{if(o.trim().length===0||a==="loading"||a==="streaming")return;const b=o.trim(),S=c.current===0?kr():"",v=(S?`Context:
${S}

---

${b}`:b).slice(0,2e3);i(""),u("loading"),l(""),p.current&&p.current.abort();const C=new AbortController;p.current=C;try{const k=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:v,context:window.location.href}),signal:C.signal});if(!k.ok)throw new Error(`Request failed (${k.status})`);const I=k.body?.getReader();if(!I)throw new Error("No response stream");u("streaming");const H=new TextDecoder;for(;;){const{done:O,value:P}=await I.read();if(O)break;const R=H.decode(P,{stream:!0});R&&i(L=>L+R)}c.current+=1,u("idle")}catch(k){if(k.name==="AbortError")return;u("error");const I=k instanceof Error?k.message:"Analysis failed";l(I)}},[o,a,e,t]),x=$(b=>{b.key==="Enter"&&!b.shiftKey&&g&&(b.preventDefault(),h())},[g,h]);return n("div",{style:mr},n("div",{style:br},n("input",{style:_r,type:"text",value:o,placeholder:"Ask about code, errors, concepts...",onInput:b=>{r(b.target.value)},onKeyDown:x}),n("button",{style:g?Vt:Sr,onClick:h,disabled:!g},a==="loading"||a==="streaming"?"...":"Send")),a==="error"?n("div",{style:wr},f):null,s?n("div",{style:Gt},s):n("div",{style:vr},a==="loading"?"Thinking...":"Response will appear here"))}const $r=100,Br={LCP:[2500,4e3],CLS:[.1,.25],INP:[200,500],FCP:[1800,3e3],TTFB:[800,1800]};let Tr=1;const ne=[],xe=[];function Er(e,t){const o=Br[e];return t<=o[0]?"good":t<=o[1]?"needs-improvement":"poor"}function re(e,t){const o={id:Tr++,timestamp:Date.now(),metric:e,value:Math.round(e==="CLS"?t*1e3:t)/(e==="CLS"?1e3:1),rating:Er(e,t)};ne.length>=$r&&ne.shift(),ne.push(o);for(const r of xe)r(o)}function Jt(){return[...ne]}function Rr(){ne.length=0}function Kt(e){return xe.push(e),()=>{const t=xe.indexOf(e);t!==-1&&xe.splice(t,1)}}function Mr(){if(!(typeof PerformanceObserver>"u")){try{new PerformanceObserver(t=>{const o=t.getEntries(),r=o[o.length-1];r&&re("LCP",r.startTime)}).observe({type:"largest-contentful-paint",buffered:!0})}catch{}try{let e=0;new PerformanceObserver(o=>{for(const r of o.getEntries()){const s=r;!s.hadRecentInput&&typeof s.value=="number"&&(e+=s.value,re("CLS",e))}}).observe({type:"layout-shift",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const o of t.getEntries())o.duration>0&&re("INP",o.duration)}).observe({type:"event",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const o of t.getEntries())o.name==="first-contentful-paint"&&re("FCP",o.startTime)}).observe({type:"paint",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const o of t.getEntries()){const r=o;r.responseStart>0&&re("TTFB",r.responseStart-r.requestStart)}}).observe({type:"navigation",buffered:!0})}catch{}}}const Ae={good:"#22c55e","needs-improvement":"#eab308",poor:"#ef4444"},zr={good:"rgba(34, 197, 94, 0.15)","needs-improvement":"rgba(234, 179, 8, 0.15)",poor:"rgba(239, 68, 68, 0.15)"},Ir={LCP:"Largest Contentful Paint",CLS:"Cumulative Layout Shift",INP:"Interaction to Next Paint",FCP:"First Contentful Paint",TTFB:"Time to First Byte"},Qt={LCP:"ms",CLS:"",INP:"ms",FCP:"ms",TTFB:"ms"},Lr=["LCP","FCP","CLS","INP","TTFB"];function Dr(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${o}:${r}:${s}`}function Hr(e){const t={};for(const o of e){const r=t[o.metric];(!r||o.id>r.id)&&(t[o.metric]=o)}return t}const Pr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Ar={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",flexShrink:"0"},Or={fontSize:"11px",fontWeight:"600",color:d.textBright,textTransform:"uppercase",letterSpacing:"0.5px"},Fr={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Nr={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px",padding:"4px 8px 8px",flexShrink:"0"},jr={display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",padding:"8px 6px",borderRadius:"6px",backgroundColor:d.toolBtnBg},Wr={fontSize:"16px",fontWeight:"700",fontFamily:"monospace"},Ur={fontSize:"9px",fontWeight:"500",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},qr={height:"1px",backgroundColor:d.panelBorder,margin:"0 8px",flexShrink:"0"},Xr={fontSize:"10px",fontWeight:"600",color:d.textMuted,padding:"6px 8px 2px",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},Yr={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Vr={display:"flex",alignItems:"center",gap:"6px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace"},Gr={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flexShrink:"0",color:"#fff"},Jr={fontWeight:"600",color:d.text,flexShrink:"0",minWidth:"32px"},Kr={color:d.textBright,flex:"1"},Qr={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Zr={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function ei(e){return e==="good"?"Good":e==="needs-improvement"?"OK":"Poor"}function ti(){const[e,t]=_(Jt);A(()=>Kt(()=>{t(Jt())}),[]);const o=$(()=>{Rr(),t([])},[]),r=Hr(e),s=Lr.map(i=>{const a=r[i];if(!a)return null;const u=Qt[i],f=i==="CLS"?a.value.toFixed(3):`${Math.round(a.value)}`;return{metric:i,entry:a,displayValue:f,unit:u}}).filter(Boolean);return n("div",{style:Pr},n("div",{style:Ar},n("span",{style:Or},"Web Vitals"),n("button",{style:Fr,onClick:o,title:"Clear performance entries"},"Clear")),s.length>0?n("div",{style:Nr},s.map(i=>n("div",{key:i.metric,style:{...jr,borderLeft:`3px solid ${Ae[i.entry.rating]}`},title:Ir[i.metric]},n("span",{style:{...Wr,color:Ae[i.entry.rating]}},`${i.displayValue}${i.unit}`),n("span",{style:Ur},i.metric)))):null,e.length>0?n("div",{style:qr}):null,e.length>0?n("div",{style:Xr},"Event Log"):null,e.length===0?n("div",{style:Zr},"Waiting for Web Vitals data..."):n("div",{style:Yr},[...e].reverse().map(i=>{const a=Qt[i.metric],u=i.metric==="CLS"?i.value.toFixed(3):`${Math.round(i.value)}`;return n("div",{key:i.id,style:{...Vr,backgroundColor:zr[i.rating]}},n("span",{style:{...Gr,backgroundColor:Ae[i.rating]}},ei(i.rating)),n("span",{style:Jr},i.metric),n("span",{style:Kr},`${u}${a}`),n("span",{style:Qr},Dr(i.timestamp)))})))}const Oe="devtools-debug-snapshots",oi=5;function ni(){try{const e=localStorage.getItem(Oe);return e?JSON.parse(e):[]}catch{return[]}}function Zt(e){try{localStorage.setItem(Oe,JSON.stringify(e))}catch{}}let ri=1;function ie(e){return String(e).padStart(2,"0")}function eo(e){const t=new Date(e);return`${ie(t.getHours())}:${ie(t.getMinutes())}:${ie(t.getSeconds())}`}function ii(){const e=[];try{const t=Object.keys(localStorage).filter(o=>o!==Oe);if(t.length){const o=t.slice(0,30).map(r=>{const s=localStorage.getItem(r)??"";return`  ${r}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`localStorage (${t.length} keys):
${o.join(`
`)}`)}}catch{}try{const t=Object.keys(sessionStorage);if(t.length){const o=t.slice(0,30).map(r=>{const s=sessionStorage.getItem(r)??"";return`  ${r}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`sessionStorage (${t.length} keys):
${o.join(`
`)}`)}}catch{}return e.length?e.join(`

`):"(empty)"}function si(){try{const t=performance.getEntriesByType("navigation")[0];return t?[`DNS: ${Math.round(t.domainLookupEnd-t.domainLookupStart)}ms`,`Connect: ${Math.round(t.connectEnd-t.connectStart)}ms`,`TTFB: ${Math.round(t.responseStart-t.requestStart)}ms`,`DOM Ready: ${Math.round(t.domContentLoadedEventEnd)}ms`,`Page Load: ${Math.round(t.loadEventEnd)}ms`].join(" | "):"(not available)"}catch{return"(not available)"}}function li(){try{const e=document.cookie.split(";").map(t=>t.trim().split("=")[0]).filter(Boolean);return e.length?e.join(", "):"(none)"}catch{return"(unavailable)"}}function ai(e,t,o){const s=new Date().toISOString().replace("T"," ").slice(0,19),i=W(),a=X(),u=U(),f=t?i.filter(h=>h.level==="error"||h.level==="warn"):[...i],l=t?a.filter(h=>h.status===0||h.status>=400):[...a],p=[];p.push(`# Debug Snapshot — ${s}`),p.push(""),p.push(`**URL:** ${window.location.href}`),document.title&&p.push(`**Page:** ${document.title}`),p.push(`**Viewport:** ${window.innerWidth} x ${window.innerHeight}`),p.push(`**User-Agent:** ${navigator.userAgent}`),p.push(`**Cookies:** ${li()}`),p.push(""),o.trim()&&(p.push("## Notes"),p.push(o.trim()),p.push("")),e.length&&(p.push(`## Screenshots (${e.length} downloaded to ~/Downloads)`),p.push(e.map(h=>h.name).join(", ")),p.push(""));const c=t?`${f.length} warnings/errors of ${i.length} total`:`${f.length} entries`;if(p.push(`## Console — ${c}`),!f.length)p.push("(none)");else for(const h of f.slice(-60))p.push(`[${eo(h.timestamp)}] ${h.level.toUpperCase().padEnd(5)} ${h.args.join(" ")}`);p.push("");const g=t?`${l.length} errors of ${a.length} total`:`${l.length} requests`;if(p.push(`## Network — ${g}`),!l.length)p.push("(none)");else for(const h of l.slice(-40)){const x=h.status===0?"ERR":String(h.status);p.push(`${h.method.padEnd(6)} ${h.url} — ${x} (${h.duration}ms)`)}if(p.push(""),p.push(`## JavaScript Errors — ${u.length}`),!u.length)p.push("(none)");else for(const h of u){const x=h.type==="unhandledrejection"?"UnhandledRejection":"Error";if(p.push(`[${eo(h.timestamp)}] ${x}: ${h.message}`),h.source&&p.push(`  at ${h.source}:${h.line}:${h.col}`),h.stack){const b=h.stack.split(`
`).slice(1,7).map(S=>S.trim()).filter(Boolean);for(const S of b)p.push(`  ${S}`)}}return p.push(""),p.push("## Storage"),p.push(ii()),p.push(""),p.push("## Page Timing"),p.push(si()),p.join(`
`)}function ci(e){for(const t of e){const o=document.createElement("a");o.href=t.url,o.download=t.name,document.body.appendChild(o),o.click(),document.body.removeChild(o)}}async function di(e){return new Promise(t=>{const o=URL.createObjectURL(e),r=new Image;r.onload=()=>{const s=document.createElement("canvas");s.width=r.naturalWidth,s.height=r.naturalHeight,s.getContext("2d").drawImage(r,0,0),s.toBlob(i=>t(i??e),"image/webp",.82),URL.revokeObjectURL(o)},r.onerror=()=>{URL.revokeObjectURL(o),t(e)},r.src=o})}async function pi(){let e=null;try{e=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser"},preferCurrentTab:!0});const t=document.createElement("video");t.srcObject=e,t.muted=!0,await new Promise(u=>{t.onloadedmetadata=()=>{t.play().then(u).catch(u)}}),await new Promise(u=>setTimeout(u,120));const r=Math.min(1,1440/t.videoWidth),s=document.createElement("canvas");s.width=Math.round(t.videoWidth*r),s.height=Math.round(t.videoHeight*r);const i=s.getContext("2d");let a=null;return i&&(i.drawImage(t,0,0,s.width,s.height),a=await new Promise(u=>s.toBlob(u,"image/webp",.82))),t.srcObject=null,a}finally{e?.getTracks().forEach(t=>t.stop())}}const ui={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",boxSizing:"border-box"},fi={display:"flex",flexShrink:"0",borderBottom:`1px solid ${d.panelBorder}`};function to(e){return{flex:"1",padding:"7px 4px",border:"none",borderBottom:e?`2px solid ${d.fabBg}`:"2px solid transparent",backgroundColor:"transparent",color:e?d.textBright:d.textMuted,fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"color 0.1s",boxSizing:"border-box"}}const oo={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"8px",display:"flex",flexDirection:"column",gap:"8px",boxSizing:"border-box"},Fe={fontSize:"10px",fontWeight:"600",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.4px",marginBottom:"4px",display:"block"},gi={display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"4px"};function Ne(e,t){return{padding:"6px",borderRadius:"4px",backgroundColor:e>0?`${t}22`:d.toolBtnBg,border:`1px solid ${e>0?t:d.panelBorder}`,textAlign:"center"}}const je={fontSize:"16px",fontWeight:"700",color:d.textBright,display:"block"},We={fontSize:"9px",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},hi={border:`1px dashed ${d.panelBorder}`,borderRadius:"6px",padding:"10px",minHeight:"64px",display:"flex",flexDirection:"column",gap:"6px"},xi={display:"flex",flexWrap:"wrap",gap:"4px"},yi={position:"relative",width:"56px",height:"40px",borderRadius:"3px",overflow:"hidden",flexShrink:"0",border:`1px solid ${d.panelBorder}`,cursor:"default"},mi={width:"100%",height:"100%",objectFit:"cover"},bi={position:"absolute",top:"1px",right:"1px",width:"14px",height:"14px",borderRadius:"2px",border:"none",backgroundColor:"rgba(0,0,0,0.7)",color:"#fff",fontSize:"9px",lineHeight:"1",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},_i={fontSize:"11px",color:d.textMuted,textAlign:"center"},no={display:"flex",gap:"4px"};function ye(e="muted"){const t=e==="primary"?d.fabBg:e==="danger"?"#7f1d1d":d.toolBtnBg,o=e==="primary"?"#fff":e==="danger"?"#fca5a5":d.textMuted;return{flex:"1",padding:"5px 8px",borderRadius:"4px",border:"none",backgroundColor:t,color:o,fontSize:"11px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap"}}const Si=e=>({width:"100%",padding:"9px 12px",borderRadius:"6px",border:"none",backgroundColor:e?"#1e293b":d.fabBg,color:e?d.textMuted:"#fff",fontSize:"12px",fontWeight:"600",cursor:e?"not-allowed":"pointer"}),vi=e=>({padding:"3px 8px",borderRadius:"4px",border:`1px solid ${e?d.fabBg:d.panelBorder}`,backgroundColor:e?`${d.fabBg}33`:"transparent",color:e?"#93c5fd":d.textMuted,fontSize:"10px",cursor:"pointer",fontWeight:"500"}),wi={borderRadius:"6px",border:`1px solid ${d.panelBorder}`,backgroundColor:d.toolBtnBg,padding:"8px",display:"flex",flexDirection:"column",gap:"4px"},ki={fontSize:"10px",color:d.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Ci={fontSize:"10px",color:d.textMuted},$i={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px",padding:"20px",textAlign:"center"};function Bi(){const[e,t]=_("capture"),[o,r]=_([]),s=N(o),[i,a]=_(ni),[u,f]=_(!1),[l,p]=_(null),[c,g]=_(!0),[h,x]=_("");A(()=>{s.current=o},[o]),A(()=>()=>{for(const m of s.current)URL.revokeObjectURL(m.url)},[]),A(()=>{if(e!=="capture")return;function m(E){const w=E.clipboardData?.items;if(w){for(const B of Array.from(w))if(B.type.startsWith("image/")){const F=B.getAsFile();F&&di(F).then(se=>b(se))}}}return window.addEventListener("paste",m),()=>window.removeEventListener("paste",m)},[e]);function b(m){const E=ri++,w=URL.createObjectURL(m),B=m.type==="image/webp"?"webp":m.type==="image/jpeg"?"jpg":"png";r(F=>[...F,{id:E,url:w,blob:m,name:`screenshot-${E}.${B}`}])}const S=$(async()=>{f(!0);try{const m=await pi();m&&b(m)}catch{}f(!1)},[]),y=$(m=>{r(E=>{const w=E.find(B=>B.id===m);return w&&URL.revokeObjectURL(w.url),E.filter(B=>B.id!==m)})},[]),v=$(()=>{r(m=>{for(const E of m)URL.revokeObjectURL(E.url);return[]})},[]),C=$(m=>{p(m),setTimeout(()=>p(null),2e3)},[]),k=$(async()=>{const m=ai(o,c,h);o.length>0&&ci(o);const E={id:String(Date.now()),timestamp:Date.now(),pageUrl:window.location.href,report:m};a(w=>{const B=[E,...w].slice(0,oi);return Zt(B),B}),await navigator.clipboard.writeText(m),C(E.id)},[o,c,h,C]),I=$(async m=>{await navigator.clipboard.writeText(m.report),C(m.id)},[C]),H=$(m=>{a(E=>{const w=E.filter(B=>B.id!==m);return Zt(w),w})},[]),O=W(),P=X(),R=U(),L=O.filter(m=>m.level==="error"||m.level==="warn").length,M=P.filter(m=>m.status===0||m.status>=400).length;return n("div",{style:ui},n("div",{style:fi},n("button",{style:to(e==="capture"),onClick:()=>t("capture")},"Capture"),n("button",{style:to(e==="history"),onClick:()=>t("history")},`History (${i.length})`)),e==="capture"?n("div",{style:oo},n("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},n("span",{style:Fe},"Report data"),n("button",{style:vi(c),onClick:()=>g(m=>!m)},c?"Errors only":"All entries")),n("div",{style:gi},n("div",{style:Ne(L,"#eab308")},n("span",{style:je},String(L)),n("span",{style:We},"Console")),n("div",{style:Ne(M,"#ef4444")},n("span",{style:je},String(M)),n("span",{style:We},"Net Errors")),n("div",{style:Ne(R.length,"#ef4444")},n("span",{style:je},String(R.length)),n("span",{style:We},"JS Errors"))),n("div",null,n("span",{style:Fe},`Screenshots (${o.length})`),n("div",{style:hi},o.length===0?n("div",{style:_i},"Cmd+V to paste a screenshot",n("br",null),"or click Capture below"):n("div",{style:xi},o.map(m=>n("div",{key:m.id,style:yi,title:m.name},n("img",{src:m.url,style:mi,alt:m.name}),n("button",{style:bi,onClick:()=>y(m.id),title:"Remove"},"×")))),n("div",{style:no},n("button",{style:ye("muted"),onClick:S,disabled:u,title:"Capture current screen (opens share dialog)"},u?"Capturing...":"Capture Screen"),o.length>0?n("button",{style:ye("danger"),onClick:v,title:"Delete all screenshots"},"Delete All"):null))),n("div",null,n("span",{style:Fe},"Notes (optional)"),n("textarea",{value:h,onInput:m=>x(m.target.value),placeholder:"Add your own comments or context…",rows:3,style:{width:"100%",background:d.toolBtnBg,border:`1px solid ${d.panelBorder}`,borderRadius:"4px",color:d.text,fontSize:"11px",padding:"5px 6px",resize:"vertical",fontFamily:"system-ui, -apple-system, sans-serif",boxSizing:"border-box"}})),n("button",{style:Si(!1),onClick:k,title:"Copy debug report to clipboard. Screenshots (if any) download as files."},l?"Copied!":"Copy Report & Download Screenshots"),n("p",{style:{fontSize:10,color:d.textMuted,textAlign:"center",padding:"4px 8px"}},"Screenshots save to ~/Downloads · ",n("a",{style:{color:"#475569",textDecoration:"underline",cursor:"pointer"},href:"/settings/widget",target:"_blank"},"Set label in Settings"))):n("div",{style:{...oo,gap:"6px"}},i.length===0?n("div",{style:$i},"No snapshots yet. Copy a report from the Capture tab to save it here."):i.map(m=>{const E=new Date(m.timestamp),w=`${E.toLocaleDateString()} ${ie(E.getHours())}:${ie(E.getMinutes())}`,B=l===m.id;return n("div",{key:m.id,style:wi},n("div",{style:Ci},w),n("div",{style:ki,title:m.pageUrl},m.pageUrl),n("div",{style:no},n("button",{style:ye(B?"primary":"muted"),onClick:()=>I(m)},B?"Copied!":"Copy Report"),n("button",{style:ye("danger"),onClick:()=>H(m.id)},"Delete")))})))}let ro={localStorage:{},sessionStorage:{},cookies:""};function Ti(){const e={};try{for(let o=0;o<window.localStorage.length;o++){const r=window.localStorage.key(o);e[r]=window.localStorage.getItem(r)??""}}catch{}const t={};try{for(let o=0;o<window.sessionStorage.length;o++){const r=window.sessionStorage.key(o);t[r]=window.sessionStorage.getItem(r)??""}}catch{}return ro={localStorage:e,sessionStorage:t,cookies:document.cookie},ro}function Ei(){const[e,t]=_({localStorage:{},sessionStorage:{},cookies:""}),[o,r]=_("ls");A(()=>{t(Ti())},[]);const s=(u,f)=>n("button",{style:{padding:"4px 10px",fontSize:11,cursor:"pointer",border:"none",fontFamily:"inherit",background:o===u?d.toolBtnBgActive:"transparent",color:o===u?"#fff":d.textMuted,borderRadius:4},onClick:()=>r(u)},f),i=o==="ls"?e.localStorage:o==="ss"?e.sessionStorage:null,a=i?Object.entries(i):[];return n("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},n("div",{style:{display:"flex",gap:4,padding:"6px 8px",borderBottom:`1px solid ${d.panelBorder}`}},s("ls","localStorage"),s("ss","sessionStorage"),s("cookies","Cookies")),n("div",{style:{flex:1,overflowY:"auto"}},o==="cookies"?n("pre",{style:{padding:12,fontSize:10,color:d.text,fontFamily:"monospace",whiteSpace:"pre-wrap"}},e.cookies||"(empty)"):a.length===0?n("p",{style:{padding:12,fontSize:11,color:d.textMuted}},"(empty)"):a.map(([u,f])=>n("div",{key:u,style:{display:"flex",gap:8,padding:"4px 12px",borderBottom:`1px solid ${d.panelBorder}`,fontSize:11}},n("span",{style:{color:d.textMuted,flexShrink:0,width:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},u),n("span",{style:{color:d.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontFamily:"monospace"}},f)))))}const io=[],me=[];let so=!1;function be(e){io.push(e),me.forEach(t=>t())}function Ue(){return[...io]}function Ri(e){return me.push(e),()=>{const t=me.indexOf(e);t!==-1&&me.splice(t,1)}}function Mi(){if(so)return;so=!0,document.querySelectorAll("img").forEach(o=>{o.complete&&o.naturalWidth===0&&o.src&&be({severity:"error",category:"image",message:"Broken image",detail:o.src})});const e=document.querySelectorAll("img:not([alt])");e.length>0&&be({severity:"warn",category:"alt-text",message:`${e.length} image(s) missing alt text`});const t=o=>{be({severity:"error",category:"mixed-content",message:"Mixed content blocked",detail:o.blockedURI})};document.addEventListener("securitypolicyviolation",t);try{new PerformanceObserver(r=>{for(const s of r.getEntries()){const i=s;i.duration>2e3&&be({severity:"warn",category:"slow-resource",message:`Slow resource: ${Math.round(i.duration)}ms`,detail:i.name})}}).observe({type:"resource",buffered:!0})}catch{}}function zi(){const[e,t]=_([]),[o,r]=_(null);return A(()=>(t(Ue()),Ri(()=>t(Ue()))),[]),n("div",{style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden"}},n("div",{style:{display:"flex",alignItems:"center",padding:"4px 12px",borderBottom:`1px solid ${d.panelBorder}`,flexShrink:0}},n("span",{style:{fontSize:10,color:d.textMuted}},`${e.length} issue${e.length!==1?"s":""}`),n("button",{style:{marginLeft:"auto",background:"none",border:`1px solid ${d.panelBorder}`,borderRadius:4,color:d.textMuted,cursor:"pointer",fontSize:10,padding:"2px 8px",fontFamily:"inherit"},onClick:()=>navigator.clipboard.writeText($t(e)).catch(()=>{}),title:"Copy all health issues"},"Copy Health")),n("div",{style:{flex:1,overflowY:"auto"}},e.length===0?n("p",{style:{padding:16,fontSize:12,color:d.textMuted}},"No health issues detected."):e.map((s,i)=>n("div",{key:`${s.category}:${s.message}:${i}`,style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`,display:"flex",flexDirection:"column",gap:2,position:"relative"},onMouseEnter:()=>r(i),onMouseLeave:()=>r(null)},n("div",{style:{display:"flex",alignItems:"center",gap:6}},n("span",{style:{fontSize:10,fontWeight:600,color:s.severity==="error"?"#ef4444":"#f59e0b",textTransform:"uppercase"}},s.severity),n("span",{style:{fontSize:11,color:d.text}},s.message),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:o===i?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:a=>{a.stopPropagation(),navigator.clipboard.writeText(kt(s)).catch(()=>{})},title:"Copy row"},"⧇")),s.detail&&n("span",{style:{fontSize:10,color:d.textMuted,fontFamily:"monospace",marginLeft:12}},s.detail)))))}function Ii({apiBase:e,pinHash:t,projectId:o}){const[r,s]=_([]),[i,a]=_(null),[u,f]=_([]),l={"X-DevTools-Pin":t,"Content-Type":"application/json"};A(()=>{const b=new AbortController,S=b.signal;return fetch(`${e}/api/routines?projectId=${o}`,{headers:l,signal:S}).then(y=>{if(!y.ok)throw new Error(y.statusText);return y.json()}).then(s).catch(()=>{}),fetch(`${e}/api/routines/runs?projectId=${o}`,{headers:l,signal:S}).then(y=>{if(!y.ok)throw new Error(y.statusText);return y.json()}).then(async y=>{if(!y)return;a(y);const v=await fetch(`${e}/api/routines/${y.checklistId}/items`,{headers:l,signal:S}).then(C=>{if(!C.ok)throw new Error(C.statusText);return C.json()}).catch(()=>[]);f(v)}).catch(()=>{}),()=>b.abort()},[o,t]);async function p(b){try{const S=await fetch(`${e}/api/routines/${b}/runs`,{method:"POST",headers:l});if(!S.ok)return;const y=await S.json(),[v,C]=await Promise.all([fetch(`${e}/api/routines/runs/${y.id}`,{headers:l}).then(k=>{if(!k.ok)throw new Error(k.statusText);return k.json()}),fetch(`${e}/api/routines/${b}/items`,{headers:l}).then(k=>{if(!k.ok)throw new Error(k.statusText);return k.json()})]);a(v),f(C)}catch{}}async function c(b,S){i&&(await fetch(`${e}/api/routines/runs/${i.id}/items?itemId=${b}`,{method:"PUT",headers:l,body:JSON.stringify({checked:S})}).catch(()=>{}),a(y=>y?{...y,items:y.items?.map(v=>v.itemId===b?{...v,checked:S?1:0}:v)}:null))}const g=i?.items?.length??0,h=i?.items?.filter(b=>b.checked).length??0,x=g>0?Math.round(h/g*100):0;return i?n("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},n("div",{style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`}},n("div",{style:{height:4,background:"#1e293b",borderRadius:2,overflow:"hidden"}},n("div",{style:{height:"100%",background:"#6366f1",borderRadius:2,width:`${x}%`,transition:"width .2s"}})),n("span",{style:{fontSize:10,color:d.textMuted,marginTop:4,display:"block"}},`${h} / ${g} complete`)),n("div",{style:{flex:1,overflowY:"auto",padding:"4px 0"}},(i.items??[]).map(b=>{const S=u.find(y=>y.id===b.itemId);return n("div",{key:b.id,style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`}},n("div",{style:{display:"flex",alignItems:"center",gap:8}},n("input",{type:"checkbox",checked:b.checked===1,onChange:y=>c(b.itemId,y.target.checked)}),n("span",{style:{fontSize:11,color:b.checked?d.textMuted:d.text,textDecoration:b.checked?"line-through":"none"}},S?.name??`Item ${b.itemId}`)),S?.snippet&&n("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:4,marginLeft:22}},n("code",{style:{fontSize:10,color:"#94a3b8",background:"#0a0f1a",padding:"2px 6px",borderRadius:3,fontFamily:"monospace",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},S.snippet),n("button",{style:{background:"none",border:"none",color:d.textMuted,cursor:"pointer",fontSize:12},onClick:()=>navigator.clipboard.writeText(S.snippet??"").catch(()=>{})},"⧇")))})),n("button",{style:{margin:8,padding:"6px 0",border:`1px solid ${d.panelBorder}`,borderRadius:6,background:"none",color:d.textMuted,fontSize:11,cursor:"pointer",fontFamily:"inherit"},onClick:async()=>{i&&await fetch(`${e}/api/routines/runs/${i.id}`,{method:"PUT",headers:l,body:JSON.stringify({close:!0})}).catch(()=>{}),a(null)}},"Close Run")):n("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:8}},n("p",{style:{fontSize:11,color:d.textMuted}},"Start a checklist run:"),...r.map(b=>n("button",{key:b.id,style:{padding:"7px 12px",borderRadius:6,background:d.toolBtnBg,border:`1px solid ${d.panelBorder}`,color:d.text,fontSize:11,cursor:"pointer",textAlign:"left",fontFamily:"inherit"},onClick:()=>p(b.id)},"▶ "+b.name)),r.length===0&&n("p",{style:{fontSize:10,color:d.textMuted}},"No checklists. Create one in Dashboard → Routines."))}const Li=[{id:"console",label:"Console",icon:">_"},{id:"network",label:"Network",icon:"⇄"},{id:"errors",label:"Errors",icon:"⚠"},{id:"perf",label:"Perf",icon:"⚡"},{id:"storage",label:"Storage",icon:"◫"},{id:"dom",label:"DOM",icon:"⬡"},{id:"health",label:"Health",icon:"♥"},{id:"routines",label:"Routines",icon:"✓"},{id:"ai",label:"AI",icon:"✦"},{id:"bugs",label:"Bugs",icon:"⌖"},{id:"snapshot",label:"Snapshot",icon:"◎"}];function Di({projectId:e,isOpen:t,onClose:o,apiClient:r,apiBase:s,pinHash:i}){const[a,u]=_("errors"),[f,l]=_(!1),[p,c]=_(!1),[g,h]=_(""),[x,b]=_(""),[S,y]=_({errors:0,console:0}),v=typeof window<"u"?window.location.hostname:e,[C,k]=_(()=>({x:Math.max(0,window.innerWidth-Re-4),y:0})),[I,H]=_(!1),O=N(null);A(()=>{function w(){y({errors:U().length,console:W().filter(F=>F.level==="warn"||F.level==="error").length})}w();const B=setInterval(w,2e3);return()=>clearInterval(B)},[]);const P=$(w=>{w.target.closest("button")||(w.currentTarget.setPointerCapture(w.pointerId),O.current={startX:w.clientX,startY:w.clientY,originX:C.x,originY:C.y},H(!0))},[C.x,C.y]),R=$(w=>{if(!O.current)return;const{startX:B,startY:F,originX:se,originY:ms}=O.current,bs=window.innerWidth-Re,_s=window.innerHeight-48;k({x:Math.max(0,Math.min(bs,se+(w.clientX-B))),y:Math.max(0,Math.min(_s,ms+(w.clientY-F)))})},[]),L=$(()=>{O.current=null,H(!1)},[]),M=$(w=>{h(w.message),b(w.stack),u("bugs")},[]),m=$(w=>{a==="bugs"&&w!=="bugs"&&(h(""),b("")),u(w)},[a]);function E(){switch(a){case"console":return n(an,null);case"network":return n(Hn,null);case"errors":return n(ar,{onReportBug:M});case"bugs":return n(Yt,{apiClient:r,projectId:e,prefillTitle:g||void 0,prefillStack:x||void 0});case"perf":return n(ti,null);case"storage":return n(Ei,null);case"health":return n(zi,null);case"routines":return n(Ii,{apiBase:s,pinHash:i,projectId:e});case"ai":return n(Cr,{apiBase:s,pinHash:i});case"snapshot":return n(Bi,null);case"dom":return n("div",{style:{padding:"40px 20px",textAlign:"center",color:"#334155",fontSize:13}},"Click any element on the page to inspect it.");default:return n("div",{style:{padding:"40px 20px",textAlign:"center",color:"#334155",fontSize:13}},`${a} — coming soon`)}}return n("div",{style:{...ko,left:`${C.x}px`,top:`${C.y}px`,height:f?"auto":"min(85vh, 520px)",opacity:t?"1":"0",transition:"opacity 0.2s ease",pointerEvents:t?"auto":"none"},"aria-hidden":!t},n("div",{style:{...Co,cursor:I?"grabbing":"grab"},onPointerDown:P,onPointerMove:R,onPointerUp:L},n("div",{style:To},n("div",{style:Eo}),n("span",null,v)),n("div",{style:Ro},n("button",{style:zo,title:"Copy full page context for Claude",onClick:()=>{const w=qo([...W()],[...X()],[...U()],Ue());navigator.clipboard.writeText(w).catch(()=>{})}},"Copy for Claude"),n("button",{style:Mo,title:"Minimize",onClick:()=>l(w=>!w)},"—"),n("button",{style:{...$o,backgroundColor:p?"#ef4444":"transparent",color:p?"#fff":"#475569"},onClick:o,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),"aria-label":"Close panel",title:"Close"},"✕"))),f?null:n("div",{style:Io},Li.map(w=>{const B=a===w.id,F=w.id==="errors"?S.errors:w.id==="console"?S.console:0,se=w.id==="console";return n("button",{key:w.id,style:{...Lo,...B?Do:{},borderBottom:B?"2px solid #6366f1":"2px solid transparent"},onClick:()=>m(w.id)},w.icon," ",w.label,F>0?n("span",{style:se?{...St,background:"#d97706"}:St},F):null)})),f?null:n("div",{style:{...Bo,padding:0}},n("div",{style:{height:"100%",overflowY:"auto",padding:"10px 12px",fontSize:"13px",color:"#94a3b8"}},E())))}const lo={isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0,moved:!1},Hi=n("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},n("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}));function Pi({projectId:e,pinHash:t,apiBase:o,apiClient:r}){const[s,i]=_(!1),[a,u]=_(!1),[f,l]=_({x:0,y:0}),[p,c]=_(!1),g=N(lo),h=N(null),x=$(C=>{C.currentTarget.setPointerCapture(C.pointerId),g.current={isDragging:!0,startX:C.clientX,startY:C.clientY,offsetX:f.x,offsetY:f.y,moved:!1},c(!0)},[f.x,f.y]),b=$(C=>{const k=g.current;if(!k.isDragging)return;const I=C.clientX-k.startX,H=C.clientY-k.startY;Math.sqrt(I*I+H*H)>vo&&(g.current={...k,moved:!0}),l({x:k.offsetX+I,y:k.offsetY+H})},[]),S=$(()=>{const k=g.current.moved;g.current={...lo},c(!1),k||i(I=>!I)},[]),y=$(()=>{i(!1)},[]),v={...wo,bottom:`${20-f.y}px`,right:`${20-f.x}px`,backgroundColor:a?d.fabBgHover:d.fabBg,boxShadow:a?`0 6px 16px ${d.shadow}`:`0 4px 12px ${d.shadow}`,cursor:p?"grabbing":"grab"};return n("div",null,n("button",{ref:h,style:v,title:`DevTools (${e})`,"aria-label":"Toggle DevTools panel",onPointerDown:x,onPointerMove:b,onPointerUp:S,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)},Hi),n(Di,{projectId:e,isOpen:s,onClose:y,apiClient:r,apiBase:o,pinHash:t}))}function ao(e,t){async function o(r,s={}){return(await fetch(`${e}${r}`,{...s,headers:{"Content-Type":"application/json","X-DevTools-Pin":t,...s.headers}})).json()}return{createBug:r=>o("/api/bugs",{method:"POST",body:JSON.stringify(r)}),createDevLog:r=>o("/api/devlog",{method:"POST",body:JSON.stringify(r)}),sendEvents:r=>o("/api/widget/event",{method:"POST",body:JSON.stringify({events:r})})}}const Ai=console.warn.bind(console),Oi=1e4,Fi=50,Ni=200,ji=new Set(["log","info","warn","error","debug"]);function Wi(e,t,o){let r=[];function s(p){r.length>=Ni||(r.push(p),r.length>=Fi&&i())}function i(){if(r.length===0)return;const p=[...r];r=[],t.sendEvents(p).catch(c=>{Ai("[DevTools] Failed to send events:",c)})}function a(){if(r.length===0)return;const p=[...r];r=[];const c=JSON.stringify({events:p}),g=`${o}/api/widget/event`;try{const h=new Blob([c],{type:"application/json"});navigator.sendBeacon(g,h)}catch{}}let u=0;Nt(()=>{const c=U().filter(g=>g.id>u);if(c.length>0){u=c[c.length-1].id;for(const g of c)s({type:"error",title:g.message,content:g.stack,metadata:{errorType:g.type,source:g.source,line:g.line,col:g.col},projectId:e})}}),Kt(p=>{s({type:"perf",title:`${p.metric}: ${p.value}`,content:`Rating: ${p.rating}`,metadata:{metric:p.metric,value:p.value,rating:p.rating},projectId:e})});let f=0;vt(()=>{const c=W().filter(g=>g.id>f);if(c.length>0){f=c[c.length-1].id;for(const g of c){if(!ji.has(g.level))continue;const h=g.args.join(" ");h.includes("/api/widget/")||h.includes("/api/ai/analyze")||s({type:"console",title:h.slice(0,500),content:g.args.join(`
`).slice(0,2e3),metadata:{level:g.level,argCount:g.args.length},projectId:e})}}});let l=0;Mt(()=>{const c=X().filter(g=>g.id>l);if(c.length>0){l=c[c.length-1].id;for(const g of c)g.url.includes("/api/widget/")||g.url.includes("/api/bugs")||g.url.includes("/api/ai/analyze")||s({type:"network",title:`${g.method} ${g.url}`.slice(0,500),content:`${g.status} ${g.statusText} (${g.duration}ms)`,metadata:{method:g.method,url:g.url,status:g.status,statusText:g.statusText,duration:g.duration,requestSize:g.requestSize,responseSize:g.responseSize},projectId:e})}}),setInterval(i,Oi),window.addEventListener("beforeunload",a)}function Ui(e,t,o){jo(),fn(),On(),Mr();const r=ao(o,t);Wi(e,r,o)}const qi=1e4,Xi={position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"280px",backgroundColor:"#1a0000",border:"1px solid #dc2626",borderRadius:"8px",boxShadow:"0 8px 24px rgba(220, 38, 38, 0.3)",zIndex:"999997",fontFamily:"system-ui, -apple-system, sans-serif",color:d.text,overflow:"hidden",display:"flex",flexDirection:"column"},Yi={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:"rgba(220, 38, 38, 0.2)",borderBottom:"1px solid #dc2626",flexShrink:"0"},Vi={fontSize:"12px",fontWeight:"600",color:"#fca5a5"},Gi={display:"flex",gap:"6px"},co={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500"},Ji={...co,backgroundColor:"#dc2626",color:"#fff"},Ki={...co,backgroundColor:"rgba(255, 255, 255, 0.1)",color:d.textMuted},Qi={padding:"8px 12px",overflowY:"auto",flex:"1"},Zi={fontSize:"12px",fontWeight:"500",color:"#fca5a5",marginBottom:"6px",wordBreak:"break-word"},es={fontSize:"10px",fontFamily:"monospace",lineHeight:"1.6",color:d.textMuted},po={padding:"1px 0",wordBreak:"break-all"},ts={...po,opacity:"0.5"};function os(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function ns(e){return e.includes("node_modules")}function rs({onReportBug:e}){const[t,o]=_(null),r=N(null),s=$(()=>{o(null),r.current&&(clearTimeout(r.current),r.current=null)},[]),i=$(()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{o(null),r.current=null},qi)},[]);A(()=>(Ot(p=>{o(p),i()}),()=>{Ot(null),r.current&&clearTimeout(r.current)}),[i]);const a=$(()=>{r.current&&(clearTimeout(r.current),r.current=null)},[]),u=$(()=>{t&&i()},[t,i]),f=$(()=>{t&&(e(t),s())},[t,e,s]);if(!t)return null;const l=os(t.stack);return n("div",{style:Xi,onMouseEnter:a,onMouseLeave:u},n("div",{style:Yi},n("span",{style:Vi},t.type==="error"?"Uncaught Error":"Unhandled Rejection"),n("div",{style:Gi},n("button",{style:Ji,onClick:f},"Report Bug"),n("button",{style:Ki,onClick:s},"Dismiss"))),n("div",{style:Qi},n("div",{style:Zi},t.message),l.length>0?n("div",{style:es},l.slice(0,8).map((p,c)=>n("div",{key:c,style:ns(p)?ts:po},p))):null))}const is={position:"fixed",padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",zIndex:999999,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"4px",fontFamily:"system-ui, -apple-system, sans-serif"},ss={position:"fixed",width:"360px",maxHeight:"320px",backgroundColor:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:999999,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",overflow:"hidden"},ls={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:d.panelHeaderBg,borderBottom:`1px solid ${d.panelBorder}`,flexShrink:0},as={fontSize:"12px",fontWeight:"600",color:d.textBright},cs={width:"24px",height:"24px",borderRadius:"4px",border:"none",backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",lineHeight:"1"},ds={padding:"12px",overflowY:"auto",flex:1,fontSize:"13px",lineHeight:"1.5",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word"},ps={padding:"16px 12px",fontSize:"12px",color:d.textMuted,textAlign:"center"},us={padding:"12px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",margin:"8px 12px"};function uo(e,t,o,r){const s=Math.min(Math.max(e,8),window.innerWidth-o-8),i=Math.min(Math.max(t,8),window.innerHeight-r-8);return{x:s,y:i}}function fs({apiBase:e,pinHash:t}){const[o,r]=_(""),[s,i]=_(null),[a,u]=_(null),[f,l]=_("idle"),[p,c]=_(""),[g,h]=_(""),[x,b]=_(!1),[S,y]=_(!1),v=N(null),C=N(null),k=$(()=>{i(null),u(null),r(""),l("idle"),c(""),h(""),v.current&&(v.current.abort(),v.current=null)},[]);A(()=>{function P(R){if(R.target.closest?.("[data-quickai]"))return;const m=window.getSelection()?.toString().trim()??"";if(m.length>10){r(m);const E=uo(R.clientX,R.clientY-40,90,30);i(E)}else a||(i(null),r(""))}return document.addEventListener("mouseup",P),()=>document.removeEventListener("mouseup",P)},[a]),A(()=>{if(!a)return;function P(L){L.target.closest?.("[data-quickai]")||k()}const R=setTimeout(()=>{document.addEventListener("mousedown",P)},100);return()=>{clearTimeout(R),document.removeEventListener("mousedown",P)}},[a,k]);const I=$(async()=>{if(!o)return;const P=s?uo(s.x,s.y+36,360,320):{x:100,y:100};u(P),i(null),l("loading"),c(""),h(""),v.current&&v.current.abort();const R=new AbortController;v.current=R;try{const L=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:o,context:window.location.href}),signal:R.signal});if(!L.ok)throw new Error(`Analysis failed (${L.status})`);const M=L.body?.getReader();if(!M)throw new Error("No response stream");l("streaming");const m=new TextDecoder;for(;;){const{done:E,value:w}=await M.read();if(E)break;const B=m.decode(w,{stream:!0});B&&c(F=>F+B)}l("done")}catch(L){if(L.name==="AbortError")return;l("error");const M=L instanceof Error?L.message:"Analysis failed";h(M)}},[o,s,e,t]),H=s?n("button",{"data-quickai":"btn",style:{...is,left:`${s.x}px`,top:`${s.y}px`,backgroundColor:x?d.fabBgHover:d.fabBg},onClick:I,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)},"✨ Analyze"):null,O=a?n("div",{ref:C,"data-quickai":"popup",style:{...ss,left:`${a.x}px`,top:`${a.y}px`}},n("div",{style:ls},n("span",{style:as},"AI Analysis"),n("button",{style:{...cs,backgroundColor:S?d.closeBtnHover:"transparent",color:S?"#fff":d.textMuted},onClick:k,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),"aria-label":"Close"},"✕")),f==="loading"?n("div",{style:ps},"Analyzing..."):f==="error"?n("div",{style:us},g):n("div",{style:ds},p||"Waiting...")):null;return n("div",{"data-quickai":"root"},H,O)}const gs=["All","Standards","Git","API","Deploy"];function hs({apiBase:e,pinHash:t,onClose:o}){const[r,s]=_(""),[i,a]=_("All"),[u,f]=_([]),[l,p]=_(null),c=N(null);A(()=>{fetch(`${e}/api/hub/kb`,{headers:{"X-DevTools-Pin":t}}).then(x=>{if(!x.ok)throw new Error(x.statusText);return x.json()}).then(x=>{Array.isArray(x)&&f(x)}).catch(()=>{}),setTimeout(()=>c.current?.focus(),50)},[e,t]);function g(x){navigator.clipboard.writeText(x.snippet??x.title).then(()=>{p(x.id),setTimeout(()=>p(null),1500)}).catch(()=>{})}const h=u.filter(x=>{const b=i==="All"||x.type===i,S=!r||x.title.toLowerCase().includes(r.toLowerCase())||(x.snippet??"").toLowerCase().includes(r.toLowerCase());return b&&S});return n("div",{style:{position:"fixed",inset:0,zIndex:2147483647,background:"rgba(0,0,0,0.75)",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:96},onClick:o},n("div",{style:{width:"100%",maxWidth:600,background:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:8,overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.8)",fontFamily:"system-ui,sans-serif"},onClick:x=>x.stopPropagation()},n("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",borderBottom:`1px solid ${d.panelBorder}`}},n("input",{ref:c,value:r,style:{flex:1,background:"transparent",border:"none",outline:"none",color:d.text,fontSize:13,fontFamily:"inherit"},placeholder:"Search knowledge base...",onInput:x=>s(x.target.value)}),n("button",{style:{background:"none",border:"none",color:d.textMuted,cursor:"pointer",fontSize:16},onClick:o},"✕")),n("div",{style:{display:"flex",gap:4,padding:"6px 10px",borderBottom:`1px solid ${d.panelBorder}`}},gs.map(x=>n("button",{key:x,style:{padding:"2px 10px",borderRadius:99,fontSize:11,cursor:"pointer",border:"none",fontFamily:"inherit",background:i===x?d.toolBtnBgActive:d.toolBtnBg,color:i===x?"#fff":d.textMuted},onClick:()=>a(x)},x))),n("div",{style:{maxHeight:360,overflowY:"auto"}},h.length===0?n("p",{style:{padding:"24px 14px",textAlign:"center",color:d.textMuted,fontSize:12}},"No results"):h.map(x=>n("div",{key:x.id,style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"10px 14px",borderBottom:`1px solid ${d.panelBorder}`}},n("div",{style:{display:"flex",flexDirection:"column",gap:3,minWidth:0}},n("span",{style:{fontSize:12,color:d.text,fontWeight:500}},x.title),x.description&&n("span",{style:{fontSize:10,color:d.textMuted}},x.description),x.snippet&&n("code",{style:{fontSize:10,background:"#0a0f1a",color:"#94a3b8",padding:"2px 6px",borderRadius:4,fontFamily:"monospace",maxWidth:400,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},x.snippet)),x.snippet&&n("button",{style:{background:"none",border:"none",cursor:"pointer",color:l===x.id?"#34d399":d.textMuted,fontSize:14,marginLeft:8,flexShrink:0},onClick:()=>g(x)},"⧉"))))))}const qe=document.currentScript,xs=[":host { all: initial; }","#devtools-root { font-family: system-ui, sans-serif; }"].join(`
`);function ys({projectId:e,pinHash:t,apiBase:o,apiClient:r}){const[s,i]=_(null),a=$(f=>{i(f)},[]),u=$(()=>{i(null)},[]);return n("div",null,n(Pi,{projectId:e,pinHash:t,apiBase:o,apiClient:r}),n(rs,{onReportBug:a}),n(fs,{apiBase:o,pinHash:t}),s?n("div",{style:{position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"400px",backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:"999997",overflow:"auto"}},n(Yt,{apiClient:r,projectId:e,prefillTitle:s.message,prefillStack:s.stack,onClose:u})):null)}function fo(){if(document.getElementById("devtools-widget"))return;const e=qe?.getAttribute("data-project")||"default",t=qe?.getAttribute("data-pin")||"",o=qe?.src.replace("/widget.js","")||"",r=ao(o,t),s=document.createElement("div");s.id="devtools-widget",document.body.appendChild(s);const i=s.attachShadow({mode:"open"}),a=document.createElement("style");a.textContent=xs,i.appendChild(a);const u=document.createElement("div");u.id="devtools-root",i.appendChild(u),lt(n(ys,{projectId:e,pinHash:t,apiBase:o,apiClient:r}),u),Ui(e,t,o),Mi();let f=null;document.addEventListener("keydown",l=>{l.key.toLowerCase()==="k"&&l.metaKey&&l.shiftKey&&(l.preventDefault(),f?(i.removeChild(f),f=null):(f=document.createElement("div"),i.appendChild(f),lt(n(hs,{apiBase:o,pinHash:t,onClose:()=>{f&&(i.removeChild(f),f=null)}}),f))),l.key==="Escape"&&f&&(i.removeChild(f),f=null)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",fo):fo()})();
