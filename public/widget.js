(function(){"use strict";var ie,C,Ae,W,Fe,Ne,We,je,me,ye,be,q={},Ue=[],on=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,le=Array.isArray;function F(e,t){for(var n in t)e[n]=t[n];return e}function Se(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function s(e,t,n){var o,i,r,l={};for(r in t)r=="key"?o=t[r]:r=="ref"?i=t[r]:l[r]=t[r];if(arguments.length>2&&(l.children=arguments.length>3?ie.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)l[r]===void 0&&(l[r]=e.defaultProps[r]);return ae(e,l,o,i,null)}function ae(e,t,n,o,i){var r={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Ae,__i:-1,__u:0};return i==null&&C.vnode!=null&&C.vnode(r),r}function ce(e){return e.children}function de(e,t){this.props=e,this.context=t}function j(e,t){if(t==null)return e.__?j(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?j(e):null}function qe(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return qe(e)}}function Xe(e){(!e.__d&&(e.__d=!0)&&W.push(e)&&!pe.__r++||Fe!=C.debounceRendering)&&((Fe=C.debounceRendering)||Ne)(pe)}function pe(){for(var e,t,n,o,i,r,l,c=1;W.length;)W.length>c&&W.sort(We),e=W.shift(),c=W.length,e.__d&&(n=void 0,o=void 0,i=(o=(t=e).__v).__e,r=[],l=[],t.__P&&((n=F({},o)).__v=o.__v+1,C.vnode&&C.vnode(n),ve(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[i]:null,r,i??j(o),!!(32&o.__u),l),n.__v=o.__v,n.__.__k[n.__i]=n,Ke(r,n,l),o.__e=o.__=null,n.__e!=i&&qe(n)));pe.__r=0}function Ve(e,t,n,o,i,r,l,c,h,d,u){var a,f,g,m,k,v,x,b=o&&o.__k||Ue,$=t.length;for(h=rn(n,t,b,h,$),a=0;a<$;a++)(g=n.__k[a])!=null&&(f=g.__i==-1?q:b[g.__i]||q,g.__i=a,v=ve(e,g,f,i,r,l,c,h,d,u),m=g.__e,g.ref&&f.ref!=g.ref&&(f.ref&&ke(f.ref,null,g),u.push(g.ref,g.__c||m,g)),k==null&&m!=null&&(k=m),(x=!!(4&g.__u))||f.__k===g.__k?h=Ye(g,h,e,x):typeof g.type=="function"&&v!==void 0?h=v:m&&(h=m.nextSibling),g.__u&=-7);return n.__e=k,h}function rn(e,t,n,o,i){var r,l,c,h,d,u=n.length,a=u,f=0;for(e.__k=new Array(i),r=0;r<i;r++)(l=t[r])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=e.__k[r]=ae(null,l,null,null,null):le(l)?l=e.__k[r]=ae(ce,{children:l},null,null,null):l.constructor===void 0&&l.__b>0?l=e.__k[r]=ae(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):e.__k[r]=l,h=r+f,l.__=e,l.__b=e.__b+1,c=null,(d=l.__i=sn(l,n,h,a))!=-1&&(a--,(c=n[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(i>u?f--:i<u&&f++),typeof l.type!="function"&&(l.__u|=4)):d!=h&&(d==h-1?f--:d==h+1?f++:(d>h?f--:f++,l.__u|=4))):e.__k[r]=null;if(a)for(r=0;r<u;r++)(c=n[r])!=null&&(2&c.__u)==0&&(c.__e==o&&(o=j(c)),Qe(c,c));return o}function Ye(e,t,n,o){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=Ye(i[r],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=j(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function sn(e,t,n,o){var i,r,l,c=e.key,h=e.type,d=t[n],u=d!=null&&(2&d.__u)==0;if(d===null&&c==null||u&&c==d.key&&h==d.type)return n;if(o>(u?1:0)){for(i=n-1,r=n+1;i>=0||r<t.length;)if((d=t[l=i>=0?i--:r++])!=null&&(2&d.__u)==0&&c==d.key&&h==d.type)return l}return-1}function Ge(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||on.test(t)?n:n+"px"}function ue(e,t,n,o,i){var r,l;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Ge(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||Ge(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")r=t!=(t=t.replace(je,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o?n.u=o.u:(n.u=me,e.addEventListener(t,r?be:ye,r)):e.removeEventListener(t,r?be:ye,r);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Je(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=me++;else if(t.t<n.u)return;return n(C.event?C.event(t):t)}}}function ve(e,t,n,o,i,r,l,c,h,d){var u,a,f,g,m,k,v,x,b,$,y,E,H,A,P,I,L,M=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(h=!!(32&n.__u),r=[c=t.__e=n.__e]),(u=C.__b)&&u(t);e:if(typeof M=="function")try{if(x=t.props,b="prototype"in M&&M.prototype.render,$=(u=M.contextType)&&o[u.__c],y=u?$?$.props.value:u.__:o,n.__c?v=(a=t.__c=n.__c).__=a.__E:(b?t.__c=a=new M(x,y):(t.__c=a=new de(x,y),a.constructor=M,a.render=an),$&&$.sub(a),a.state||(a.state={}),a.__n=o,f=a.__d=!0,a.__h=[],a._sb=[]),b&&a.__s==null&&(a.__s=a.state),b&&M.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=F({},a.__s)),F(a.__s,M.getDerivedStateFromProps(x,a.__s))),g=a.props,m=a.state,a.__v=t,f)b&&M.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),b&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(b&&M.getDerivedStateFromProps==null&&x!==g&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(x,y),t.__v==n.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(x,a.__s,y)===!1){for(t.__v!=n.__v&&(a.props=x,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(O){O&&(O.__=t)}),E=0;E<a._sb.length;E++)a.__h.push(a._sb[E]);a._sb=[],a.__h.length&&l.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(x,a.__s,y),b&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(g,m,k)})}if(a.context=y,a.props=x,a.__P=e,a.__e=!1,H=C.__r,A=0,b){for(a.state=a.__s,a.__d=!1,H&&H(t),u=a.render(a.props,a.state,a.context),P=0;P<a._sb.length;P++)a.__h.push(a._sb[P]);a._sb=[]}else do a.__d=!1,H&&H(t),u=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++A<25);a.state=a.__s,a.getChildContext!=null&&(o=F(F({},o),a.getChildContext())),b&&!f&&a.getSnapshotBeforeUpdate!=null&&(k=a.getSnapshotBeforeUpdate(g,m)),I=u,u!=null&&u.type===ce&&u.key==null&&(I=Ze(u.props.children)),c=Ve(e,le(I)?I:[I],t,n,o,i,r,l,c,h,d),a.base=t.__e,t.__u&=-161,a.__h.length&&l.push(a),v&&(a.__E=a.__=null)}catch(O){if(t.__v=null,h||r!=null)if(O.then){for(t.__u|=h?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;r[r.indexOf(c)]=null,t.__e=c}else{for(L=r.length;L--;)Se(r[L]);we(t)}else t.__e=n.__e,t.__k=n.__k,O.then||we(t);C.__e(O,t,n)}else r==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=ln(n.__e,t,n,o,i,r,l,h,d);return(u=C.diffed)&&u(t),128&t.__u?void 0:c}function we(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(we)}function Ke(e,t,n){for(var o=0;o<n.length;o++)ke(n[o],n[++o],n[++o]);C.__c&&C.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(r){r.call(i)})}catch(r){C.__e(r,i.__v)}})}function Ze(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:le(e)?e.map(Ze):F({},e)}function ln(e,t,n,o,i,r,l,c,h){var d,u,a,f,g,m,k,v=n.props||q,x=t.props,b=t.type;if(b=="svg"?i="http://www.w3.org/2000/svg":b=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(d=0;d<r.length;d++)if((g=r[d])&&"setAttribute"in g==!!b&&(b?g.localName==b:g.nodeType==3)){e=g,r[d]=null;break}}if(e==null){if(b==null)return document.createTextNode(x);e=document.createElementNS(i,b,x.is&&x),c&&(C.__m&&C.__m(t,r),c=!1),r=null}if(b==null)v===x||c&&e.data==x||(e.data=x);else{if(r=r&&ie.call(e.childNodes),!c&&r!=null)for(v={},d=0;d<e.attributes.length;d++)v[(g=e.attributes[d]).name]=g.value;for(d in v)if(g=v[d],d!="children"){if(d=="dangerouslySetInnerHTML")a=g;else if(!(d in x)){if(d=="value"&&"defaultValue"in x||d=="checked"&&"defaultChecked"in x)continue;ue(e,d,null,g,i)}}for(d in x)g=x[d],d=="children"?f=g:d=="dangerouslySetInnerHTML"?u=g:d=="value"?m=g:d=="checked"?k=g:c&&typeof g!="function"||v[d]===g||ue(e,d,g,v[d],i);if(u)c||a&&(u.__html==a.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(a&&(e.innerHTML=""),Ve(t.type=="template"?e.content:e,le(f)?f:[f],t,n,o,b=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,l,r?r[0]:n.__k&&j(n,0),c,h),r!=null)for(d=r.length;d--;)Se(r[d]);c||(d="value",b=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[d]||b=="progress"&&!m||b=="option"&&m!=v[d])&&ue(e,d,m,v[d],i),d="checked",k!=null&&k!=e[d]&&ue(e,d,k,v[d],i))}return e}function ke(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(i){C.__e(i,n)}}function Qe(e,t,n){var o,i;if(C.unmount&&C.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||ke(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){C.__e(r,t)}o.base=o.__P=null}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&Qe(o[i],t,n||typeof e.type!="function");n||Se(e.__e),e.__c=e.__=e.__e=void 0}function an(e,t,n){return this.constructor(e,n)}function cn(e,t,n){var o,i,r,l;t==document&&(t=document.documentElement),C.__&&C.__(e,t),i=(o=!1)?null:t.__k,r=[],l=[],ve(t,e=t.__k=s(ce,null,[e]),i||q,q,t.namespaceURI,i?null:t.firstChild?ie.call(t.childNodes):null,r,i?i.__e:t.firstChild,o,l),Ke(r,e,l)}ie=Ue.slice,C={__e:function(e,t,n,o){for(var i,r,l;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(e)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,o||{}),l=i.__d),l)return i.__E=i}catch(c){e=c}throw e}},Ae=0,de.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=F({},this.state),typeof e=="function"&&(e=e(F({},n),this.props)),e&&F(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Xe(this))},de.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Xe(this))},de.prototype.render=ce,W=[],Ne=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,We=function(e,t){return e.__v.__b-t.__v.__b},pe.__r=0,je=/(PointerCapture)$|Capture$/i,me=0,ye=Je(!1),be=Je(!0);var X,T,Ce,et,V=0,tt=[],R=C,nt=R.__b,ot=R.__r,rt=R.diffed,st=R.__c,it=R.unmount,lt=R.__;function $e(e,t){R.__h&&R.__h(T,e,V||t),V=0;var n=T.__H||(T.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function S(e){return V=1,dn(pt,e)}function dn(e,t,n){var o=$e(X++,2);if(o.t=e,!o.__c&&(o.__=[pt(void 0,t),function(c){var h=o.__N?o.__N[0]:o.__[0],d=o.t(h,c);h!==d&&(o.__N=[d,o.__[1]],o.__c.setState({}))}],o.__c=T,!T.__f)){var i=function(c,h,d){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!r||r.call(this,c,h,d);var a=o.__c.props!==c;return u.forEach(function(f){if(f.__N){var g=f.__[0];f.__=f.__N,f.__N=void 0,g!==f.__[0]&&(a=!0)}}),r&&r.call(this,c,h,d)||a};T.__f=!0;var r=T.shouldComponentUpdate,l=T.componentWillUpdate;T.componentWillUpdate=function(c,h,d){if(this.__e){var u=r;r=void 0,i(c,h,d),r=u}l&&l.call(this,c,h,d)},T.shouldComponentUpdate=i}return o.__N||o.__}function N(e,t){var n=$e(X++,3);!R.__s&&dt(n.__H,t)&&(n.__=e,n.u=t,T.__H.__h.push(n))}function U(e){return V=5,at(function(){return{current:e}},[])}function at(e,t){var n=$e(X++,7);return dt(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function w(e,t){return V=8,at(function(){return e},t)}function pn(){for(var e;e=tt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(fe),e.__H.__h.forEach(Ee),e.__H.__h=[]}catch(t){e.__H.__h=[],R.__e(t,e.__v)}}R.__b=function(e){T=null,nt&&nt(e)},R.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),lt&&lt(e,t)},R.__r=function(e){ot&&ot(e),X=0;var t=(T=e.__c).__H;t&&(Ce===T?(t.__h=[],T.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(fe),t.__h.forEach(Ee),t.__h=[],X=0)),Ce=T},R.diffed=function(e){rt&&rt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(tt.push(t)!==1&&et===R.requestAnimationFrame||((et=R.requestAnimationFrame)||un)(pn)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Ce=T=null},R.__c=function(e,t){t.some(function(n){try{n.__h.forEach(fe),n.__h=n.__h.filter(function(o){return!o.__||Ee(o)})}catch(o){t.some(function(i){i.__h&&(i.__h=[])}),t=[],R.__e(o,n.__v)}}),st&&st(e,t)},R.unmount=function(e){it&&it(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{fe(o)}catch(i){t=i}}),n.__H=void 0,t&&R.__e(t,n.__v))};var ct=typeof requestAnimationFrame=="function";function un(e){var t,n=function(){clearTimeout(o),ct&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);ct&&(t=requestAnimationFrame(n))}function fe(e){var t=T,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),T=t}function Ee(e){var t=T;e.__c=e.__(),T=t}function dt(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function pt(e,t){return typeof t=="function"?t(e):t}const p={fabBg:"#3b82f6",fabBgHover:"#2563eb",panelBg:"#0f172a",panelBorder:"#1e293b",panelHeaderBg:"#1e293b",toolBtnBg:"#1e293b",toolBtnBgHover:"#334155",toolBtnBgActive:"#3b82f6",text:"#e2e8f0",textMuted:"#94a3b8",textBright:"#f8fafc",closeBtnHover:"#ef4444",shadow:"rgba(0, 0, 0, 0.4)"},ut=48,ft=300,fn=5,gn={position:"fixed",width:`${ut}px`,height:`${ut}px`,borderRadius:"50%",backgroundColor:p.fabBg,color:"#fff",border:"none",cursor:"grab",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999,boxShadow:`0 4px 12px ${p.shadow}`,transition:"background-color 0.15s ease, box-shadow 0.15s ease",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},hn={position:"fixed",top:"0",right:"0",width:`${ft}px`,height:"100vh",backgroundColor:p.panelBg,borderLeft:`1px solid ${p.panelBorder}`,zIndex:999998,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",color:p.text,boxShadow:`-4px 0 20px ${p.shadow}`},xn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:p.panelHeaderBg,borderBottom:`1px solid ${p.panelBorder}`,flexShrink:"0"},_n={fontSize:"14px",fontWeight:"600",color:p.textBright,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"220px"},mn={width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:"transparent",color:p.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",lineHeight:"1",flexShrink:"0"},yn={display:"flex",flexDirection:"column",gap:"4px",padding:"12px",overflowY:"auto",flex:"1"},bn={display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"8px",border:"none",backgroundColor:p.toolBtnBg,color:p.text,cursor:"pointer",fontSize:"13px",fontWeight:"500",textAlign:"left",transition:"background-color 0.12s ease",width:"100%"},Sn={width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",flexShrink:"0"},vn={flex:"1",padding:"16px",overflowY:"auto",fontSize:"13px",color:p.textMuted,display:"flex",alignItems:"center",justifyContent:"center"},wn="translateX(0)",kn=`translateX(${ft}px)`,Cn=500;let $n=1;const Y=[],G=[];function En(){const e=new WeakSet;return(t,n)=>{if(typeof n=="object"&&n!==null){if(e.has(n))return"[Circular]";e.add(n)}return n}}function Bn(e){if(e===null)return"null";if(e===void 0)return"undefined";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(e instanceof Error)return`${e.name}: ${e.message}`;try{return JSON.stringify(e,En(),2)}catch{return String(e)}}function Tn(e,t){const n={id:$n++,level:e,args:t.map(Bn),timestamp:Date.now()};Y.length>=Cn&&Y.shift(),Y.push(n);for(const o of G)o()}function J(){return[...Y]}function Rn(){Y.length=0;for(const e of G)e()}function gt(e){return G.push(e),()=>{const t=G.indexOf(e);t!==-1&&G.splice(t,1)}}function Mn(){const e=["log","warn","error","info"];for(const t of e){const n=console[t].bind(console);console[t]=(...o)=>{Tn(t,o),n(...o)}}}const ht={log:"#94a3b8",info:"#3b82f6",warn:"#eab308",error:"#ef4444"},zn={log:"rgba(148, 163, 184, 0.15)",info:"rgba(59, 130, 246, 0.15)",warn:"rgba(234, 179, 8, 0.15)",error:"rgba(239, 68, 68, 0.15)"},xt=["log","info","warn","error"];function Dn(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0"),r=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${o}:${i}.${r}`}const Hn={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Ln={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},In={display:"flex",gap:"4px",flexWrap:"wrap"},Pn={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:p.toolBtnBg,color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},On={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},An={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all"},Fn={display:"flex",alignItems:"center",gap:"6px"},Nn={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},Wn={fontSize:"10px",color:p.textMuted,flexShrink:"0"},jn={color:p.text,whiteSpace:"pre-wrap",lineHeight:"1.4"},Un={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px"};function qn(e,t){return{padding:"2px 6px",borderRadius:"3px",border:"none",backgroundColor:e?ht[t]:p.toolBtnBg,color:e?"#fff":p.textMuted,cursor:"pointer",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"}}function Xn(){const[e,t]=S(J),[n,o]=S(new Set(xt));N(()=>gt(()=>{t(J())}),[]);const i=w(()=>{Rn(),t([])},[]),r=w(c=>{o(h=>{const d=new Set(h);return d.has(c)?d.delete(c):d.add(c),d})},[]),l=e.filter(c=>n.has(c.level));return s("div",{style:Hn},s("div",{style:Ln},s("div",{style:In},xt.map(c=>s("button",{key:c,style:qn(n.has(c),c),onClick:()=>r(c),title:`Toggle ${c} entries`},c))),s("button",{style:Pn,onClick:i,title:"Clear console entries"},"Clear")),l.length===0?s("div",{style:Un},"No console entries"):s("div",{style:On},l.map(c=>s("div",{key:c.id,style:{...An,backgroundColor:zn[c.level]}},s("div",{style:Fn},s("span",{style:{...Nn,backgroundColor:ht[c.level],color:"#fff"}},c.level),s("span",{style:Wn},Dn(c.timestamp))),s("div",{style:jn},c.args.join(" "))))))}const Vn=200;let Be=1;const K=[],Z=[];function Yn(e){if(!e.response)return 0;if(typeof e.response=="string")return e.response.length;if(e.response instanceof Blob)return e.response.size;if(e.response instanceof ArrayBuffer)return e.response.byteLength;try{return JSON.stringify(e.response).length}catch{return 0}}function _t(e){if(e==null)return 0;if(typeof e=="string")return e.length;if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(e instanceof FormData){let t=0;return e.forEach(n=>{typeof n=="string"?t+=n.length:n instanceof Blob&&(t+=n.size)}),t}return e instanceof URLSearchParams?e.toString().length:0}function mt(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function Te(e){K.length>=Vn&&K.shift(),K.push(e);for(const t of Z)t()}function Q(){return[...K]}function Gn(){K.length=0;for(const e of Z)e()}function yt(e){return Z.push(e),()=>{const t=Z.indexOf(e);t!==-1&&Z.splice(t,1)}}function Jn(){const e=XMLHttpRequest.prototype,t=e.open,n=e.setRequestHeader,o=e.send,i=new WeakMap;e.open=function(r,l,...c){return i.set(this,{method:r.toUpperCase(),url:typeof l=="string"?l:String(l),requestHeaders:{},requestSize:0,startTime:0,timestamp:0}),t.call(this,r,l,...c)},e.setRequestHeader=function(r,l){const c=i.get(this);return c&&(c.requestHeaders[r]=l),n.call(this,r,l)},e.send=function(r){const l=i.get(this);return l&&(l.requestSize=_t(r??null),l.startTime=performance.now(),l.timestamp=Date.now(),this.addEventListener("loadend",()=>{const c=performance.now()-l.startTime,h={},d=this.getAllResponseHeaders();for(const a of d.trim().split(`\r
`)){const f=a.indexOf(": ");f!==-1&&(h[a.slice(0,f).toLowerCase()]=a.slice(f+2))}const u={id:Be++,method:l.method,url:l.url,status:this.status,statusText:this.statusText||(this.status===0?"Network Error":""),duration:Math.round(c),requestSize:l.requestSize,responseSize:Yn(this),requestHeaders:l.requestHeaders,responseHeaders:h,startTime:l.startTime,timestamp:l.timestamp};Te(u),i.delete(this)})),o.call(this,r)}}function Kn(){const e=window.fetch.bind(window);window.fetch=async(t,n)=>{const o=(n?.method??"GET").toUpperCase(),i=typeof t=="string"?t:t instanceof URL?t.href:t.url,r=_t(n?.body??null);let l={};if(n?.headers)if(n.headers instanceof Headers)l=mt(n.headers);else if(Array.isArray(n.headers))for(const[d,u]of n.headers)l[d]=u;else l={...n.headers};const c=performance.now(),h=Date.now();try{const d=await e(t,n),u=performance.now()-c,a=d.clone();let f=0;try{f=(await a.blob()).size}catch{f=0}const g={id:Be++,method:o,url:i,status:d.status,statusText:d.statusText,duration:Math.round(u),requestSize:r,responseSize:f,requestHeaders:l,responseHeaders:mt(d.headers),startTime:c,timestamp:h};return Te(g),d}catch(d){const u=performance.now()-c,a={id:Be++,method:o,url:i,status:0,statusText:"Network Error",duration:Math.round(u),requestSize:r,responseSize:0,requestHeaders:l,responseHeaders:{},startTime:c,timestamp:h};throw Te(a),d}},Jn()}const Zn={GET:"#22c55e",POST:"#3b82f6",PUT:"#eab308",DELETE:"#ef4444",PATCH:"#a855f7"},Qn="#94a3b8";function eo(e){return Zn[e]??Qn}function to(e){return e===0?"#ef4444":e<300?"#22c55e":e<400?"#3b82f6":e<500?"#eab308":"#ef4444"}function bt(e){return e===0?"rgba(239, 68, 68, 0.15)":e<300?"rgba(34, 197, 94, 0.15)":e<400?"rgba(59, 130, 246, 0.15)":e<500?"rgba(234, 179, 8, 0.15)":"rgba(239, 68, 68, 0.15)"}function St(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0"),r=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${o}:${i}.${r}`}function vt(e){return e<1e3?`${e}ms`:`${(e/1e3).toFixed(1)}s`}function wt(e){return e===0?"0 B":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function no(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}const oo={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},ro={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},so={fontSize:"10px",color:p.textMuted,flexShrink:"0"},io={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:p.toolBtnBg,color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},lo={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},ao={display:"flex",flexDirection:"column",padding:"5px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",cursor:"pointer",transition:"background-color 0.1s ease"},co={display:"flex",alignItems:"center",gap:"6px",minWidth:"0"},po={padding:"1px 5px",borderRadius:"3px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},uo={padding:"1px 4px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",flexShrink:"0"},fo={flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:p.text,fontSize:"10px",minWidth:"0"},go={fontSize:"10px",color:p.textMuted,flexShrink:"0",textAlign:"right",minWidth:"40px"},ho={fontSize:"10px",color:p.textMuted,flexShrink:"0"},xo={marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5",wordBreak:"break-all"},Re={fontWeight:"600",color:p.textBright,marginBottom:"2px",marginTop:"6px",display:"block"},_o={color:p.textMuted},kt={display:"flex",gap:"4px",color:p.textMuted,padding:"1px 0"},Ct={color:"#93c5fd",flexShrink:"0"},mo={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px"};function yo({entry:e}){const t=Object.entries(e.requestHeaders),n=Object.entries(e.responseHeaders);return s("div",{style:xo},s("span",{style:{...Re,marginTop:"0"}},"General"),s("div",{style:_o},s("div",null,`URL: ${e.url}`),s("div",null,`Method: ${e.method}`),s("div",null,`Status: ${e.status} ${e.statusText}`),s("div",null,`Duration: ${vt(e.duration)}`),s("div",null,`Request size: ${wt(e.requestSize)}`),s("div",null,`Response size: ${wt(e.responseSize)}`),s("div",null,`Time: ${St(e.timestamp)}`)),t.length>0?s("div",null,s("span",{style:Re},"Request Headers"),t.map(([o,i])=>s("div",{key:o,style:kt},s("span",{style:Ct},`${o}:`),s("span",null,i)))):null,n.length>0?s("div",null,s("span",{style:Re},"Response Headers"),n.map(([o,i])=>s("div",{key:o,style:kt},s("span",{style:Ct},`${o}:`),s("span",null,i)))):null)}function bo(){const[e,t]=S(Q),[n,o]=S(null);N(()=>yt(()=>{t(Q())}),[]);const i=w(()=>{Gn(),t([]),o(null)},[]),r=w(l=>{o(c=>c===l?null:l)},[]);return s("div",{style:oo},s("div",{style:ro},s("span",{style:so},`${e.length} request${e.length!==1?"s":""}`),s("button",{style:io,onClick:i,title:"Clear network entries"},"Clear")),e.length===0?s("div",{style:mo},"No network requests"):s("div",{style:lo},e.map(l=>{const c=n===l.id;return s("div",{key:l.id,style:{...ao,backgroundColor:c?"rgba(59, 130, 246, 0.12)":bt(l.status)},onClick:()=>r(l.id)},s("div",{style:co},s("span",{style:{...po,backgroundColor:eo(l.method)}},l.method),s("span",{style:{...uo,color:to(l.status),backgroundColor:bt(l.status)}},l.status===0?"ERR":String(l.status)),s("span",{style:fo,title:l.url},no(l.url,40)),s("span",{style:go},vt(l.duration)),s("span",{style:ho},St(l.timestamp))),c?s(yo,{entry:l}):null)})))}const So=100;let $t=1;const ee=[],te=[];let Me=null;function Et(e){Me=e}function Bt(e){ee.length>=So&&ee.shift(),ee.push(e);for(const t of te)t();Me&&Me(e)}function ne(){return[...ee]}function vo(){ee.length=0;for(const e of te)e()}function Tt(e){return te.push(e),()=>{const t=te.indexOf(e);t!==-1&&te.splice(t,1)}}function wo(){const e=window.onerror;window.onerror=(t,n,o,i,r)=>{const l={id:$t++,message:typeof t=="string"?t:"Unknown error",stack:r?.stack??"",source:n??"",line:o??0,col:i??0,timestamp:Date.now(),type:"error"};return Bt(l),typeof e=="function"?e(t,n,o,i,r):!1},window.addEventListener("unhandledrejection",t=>{const n=t.reason,o=n instanceof Error,i=o?n.message:typeof n=="string"?n:"Unhandled promise rejection",r=o?n.stack??"":"",l={id:$t++,message:i,stack:r,source:"",line:0,col:0,timestamp:Date.now(),type:"unhandledrejection"};Bt(l)})}const ko="#ef4444",Co="rgba(239, 68, 68, 0.15)",$o="#f97316",Eo="rgba(249, 115, 22, 0.15)",Bo={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},To={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Ro={fontSize:"10px",color:p.textMuted,flexShrink:"0"},Mo={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:p.toolBtnBg,color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},zo={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Do={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",cursor:"pointer"},Ho={display:"flex",alignItems:"center",gap:"6px"},Lo={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},Io={fontSize:"10px",color:p.textMuted,flexShrink:"0"},Rt={padding:"1px 0",wordBreak:"break-all"},Po={...Rt,opacity:"0.5"},Oo={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500",backgroundColor:"#dc2626",color:"#fff"},Ao={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px"};function Fo(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0"),r=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${o}:${i}.${r}`}function No(e){return e==="error"?ko:$o}function Wo(e){return e==="error"?Co:Eo}function jo(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function Uo(e){return e.includes("node_modules")}function qo({onReportBug:e}){const[t,n]=S(ne),[o,i]=S(null);N(()=>Tt(()=>{n(ne())}),[]);const r=w(()=>{vo(),n([]),i(null)},[]),l=w(c=>{i(h=>h===c?null:c)},[]);return s("div",{style:Bo},s("div",{style:To},s("span",{style:Ro},`${t.length} error${t.length!==1?"s":""}`),s("button",{style:Mo,onClick:r,title:"Clear error entries"},"Clear")),t.length===0?s("div",{style:Ao},"No errors captured"):s("div",{style:zo},t.map(c=>{const h=o===c.id,d=jo(c.stack);return s("div",{key:c.id,style:{...Do,backgroundColor:h?"rgba(239, 68, 68, 0.12)":Wo(c.type)},onClick:()=>l(c.id)},s("div",{style:Ho},s("span",{style:{...Lo,backgroundColor:No(c.type)}},c.type==="error"?"ERR":"REJ"),s("span",{style:{flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:p.text,fontSize:"10px"}},c.message),s("span",{style:Io},Fo(c.timestamp))),h?s("div",{style:{marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5"}},c.source?s("div",{style:{color:"#93c5fd",marginBottom:"4px"}},`${c.source}:${c.line}:${c.col}`):null,d.length>0?d.map((u,a)=>s("div",{key:a,style:Uo(u)?Po:Rt},u)):s("span",{style:{color:p.textMuted}},"No stack trace available"),e?s("button",{style:{...Oo,marginTop:"8px",width:"100%"},onClick:u=>{u.stopPropagation(),e(c)}},"Report Bug"):null):null)})))}const Xo=["low","medium","high","critical"],Vo={low:"#22c55e",medium:"#eab308",high:"#f97316",critical:"#ef4444"},Mt={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},ge={fontSize:"11px",fontWeight:"600",color:p.textBright,marginBottom:"3px",display:"block"},zt={width:"100%",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${p.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:p.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},Yo={...zt,minHeight:"60px",resize:"vertical",lineHeight:"1.4"},Go={display:"flex",gap:"4px"},Jo={padding:"4px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flex:"1",textAlign:"center"},ze={padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:p.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",width:"100%",marginTop:"4px"},Ko={...ze,opacity:"0.5",cursor:"not-allowed"},Dt={padding:"8px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textAlign:"center"},Zo={...Dt,backgroundColor:"rgba(34, 197, 94, 0.15)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},Qo={...Dt,backgroundColor:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"},er={fontSize:"10px",fontFamily:"monospace",color:p.textMuted,backgroundColor:"rgba(0, 0, 0, 0.3)",padding:"6px 8px",borderRadius:"4px",maxHeight:"60px",overflowY:"auto",lineHeight:"1.4",whiteSpace:"pre-wrap",wordBreak:"break-all"},Ht={padding:"4px 8px",borderRadius:"4px",border:"none",backgroundColor:"rgba(255, 255, 255, 0.1)",color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",alignSelf:"flex-end"};function Lt({apiClient:e,projectId:t,prefillTitle:n,prefillStack:o,onClose:i}){const[r,l]=S(n??""),[c,h]=S(""),[d,u]=S("medium"),[a,f]=S("idle"),[g,m]=S(""),k=r.trim().length>0&&a!=="submitting",v=w(async()=>{if(k){f("submitting"),m("");try{const x={projectId:t,title:r.trim(),description:c.trim(),severity:d,url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()};o&&(x.stackTrace=o),await e.createBug(x),f("success"),l(""),h(""),u("medium")}catch(x){f("error");const b=x instanceof Error?x.message:"Failed to submit bug report";m(b)}}},[k,r,c,d,t,o,e]);return a==="success"?s("div",{style:Mt},s("div",{style:Zo},"Bug report submitted."),s("button",{style:{...ze,marginTop:"8px"},onClick:()=>f("idle")},"Report Another"),i?s("button",{style:{...Ht,marginTop:"4px",alignSelf:"center"},onClick:i},"Close"):null):s("div",{style:Mt},i?s("button",{style:Ht,onClick:i},"Back"):null,s("div",null,s("label",{style:ge},"Title"),s("input",{style:zt,type:"text",value:r,placeholder:"Describe the bug briefly",onInput:x=>{l(x.target.value)}})),s("div",null,s("label",{style:ge},"Description"),s("textarea",{style:Yo,value:c,placeholder:"Steps to reproduce, expected vs actual behavior",onInput:x=>{h(x.target.value)}})),o?s("div",null,s("label",{style:ge},"Stack Trace"),s("div",{style:er},o)):null,s("div",null,s("label",{style:ge},"Severity"),s("div",{style:Go},Xo.map(x=>s("button",{key:x,style:{...Jo,backgroundColor:d===x?Vo[x]:p.toolBtnBg,color:d===x?"#fff":p.textMuted},onClick:()=>u(x)},x)))),a==="error"?s("div",{style:Qo},g||"Submission failed"):null,s("button",{style:k?ze:Ko,onClick:v,disabled:!k},a==="submitting"?"Submitting...":"Submit Bug Report"))}const tr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},nr={display:"flex",gap:"6px",flexShrink:"0"},or={flex:"1",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${p.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:p.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},It={padding:"6px 10px",borderRadius:"4px",border:"none",backgroundColor:p.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",flexShrink:"0"},rr={...It,opacity:"0.5",cursor:"not-allowed"},Pt={flex:"1",overflowY:"auto",fontSize:"12px",lineHeight:"1.5",color:p.text,whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"8px",borderRadius:"4px",minHeight:"80px"},sr={...Pt,color:p.textMuted,display:"flex",alignItems:"center",justifyContent:"center",fontStyle:"italic"},ir={padding:"8px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px"};function lr({apiBase:e,pinHash:t}){const[n,o]=S(""),[i,r]=S(""),[l,c]=S("idle"),[h,d]=S(""),u=U(null),a=n.trim().length>0&&l!=="loading"&&l!=="streaming",f=w(async()=>{if(!a)return;const m=n.trim();r(""),c("loading"),d(""),u.current&&u.current.abort();const k=new AbortController;u.current=k;try{const v=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:m,context:window.location.href}),signal:k.signal});if(!v.ok)throw new Error(`Request failed (${v.status})`);const x=v.body?.getReader();if(!x)throw new Error("No response stream");c("streaming");const b=new TextDecoder;for(;;){const{done:$,value:y}=await x.read();if($)break;const E=b.decode(y,{stream:!0});E&&r(H=>H+E)}c("idle")}catch(v){if(v.name==="AbortError")return;c("error");const x=v instanceof Error?v.message:"Analysis failed";d(x)}},[a,n,e,t]),g=w(m=>{m.key==="Enter"&&!m.shiftKey&&a&&(m.preventDefault(),f())},[a,f]);return s("div",{style:tr},s("div",{style:nr},s("input",{style:or,type:"text",value:n,placeholder:"Ask about code, errors, concepts...",onInput:m=>{o(m.target.value)},onKeyDown:g}),s("button",{style:a?It:rr,onClick:f,disabled:!a},l==="loading"||l==="streaming"?"...":"Send")),l==="error"?s("div",{style:ir},h):null,i?s("div",{style:Pt},i):s("div",{style:sr},l==="loading"?"Thinking...":"Response will appear here"))}const ar=100,cr={LCP:[2500,4e3],CLS:[.1,.25],INP:[200,500],FCP:[1800,3e3],TTFB:[800,1800]};let dr=1;const oe=[],he=[];function pr(e,t){const n=cr[e];return t<=n[0]?"good":t<=n[1]?"needs-improvement":"poor"}function re(e,t){const n={id:dr++,timestamp:Date.now(),metric:e,value:Math.round(e==="CLS"?t*1e3:t)/(e==="CLS"?1e3:1),rating:pr(e,t)};oe.length>=ar&&oe.shift(),oe.push(n);for(const o of he)o(n)}function Ot(){return[...oe]}function ur(){oe.length=0}function At(e){return he.push(e),()=>{const t=he.indexOf(e);t!==-1&&he.splice(t,1)}}function fr(){if(!(typeof PerformanceObserver>"u")){try{new PerformanceObserver(t=>{const n=t.getEntries(),o=n[n.length-1];o&&re("LCP",o.startTime)}).observe({type:"largest-contentful-paint",buffered:!0})}catch{}try{let e=0;new PerformanceObserver(n=>{for(const o of n.getEntries()){const i=o;!i.hadRecentInput&&typeof i.value=="number"&&(e+=i.value,re("CLS",e))}}).observe({type:"layout-shift",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries())n.duration>0&&re("INP",n.duration)}).observe({type:"event",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries())n.name==="first-contentful-paint"&&re("FCP",n.startTime)}).observe({type:"paint",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries()){const o=n;o.responseStart>0&&re("TTFB",o.responseStart-o.requestStart)}}).observe({type:"navigation",buffered:!0})}catch{}}}const De={good:"#22c55e","needs-improvement":"#eab308",poor:"#ef4444"},gr={good:"rgba(34, 197, 94, 0.15)","needs-improvement":"rgba(234, 179, 8, 0.15)",poor:"rgba(239, 68, 68, 0.15)"},hr={LCP:"Largest Contentful Paint",CLS:"Cumulative Layout Shift",INP:"Interaction to Next Paint",FCP:"First Contentful Paint",TTFB:"Time to First Byte"},Ft={LCP:"ms",CLS:"",INP:"ms",FCP:"ms",TTFB:"ms"},xr=["LCP","FCP","CLS","INP","TTFB"];function _r(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0");return`${n}:${o}:${i}`}function mr(e){const t={};for(const n of e){const o=t[n.metric];(!o||n.id>o.id)&&(t[n.metric]=n)}return t}const yr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},br={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",flexShrink:"0"},Sr={fontSize:"11px",fontWeight:"600",color:p.textBright,textTransform:"uppercase",letterSpacing:"0.5px"},vr={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:p.toolBtnBg,color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},wr={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px",padding:"4px 8px 8px",flexShrink:"0"},kr={display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",padding:"8px 6px",borderRadius:"6px",backgroundColor:p.toolBtnBg},Cr={fontSize:"16px",fontWeight:"700",fontFamily:"monospace"},$r={fontSize:"9px",fontWeight:"500",color:p.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},Er={height:"1px",backgroundColor:p.panelBorder,margin:"0 8px",flexShrink:"0"},Br={fontSize:"10px",fontWeight:"600",color:p.textMuted,padding:"6px 8px 2px",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},Tr={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Rr={display:"flex",alignItems:"center",gap:"6px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace"},Mr={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flexShrink:"0",color:"#fff"},zr={fontWeight:"600",color:p.text,flexShrink:"0",minWidth:"32px"},Dr={color:p.textBright,flex:"1"},Hr={fontSize:"10px",color:p.textMuted,flexShrink:"0"},Lr={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px"};function Ir(e){return e==="good"?"Good":e==="needs-improvement"?"OK":"Poor"}function Pr(){const[e,t]=S(Ot);N(()=>At(()=>{t(Ot())}),[]);const n=w(()=>{ur(),t([])},[]),o=mr(e),i=xr.map(r=>{const l=o[r];if(!l)return null;const c=Ft[r],h=r==="CLS"?l.value.toFixed(3):`${Math.round(l.value)}`;return{metric:r,entry:l,displayValue:h,unit:c}}).filter(Boolean);return s("div",{style:yr},s("div",{style:br},s("span",{style:Sr},"Web Vitals"),s("button",{style:vr,onClick:n,title:"Clear performance entries"},"Clear")),i.length>0?s("div",{style:wr},i.map(r=>s("div",{key:r.metric,style:{...kr,borderLeft:`3px solid ${De[r.entry.rating]}`},title:hr[r.metric]},s("span",{style:{...Cr,color:De[r.entry.rating]}},`${r.displayValue}${r.unit}`),s("span",{style:$r},r.metric)))):null,e.length>0?s("div",{style:Er}):null,e.length>0?s("div",{style:Br},"Event Log"):null,e.length===0?s("div",{style:Lr},"Waiting for Web Vitals data..."):s("div",{style:Tr},[...e].reverse().map(r=>{const l=Ft[r.metric],c=r.metric==="CLS"?r.value.toFixed(3):`${Math.round(r.value)}`;return s("div",{key:r.id,style:{...Rr,backgroundColor:gr[r.rating]}},s("span",{style:{...Mr,backgroundColor:De[r.rating]}},Ir(r.rating)),s("span",{style:zr},r.metric),s("span",{style:Dr},`${c}${l}`),s("span",{style:Hr},_r(r.timestamp)))})))}const He="devtools-debug-snapshots",Nt="devtools-screenshot-folder",Wt="/Users/jb/Downloads/Misc/Temp Assets/DevTools Debug",Or=5;function Ar(){try{return localStorage.getItem(Nt)??Wt}catch{return Wt}}function Fr(e){try{localStorage.setItem(Nt,e)}catch{}}function Nr(){try{const e=localStorage.getItem(He);return e?JSON.parse(e):[]}catch{return[]}}function jt(e){try{localStorage.setItem(He,JSON.stringify(e))}catch{}}let Wr=1;function se(e){return String(e).padStart(2,"0")}function Ut(e){const t=new Date(e);return`${se(t.getHours())}:${se(t.getMinutes())}:${se(t.getSeconds())}`}function jr(){const e=[];try{const t=Object.keys(localStorage).filter(n=>n!==He);if(t.length){const n=t.slice(0,30).map(o=>{const i=localStorage.getItem(o)??"";return`  ${o}: ${i.length>120?i.slice(0,120)+"…":i}`});e.push(`localStorage (${t.length} keys):
${n.join(`
`)}`)}}catch{}try{const t=Object.keys(sessionStorage);if(t.length){const n=t.slice(0,30).map(o=>{const i=sessionStorage.getItem(o)??"";return`  ${o}: ${i.length>120?i.slice(0,120)+"…":i}`});e.push(`sessionStorage (${t.length} keys):
${n.join(`
`)}`)}}catch{}return e.length?e.join(`

`):"(empty)"}function Ur(){try{const t=performance.getEntriesByType("navigation")[0];return t?[`DNS: ${Math.round(t.domainLookupEnd-t.domainLookupStart)}ms`,`Connect: ${Math.round(t.connectEnd-t.connectStart)}ms`,`TTFB: ${Math.round(t.responseStart-t.requestStart)}ms`,`DOM Ready: ${Math.round(t.domContentLoadedEventEnd)}ms`,`Page Load: ${Math.round(t.loadEventEnd)}ms`].join(" | "):"(not available)"}catch{return"(not available)"}}function qr(){try{const e=document.cookie.split(";").map(t=>t.trim().split("=")[0]).filter(Boolean);return e.length?e.join(", "):"(none)"}catch{return"(unavailable)"}}function Xr(e,t,n){const i=new Date().toISOString().replace("T"," ").slice(0,19),r=J(),l=Q(),c=ne(),h=t?r.filter(g=>g.level==="error"||g.level==="warn"):[...r],d=t?l.filter(g=>g.status===0||g.status>=400):[...l],u=[];if(u.push(`# Debug Snapshot — ${i}`),u.push(""),u.push(`**URL:** ${window.location.href}`),document.title&&u.push(`**Page:** ${document.title}`),u.push(`**Viewport:** ${window.innerWidth} x ${window.innerHeight}`),u.push(`**User-Agent:** ${navigator.userAgent}`),u.push(`**Cookies:** ${qr()}`),u.push(""),e.length){u.push(`## Screenshots (${e.length} downloaded)`);const g=n.replace(/\/+$/,"");u.push(e.map(m=>`${g}/${m.name}`).join(", ")),u.push("")}const a=t?`${h.length} warnings/errors of ${r.length} total`:`${h.length} entries`;if(u.push(`## Console — ${a}`),!h.length)u.push("(none)");else for(const g of h.slice(-60))u.push(`[${Ut(g.timestamp)}] ${g.level.toUpperCase().padEnd(5)} ${g.args.join(" ")}`);u.push("");const f=t?`${d.length} errors of ${l.length} total`:`${d.length} requests`;if(u.push(`## Network — ${f}`),!d.length)u.push("(none)");else for(const g of d.slice(-40)){const m=g.status===0?"ERR":String(g.status);u.push(`${g.method.padEnd(6)} ${g.url} — ${m} (${g.duration}ms)`)}if(u.push(""),u.push(`## JavaScript Errors — ${c.length}`),!c.length)u.push("(none)");else for(const g of c){const m=g.type==="unhandledrejection"?"UnhandledRejection":"Error";if(u.push(`[${Ut(g.timestamp)}] ${m}: ${g.message}`),g.source&&u.push(`  at ${g.source}:${g.line}:${g.col}`),g.stack){const k=g.stack.split(`
`).slice(1,7).map(v=>v.trim()).filter(Boolean);for(const v of k)u.push(`  ${v}`)}}return u.push(""),u.push("## Storage"),u.push(jr()),u.push(""),u.push("## Page Timing"),u.push(Ur()),u.join(`
`)}let xe=null;async function Vr(e){try{const t=window.showDirectoryPicker;if(!t)return!1;xe||(xe=await t({startIn:"downloads",mode:"readwrite"}));for(const n of e){const i=await(await xe.getFileHandle(n.name,{create:!0})).createWritable();await i.write(n.blob),await i.close()}return!0}catch{return xe=null,!1}}function Yr(e){for(const t of e){const n=document.createElement("a");n.href=t.url,n.download=t.name,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}async function Gr(){const e=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser"},preferCurrentTab:!0}),t=document.createElement("video");t.srcObject=e,t.muted=!0,await new Promise(r=>{t.onloadedmetadata=()=>{t.play().then(r).catch(r)}}),await new Promise(r=>setTimeout(r,120));const n=document.createElement("canvas");n.width=t.videoWidth||window.innerWidth,n.height=t.videoHeight||window.innerHeight;const o=n.getContext("2d");let i=null;return o&&(o.drawImage(t,0,0,n.width,n.height),i=await new Promise(r=>n.toBlob(r,"image/png"))),e.getTracks().forEach(r=>r.stop()),t.srcObject=null,i}const Jr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",boxSizing:"border-box"},Kr={display:"flex",flexShrink:"0",borderBottom:`1px solid ${p.panelBorder}`};function qt(e){return{flex:"1",padding:"7px 4px",border:"none",borderBottom:e?`2px solid ${p.fabBg}`:"2px solid transparent",backgroundColor:"transparent",color:e?p.textBright:p.textMuted,fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"color 0.1s",boxSizing:"border-box"}}const Xt={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"8px",display:"flex",flexDirection:"column",gap:"8px",boxSizing:"border-box"},Vt={fontSize:"10px",fontWeight:"600",color:p.textMuted,textTransform:"uppercase",letterSpacing:"0.4px",marginBottom:"4px",display:"block"},Zr={display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"4px"};function Le(e,t){return{padding:"6px",borderRadius:"4px",backgroundColor:e>0?`${t}22`:p.toolBtnBg,border:`1px solid ${e>0?t:p.panelBorder}`,textAlign:"center"}}const Ie={fontSize:"16px",fontWeight:"700",color:p.textBright,display:"block"},Pe={fontSize:"9px",color:p.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},Qr={border:`1px dashed ${p.panelBorder}`,borderRadius:"6px",padding:"10px",minHeight:"64px",display:"flex",flexDirection:"column",gap:"6px"},es={display:"flex",flexWrap:"wrap",gap:"4px"},ts={position:"relative",width:"56px",height:"40px",borderRadius:"3px",overflow:"hidden",flexShrink:"0",border:`1px solid ${p.panelBorder}`,cursor:"default"},ns={width:"100%",height:"100%",objectFit:"cover"},os={position:"absolute",top:"1px",right:"1px",width:"14px",height:"14px",borderRadius:"2px",border:"none",backgroundColor:"rgba(0,0,0,0.7)",color:"#fff",fontSize:"9px",lineHeight:"1",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},rs={fontSize:"11px",color:p.textMuted,textAlign:"center"},Yt={display:"flex",gap:"4px"};function _e(e="muted"){const t=e==="primary"?p.fabBg:e==="danger"?"#7f1d1d":p.toolBtnBg,n=e==="primary"?"#fff":e==="danger"?"#fca5a5":p.textMuted;return{flex:"1",padding:"5px 8px",borderRadius:"4px",border:"none",backgroundColor:t,color:n,fontSize:"11px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap"}}const ss=e=>({width:"100%",padding:"9px 12px",borderRadius:"6px",border:"none",backgroundColor:e?"#1e293b":p.fabBg,color:e?p.textMuted:"#fff",fontSize:"12px",fontWeight:"600",cursor:e?"not-allowed":"pointer"}),is=e=>({padding:"3px 8px",borderRadius:"4px",border:`1px solid ${e?p.fabBg:p.panelBorder}`,backgroundColor:e?`${p.fabBg}33`:"transparent",color:e?"#93c5fd":p.textMuted,fontSize:"10px",cursor:"pointer",fontWeight:"500"}),ls={borderRadius:"6px",border:`1px solid ${p.panelBorder}`,backgroundColor:p.toolBtnBg,padding:"8px",display:"flex",flexDirection:"column",gap:"4px"},as={fontSize:"10px",color:p.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},cs={fontSize:"10px",color:p.textMuted},ds={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px",padding:"20px",textAlign:"center"};function ps(){const[e,t]=S("capture"),[n,o]=S([]),[i,r]=S(Nr),[l,c]=S(!1),[h,d]=S(null),[u,a]=S(!0),[f,g]=S(Ar),[m,k]=S(!1);N(()=>()=>{for(const _ of n)URL.revokeObjectURL(_.url)},[]),N(()=>{if(e!=="capture")return;function _(B){const z=B.clipboardData?.items;if(z){for(const D of Array.from(z))if(D.type.startsWith("image/")){const nn=D.getAsFile();nn&&v(nn)}}}return window.addEventListener("paste",_),()=>window.removeEventListener("paste",_)},[e]);function v(_){const B=Wr++,z=URL.createObjectURL(_);o(D=>[...D,{id:B,url:z,blob:_,name:`screenshot-${B}.png`}])}const x=w(async()=>{c(!0);try{const _=await Gr();_&&v(_)}catch{}c(!1)},[]),b=w(_=>{o(B=>{const z=B.find(D=>D.id===_);return z&&URL.revokeObjectURL(z.url),B.filter(D=>D.id!==_)})},[]),$=w(()=>{o(_=>{for(const B of _)URL.revokeObjectURL(B.url);return[]})},[]),y=w(_=>{d(_),setTimeout(()=>d(null),2e3)},[]),E=w(async()=>{const _=Xr(n,u,f);n.length>0&&(await Vr(n)||Yr(n));const B={id:String(Date.now()),timestamp:Date.now(),pageUrl:window.location.href,report:_};r(z=>{const D=[B,...z].slice(0,Or);return jt(D),D}),await navigator.clipboard.writeText(_),y(B.id)},[n,u,f,y]),H=w(async _=>{await navigator.clipboard.writeText(_.report),y(_.id)},[y]),A=w(_=>{r(B=>{const z=B.filter(D=>D.id!==_);return jt(z),z})},[]),P=J(),I=Q(),L=ne(),M=P.filter(_=>_.level==="error"||_.level==="warn").length,O=I.filter(_=>_.status===0||_.status>=400).length;return s("div",{style:Jr},s("div",{style:Kr},s("button",{style:qt(e==="capture"),onClick:()=>t("capture")},"Capture"),s("button",{style:qt(e==="history"),onClick:()=>t("history")},`History (${i.length})`)),e==="capture"?s("div",{style:Xt},s("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},s("span",{style:Vt},"Report data"),s("button",{style:is(u),onClick:()=>a(_=>!_)},u?"Errors only":"All entries")),s("div",{style:Zr},s("div",{style:Le(M,"#eab308")},s("span",{style:Ie},String(M)),s("span",{style:Pe},"Console")),s("div",{style:Le(O,"#ef4444")},s("span",{style:Ie},String(O)),s("span",{style:Pe},"Net Errors")),s("div",{style:Le(L.length,"#ef4444")},s("span",{style:Ie},String(L.length)),s("span",{style:Pe},"JS Errors"))),s("div",null,s("span",{style:Vt},`Screenshots (${n.length})`),s("div",{style:Qr},n.length===0?s("div",{style:rs},"Cmd+V to paste a screenshot",s("br",null),"or click Capture below"):s("div",{style:es},n.map(_=>s("div",{key:_.id,style:ts,title:_.name},s("img",{src:_.url,style:ns,alt:_.name}),s("button",{style:os,onClick:()=>b(_.id),title:"Remove"},"×")))),s("div",{style:Yt},s("button",{style:_e("muted"),onClick:x,disabled:l,title:"Capture current screen (opens share dialog)"},l?"Capturing...":"Capture Screen"),n.length>0?s("button",{style:_e("danger"),onClick:$,title:"Delete all screenshots"},"Delete All"):null))),s("button",{style:ss(!1),onClick:E,title:"Copy debug report to clipboard. Screenshots (if any) download as files."},h?"Copied!":"Copy Report & Download Screenshots"),s("div",{style:{fontSize:"10px",color:p.textMuted}},s("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginBottom:"2px"}},s("span",{style:{color:p.textMuted,fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.4px"}},"Save folder"),s("button",{style:{background:"none",border:"none",color:p.fabBg,fontSize:"10px",cursor:"pointer",padding:"0"},onClick:()=>k(_=>!_)},m?"done":"edit")),m?s("input",{value:f,onInput:_=>{const B=_.target.value;g(B),Fr(B)},style:{width:"100%",background:p.toolBtnBg,border:`1px solid ${p.panelBorder}`,borderRadius:"3px",color:p.text,fontSize:"10px",padding:"3px 5px",fontFamily:"monospace",boxSizing:"border-box"}}):s("div",{style:{fontFamily:"monospace",fontSize:"10px",color:p.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},f))):s("div",{style:{...Xt,gap:"6px"}},i.length===0?s("div",{style:ds},"No snapshots yet. Copy a report from the Capture tab to save it here."):i.map(_=>{const B=new Date(_.timestamp),z=`${B.toLocaleDateString()} ${se(B.getHours())}:${se(B.getMinutes())}`,D=h===_.id;return s("div",{key:_.id,style:ls},s("div",{style:cs},z),s("div",{style:as,title:_.pageUrl},_.pageUrl),s("div",{style:Yt},s("button",{style:_e(D?"primary":"muted"),onClick:()=>H(_)},D?"Copied!":"Copy Report"),s("button",{style:_e("danger"),onClick:()=>A(_.id)},"Delete")))})))}const Gt=[{id:"debug",label:"Debug Snapshot",icon:"⊚"},{id:"console",label:"Console Viewer",icon:">"},{id:"network",label:"Network Viewer",icon:"⇅"},{id:"errors",label:"Error Log",icon:"⚠"},{id:"bugs",label:"Bug Reporter",icon:"🐛"},{id:"perf",label:"Performance",icon:"⚡"},{id:"ai",label:"AI Assistant",icon:"✨"}];function us({projectId:e,isOpen:t,onClose:n,apiClient:o,apiBase:i,pinHash:r}){const[l,c]=S(null),[h,d]=S(!1),[u,a]=S(null),[f,g]=S(""),[m,k]=S(""),v=w(y=>{c(E=>(E==="bugs"&&y!=="bugs"&&(g(""),k("")),E===y?null:y))},[]),x=w(y=>{g(y.message),k(y.stack),c("bugs")},[]),b=l?Gt.find(y=>y.id===l):null;return s("div",{style:{...hn,transform:t?wn:kn,transition:"transform 0.25s ease",pointerEvents:t?"auto":"none"},"aria-hidden":!t},s("div",{style:xn},s("span",{style:_n,title:e},e),s("button",{style:{...mn,backgroundColor:h?p.closeBtnHover:"transparent",color:h?"#fff":p.textMuted},onClick:n,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),"aria-label":"Close panel",title:"Close"},"✕")),s("div",{style:yn},Gt.map(y=>{const E=l===y.id,H=u===y.id;let A=p.toolBtnBg;return E?A=p.toolBtnBgActive:H&&(A=p.toolBtnBgHover),s("button",{key:y.id,style:{...bn,backgroundColor:A,color:E?"#fff":p.text},onClick:()=>v(y.id),onMouseEnter:()=>a(y.id),onMouseLeave:()=>a(null)},s("span",{style:Sn},y.icon),s("span",null,y.label))})),b?s("div",{style:{...vn,borderTop:`1px solid ${p.panelBorder}`,...l==="debug"||l==="console"||l==="network"||l==="errors"||l==="bugs"||l==="perf"||l==="ai"?{alignItems:"stretch",justifyContent:"stretch",padding:"0"}:{}}},l==="debug"?s(ps,null):l==="console"?s(Xn,null):l==="network"?s(bo,null):l==="errors"?s(qo,{onReportBug:x}):l==="bugs"?s(Lt,{apiClient:o,projectId:e,prefillTitle:f||void 0,prefillStack:m||void 0}):l==="perf"?s(Pr,null):l==="ai"?s(lr,{apiBase:i,pinHash:r}):s("span",null,`${b.label} -- coming soon`)):null)}const Jt={isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0,moved:!1},fs=s("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},s("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}));function gs({projectId:e,pinHash:t,apiBase:n,apiClient:o}){const[i,r]=S(!1),[l,c]=S(!1),[h,d]=S({x:0,y:0}),[u,a]=S(!1),f=U(Jt),g=U(null),m=w($=>{$.currentTarget.setPointerCapture($.pointerId),f.current={isDragging:!0,startX:$.clientX,startY:$.clientY,offsetX:h.x,offsetY:h.y,moved:!1},a(!0)},[h.x,h.y]),k=w($=>{const y=f.current;if(!y.isDragging)return;const E=$.clientX-y.startX,H=$.clientY-y.startY;Math.sqrt(E*E+H*H)>fn&&(f.current={...y,moved:!0}),d({x:y.offsetX+E,y:y.offsetY+H})},[]),v=w(()=>{const y=f.current.moved;f.current={...Jt},a(!1),y||r(E=>!E)},[]),x=w(()=>{r(!1)},[]),b={...gn,bottom:`${20-h.y}px`,right:`${20-h.x}px`,backgroundColor:l?p.fabBgHover:p.fabBg,boxShadow:l?`0 6px 16px ${p.shadow}`:`0 4px 12px ${p.shadow}`,cursor:u?"grabbing":"grab"};return s("div",null,s("button",{ref:g,style:b,title:`DevTools (${e})`,"aria-label":"Toggle DevTools panel",onPointerDown:m,onPointerMove:k,onPointerUp:v,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},fs),s(us,{projectId:e,isOpen:i,onClose:x,apiClient:o,apiBase:n,pinHash:t}))}function Kt(e,t){async function n(o,i={}){return(await fetch(`${e}${o}`,{...i,headers:{"Content-Type":"application/json","X-DevTools-Pin":t,...i.headers}})).json()}return{createBug:o=>n("/api/bugs",{method:"POST",body:JSON.stringify(o)}),createDevLog:o=>n("/api/devlog",{method:"POST",body:JSON.stringify(o)}),sendEvents:o=>n("/api/widget/event",{method:"POST",body:JSON.stringify({events:o})})}}const hs=console.warn.bind(console),xs=1e4,_s=50,ms=200,ys=new Set(["log","info","warn","error","debug"]);function bs(e,t,n){let o=[];function i(u){o.length>=ms||(o.push(u),o.length>=_s&&r())}function r(){if(o.length===0)return;const u=[...o];o=[],t.sendEvents(u).catch(a=>{hs("[DevTools] Failed to send events:",a)})}function l(){if(o.length===0)return;const u=[...o];o=[];const a=JSON.stringify({events:u}),f=`${n}/api/widget/event`;try{const g=new Blob([a],{type:"application/json"});navigator.sendBeacon(f,g)}catch{}}let c=0;Tt(()=>{const a=ne().filter(f=>f.id>c);if(a.length>0){c=a[a.length-1].id;for(const f of a)i({type:"error",title:f.message,content:f.stack,metadata:{errorType:f.type,source:f.source,line:f.line,col:f.col},projectId:e})}}),At(u=>{i({type:"perf",title:`${u.metric}: ${u.value}`,content:`Rating: ${u.rating}`,metadata:{metric:u.metric,value:u.value,rating:u.rating},projectId:e})});let h=0;gt(()=>{const a=J().filter(f=>f.id>h);if(a.length>0){h=a[a.length-1].id;for(const f of a){if(!ys.has(f.level))continue;const g=f.args.join(" ");g.includes("/api/widget/")||g.includes("/api/ai/analyze")||i({type:"console",title:g.slice(0,500),content:f.args.join(`
`).slice(0,2e3),metadata:{level:f.level,argCount:f.args.length},projectId:e})}}});let d=0;yt(()=>{const a=Q().filter(f=>f.id>d);if(a.length>0){d=a[a.length-1].id;for(const f of a)f.url.includes("/api/widget/")||f.url.includes("/api/bugs")||f.url.includes("/api/ai/analyze")||i({type:"network",title:`${f.method} ${f.url}`.slice(0,500),content:`${f.status} ${f.statusText} (${f.duration}ms)`,metadata:{method:f.method,url:f.url,status:f.status,statusText:f.statusText,duration:f.duration,requestSize:f.requestSize,responseSize:f.responseSize},projectId:e})}}),setInterval(r,xs),window.addEventListener("beforeunload",l)}function Ss(e,t,n){Mn(),Kn(),wo(),fr();const o=Kt(n,t);bs(e,o,n)}const vs=1e4,ws={position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"280px",backgroundColor:"#1a0000",border:"1px solid #dc2626",borderRadius:"8px",boxShadow:"0 8px 24px rgba(220, 38, 38, 0.3)",zIndex:"999997",fontFamily:"system-ui, -apple-system, sans-serif",color:p.text,overflow:"hidden",display:"flex",flexDirection:"column"},ks={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:"rgba(220, 38, 38, 0.2)",borderBottom:"1px solid #dc2626",flexShrink:"0"},Cs={fontSize:"12px",fontWeight:"600",color:"#fca5a5"},$s={display:"flex",gap:"6px"},Zt={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500"},Es={...Zt,backgroundColor:"#dc2626",color:"#fff"},Bs={...Zt,backgroundColor:"rgba(255, 255, 255, 0.1)",color:p.textMuted},Ts={padding:"8px 12px",overflowY:"auto",flex:"1"},Rs={fontSize:"12px",fontWeight:"500",color:"#fca5a5",marginBottom:"6px",wordBreak:"break-word"},Ms={fontSize:"10px",fontFamily:"monospace",lineHeight:"1.6",color:p.textMuted},Qt={padding:"1px 0",wordBreak:"break-all"},zs={...Qt,opacity:"0.5"};function Ds(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function Hs(e){return e.includes("node_modules")}function Ls({onReportBug:e}){const[t,n]=S(null),o=U(null),i=w(()=>{n(null),o.current&&(clearTimeout(o.current),o.current=null)},[]),r=w(()=>{o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{n(null),o.current=null},vs)},[]);N(()=>(Et(u=>{n(u),r()}),()=>{Et(null),o.current&&clearTimeout(o.current)}),[r]);const l=w(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]),c=w(()=>{t&&r()},[t,r]),h=w(()=>{t&&(e(t),i())},[t,e,i]);if(!t)return null;const d=Ds(t.stack);return s("div",{style:ws,onMouseEnter:l,onMouseLeave:c},s("div",{style:ks},s("span",{style:Cs},t.type==="error"?"Uncaught Error":"Unhandled Rejection"),s("div",{style:$s},s("button",{style:Es,onClick:h},"Report Bug"),s("button",{style:Bs,onClick:i},"Dismiss"))),s("div",{style:Ts},s("div",{style:Rs},t.message),d.length>0?s("div",{style:Ms},d.slice(0,8).map((u,a)=>s("div",{key:a,style:Hs(u)?zs:Qt},u))):null))}const Is={position:"fixed",padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:p.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",zIndex:999999,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"4px",fontFamily:"system-ui, -apple-system, sans-serif"},Ps={position:"fixed",width:"360px",maxHeight:"320px",backgroundColor:p.panelBg,border:`1px solid ${p.panelBorder}`,borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:999999,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",overflow:"hidden"},Os={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:p.panelHeaderBg,borderBottom:`1px solid ${p.panelBorder}`,flexShrink:0},As={fontSize:"12px",fontWeight:"600",color:p.textBright},Fs={width:"24px",height:"24px",borderRadius:"4px",border:"none",backgroundColor:"transparent",color:p.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",lineHeight:"1"},Ns={padding:"12px",overflowY:"auto",flex:1,fontSize:"13px",lineHeight:"1.5",color:p.text,whiteSpace:"pre-wrap",wordBreak:"break-word"},Ws={padding:"16px 12px",fontSize:"12px",color:p.textMuted,textAlign:"center"},js={padding:"12px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",margin:"8px 12px"};function en(e,t,n,o){const i=Math.min(Math.max(e,8),window.innerWidth-n-8),r=Math.min(Math.max(t,8),window.innerHeight-o-8);return{x:i,y:r}}function Us({apiBase:e,pinHash:t}){const[n,o]=S(""),[i,r]=S(null),[l,c]=S(null),[h,d]=S("idle"),[u,a]=S(""),[f,g]=S(""),[m,k]=S(!1),[v,x]=S(!1),b=U(null),$=U(null),y=w(()=>{r(null),c(null),o(""),d("idle"),a(""),g(""),b.current&&(b.current.abort(),b.current=null)},[]);N(()=>{function P(I){if(I.target.closest?.("[data-quickai]"))return;const O=window.getSelection()?.toString().trim()??"";if(O.length>10){o(O);const _=en(I.clientX,I.clientY-40,90,30);r(_)}else l||(r(null),o(""))}return document.addEventListener("mouseup",P),()=>document.removeEventListener("mouseup",P)},[l]),N(()=>{if(!l)return;function P(L){L.target.closest?.("[data-quickai]")||y()}const I=setTimeout(()=>{document.addEventListener("mousedown",P)},100);return()=>{clearTimeout(I),document.removeEventListener("mousedown",P)}},[l,y]);const E=w(async()=>{if(!n)return;const P=i?en(i.x,i.y+36,360,320):{x:100,y:100};c(P),r(null),d("loading"),a(""),g(""),b.current&&b.current.abort();const I=new AbortController;b.current=I;try{const L=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:n,context:window.location.href}),signal:I.signal});if(!L.ok)throw new Error(`Analysis failed (${L.status})`);const M=L.body?.getReader();if(!M)throw new Error("No response stream");d("streaming");const O=new TextDecoder;for(;;){const{done:_,value:B}=await M.read();if(_)break;const z=O.decode(B,{stream:!0});z&&a(D=>D+z)}d("done")}catch(L){if(L.name==="AbortError")return;d("error");const M=L instanceof Error?L.message:"Analysis failed";g(M)}},[n,i,e,t]),H=i?s("button",{"data-quickai":"btn",style:{...Is,left:`${i.x}px`,top:`${i.y}px`,backgroundColor:m?p.fabBgHover:p.fabBg},onClick:E,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1)},"✨ Analyze"):null,A=l?s("div",{ref:$,"data-quickai":"popup",style:{...Ps,left:`${l.x}px`,top:`${l.y}px`}},s("div",{style:Os},s("span",{style:As},"AI Analysis"),s("button",{style:{...Fs,backgroundColor:v?p.closeBtnHover:"transparent",color:v?"#fff":p.textMuted},onClick:y,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),"aria-label":"Close"},"✕")),h==="loading"?s("div",{style:Ws},"Analyzing..."):h==="error"?s("div",{style:js},f):s("div",{style:Ns},u||"Waiting...")):null;return s("div",{"data-quickai":"root"},H,A)}const Oe=document.currentScript,qs=[":host { all: initial; }","#devtools-root { font-family: system-ui, sans-serif; }"].join(`
`);function Xs({projectId:e,pinHash:t,apiBase:n,apiClient:o}){const[i,r]=S(null),l=w(h=>{r(h)},[]),c=w(()=>{r(null)},[]);return s("div",null,s(gs,{projectId:e,pinHash:t,apiBase:n,apiClient:o}),s(Ls,{onReportBug:l}),s(Us,{apiBase:n,pinHash:t}),i?s("div",{style:{position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"400px",backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:"999997",overflow:"auto"}},s(Lt,{apiClient:o,projectId:e,prefillTitle:i.message,prefillStack:i.stack,onClose:c})):null)}function tn(){const e=Oe?.getAttribute("data-project")||"default",t=Oe?.getAttribute("data-pin")||"",n=Oe?.src.replace("/widget.js","")||"",o=Kt(n,t),i=document.createElement("div");i.id="devtools-widget",document.body.appendChild(i);const r=i.attachShadow({mode:"open"}),l=document.createElement("style");l.textContent=qs,r.appendChild(l);const c=document.createElement("div");c.id="devtools-root",r.appendChild(c),cn(s(Xs,{projectId:e,pinHash:t,apiBase:n,apiClient:o}),c),Ss(e,t,n)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",tn):tn()})();
