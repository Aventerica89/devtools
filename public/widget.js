(function(){"use strict";var oe,E,Le,A,He,Ie,Pe,Oe,he,_e,xe,W={},Ae=[],Kt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,re=Array.isArray;function P(e,t){for(var n in t)e[n]=t[n];return e}function ye(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function i(e,t,n){var o,s,r,l={};for(r in t)r=="key"?o=t[r]:r=="ref"?s=t[r]:l[r]=t[r];if(arguments.length>2&&(l.children=arguments.length>3?oe.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)l[r]===void 0&&(l[r]=e.defaultProps[r]);return ie(e,l,o,s,null)}function ie(e,t,n,o,s){var r={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Le,__i:-1,__u:0};return s==null&&E.vnode!=null&&E.vnode(r),r}function se(e){return e.children}function le(e,t){this.props=e,this.context=t}function N(e,t){if(t==null)return e.__?N(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?N(e):null}function Ne(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Ne(e)}}function Fe(e){(!e.__d&&(e.__d=!0)&&A.push(e)&&!ae.__r++||He!=E.debounceRendering)&&((He=E.debounceRendering)||Ie)(ae)}function ae(){for(var e,t,n,o,s,r,l,d=1;A.length;)A.length>d&&A.sort(Pe),e=A.shift(),d=A.length,e.__d&&(n=void 0,o=void 0,s=(o=(t=e).__v).__e,r=[],l=[],t.__P&&((n=P({},o)).__v=o.__v+1,E.vnode&&E.vnode(n),me(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[s]:null,r,s??N(o),!!(32&o.__u),l),n.__v=o.__v,n.__.__k[n.__i]=n,Ve(r,n,l),o.__e=o.__=null,n.__e!=s&&Ne(n)));ae.__r=0}function We(e,t,n,o,s,r,l,d,g,c,f){var a,u,h,S,C,w,x,y=o&&o.__k||Ae,B=t.length;for(g=Zt(n,t,y,g,B),a=0;a<B;a++)(h=n.__k[a])!=null&&(u=h.__i==-1?W:y[h.__i]||W,h.__i=a,w=me(e,h,u,s,r,l,d,g,c,f),S=h.__e,h.ref&&u.ref!=h.ref&&(u.ref&&Se(u.ref,null,h),f.push(h.ref,h.__c||S,h)),C==null&&S!=null&&(C=S),(x=!!(4&h.__u))||u.__k===h.__k?g=je(h,g,e,x):typeof h.type=="function"&&w!==void 0?g=w:S&&(g=S.nextSibling),h.__u&=-7);return n.__e=C,g}function Zt(e,t,n,o,s){var r,l,d,g,c,f=n.length,a=f,u=0;for(e.__k=new Array(s),r=0;r<s;r++)(l=t[r])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=e.__k[r]=ie(null,l,null,null,null):re(l)?l=e.__k[r]=ie(se,{children:l},null,null,null):l.constructor===void 0&&l.__b>0?l=e.__k[r]=ie(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):e.__k[r]=l,g=r+u,l.__=e,l.__b=e.__b+1,d=null,(c=l.__i=Qt(l,n,g,a))!=-1&&(a--,(d=n[c])&&(d.__u|=2)),d==null||d.__v==null?(c==-1&&(s>f?u--:s<f&&u++),typeof l.type!="function"&&(l.__u|=4)):c!=g&&(c==g-1?u--:c==g+1?u++:(c>g?u--:u++,l.__u|=4))):e.__k[r]=null;if(a)for(r=0;r<f;r++)(d=n[r])!=null&&(2&d.__u)==0&&(d.__e==o&&(o=N(d)),Ye(d,d));return o}function je(e,t,n,o){var s,r;if(typeof e.type=="function"){for(s=e.__k,r=0;s&&r<s.length;r++)s[r]&&(s[r].__=e,t=je(s[r],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=N(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Qt(e,t,n,o){var s,r,l,d=e.key,g=e.type,c=t[n],f=c!=null&&(2&c.__u)==0;if(c===null&&d==null||f&&d==c.key&&g==c.type)return n;if(o>(f?1:0)){for(s=n-1,r=n+1;s>=0||r<t.length;)if((c=t[l=s>=0?s--:r++])!=null&&(2&c.__u)==0&&d==c.key&&g==c.type)return l}return-1}function Ue(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Kt.test(t)?n:n+"px"}function ce(e,t,n,o,s){var r,l;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Ue(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||Ue(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")r=t!=(t=t.replace(Oe,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o?n.u=o.u:(n.u=he,e.addEventListener(t,r?xe:_e,r)):e.removeEventListener(t,r?xe:_e,r);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function qe(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=he++;else if(t.t<n.u)return;return n(E.event?E.event(t):t)}}}function me(e,t,n,o,s,r,l,d,g,c){var f,a,u,h,S,C,w,x,y,B,m,T,D,I,H,L,_,v=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(g=!!(32&n.__u),r=[d=t.__e=n.__e]),(f=E.__b)&&f(t);e:if(typeof v=="function")try{if(x=t.props,y="prototype"in v&&v.prototype.render,B=(f=v.contextType)&&o[f.__c],m=f?B?B.props.value:f.__:o,n.__c?w=(a=t.__c=n.__c).__=a.__E:(y?t.__c=a=new v(x,m):(t.__c=a=new le(x,m),a.constructor=v,a.render=tn),B&&B.sub(a),a.state||(a.state={}),a.__n=o,u=a.__d=!0,a.__h=[],a._sb=[]),y&&a.__s==null&&(a.__s=a.state),y&&v.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=P({},a.__s)),P(a.__s,v.getDerivedStateFromProps(x,a.__s))),h=a.props,S=a.state,a.__v=t,u)y&&v.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),y&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(y&&v.getDerivedStateFromProps==null&&x!==h&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(x,m),t.__v==n.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(x,a.__s,m)===!1){for(t.__v!=n.__v&&(a.props=x,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function($){$&&($.__=t)}),T=0;T<a._sb.length;T++)a.__h.push(a._sb[T]);a._sb=[],a.__h.length&&l.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(x,a.__s,m),y&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(h,S,C)})}if(a.context=m,a.props=x,a.__P=e,a.__e=!1,D=E.__r,I=0,y){for(a.state=a.__s,a.__d=!1,D&&D(t),f=a.render(a.props,a.state,a.context),H=0;H<a._sb.length;H++)a.__h.push(a._sb[H]);a._sb=[]}else do a.__d=!1,D&&D(t),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++I<25);a.state=a.__s,a.getChildContext!=null&&(o=P(P({},o),a.getChildContext())),y&&!u&&a.getSnapshotBeforeUpdate!=null&&(C=a.getSnapshotBeforeUpdate(h,S)),L=f,f!=null&&f.type===se&&f.key==null&&(L=Xe(f.props.children)),d=We(e,re(L)?L:[L],t,n,o,s,r,l,d,g,c),a.base=t.__e,t.__u&=-161,a.__h.length&&l.push(a),w&&(a.__E=a.__=null)}catch($){if(t.__v=null,g||r!=null)if($.then){for(t.__u|=g?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;r[r.indexOf(d)]=null,t.__e=d}else{for(_=r.length;_--;)ye(r[_]);be(t)}else t.__e=n.__e,t.__k=n.__k,$.then||be(t);E.__e($,t,n)}else r==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):d=t.__e=en(n.__e,t,n,o,s,r,l,g,c);return(f=E.diffed)&&f(t),128&t.__u?void 0:d}function be(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(be)}function Ve(e,t,n){for(var o=0;o<n.length;o++)Se(n[o],n[++o],n[++o]);E.__c&&E.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(r){r.call(s)})}catch(r){E.__e(r,s.__v)}})}function Xe(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:re(e)?e.map(Xe):P({},e)}function en(e,t,n,o,s,r,l,d,g){var c,f,a,u,h,S,C,w=n.props||W,x=t.props,y=t.type;if(y=="svg"?s="http://www.w3.org/2000/svg":y=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),r!=null){for(c=0;c<r.length;c++)if((h=r[c])&&"setAttribute"in h==!!y&&(y?h.localName==y:h.nodeType==3)){e=h,r[c]=null;break}}if(e==null){if(y==null)return document.createTextNode(x);e=document.createElementNS(s,y,x.is&&x),d&&(E.__m&&E.__m(t,r),d=!1),r=null}if(y==null)w===x||d&&e.data==x||(e.data=x);else{if(r=r&&oe.call(e.childNodes),!d&&r!=null)for(w={},c=0;c<e.attributes.length;c++)w[(h=e.attributes[c]).name]=h.value;for(c in w)if(h=w[c],c!="children"){if(c=="dangerouslySetInnerHTML")a=h;else if(!(c in x)){if(c=="value"&&"defaultValue"in x||c=="checked"&&"defaultChecked"in x)continue;ce(e,c,null,h,s)}}for(c in x)h=x[c],c=="children"?u=h:c=="dangerouslySetInnerHTML"?f=h:c=="value"?S=h:c=="checked"?C=h:d&&typeof h!="function"||w[c]===h||ce(e,c,h,w[c],s);if(f)d||a&&(f.__html==a.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(a&&(e.innerHTML=""),We(t.type=="template"?e.content:e,re(u)?u:[u],t,n,o,y=="foreignObject"?"http://www.w3.org/1999/xhtml":s,r,l,r?r[0]:n.__k&&N(n,0),d,g),r!=null)for(c=r.length;c--;)ye(r[c]);d||(c="value",y=="progress"&&S==null?e.removeAttribute("value"):S!=null&&(S!==e[c]||y=="progress"&&!S||y=="option"&&S!=w[c])&&ce(e,c,S,w[c],s),c="checked",C!=null&&C!=e[c]&&ce(e,c,C,w[c],s))}return e}function Se(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(s){E.__e(s,n)}}function Ye(e,t,n){var o,s;if(E.unmount&&E.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||Se(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){E.__e(r,t)}o.base=o.__P=null}if(o=e.__k)for(s=0;s<o.length;s++)o[s]&&Ye(o[s],t,n||typeof e.type!="function");n||ye(e.__e),e.__c=e.__=e.__e=void 0}function tn(e,t,n){return this.constructor(e,n)}function nn(e,t,n){var o,s,r,l;t==document&&(t=document.documentElement),E.__&&E.__(e,t),s=(o=!1)?null:t.__k,r=[],l=[],me(t,e=t.__k=i(se,null,[e]),s||W,W,t.namespaceURI,s?null:t.firstChild?oe.call(t.childNodes):null,r,s?s.__e:t.firstChild,o,l),Ve(r,e,l)}oe=Ae.slice,E={__e:function(e,t,n,o){for(var s,r,l;t=t.__;)if((s=t.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(e)),l=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,o||{}),l=s.__d),l)return s.__E=s}catch(d){e=d}throw e}},Le=0,le.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=P({},this.state),typeof e=="function"&&(e=e(P({},n),this.props)),e&&P(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Fe(this))},le.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Fe(this))},le.prototype.render=se,A=[],Ie=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Pe=function(e,t){return e.__v.__b-t.__v.__b},ae.__r=0,Oe=/(PointerCapture)$|Capture$/i,he=0,_e=qe(!1),xe=qe(!0);var j,R,ve,Ge,U=0,Je=[],M=E,Ke=M.__b,Ze=M.__r,Qe=M.diffed,et=M.__c,tt=M.unmount,nt=M.__;function we(e,t){M.__h&&M.__h(R,e,U||t),U=0;var n=R.__H||(R.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function b(e){return U=1,on(st,e)}function on(e,t,n){var o=we(j++,2);if(o.t=e,!o.__c&&(o.__=[st(void 0,t),function(d){var g=o.__N?o.__N[0]:o.__[0],c=o.t(g,d);g!==c&&(o.__N=[c,o.__[1]],o.__c.setState({}))}],o.__c=R,!R.__f)){var s=function(d,g,c){if(!o.__c.__H)return!0;var f=o.__c.__H.__.filter(function(u){return!!u.__c});if(f.every(function(u){return!u.__N}))return!r||r.call(this,d,g,c);var a=o.__c.props!==d;return f.forEach(function(u){if(u.__N){var h=u.__[0];u.__=u.__N,u.__N=void 0,h!==u.__[0]&&(a=!0)}}),r&&r.call(this,d,g,c)||a};R.__f=!0;var r=R.shouldComponentUpdate,l=R.componentWillUpdate;R.componentWillUpdate=function(d,g,c){if(this.__e){var f=r;r=void 0,s(d,g,c),r=f}l&&l.call(this,d,g,c)},R.shouldComponentUpdate=s}return o.__N||o.__}function O(e,t){var n=we(j++,3);!M.__s&&it(n.__H,t)&&(n.__=e,n.u=t,R.__H.__h.push(n))}function F(e){return U=5,ot(function(){return{current:e}},[])}function ot(e,t){var n=we(j++,7);return it(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function k(e,t){return U=8,ot(function(){return e},t)}function rn(){for(var e;e=Je.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(de),e.__H.__h.forEach(ke),e.__H.__h=[]}catch(t){e.__H.__h=[],M.__e(t,e.__v)}}M.__b=function(e){R=null,Ke&&Ke(e)},M.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),nt&&nt(e,t)},M.__r=function(e){Ze&&Ze(e),j=0;var t=(R=e.__c).__H;t&&(ve===R?(t.__h=[],R.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(de),t.__h.forEach(ke),t.__h=[],j=0)),ve=R},M.diffed=function(e){Qe&&Qe(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Je.push(t)!==1&&Ge===M.requestAnimationFrame||((Ge=M.requestAnimationFrame)||sn)(rn)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ve=R=null},M.__c=function(e,t){t.some(function(n){try{n.__h.forEach(de),n.__h=n.__h.filter(function(o){return!o.__||ke(o)})}catch(o){t.some(function(s){s.__h&&(s.__h=[])}),t=[],M.__e(o,n.__v)}}),et&&et(e,t)},M.unmount=function(e){tt&&tt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{de(o)}catch(s){t=s}}),n.__H=void 0,t&&M.__e(t,n.__v))};var rt=typeof requestAnimationFrame=="function";function sn(e){var t,n=function(){clearTimeout(o),rt&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);rt&&(t=requestAnimationFrame(n))}function de(e){var t=R,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),R=t}function ke(e){var t=R;e.__c=e.__(),R=t}function it(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function st(e,t){return typeof t=="function"?t(e):t}const p={fabBg:"#3b82f6",fabBgHover:"#2563eb",panelBg:"#0f172a",panelBorder:"#1e293b",panelHeaderBg:"#1e293b",toolBtnBg:"#1e293b",toolBtnBgHover:"#334155",toolBtnBgActive:"#3b82f6",text:"#e2e8f0",textMuted:"#94a3b8",textBright:"#f8fafc",closeBtnHover:"#ef4444",shadow:"rgba(0, 0, 0, 0.4)"},lt=48,at=300,ln=5,an={position:"fixed",width:`${lt}px`,height:`${lt}px`,borderRadius:"50%",backgroundColor:p.fabBg,color:"#fff",border:"none",cursor:"grab",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999,boxShadow:`0 4px 12px ${p.shadow}`,transition:"background-color 0.15s ease, box-shadow 0.15s ease",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},cn={position:"fixed",top:"0",right:"0",width:`${at}px`,height:"100vh",backgroundColor:p.panelBg,borderLeft:`1px solid ${p.panelBorder}`,zIndex:999998,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",color:p.text,boxShadow:`-4px 0 20px ${p.shadow}`},dn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:p.panelHeaderBg,borderBottom:`1px solid ${p.panelBorder}`,flexShrink:"0"},un={fontSize:"14px",fontWeight:"600",color:p.textBright,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"220px"},pn={width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:"transparent",color:p.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",lineHeight:"1",flexShrink:"0"},fn={display:"flex",flexDirection:"column",gap:"4px",padding:"12px",overflowY:"auto",flex:"1"},gn={display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"8px",border:"none",backgroundColor:p.toolBtnBg,color:p.text,cursor:"pointer",fontSize:"13px",fontWeight:"500",textAlign:"left",transition:"background-color 0.12s ease",width:"100%"},hn={width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",flexShrink:"0"},_n={flex:"1",padding:"16px",overflowY:"auto",fontSize:"13px",color:p.textMuted,display:"flex",alignItems:"center",justifyContent:"center"},xn="translateX(0)",yn=`translateX(${at}px)`,mn=500;let bn=1;const q=[],V=[];function Sn(){const e=new WeakSet;return(t,n)=>{if(typeof n=="object"&&n!==null){if(e.has(n))return"[Circular]";e.add(n)}return n}}function vn(e){if(e===null)return"null";if(e===void 0)return"undefined";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(e instanceof Error)return`${e.name}: ${e.message}`;try{return JSON.stringify(e,Sn(),2)}catch{return String(e)}}function wn(e,t){const n={id:bn++,level:e,args:t.map(vn),timestamp:Date.now()};q.length>=mn&&q.shift(),q.push(n);for(const o of V)o()}function X(){return[...q]}function kn(){q.length=0;for(const e of V)e()}function ct(e){return V.push(e),()=>{const t=V.indexOf(e);t!==-1&&V.splice(t,1)}}function Cn(){const e=["log","warn","error","info"];for(const t of e){const n=console[t].bind(console);console[t]=(...o)=>{wn(t,o),n(...o)}}}const dt={log:"#94a3b8",info:"#3b82f6",warn:"#eab308",error:"#ef4444"},$n={log:"rgba(148, 163, 184, 0.15)",info:"rgba(59, 130, 246, 0.15)",warn:"rgba(234, 179, 8, 0.15)",error:"rgba(239, 68, 68, 0.15)"},ut=["log","info","warn","error"];function En(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),r=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${o}:${s}.${r}`}const Bn={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Tn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Rn={display:"flex",gap:"4px",flexWrap:"wrap"},Mn={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:p.toolBtnBg,color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},zn={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Dn={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all"},Ln={display:"flex",alignItems:"center",gap:"6px"},Hn={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},In={fontSize:"10px",color:p.textMuted,flexShrink:"0"},Pn={color:p.text,whiteSpace:"pre-wrap",lineHeight:"1.4"},On={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px"};function An(e,t){return{padding:"2px 6px",borderRadius:"3px",border:"none",backgroundColor:e?dt[t]:p.toolBtnBg,color:e?"#fff":p.textMuted,cursor:"pointer",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"}}function Nn(){const[e,t]=b(X),[n,o]=b(new Set(ut));O(()=>ct(()=>{t(X())}),[]);const s=k(()=>{kn(),t([])},[]),r=k(d=>{o(g=>{const c=new Set(g);return c.has(d)?c.delete(d):c.add(d),c})},[]),l=e.filter(d=>n.has(d.level));return i("div",{style:Bn},i("div",{style:Tn},i("div",{style:Rn},ut.map(d=>i("button",{key:d,style:An(n.has(d),d),onClick:()=>r(d),title:`Toggle ${d} entries`},d))),i("button",{style:Mn,onClick:s,title:"Clear console entries"},"Clear")),l.length===0?i("div",{style:On},"No console entries"):i("div",{style:zn},l.map(d=>i("div",{key:d.id,style:{...Dn,backgroundColor:$n[d.level]}},i("div",{style:Ln},i("span",{style:{...Hn,backgroundColor:dt[d.level],color:"#fff"}},d.level),i("span",{style:In},En(d.timestamp))),i("div",{style:Pn},d.args.join(" "))))))}const Fn=200;let pt=1;const Y=[],G=[];function Wn(e){if(e==null)return 0;if(typeof e=="string")return e.length;if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(e instanceof FormData){let t=0;return e.forEach(n=>{typeof n=="string"?t+=n.length:n instanceof Blob&&(t+=n.size)}),t}return e instanceof URLSearchParams?e.toString().length:0}function ft(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function gt(e){Y.length>=Fn&&Y.shift(),Y.push(e);for(const t of G)t()}function J(){return[...Y]}function jn(){Y.length=0;for(const e of G)e()}function ht(e){return G.push(e),()=>{const t=G.indexOf(e);t!==-1&&G.splice(t,1)}}function Un(){const e=window.fetch.bind(window);window.fetch=async(t,n)=>{const o=(n?.method??"GET").toUpperCase(),s=typeof t=="string"?t:t instanceof URL?t.href:t.url,r=Wn(n?.body??null);let l={};if(n?.headers)if(n.headers instanceof Headers)l=ft(n.headers);else if(Array.isArray(n.headers))for(const[c,f]of n.headers)l[c]=f;else l={...n.headers};const d=performance.now(),g=Date.now();try{const c=await e(t,n),f=performance.now()-d,a=c.clone();let u=0;try{u=(await a.blob()).size}catch{u=0}const h={id:pt++,method:o,url:s,status:c.status,statusText:c.statusText,duration:Math.round(f),requestSize:r,responseSize:u,requestHeaders:l,responseHeaders:ft(c.headers),startTime:d,timestamp:g};return gt(h),c}catch(c){const f=performance.now()-d,a={id:pt++,method:o,url:s,status:0,statusText:"Network Error",duration:Math.round(f),requestSize:r,responseSize:0,requestHeaders:l,responseHeaders:{},startTime:d,timestamp:g};throw gt(a),c}}}const qn={GET:"#22c55e",POST:"#3b82f6",PUT:"#eab308",DELETE:"#ef4444",PATCH:"#a855f7"},Vn="#94a3b8";function Xn(e){return qn[e]??Vn}function Yn(e){return e===0?"#ef4444":e<300?"#22c55e":e<400?"#3b82f6":e<500?"#eab308":"#ef4444"}function _t(e){return e===0?"rgba(239, 68, 68, 0.15)":e<300?"rgba(34, 197, 94, 0.15)":e<400?"rgba(59, 130, 246, 0.15)":e<500?"rgba(234, 179, 8, 0.15)":"rgba(239, 68, 68, 0.15)"}function xt(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),r=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${o}:${s}.${r}`}function yt(e){return e<1e3?`${e}ms`:`${(e/1e3).toFixed(1)}s`}function mt(e){return e===0?"0 B":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function Gn(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}const Jn={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Kn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Zn={fontSize:"10px",color:p.textMuted,flexShrink:"0"},Qn={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:p.toolBtnBg,color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},eo={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},to={display:"flex",flexDirection:"column",padding:"5px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",cursor:"pointer",transition:"background-color 0.1s ease"},no={display:"flex",alignItems:"center",gap:"6px",minWidth:"0"},oo={padding:"1px 5px",borderRadius:"3px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},ro={padding:"1px 4px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",flexShrink:"0"},io={flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:p.text,fontSize:"10px",minWidth:"0"},so={fontSize:"10px",color:p.textMuted,flexShrink:"0",textAlign:"right",minWidth:"40px"},lo={fontSize:"10px",color:p.textMuted,flexShrink:"0"},ao={marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5",wordBreak:"break-all"},Ce={fontWeight:"600",color:p.textBright,marginBottom:"2px",marginTop:"6px",display:"block"},co={color:p.textMuted},bt={display:"flex",gap:"4px",color:p.textMuted,padding:"1px 0"},St={color:"#93c5fd",flexShrink:"0"},uo={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px"};function po({entry:e}){const t=Object.entries(e.requestHeaders),n=Object.entries(e.responseHeaders);return i("div",{style:ao},i("span",{style:{...Ce,marginTop:"0"}},"General"),i("div",{style:co},i("div",null,`URL: ${e.url}`),i("div",null,`Method: ${e.method}`),i("div",null,`Status: ${e.status} ${e.statusText}`),i("div",null,`Duration: ${yt(e.duration)}`),i("div",null,`Request size: ${mt(e.requestSize)}`),i("div",null,`Response size: ${mt(e.responseSize)}`),i("div",null,`Time: ${xt(e.timestamp)}`)),t.length>0?i("div",null,i("span",{style:Ce},"Request Headers"),t.map(([o,s])=>i("div",{key:o,style:bt},i("span",{style:St},`${o}:`),i("span",null,s)))):null,n.length>0?i("div",null,i("span",{style:Ce},"Response Headers"),n.map(([o,s])=>i("div",{key:o,style:bt},i("span",{style:St},`${o}:`),i("span",null,s)))):null)}function fo(){const[e,t]=b(J),[n,o]=b(null);O(()=>ht(()=>{t(J())}),[]);const s=k(()=>{jn(),t([]),o(null)},[]),r=k(l=>{o(d=>d===l?null:l)},[]);return i("div",{style:Jn},i("div",{style:Kn},i("span",{style:Zn},`${e.length} request${e.length!==1?"s":""}`),i("button",{style:Qn,onClick:s,title:"Clear network entries"},"Clear")),e.length===0?i("div",{style:uo},"No network requests"):i("div",{style:eo},e.map(l=>{const d=n===l.id;return i("div",{key:l.id,style:{...to,backgroundColor:d?"rgba(59, 130, 246, 0.12)":_t(l.status)},onClick:()=>r(l.id)},i("div",{style:no},i("span",{style:{...oo,backgroundColor:Xn(l.method)}},l.method),i("span",{style:{...ro,color:Yn(l.status),backgroundColor:_t(l.status)}},l.status===0?"ERR":String(l.status)),i("span",{style:io,title:l.url},Gn(l.url,40)),i("span",{style:so},yt(l.duration)),i("span",{style:lo},xt(l.timestamp))),d?i(po,{entry:l}):null)})))}const go=100;let vt=1;const K=[],Z=[];let $e=null;function wt(e){$e=e}function kt(e){K.length>=go&&K.shift(),K.push(e);for(const t of Z)t();$e&&$e(e)}function Q(){return[...K]}function ho(){K.length=0;for(const e of Z)e()}function Ct(e){return Z.push(e),()=>{const t=Z.indexOf(e);t!==-1&&Z.splice(t,1)}}function _o(){const e=window.onerror;window.onerror=(t,n,o,s,r)=>{const l={id:vt++,message:typeof t=="string"?t:"Unknown error",stack:r?.stack??"",source:n??"",line:o??0,col:s??0,timestamp:Date.now(),type:"error"};return kt(l),typeof e=="function"?e(t,n,o,s,r):!1},window.addEventListener("unhandledrejection",t=>{const n=t.reason,o=n instanceof Error,s=o?n.message:typeof n=="string"?n:"Unhandled promise rejection",r=o?n.stack??"":"",l={id:vt++,message:s,stack:r,source:"",line:0,col:0,timestamp:Date.now(),type:"unhandledrejection"};kt(l)})}const xo="#ef4444",yo="rgba(239, 68, 68, 0.15)",mo="#f97316",bo="rgba(249, 115, 22, 0.15)",So={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},vo={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},wo={fontSize:"10px",color:p.textMuted,flexShrink:"0"},ko={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:p.toolBtnBg,color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Co={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},$o={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",cursor:"pointer"},Eo={display:"flex",alignItems:"center",gap:"6px"},Bo={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},To={fontSize:"10px",color:p.textMuted,flexShrink:"0"},$t={padding:"1px 0",wordBreak:"break-all"},Ro={...$t,opacity:"0.5"},Mo={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500",backgroundColor:"#dc2626",color:"#fff"},zo={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px"};function Do(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),r=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${o}:${s}.${r}`}function Lo(e){return e==="error"?xo:mo}function Ho(e){return e==="error"?yo:bo}function Io(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function Po(e){return e.includes("node_modules")}function Oo({onReportBug:e}){const[t,n]=b(Q),[o,s]=b(null);O(()=>Ct(()=>{n(Q())}),[]);const r=k(()=>{ho(),n([]),s(null)},[]),l=k(d=>{s(g=>g===d?null:d)},[]);return i("div",{style:So},i("div",{style:vo},i("span",{style:wo},`${t.length} error${t.length!==1?"s":""}`),i("button",{style:ko,onClick:r,title:"Clear error entries"},"Clear")),t.length===0?i("div",{style:zo},"No errors captured"):i("div",{style:Co},t.map(d=>{const g=o===d.id,c=Io(d.stack);return i("div",{key:d.id,style:{...$o,backgroundColor:g?"rgba(239, 68, 68, 0.12)":Ho(d.type)},onClick:()=>l(d.id)},i("div",{style:Eo},i("span",{style:{...Bo,backgroundColor:Lo(d.type)}},d.type==="error"?"ERR":"REJ"),i("span",{style:{flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:p.text,fontSize:"10px"}},d.message),i("span",{style:To},Do(d.timestamp))),g?i("div",{style:{marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5"}},d.source?i("div",{style:{color:"#93c5fd",marginBottom:"4px"}},`${d.source}:${d.line}:${d.col}`):null,c.length>0?c.map((f,a)=>i("div",{key:a,style:Po(f)?Ro:$t},f)):i("span",{style:{color:p.textMuted}},"No stack trace available"),e?i("button",{style:{...Mo,marginTop:"8px",width:"100%"},onClick:f=>{f.stopPropagation(),e(d)}},"Report Bug"):null):null)})))}const Ao=["low","medium","high","critical"],No={low:"#22c55e",medium:"#eab308",high:"#f97316",critical:"#ef4444"},Et={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},ue={fontSize:"11px",fontWeight:"600",color:p.textBright,marginBottom:"3px",display:"block"},Bt={width:"100%",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${p.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:p.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},Fo={...Bt,minHeight:"60px",resize:"vertical",lineHeight:"1.4"},Wo={display:"flex",gap:"4px"},jo={padding:"4px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flex:"1",textAlign:"center"},Ee={padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:p.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",width:"100%",marginTop:"4px"},Uo={...Ee,opacity:"0.5",cursor:"not-allowed"},Tt={padding:"8px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textAlign:"center"},qo={...Tt,backgroundColor:"rgba(34, 197, 94, 0.15)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},Vo={...Tt,backgroundColor:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"},Xo={fontSize:"10px",fontFamily:"monospace",color:p.textMuted,backgroundColor:"rgba(0, 0, 0, 0.3)",padding:"6px 8px",borderRadius:"4px",maxHeight:"60px",overflowY:"auto",lineHeight:"1.4",whiteSpace:"pre-wrap",wordBreak:"break-all"},Rt={padding:"4px 8px",borderRadius:"4px",border:"none",backgroundColor:"rgba(255, 255, 255, 0.1)",color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",alignSelf:"flex-end"};function Mt({apiClient:e,projectId:t,prefillTitle:n,prefillStack:o,onClose:s}){const[r,l]=b(n??""),[d,g]=b(""),[c,f]=b("medium"),[a,u]=b("idle"),[h,S]=b(""),C=r.trim().length>0&&a!=="submitting",w=k(async()=>{if(C){u("submitting"),S("");try{const x={projectId:t,title:r.trim(),description:d.trim(),severity:c,url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()};o&&(x.stackTrace=o),await e.createBug(x),u("success"),l(""),g(""),f("medium")}catch(x){u("error");const y=x instanceof Error?x.message:"Failed to submit bug report";S(y)}}},[C,r,d,c,t,o,e]);return a==="success"?i("div",{style:Et},i("div",{style:qo},"Bug report submitted."),i("button",{style:{...Ee,marginTop:"8px"},onClick:()=>u("idle")},"Report Another"),s?i("button",{style:{...Rt,marginTop:"4px",alignSelf:"center"},onClick:s},"Close"):null):i("div",{style:Et},s?i("button",{style:Rt,onClick:s},"Back"):null,i("div",null,i("label",{style:ue},"Title"),i("input",{style:Bt,type:"text",value:r,placeholder:"Describe the bug briefly",onInput:x=>{l(x.target.value)}})),i("div",null,i("label",{style:ue},"Description"),i("textarea",{style:Fo,value:d,placeholder:"Steps to reproduce, expected vs actual behavior",onInput:x=>{g(x.target.value)}})),o?i("div",null,i("label",{style:ue},"Stack Trace"),i("div",{style:Xo},o)):null,i("div",null,i("label",{style:ue},"Severity"),i("div",{style:Wo},Ao.map(x=>i("button",{key:x,style:{...jo,backgroundColor:c===x?No[x]:p.toolBtnBg,color:c===x?"#fff":p.textMuted},onClick:()=>f(x)},x)))),a==="error"?i("div",{style:Vo},h||"Submission failed"):null,i("button",{style:C?Ee:Uo,onClick:w,disabled:!C},a==="submitting"?"Submitting...":"Submit Bug Report"))}const Yo={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},Go={display:"flex",gap:"6px",flexShrink:"0"},Jo={flex:"1",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${p.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:p.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},zt={padding:"6px 10px",borderRadius:"4px",border:"none",backgroundColor:p.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",flexShrink:"0"},Ko={...zt,opacity:"0.5",cursor:"not-allowed"},Dt={flex:"1",overflowY:"auto",fontSize:"12px",lineHeight:"1.5",color:p.text,whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"8px",borderRadius:"4px",minHeight:"80px"},Zo={...Dt,color:p.textMuted,display:"flex",alignItems:"center",justifyContent:"center",fontStyle:"italic"},Qo={padding:"8px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px"};function er({apiBase:e,pinHash:t}){const[n,o]=b(""),[s,r]=b(""),[l,d]=b("idle"),[g,c]=b(""),f=F(null),a=n.trim().length>0&&l!=="loading"&&l!=="streaming",u=k(async()=>{if(!a)return;const S=n.trim();r(""),d("loading"),c(""),f.current&&f.current.abort();const C=new AbortController;f.current=C;try{const w=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:S,context:window.location.href}),signal:C.signal});if(!w.ok)throw new Error(`Request failed (${w.status})`);const x=w.body?.getReader();if(!x)throw new Error("No response stream");d("streaming");const y=new TextDecoder;for(;;){const{done:B,value:m}=await x.read();if(B)break;const T=y.decode(m,{stream:!0});T&&r(D=>D+T)}d("idle")}catch(w){if(w.name==="AbortError")return;d("error");const x=w instanceof Error?w.message:"Analysis failed";c(x)}},[a,n,e,t]),h=k(S=>{S.key==="Enter"&&!S.shiftKey&&a&&(S.preventDefault(),u())},[a,u]);return i("div",{style:Yo},i("div",{style:Go},i("input",{style:Jo,type:"text",value:n,placeholder:"Ask about code, errors, concepts...",onInput:S=>{o(S.target.value)},onKeyDown:h}),i("button",{style:a?zt:Ko,onClick:u,disabled:!a},l==="loading"||l==="streaming"?"...":"Send")),l==="error"?i("div",{style:Qo},g):null,s?i("div",{style:Dt},s):i("div",{style:Zo},l==="loading"?"Thinking...":"Response will appear here"))}const tr=100,nr={LCP:[2500,4e3],CLS:[.1,.25],INP:[200,500],FCP:[1800,3e3],TTFB:[800,1800]};let or=1;const ee=[],pe=[];function rr(e,t){const n=nr[e];return t<=n[0]?"good":t<=n[1]?"needs-improvement":"poor"}function te(e,t){const n={id:or++,timestamp:Date.now(),metric:e,value:Math.round(e==="CLS"?t*1e3:t)/(e==="CLS"?1e3:1),rating:rr(e,t)};ee.length>=tr&&ee.shift(),ee.push(n);for(const o of pe)o(n)}function Lt(){return[...ee]}function ir(){ee.length=0}function Ht(e){return pe.push(e),()=>{const t=pe.indexOf(e);t!==-1&&pe.splice(t,1)}}function sr(){if(!(typeof PerformanceObserver>"u")){try{new PerformanceObserver(t=>{const n=t.getEntries(),o=n[n.length-1];o&&te("LCP",o.startTime)}).observe({type:"largest-contentful-paint",buffered:!0})}catch{}try{let e=0;new PerformanceObserver(n=>{for(const o of n.getEntries()){const s=o;!s.hadRecentInput&&typeof s.value=="number"&&(e+=s.value,te("CLS",e))}}).observe({type:"layout-shift",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries())n.duration>0&&te("INP",n.duration)}).observe({type:"event",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries())n.name==="first-contentful-paint"&&te("FCP",n.startTime)}).observe({type:"paint",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries()){const o=n;o.responseStart>0&&te("TTFB",o.responseStart-o.requestStart)}}).observe({type:"navigation",buffered:!0})}catch{}}}const Be={good:"#22c55e","needs-improvement":"#eab308",poor:"#ef4444"},lr={good:"rgba(34, 197, 94, 0.15)","needs-improvement":"rgba(234, 179, 8, 0.15)",poor:"rgba(239, 68, 68, 0.15)"},ar={LCP:"Largest Contentful Paint",CLS:"Cumulative Layout Shift",INP:"Interaction to Next Paint",FCP:"First Contentful Paint",TTFB:"Time to First Byte"},It={LCP:"ms",CLS:"",INP:"ms",FCP:"ms",TTFB:"ms"},cr=["LCP","FCP","CLS","INP","TTFB"];function dr(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${n}:${o}:${s}`}function ur(e){const t={};for(const n of e){const o=t[n.metric];(!o||n.id>o.id)&&(t[n.metric]=n)}return t}const pr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},fr={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",flexShrink:"0"},gr={fontSize:"11px",fontWeight:"600",color:p.textBright,textTransform:"uppercase",letterSpacing:"0.5px"},hr={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:p.toolBtnBg,color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},_r={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px",padding:"4px 8px 8px",flexShrink:"0"},xr={display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",padding:"8px 6px",borderRadius:"6px",backgroundColor:p.toolBtnBg},yr={fontSize:"16px",fontWeight:"700",fontFamily:"monospace"},mr={fontSize:"9px",fontWeight:"500",color:p.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},br={height:"1px",backgroundColor:p.panelBorder,margin:"0 8px",flexShrink:"0"},Sr={fontSize:"10px",fontWeight:"600",color:p.textMuted,padding:"6px 8px 2px",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},vr={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},wr={display:"flex",alignItems:"center",gap:"6px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace"},kr={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flexShrink:"0",color:"#fff"},Cr={fontWeight:"600",color:p.text,flexShrink:"0",minWidth:"32px"},$r={color:p.textBright,flex:"1"},Er={fontSize:"10px",color:p.textMuted,flexShrink:"0"},Br={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px"};function Tr(e){return e==="good"?"Good":e==="needs-improvement"?"OK":"Poor"}function Rr(){const[e,t]=b(Lt);O(()=>Ht(()=>{t(Lt())}),[]);const n=k(()=>{ir(),t([])},[]),o=ur(e),s=cr.map(r=>{const l=o[r];if(!l)return null;const d=It[r],g=r==="CLS"?l.value.toFixed(3):`${Math.round(l.value)}`;return{metric:r,entry:l,displayValue:g,unit:d}}).filter(Boolean);return i("div",{style:pr},i("div",{style:fr},i("span",{style:gr},"Web Vitals"),i("button",{style:hr,onClick:n,title:"Clear performance entries"},"Clear")),s.length>0?i("div",{style:_r},s.map(r=>i("div",{key:r.metric,style:{...xr,borderLeft:`3px solid ${Be[r.entry.rating]}`},title:ar[r.metric]},i("span",{style:{...yr,color:Be[r.entry.rating]}},`${r.displayValue}${r.unit}`),i("span",{style:mr},r.metric)))):null,e.length>0?i("div",{style:br}):null,e.length>0?i("div",{style:Sr},"Event Log"):null,e.length===0?i("div",{style:Br},"Waiting for Web Vitals data..."):i("div",{style:vr},[...e].reverse().map(r=>{const l=It[r.metric],d=r.metric==="CLS"?r.value.toFixed(3):`${Math.round(r.value)}`;return i("div",{key:r.id,style:{...wr,backgroundColor:lr[r.rating]}},i("span",{style:{...kr,backgroundColor:Be[r.rating]}},Tr(r.rating)),i("span",{style:Cr},r.metric),i("span",{style:$r},`${d}${l}`),i("span",{style:Er},dr(r.timestamp)))})))}const Te="devtools-debug-snapshots",Mr=5;function zr(){try{const e=localStorage.getItem(Te);return e?JSON.parse(e):[]}catch{return[]}}function Pt(e){try{localStorage.setItem(Te,JSON.stringify(e))}catch{}}let Dr=1;function ne(e){return String(e).padStart(2,"0")}function Ot(e){const t=new Date(e);return`${ne(t.getHours())}:${ne(t.getMinutes())}:${ne(t.getSeconds())}`}function Lr(){const e=[];try{const t=Object.keys(localStorage).filter(n=>n!==Te);if(t.length){const n=t.slice(0,30).map(o=>{const s=localStorage.getItem(o)??"";return`  ${o}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`localStorage (${t.length} keys):
${n.join(`
`)}`)}}catch{}try{const t=Object.keys(sessionStorage);if(t.length){const n=t.slice(0,30).map(o=>{const s=sessionStorage.getItem(o)??"";return`  ${o}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`sessionStorage (${t.length} keys):
${n.join(`
`)}`)}}catch{}return e.length?e.join(`

`):"(empty)"}function Hr(){try{const t=performance.getEntriesByType("navigation")[0];return t?[`DNS: ${Math.round(t.domainLookupEnd-t.domainLookupStart)}ms`,`Connect: ${Math.round(t.connectEnd-t.connectStart)}ms`,`TTFB: ${Math.round(t.responseStart-t.requestStart)}ms`,`DOM Ready: ${Math.round(t.domContentLoadedEventEnd)}ms`,`Page Load: ${Math.round(t.loadEventEnd)}ms`].join(" | "):"(not available)"}catch{return"(not available)"}}function Ir(){try{const e=document.cookie.split(";").map(t=>t.trim().split("=")[0]).filter(Boolean);return e.length?e.join(", "):"(none)"}catch{return"(unavailable)"}}function Pr(e,t){const o=new Date().toISOString().replace("T"," ").slice(0,19),s=X(),r=J(),l=Q(),d=t?s.filter(u=>u.level==="error"||u.level==="warn"):[...s],g=t?r.filter(u=>u.status===0||u.status>=400):[...r],c=[];c.push(`# Debug Snapshot — ${o}`),c.push(""),c.push(`**URL:** ${window.location.href}`),document.title&&c.push(`**Page:** ${document.title}`),c.push(`**Viewport:** ${window.innerWidth} x ${window.innerHeight}`),c.push(`**User-Agent:** ${navigator.userAgent}`),c.push(`**Cookies:** ${Ir()}`),c.push(""),e.length&&(c.push(`## Screenshots (${e.length} downloaded)`),c.push(e.map(u=>u.name).join(", ")),c.push(""));const f=t?`${d.length} warnings/errors of ${s.length} total`:`${d.length} entries`;if(c.push(`## Console — ${f}`),!d.length)c.push("(none)");else for(const u of d.slice(-60))c.push(`[${Ot(u.timestamp)}] ${u.level.toUpperCase().padEnd(5)} ${u.args.join(" ")}`);c.push("");const a=t?`${g.length} errors of ${r.length} total`:`${g.length} requests`;if(c.push(`## Network — ${a}`),!g.length)c.push("(none)");else for(const u of g.slice(-40)){const h=u.status===0?"ERR":String(u.status);c.push(`${u.method.padEnd(6)} ${u.url} — ${h} (${u.duration}ms)`)}if(c.push(""),c.push(`## JavaScript Errors — ${l.length}`),!l.length)c.push("(none)");else for(const u of l){const h=u.type==="unhandledrejection"?"UnhandledRejection":"Error";if(c.push(`[${Ot(u.timestamp)}] ${h}: ${u.message}`),u.source&&c.push(`  at ${u.source}:${u.line}:${u.col}`),u.stack){const S=u.stack.split(`
`).slice(1,7).map(C=>C.trim()).filter(Boolean);for(const C of S)c.push(`  ${C}`)}}return c.push(""),c.push("## Storage"),c.push(Lr()),c.push(""),c.push("## Page Timing"),c.push(Hr()),c.join(`
`)}async function Or(){const e=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser"},preferCurrentTab:!0}),t=document.createElement("video");t.srcObject=e,t.muted=!0,await new Promise(r=>{t.onloadedmetadata=()=>{t.play().then(r).catch(r)}}),await new Promise(r=>setTimeout(r,120));const n=document.createElement("canvas");n.width=t.videoWidth||window.innerWidth,n.height=t.videoHeight||window.innerHeight;const o=n.getContext("2d");let s=null;return o&&(o.drawImage(t,0,0,n.width,n.height),s=await new Promise(r=>n.toBlob(r,"image/png"))),e.getTracks().forEach(r=>r.stop()),t.srcObject=null,s}const Ar={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",boxSizing:"border-box"},Nr={display:"flex",flexShrink:"0",borderBottom:`1px solid ${p.panelBorder}`};function At(e){return{flex:"1",padding:"7px 4px",border:"none",borderBottom:e?`2px solid ${p.fabBg}`:"2px solid transparent",backgroundColor:"transparent",color:e?p.textBright:p.textMuted,fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"color 0.1s",boxSizing:"border-box"}}const Nt={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"8px",display:"flex",flexDirection:"column",gap:"8px",boxSizing:"border-box"},Ft={fontSize:"10px",fontWeight:"600",color:p.textMuted,textTransform:"uppercase",letterSpacing:"0.4px",marginBottom:"4px",display:"block"},Fr={display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"4px"};function Re(e,t){return{padding:"6px",borderRadius:"4px",backgroundColor:e>0?`${t}22`:p.toolBtnBg,border:`1px solid ${e>0?t:p.panelBorder}`,textAlign:"center"}}const Me={fontSize:"16px",fontWeight:"700",color:p.textBright,display:"block"},ze={fontSize:"9px",color:p.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},Wr={border:`1px dashed ${p.panelBorder}`,borderRadius:"6px",padding:"10px",minHeight:"64px",display:"flex",flexDirection:"column",gap:"6px"},jr={display:"flex",flexWrap:"wrap",gap:"4px"},Ur={position:"relative",width:"56px",height:"40px",borderRadius:"3px",overflow:"hidden",flexShrink:"0",border:`1px solid ${p.panelBorder}`,cursor:"default"},qr={width:"100%",height:"100%",objectFit:"cover"},Vr={position:"absolute",top:"1px",right:"1px",width:"14px",height:"14px",borderRadius:"2px",border:"none",backgroundColor:"rgba(0,0,0,0.7)",color:"#fff",fontSize:"9px",lineHeight:"1",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},Xr={fontSize:"11px",color:p.textMuted,textAlign:"center"},Wt={display:"flex",gap:"4px"};function fe(e="muted"){const t=e==="primary"?p.fabBg:e==="danger"?"#7f1d1d":p.toolBtnBg,n=e==="primary"?"#fff":e==="danger"?"#fca5a5":p.textMuted;return{flex:"1",padding:"5px 8px",borderRadius:"4px",border:"none",backgroundColor:t,color:n,fontSize:"11px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap"}}const Yr=e=>({width:"100%",padding:"9px 12px",borderRadius:"6px",border:"none",backgroundColor:e?"#1e293b":p.fabBg,color:e?p.textMuted:"#fff",fontSize:"12px",fontWeight:"600",cursor:e?"not-allowed":"pointer"}),Gr=e=>({padding:"3px 8px",borderRadius:"4px",border:`1px solid ${e?p.fabBg:p.panelBorder}`,backgroundColor:e?`${p.fabBg}33`:"transparent",color:e?"#93c5fd":p.textMuted,fontSize:"10px",cursor:"pointer",fontWeight:"500"}),Jr={borderRadius:"6px",border:`1px solid ${p.panelBorder}`,backgroundColor:p.toolBtnBg,padding:"8px",display:"flex",flexDirection:"column",gap:"4px"},Kr={fontSize:"10px",color:p.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Zr={fontSize:"10px",color:p.textMuted},Qr={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px",padding:"20px",textAlign:"center"};function ei(){const[e,t]=b("capture"),[n,o]=b([]),[s,r]=b(zr),[l,d]=b(!1),[g,c]=b(null),[f,a]=b(!0);O(()=>()=>{for(const _ of n)URL.revokeObjectURL(_.url)},[]),O(()=>{if(e!=="capture")return;function _(v){const $=v.clipboardData?.items;if($){for(const z of Array.from($))if(z.type.startsWith("image/")){const ge=z.getAsFile();ge&&u(ge)}}}return window.addEventListener("paste",_),()=>window.removeEventListener("paste",_)},[e]);function u(_){const v=Dr++,$=URL.createObjectURL(_);o(z=>[...z,{id:v,url:$,blob:_,name:`screenshot-${v}.png`}])}const h=k(async()=>{d(!0);try{const _=await Or();_&&u(_)}catch{}d(!1)},[]),S=k(_=>{o(v=>{const $=v.find(z=>z.id===_);return $&&URL.revokeObjectURL($.url),v.filter(z=>z.id!==_)})},[]),C=k(()=>{o(_=>{for(const v of _)URL.revokeObjectURL(v.url);return[]})},[]),w=k(_=>{for(const v of _){const $=document.createElement("a");$.href=v.url,$.download=v.name,document.body.appendChild($),$.click(),document.body.removeChild($)}},[]),x=k(_=>{c(_),setTimeout(()=>c(null),2e3)},[]),y=k(async()=>{const _=Pr(n,f);n.length>0&&w(n);const v={id:String(Date.now()),timestamp:Date.now(),pageUrl:window.location.href,report:_};r($=>{const z=[v,...$].slice(0,Mr);return Pt(z),z}),await navigator.clipboard.writeText(_),x(v.id)},[n,f,w,x]),B=k(async _=>{await navigator.clipboard.writeText(_.report),x(_.id)},[x]),m=k(_=>{r(v=>{const $=v.filter(z=>z.id!==_);return Pt($),$})},[]),T=X(),D=J(),I=Q(),H=T.filter(_=>_.level==="error"||_.level==="warn").length,L=D.filter(_=>_.status===0||_.status>=400).length;return i("div",{style:Ar},i("div",{style:Nr},i("button",{style:At(e==="capture"),onClick:()=>t("capture")},"Capture"),i("button",{style:At(e==="history"),onClick:()=>t("history")},`History (${s.length})`)),e==="capture"?i("div",{style:Nt},i("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},i("span",{style:Ft},"Report data"),i("button",{style:Gr(f),onClick:()=>a(_=>!_)},f?"Errors only":"All entries")),i("div",{style:Fr},i("div",{style:Re(H,"#eab308")},i("span",{style:Me},String(H)),i("span",{style:ze},"Console")),i("div",{style:Re(L,"#ef4444")},i("span",{style:Me},String(L)),i("span",{style:ze},"Net Errors")),i("div",{style:Re(I.length,"#ef4444")},i("span",{style:Me},String(I.length)),i("span",{style:ze},"JS Errors"))),i("div",null,i("span",{style:Ft},`Screenshots (${n.length})`),i("div",{style:Wr},n.length===0?i("div",{style:Xr},"Cmd+V to paste a screenshot",i("br",null),"or click Capture below"):i("div",{style:jr},n.map(_=>i("div",{key:_.id,style:Ur,title:_.name},i("img",{src:_.url,style:qr,alt:_.name}),i("button",{style:Vr,onClick:()=>S(_.id),title:"Remove"},"×")))),i("div",{style:Wt},i("button",{style:fe("muted"),onClick:h,disabled:l,title:"Capture current screen (opens share dialog)"},l?"Capturing...":"Capture Screen"),n.length>0?i("button",{style:fe("danger"),onClick:C,title:"Delete all screenshots"},"Delete All"):null))),i("button",{style:Yr(!1),onClick:y,title:"Copy debug report to clipboard. Screenshots (if any) download as files."},g?"Copied!":"Copy Report & Download Screenshots"),i("div",{style:{fontSize:"10px",color:p.textMuted,lineHeight:"1.4"}},"Copies a full markdown report. Screenshots download to your Downloads folder as numbered PNG files. Report saved to History for re-copying.")):i("div",{style:{...Nt,gap:"6px"}},s.length===0?i("div",{style:Qr},"No snapshots yet. Copy a report from the Capture tab to save it here."):s.map(_=>{const v=new Date(_.timestamp),$=`${v.toLocaleDateString()} ${ne(v.getHours())}:${ne(v.getMinutes())}`,z=g===_.id;return i("div",{key:_.id,style:Jr},i("div",{style:Zr},$),i("div",{style:Kr,title:_.pageUrl},_.pageUrl),i("div",{style:Wt},i("button",{style:fe(z?"primary":"muted"),onClick:()=>B(_)},z?"Copied!":"Copy Report"),i("button",{style:fe("danger"),onClick:()=>m(_.id)},"Delete")))})))}const jt=[{id:"debug",label:"Debug Snapshot",icon:"⊚"},{id:"console",label:"Console Viewer",icon:">"},{id:"network",label:"Network Viewer",icon:"⇅"},{id:"errors",label:"Error Log",icon:"⚠"},{id:"bugs",label:"Bug Reporter",icon:"🐛"},{id:"perf",label:"Performance",icon:"⚡"},{id:"ai",label:"AI Assistant",icon:"✨"}];function ti({projectId:e,isOpen:t,onClose:n,apiClient:o,apiBase:s,pinHash:r}){const[l,d]=b(null),[g,c]=b(!1),[f,a]=b(null),[u,h]=b(""),[S,C]=b(""),w=k(m=>{d(T=>(T==="bugs"&&m!=="bugs"&&(h(""),C("")),T===m?null:m))},[]),x=k(m=>{h(m.message),C(m.stack),d("bugs")},[]),y=l?jt.find(m=>m.id===l):null;return i("div",{style:{...cn,transform:t?xn:yn,transition:"transform 0.25s ease",pointerEvents:t?"auto":"none"},"aria-hidden":!t},i("div",{style:dn},i("span",{style:un,title:e},e),i("button",{style:{...pn,backgroundColor:g?p.closeBtnHover:"transparent",color:g?"#fff":p.textMuted},onClick:n,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),"aria-label":"Close panel",title:"Close"},"✕")),i("div",{style:fn},jt.map(m=>{const T=l===m.id,D=f===m.id;let I=p.toolBtnBg;return T?I=p.toolBtnBgActive:D&&(I=p.toolBtnBgHover),i("button",{key:m.id,style:{...gn,backgroundColor:I,color:T?"#fff":p.text},onClick:()=>w(m.id),onMouseEnter:()=>a(m.id),onMouseLeave:()=>a(null)},i("span",{style:hn},m.icon),i("span",null,m.label))})),y?i("div",{style:{..._n,borderTop:`1px solid ${p.panelBorder}`,...l==="debug"||l==="console"||l==="network"||l==="errors"||l==="bugs"||l==="perf"||l==="ai"?{alignItems:"stretch",justifyContent:"stretch",padding:"0"}:{}}},l==="debug"?i(ei,null):l==="console"?i(Nn,null):l==="network"?i(fo,null):l==="errors"?i(Oo,{onReportBug:x}):l==="bugs"?i(Mt,{apiClient:o,projectId:e,prefillTitle:u||void 0,prefillStack:S||void 0}):l==="perf"?i(Rr,null):l==="ai"?i(er,{apiBase:s,pinHash:r}):i("span",null,`${y.label} -- coming soon`)):null)}const Ut={isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0,moved:!1},ni=i("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},i("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}));function oi({projectId:e,pinHash:t,apiBase:n,apiClient:o}){const[s,r]=b(!1),[l,d]=b(!1),[g,c]=b({x:0,y:0}),[f,a]=b(!1),u=F(Ut),h=F(null),S=k(B=>{B.currentTarget.setPointerCapture(B.pointerId),u.current={isDragging:!0,startX:B.clientX,startY:B.clientY,offsetX:g.x,offsetY:g.y,moved:!1},a(!0)},[g.x,g.y]),C=k(B=>{const m=u.current;if(!m.isDragging)return;const T=B.clientX-m.startX,D=B.clientY-m.startY;Math.sqrt(T*T+D*D)>ln&&(u.current={...m,moved:!0}),c({x:m.offsetX+T,y:m.offsetY+D})},[]),w=k(()=>{const m=u.current.moved;u.current={...Ut},a(!1),m||r(T=>!T)},[]),x=k(()=>{r(!1)},[]),y={...an,bottom:`${20-g.y}px`,right:`${20-g.x}px`,backgroundColor:l?p.fabBgHover:p.fabBg,boxShadow:l?`0 6px 16px ${p.shadow}`:`0 4px 12px ${p.shadow}`,cursor:f?"grabbing":"grab"};return i("div",null,i("button",{ref:h,style:y,title:`DevTools (${e})`,"aria-label":"Toggle DevTools panel",onPointerDown:S,onPointerMove:C,onPointerUp:w,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1)},ni),i(ti,{projectId:e,isOpen:s,onClose:x,apiClient:o,apiBase:n,pinHash:t}))}function qt(e,t){async function n(o,s={}){return(await fetch(`${e}${o}`,{...s,headers:{"Content-Type":"application/json","X-DevTools-Pin":t,...s.headers}})).json()}return{createBug:o=>n("/api/bugs",{method:"POST",body:JSON.stringify(o)}),createDevLog:o=>n("/api/devlog",{method:"POST",body:JSON.stringify(o)}),sendEvents:o=>n("/api/widget/event",{method:"POST",body:JSON.stringify({events:o})})}}const ri=console.warn.bind(console),ii=1e4,si=50,li=200,ai=new Set(["log","info","warn","error","debug"]);function ci(e,t,n){let o=[];function s(f){o.length>=li||(o.push(f),o.length>=si&&r())}function r(){if(o.length===0)return;const f=[...o];o=[],t.sendEvents(f).catch(a=>{ri("[DevTools] Failed to send events:",a)})}function l(){if(o.length===0)return;const f=[...o];o=[];const a=JSON.stringify({events:f}),u=`${n}/api/widget/event`;try{const h=new Blob([a],{type:"application/json"});navigator.sendBeacon(u,h)}catch{}}let d=0;Ct(()=>{const a=Q().filter(u=>u.id>d);if(a.length>0){d=a[a.length-1].id;for(const u of a)s({type:"error",title:u.message,content:u.stack,metadata:{errorType:u.type,source:u.source,line:u.line,col:u.col},projectId:e})}}),Ht(f=>{s({type:"perf",title:`${f.metric}: ${f.value}`,content:`Rating: ${f.rating}`,metadata:{metric:f.metric,value:f.value,rating:f.rating},projectId:e})});let g=0;ct(()=>{const a=X().filter(u=>u.id>g);if(a.length>0){g=a[a.length-1].id;for(const u of a){if(!ai.has(u.level))continue;const h=u.args.join(" ");h.includes("/api/widget/")||h.includes("/api/ai/analyze")||s({type:"console",title:h.slice(0,500),content:u.args.join(`
`).slice(0,2e3),metadata:{level:u.level,argCount:u.args.length},projectId:e})}}});let c=0;ht(()=>{const a=J().filter(u=>u.id>c);if(a.length>0){c=a[a.length-1].id;for(const u of a)u.url.includes("/api/widget/")||u.url.includes("/api/bugs")||u.url.includes("/api/ai/analyze")||s({type:"network",title:`${u.method} ${u.url}`.slice(0,500),content:`${u.status} ${u.statusText} (${u.duration}ms)`,metadata:{method:u.method,url:u.url,status:u.status,statusText:u.statusText,duration:u.duration,requestSize:u.requestSize,responseSize:u.responseSize},projectId:e})}}),setInterval(r,ii),window.addEventListener("beforeunload",l)}function di(e,t,n){Cn(),Un(),_o(),sr();const o=qt(n,t);ci(e,o,n)}const ui=1e4,pi={position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"280px",backgroundColor:"#1a0000",border:"1px solid #dc2626",borderRadius:"8px",boxShadow:"0 8px 24px rgba(220, 38, 38, 0.3)",zIndex:"999997",fontFamily:"system-ui, -apple-system, sans-serif",color:p.text,overflow:"hidden",display:"flex",flexDirection:"column"},fi={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:"rgba(220, 38, 38, 0.2)",borderBottom:"1px solid #dc2626",flexShrink:"0"},gi={fontSize:"12px",fontWeight:"600",color:"#fca5a5"},hi={display:"flex",gap:"6px"},Vt={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500"},_i={...Vt,backgroundColor:"#dc2626",color:"#fff"},xi={...Vt,backgroundColor:"rgba(255, 255, 255, 0.1)",color:p.textMuted},yi={padding:"8px 12px",overflowY:"auto",flex:"1"},mi={fontSize:"12px",fontWeight:"500",color:"#fca5a5",marginBottom:"6px",wordBreak:"break-word"},bi={fontSize:"10px",fontFamily:"monospace",lineHeight:"1.6",color:p.textMuted},Xt={padding:"1px 0",wordBreak:"break-all"},Si={...Xt,opacity:"0.5"};function vi(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function wi(e){return e.includes("node_modules")}function ki({onReportBug:e}){const[t,n]=b(null),o=F(null),s=k(()=>{n(null),o.current&&(clearTimeout(o.current),o.current=null)},[]),r=k(()=>{o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{n(null),o.current=null},ui)},[]);O(()=>(wt(f=>{n(f),r()}),()=>{wt(null),o.current&&clearTimeout(o.current)}),[r]);const l=k(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]),d=k(()=>{t&&r()},[t,r]),g=k(()=>{t&&(e(t),s())},[t,e,s]);if(!t)return null;const c=vi(t.stack);return i("div",{style:pi,onMouseEnter:l,onMouseLeave:d},i("div",{style:fi},i("span",{style:gi},t.type==="error"?"Uncaught Error":"Unhandled Rejection"),i("div",{style:hi},i("button",{style:_i,onClick:g},"Report Bug"),i("button",{style:xi,onClick:s},"Dismiss"))),i("div",{style:yi},i("div",{style:mi},t.message),c.length>0?i("div",{style:bi},c.slice(0,8).map((f,a)=>i("div",{key:a,style:wi(f)?Si:Xt},f))):null))}const Ci={position:"fixed",padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:p.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",zIndex:999999,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"4px",fontFamily:"system-ui, -apple-system, sans-serif"},$i={position:"fixed",width:"360px",maxHeight:"320px",backgroundColor:p.panelBg,border:`1px solid ${p.panelBorder}`,borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:999999,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",overflow:"hidden"},Ei={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:p.panelHeaderBg,borderBottom:`1px solid ${p.panelBorder}`,flexShrink:0},Bi={fontSize:"12px",fontWeight:"600",color:p.textBright},Ti={width:"24px",height:"24px",borderRadius:"4px",border:"none",backgroundColor:"transparent",color:p.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",lineHeight:"1"},Ri={padding:"12px",overflowY:"auto",flex:1,fontSize:"13px",lineHeight:"1.5",color:p.text,whiteSpace:"pre-wrap",wordBreak:"break-word"},Mi={padding:"16px 12px",fontSize:"12px",color:p.textMuted,textAlign:"center"},zi={padding:"12px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",margin:"8px 12px"};function Yt(e,t,n,o){const s=Math.min(Math.max(e,8),window.innerWidth-n-8),r=Math.min(Math.max(t,8),window.innerHeight-o-8);return{x:s,y:r}}function Di({apiBase:e,pinHash:t}){const[n,o]=b(""),[s,r]=b(null),[l,d]=b(null),[g,c]=b("idle"),[f,a]=b(""),[u,h]=b(""),[S,C]=b(!1),[w,x]=b(!1),y=F(null),B=F(null),m=k(()=>{r(null),d(null),o(""),c("idle"),a(""),h(""),y.current&&(y.current.abort(),y.current=null)},[]);O(()=>{function H(L){if(L.target.closest?.("[data-quickai]"))return;const $=window.getSelection()?.toString().trim()??"";if($.length>10){o($);const z=Yt(L.clientX,L.clientY-40,90,30);r(z)}else l||(r(null),o(""))}return document.addEventListener("mouseup",H),()=>document.removeEventListener("mouseup",H)},[l]),O(()=>{if(!l)return;function H(_){_.target.closest?.("[data-quickai]")||m()}const L=setTimeout(()=>{document.addEventListener("mousedown",H)},100);return()=>{clearTimeout(L),document.removeEventListener("mousedown",H)}},[l,m]);const T=k(async()=>{if(!n)return;const H=s?Yt(s.x,s.y+36,360,320):{x:100,y:100};d(H),r(null),c("loading"),a(""),h(""),y.current&&y.current.abort();const L=new AbortController;y.current=L;try{const _=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:n,context:window.location.href}),signal:L.signal});if(!_.ok)throw new Error(`Analysis failed (${_.status})`);const v=_.body?.getReader();if(!v)throw new Error("No response stream");c("streaming");const $=new TextDecoder;for(;;){const{done:z,value:ge}=await v.read();if(z)break;const Jt=$.decode(ge,{stream:!0});Jt&&a(Ii=>Ii+Jt)}c("done")}catch(_){if(_.name==="AbortError")return;c("error");const v=_ instanceof Error?_.message:"Analysis failed";h(v)}},[n,s,e,t]),D=s?i("button",{"data-quickai":"btn",style:{...Ci,left:`${s.x}px`,top:`${s.y}px`,backgroundColor:S?p.fabBgHover:p.fabBg},onClick:T,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1)},"✨ Analyze"):null,I=l?i("div",{ref:B,"data-quickai":"popup",style:{...$i,left:`${l.x}px`,top:`${l.y}px`}},i("div",{style:Ei},i("span",{style:Bi},"AI Analysis"),i("button",{style:{...Ti,backgroundColor:w?p.closeBtnHover:"transparent",color:w?"#fff":p.textMuted},onClick:m,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),"aria-label":"Close"},"✕")),g==="loading"?i("div",{style:Mi},"Analyzing..."):g==="error"?i("div",{style:zi},u):i("div",{style:Ri},f||"Waiting...")):null;return i("div",{"data-quickai":"root"},D,I)}const De=document.currentScript,Li=[":host { all: initial; }","#devtools-root { font-family: system-ui, sans-serif; }"].join(`
`);function Hi({projectId:e,pinHash:t,apiBase:n,apiClient:o}){const[s,r]=b(null),l=k(g=>{r(g)},[]),d=k(()=>{r(null)},[]);return i("div",null,i(oi,{projectId:e,pinHash:t,apiBase:n,apiClient:o}),i(ki,{onReportBug:l}),i(Di,{apiBase:n,pinHash:t}),s?i("div",{style:{position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"400px",backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:"999997",overflow:"auto"}},i(Mt,{apiClient:o,projectId:e,prefillTitle:s.message,prefillStack:s.stack,onClose:d})):null)}function Gt(){const e=De?.getAttribute("data-project")||"default",t=De?.getAttribute("data-pin")||"",n=De?.src.replace("/widget.js","")||"",o=qt(n,t),s=document.createElement("div");s.id="devtools-widget",document.body.appendChild(s);const r=s.attachShadow({mode:"open"}),l=document.createElement("style");l.textContent=Li,r.appendChild(l);const d=document.createElement("div");d.id="devtools-root",r.appendChild(d),nn(i(Hi,{projectId:e,pinHash:t,apiBase:n,apiClient:o}),d),di(e,t,n)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Gt):Gt()})();
