(function(){"use strict";var de,R,Qe,V,Ze,et,tt,nt,ke,Ce,$e,K={},ot=[],_n=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,pe=Array.isArray;function U(e,t){for(var n in t)e[n]=t[n];return e}function Be(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function o(e,t,n){var r,s,i,a={};for(i in t)i=="key"?r=t[i]:i=="ref"?s=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?de.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return ue(e,a,r,s,null)}function ue(e,t,n,r,s){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Qe,__i:-1,__u:0};return s==null&&R.vnode!=null&&R.vnode(i),i}function fe(e){return e.children}function ge(e,t){this.props=e,this.context=t}function J(e,t){if(t==null)return e.__?J(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?J(e):null}function rt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return rt(e)}}function it(e){(!e.__d&&(e.__d=!0)&&V.push(e)&&!he.__r++||Ze!=R.debounceRendering)&&((Ze=R.debounceRendering)||et)(he)}function he(){for(var e,t,n,r,s,i,a,f=1;V.length;)V.length>f&&V.sort(tt),e=V.shift(),f=V.length,e.__d&&(n=void 0,r=void 0,s=(r=(t=e).__v).__e,i=[],a=[],t.__P&&((n=U({},r)).__v=r.__v+1,R.vnode&&R.vnode(n),Te(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[s]:null,i,s??J(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,dt(i,n,a),r.__e=r.__=null,n.__e!=s&&rt(n)));he.__r=0}function st(e,t,n,r,s,i,a,f,u,l,p){var c,h,g,m,v,y,x,S=r&&r.__k||ot,k=t.length;for(u=Sn(n,t,S,u,k),c=0;c<k;c++)(g=n.__k[c])!=null&&(h=g.__i==-1?K:S[g.__i]||K,g.__i=c,y=Te(e,g,h,s,i,a,f,u,l,p),m=g.__e,g.ref&&h.ref!=g.ref&&(h.ref&&Re(h.ref,null,g),p.push(g.ref,g.__c||m,g)),v==null&&m!=null&&(v=m),(x=!!(4&g.__u))||h.__k===g.__k?u=lt(g,u,e,x):typeof g.type=="function"&&y!==void 0?u=y:m&&(u=m.nextSibling),g.__u&=-7);return n.__e=v,u}function Sn(e,t,n,r,s){var i,a,f,u,l,p=n.length,c=p,h=0;for(e.__k=new Array(s),i=0;i<s;i++)(a=t[i])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[i]=ue(null,a,null,null,null):pe(a)?a=e.__k[i]=ue(fe,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=e.__k[i]=ue(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[i]=a,u=i+h,a.__=e,a.__b=e.__b+1,f=null,(l=a.__i=vn(a,n,u,c))!=-1&&(c--,(f=n[l])&&(f.__u|=2)),f==null||f.__v==null?(l==-1&&(s>p?h--:s<p&&h++),typeof a.type!="function"&&(a.__u|=4)):l!=u&&(l==u-1?h--:l==u+1?h++:(l>u?h--:h++,a.__u|=4))):e.__k[i]=null;if(c)for(i=0;i<p;i++)(f=n[i])!=null&&(2&f.__u)==0&&(f.__e==r&&(r=J(f)),ut(f,f));return r}function lt(e,t,n,r){var s,i;if(typeof e.type=="function"){for(s=e.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=e,t=lt(s[i],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=J(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function vn(e,t,n,r){var s,i,a,f=e.key,u=e.type,l=t[n],p=l!=null&&(2&l.__u)==0;if(l===null&&f==null||p&&f==l.key&&u==l.type)return n;if(r>(p?1:0)){for(s=n-1,i=n+1;s>=0||i<t.length;)if((l=t[a=s>=0?s--:i++])!=null&&(2&l.__u)==0&&f==l.key&&u==l.type)return a}return-1}function at(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||_n.test(t)?n:n+"px"}function xe(e,t,n,r,s){var i,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||at(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||at(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(nt,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=ke,e.addEventListener(t,i?$e:Ce,i)):e.removeEventListener(t,i?$e:Ce,i);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function ct(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ke++;else if(t.t<n.u)return;return n(R.event?R.event(t):t)}}}function Te(e,t,n,r,s,i,a,f,u,l){var p,c,h,g,m,v,y,x,S,k,$,B,M,O,T,E,L,I=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),i=[f=t.__e=n.__e]),(p=R.__b)&&p(t);e:if(typeof I=="function")try{if(x=t.props,S="prototype"in I&&I.prototype.render,k=(p=I.contextType)&&r[p.__c],$=p?k?k.props.value:p.__:r,n.__c?y=(c=t.__c=n.__c).__=c.__E:(S?t.__c=c=new I(x,$):(t.__c=c=new ge(x,$),c.constructor=I,c.render=kn),k&&k.sub(c),c.state||(c.state={}),c.__n=r,h=c.__d=!0,c.__h=[],c._sb=[]),S&&c.__s==null&&(c.__s=c.state),S&&I.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=U({},c.__s)),U(c.__s,I.getDerivedStateFromProps(x,c.__s))),g=c.props,m=c.state,c.__v=t,h)S&&I.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),S&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(S&&I.getDerivedStateFromProps==null&&x!==g&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(x,$),t.__v==n.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(x,c.__s,$)===!1){for(t.__v!=n.__v&&(c.props=x,c.state=c.__s,c.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(b){b&&(b.__=t)}),B=0;B<c._sb.length;B++)c.__h.push(c._sb[B]);c._sb=[],c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(x,c.__s,$),S&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(g,m,v)})}if(c.context=$,c.props=x,c.__P=e,c.__e=!1,M=R.__r,O=0,S){for(c.state=c.__s,c.__d=!1,M&&M(t),p=c.render(c.props,c.state,c.context),T=0;T<c._sb.length;T++)c.__h.push(c._sb[T]);c._sb=[]}else do c.__d=!1,M&&M(t),p=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++O<25);c.state=c.__s,c.getChildContext!=null&&(r=U(U({},r),c.getChildContext())),S&&!h&&c.getSnapshotBeforeUpdate!=null&&(v=c.getSnapshotBeforeUpdate(g,m)),E=p,p!=null&&p.type===fe&&p.key==null&&(E=pt(p.props.children)),f=st(e,pe(E)?E:[E],t,n,r,s,i,a,f,u,l),c.base=t.__e,t.__u&=-161,c.__h.length&&a.push(c),y&&(c.__E=c.__=null)}catch(b){if(t.__v=null,u||i!=null)if(b.then){for(t.__u|=u?160:128;f&&f.nodeType==8&&f.nextSibling;)f=f.nextSibling;i[i.indexOf(f)]=null,t.__e=f}else{for(L=i.length;L--;)Be(i[L]);Ee(t)}else t.__e=n.__e,t.__k=n.__k,b.then||Ee(t);R.__e(b,t,n)}else i==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):f=t.__e=wn(n.__e,t,n,r,s,i,a,u,l);return(p=R.diffed)&&p(t),128&t.__u?void 0:f}function Ee(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Ee)}function dt(e,t,n){for(var r=0;r<n.length;r++)Re(n[r],n[++r],n[++r]);R.__c&&R.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){R.__e(i,s.__v)}})}function pt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:pe(e)?e.map(pt):U({},e)}function wn(e,t,n,r,s,i,a,f,u){var l,p,c,h,g,m,v,y=n.props||K,x=t.props,S=t.type;if(S=="svg"?s="http://www.w3.org/2000/svg":S=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((g=i[l])&&"setAttribute"in g==!!S&&(S?g.localName==S:g.nodeType==3)){e=g,i[l]=null;break}}if(e==null){if(S==null)return document.createTextNode(x);e=document.createElementNS(s,S,x.is&&x),f&&(R.__m&&R.__m(t,i),f=!1),i=null}if(S==null)y===x||f&&e.data==x||(e.data=x);else{if(i=i&&de.call(e.childNodes),!f&&i!=null)for(y={},l=0;l<e.attributes.length;l++)y[(g=e.attributes[l]).name]=g.value;for(l in y)if(g=y[l],l!="children"){if(l=="dangerouslySetInnerHTML")c=g;else if(!(l in x)){if(l=="value"&&"defaultValue"in x||l=="checked"&&"defaultChecked"in x)continue;xe(e,l,null,g,s)}}for(l in x)g=x[l],l=="children"?h=g:l=="dangerouslySetInnerHTML"?p=g:l=="value"?m=g:l=="checked"?v=g:f&&typeof g!="function"||y[l]===g||xe(e,l,g,y[l],s);if(p)f||c&&(p.__html==c.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(c&&(e.innerHTML=""),st(t.type=="template"?e.content:e,pe(h)?h:[h],t,n,r,S=="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,a,i?i[0]:n.__k&&J(n,0),f,u),i!=null)for(l=i.length;l--;)Be(i[l]);f||(l="value",S=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[l]||S=="progress"&&!m||S=="option"&&m!=y[l])&&xe(e,l,m,y[l],s),l="checked",v!=null&&v!=e[l]&&xe(e,l,v,y[l],s))}return e}function Re(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(s){R.__e(s,n)}}function ut(e,t,n){var r,s;if(R.unmount&&R.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||Re(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){R.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&ut(r[s],t,n||typeof e.type!="function");n||Be(e.__e),e.__c=e.__=e.__e=void 0}function kn(e,t,n){return this.constructor(e,n)}function ft(e,t,n){var r,s,i,a;t==document&&(t=document.documentElement),R.__&&R.__(e,t),s=(r=!1)?null:t.__k,i=[],a=[],Te(t,e=t.__k=o(fe,null,[e]),s||K,K,t.namespaceURI,s?null:t.firstChild?de.call(t.childNodes):null,i,s?s.__e:t.firstChild,r,a),dt(i,e,a)}de=ot.slice,R={__e:function(e,t,n,r){for(var s,i,a;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),a=s.__d),a)return s.__E=s}catch(f){e=f}throw e}},Qe=0,ge.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=U({},this.state),typeof e=="function"&&(e=e(U({},n),this.props)),e&&U(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),it(this))},ge.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),it(this))},ge.prototype.render=fe,V=[],et=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tt=function(e,t){return e.__v.__b-t.__v.__b},he.__r=0,nt=/(PointerCapture)$|Capture$/i,ke=0,Ce=ct(!1),$e=ct(!0);var Q,D,Me,gt,Z=0,ht=[],P=R,xt=P.__b,yt=P.__r,mt=P.diffed,bt=P.__c,_t=P.unmount,St=P.__;function ze(e,t){P.__h&&P.__h(D,e,Z||t),Z=0;var n=D.__H||(D.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function _(e){return Z=1,Cn(Ct,e)}function Cn(e,t,n){var r=ze(Q++,2);if(r.t=e,!r.__c&&(r.__=[Ct(void 0,t),function(f){var u=r.__N?r.__N[0]:r.__[0],l=r.t(u,f);u!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=D,!D.__f)){var s=function(f,u,l){if(!r.__c.__H)return!0;var p=r.__c.__H.__.filter(function(h){return!!h.__c});if(p.every(function(h){return!h.__N}))return!i||i.call(this,f,u,l);var c=r.__c.props!==f;return p.forEach(function(h){if(h.__N){var g=h.__[0];h.__=h.__N,h.__N=void 0,g!==h.__[0]&&(c=!0)}}),i&&i.call(this,f,u,l)||c};D.__f=!0;var i=D.shouldComponentUpdate,a=D.componentWillUpdate;D.componentWillUpdate=function(f,u,l){if(this.__e){var p=i;i=void 0,s(f,u,l),i=p}a&&a.call(this,f,u,l)},D.shouldComponentUpdate=s}return r.__N||r.__}function A(e,t){var n=ze(Q++,3);!P.__s&&kt(n.__H,t)&&(n.__=e,n.u=t,D.__H.__h.push(n))}function W(e){return Z=5,vt(function(){return{current:e}},[])}function vt(e,t){var n=ze(Q++,7);return kt(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function C(e,t){return Z=8,vt(function(){return e},t)}function $n(){for(var e;e=ht.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ye),e.__H.__h.forEach(Ie),e.__H.__h=[]}catch(t){e.__H.__h=[],P.__e(t,e.__v)}}P.__b=function(e){D=null,xt&&xt(e)},P.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),St&&St(e,t)},P.__r=function(e){yt&&yt(e),Q=0;var t=(D=e.__c).__H;t&&(Me===D?(t.__h=[],D.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(ye),t.__h.forEach(Ie),t.__h=[],Q=0)),Me=D},P.diffed=function(e){mt&&mt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ht.push(t)!==1&&gt===P.requestAnimationFrame||((gt=P.requestAnimationFrame)||Bn)($n)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Me=D=null},P.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ye),n.__h=n.__h.filter(function(r){return!r.__||Ie(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],P.__e(r,n.__v)}}),bt&&bt(e,t)},P.unmount=function(e){_t&&_t(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ye(r)}catch(s){t=s}}),n.__H=void 0,t&&P.__e(t,n.__v))};var wt=typeof requestAnimationFrame=="function";function Bn(e){var t,n=function(){clearTimeout(r),wt&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);wt&&(t=requestAnimationFrame(n))}function ye(e){var t=D,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),D=t}function Ie(e){var t=D;e.__c=e.__(),D=t}function kt(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Ct(e,t){return typeof t=="function"?t(e):t}const d={fabBg:"#6366f1",fabBgHover:"#4f46e5",panelBg:"#0f172a",panelBorder:"#1e293b",panelHeaderBg:"#1e293b",toolBtnBg:"#1e293b",toolBtnBgActive:"#3b82f6",text:"#e2e8f0",textMuted:"#94a3b8",textBright:"#f8fafc",closeBtnHover:"#ef4444"},$t=48,De=580,Tn=5,En={position:"fixed",width:`${$t}px`,height:`${$t}px`,borderRadius:"50%",backgroundColor:d.fabBg,color:"#fff",border:"none",cursor:"grab",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999,boxShadow:"0 4px 16px rgba(99, 102, 241, 0.5)",transition:"background-color 0.15s ease, box-shadow 0.15s ease, transform 0.15s ease",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},Rn={position:"fixed",width:`${De}px`,backgroundColor:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:"12px",zIndex:999998,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",color:d.text,boxShadow:"0 24px 64px rgba(0,0,0,0.7)",overflow:"hidden"},Mn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px 0",flexShrink:0,cursor:"grab",userSelect:"none"},zn={width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",lineHeight:"1",flexShrink:"0"},In={flex:1,overflowY:"auto",padding:"10px 12px",fontSize:"13px",color:d.textMuted,display:"block"},Dn={fontSize:11,color:"#475569",display:"flex",alignItems:"center",gap:4},Ln={width:6,height:6,borderRadius:"50%",background:"#4ade80",flexShrink:0},Hn={display:"flex",gap:4,alignItems:"center"},Pn={background:"none",border:"none",color:"#475569",cursor:"pointer",padding:4,borderRadius:4,fontSize:12,lineHeight:"1",display:"flex",alignItems:"center",justifyContent:"center"},Bt={background:"#1a2547",border:"1px solid #2d3b6e",color:"#a5b4fc",fontSize:10,padding:"3px 8px",borderRadius:4,whiteSpace:"nowrap",fontFamily:"inherit",lineHeight:"1.4",cursor:"pointer"},An={display:"flex",borderBottom:`1px solid ${d.panelBorder}`,overflowX:"auto",scrollbarWidth:"none",flexShrink:0,marginTop:6},On={padding:"6px 10px",fontSize:11,color:"#475569",cursor:"pointer",borderBottom:"2px solid transparent",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:4,flexShrink:0,userSelect:"none",background:"none",border:"none",fontFamily:"inherit"},Nn={color:"#a5b4fc",borderBottom:"2px solid #6366f1"},Le={background:"#ef4444",color:"#fff",borderRadius:6,padding:"0 4px",fontSize:9,fontWeight:"700",lineHeight:"14px"},Fn=500;let Wn=1;const ee=[],te=[];function jn(){const e=new WeakSet;return(t,n)=>{if(typeof n=="object"&&n!==null){if(e.has(n))return"[Circular]";e.add(n)}return n}}function Un(e){if(e===null)return"null";if(e===void 0)return"undefined";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(e instanceof Error)return`${e.name}: ${e.message}`;try{return JSON.stringify(e,jn(),2)}catch{return String(e)}}function qn(e,t){const n={id:Wn++,level:e,args:t.map(Un),timestamp:Date.now()};ee.length>=Fn&&ee.shift(),ee.push(n);for(const r of te)r()}function q(){return[...ee]}function Xn(){ee.length=0;for(const e of te)e()}function Tt(e){return te.push(e),()=>{const t=te.indexOf(e);t!==-1&&te.splice(t,1)}}function Yn(){const e=["log","warn","error","info"];for(const t of e){const n=console[t].bind(console);console[t]=(...r)=>{qn(t,r),n(...r)}}}function He(e){const t=new Date(e.timestamp).toLocaleTimeString();return`[${e.level.toUpperCase()}] ${e.args.join(" ")} — ${t}`}function Pe(e){return`[NETWORK] ${e.method} ${e.url} → ${e.status}  ${e.duration}ms`}function Et(e){const t=e.stack?`
  ${e.stack}`:"";return`[ERROR] ${e.message}${t}`}function Rt(e){return`[${e.severity.toUpperCase()}] ${e.message}${e.detail?` — ${e.detail}`:""}`}function Vn(e){return`### Console (${e.length})
${e.map(He).join(`
`)}`}function Gn(e){return`### Network (${e.length})
${e.map(Pe).join(`
`)}`}function Mt(e){return`### Errors (${e.length})
${e.map(Et).join(`

`)}`}function zt(e){return`### Health Issues (${e.length})
${e.map(Rt).join(`
`)}`}function Jn(e,t,n,r){const s=n.slice(0,10),i=e.filter(l=>l.level==="warn").slice(0,10),a=t.filter(l=>l.status>=400).slice(0,10),f=new Date().toLocaleString(),u=[`## Page Context — ${window.location.href}`,`**Captured:** ${f}`];return s.length>0&&u.push(Mt(s)),i.length>0&&u.push(`### Console Warnings (${i.length})
${i.map(He).join(`
`)}`),a.length>0&&u.push(`### Network Issues (${a.length})
${a.map(Pe).join(`
`)}`),r.length>0&&u.push(zt(r)),u.join(`

`)}const It={log:"#94a3b8",info:"#3b82f6",warn:"#eab308",error:"#ef4444"},Kn={log:"rgba(148, 163, 184, 0.15)",info:"rgba(59, 130, 246, 0.15)",warn:"rgba(234, 179, 8, 0.15)",error:"rgba(239, 68, 68, 0.15)"},Dt=["log","info","warn","error"];function Qn(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${r}:${s}.${i}`}const Zn={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},eo={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},to={display:"flex",gap:"4px",flexWrap:"wrap"},no={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},oo={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},ro={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},io={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",position:"relative"},so={display:"flex",alignItems:"center",gap:"6px"},lo={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},ao={fontSize:"10px",color:d.textMuted,flexShrink:"0"},co={color:d.text,whiteSpace:"pre-wrap",lineHeight:"1.4"},po={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function uo(e,t){return{padding:"2px 6px",borderRadius:"3px",border:"none",backgroundColor:e?It[t]:d.toolBtnBg,color:e?"#fff":d.textMuted,cursor:"pointer",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"}}function fo(){const[e,t]=_(q),[n,r]=_(new Set(Dt)),[s,i]=_(null);A(()=>Tt(()=>{t(q())}),[]);const a=C(()=>{Xn(),t([])},[]),f=C(l=>{r(p=>{const c=new Set(p);return c.has(l)?c.delete(l):c.add(l),c})},[]),u=e.filter(l=>n.has(l.level));return o("div",{style:Zn},o("div",{style:eo},o("div",{style:to},Dt.map(l=>o("button",{key:l,style:uo(n.has(l),l),onClick:()=>f(l),title:`Toggle ${l} entries`},l))),o("button",{style:oo,onClick:()=>navigator.clipboard.writeText(Vn(u)).catch(()=>{}),title:"Copy all console entries"},"Copy Console"),o("button",{style:no,onClick:a,title:"Clear console entries"},"Clear")),u.length===0?o("div",{style:po},"No console entries"):o("div",{style:ro},u.map((l,p)=>o("div",{key:l.id,style:{...io,backgroundColor:Kn[l.level]},onMouseEnter:()=>i(p),onMouseLeave:()=>i(null)},o("div",{style:so},o("span",{style:{...lo,backgroundColor:It[l.level],color:"#fff"}},l.level),o("span",{style:ao},Qn(l.timestamp)),o("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:s===p?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:c=>{c.stopPropagation(),navigator.clipboard.writeText(He(l)).catch(()=>{})},title:"Copy row"},"⧇")),o("div",{style:co},l.args.join(" "))))))}const go=200;let Ae=1;const ne=[],oe=[];function ho(e){if(!e.response)return 0;if(typeof e.response=="string")return e.response.length;if(e.response instanceof Blob)return e.response.size;if(e.response instanceof ArrayBuffer)return e.response.byteLength;try{return JSON.stringify(e.response).length}catch{return 0}}function Lt(e){if(e==null)return 0;if(typeof e=="string")return e.length;if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(e instanceof FormData){let t=0;return e.forEach(n=>{typeof n=="string"?t+=n.length:n instanceof Blob&&(t+=n.size)}),t}return e instanceof URLSearchParams?e.toString().length:0}function Ht(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function Oe(e){ne.length>=go&&ne.shift(),ne.push(e);for(const t of oe)t()}function G(){return[...ne]}function xo(){ne.length=0;for(const e of oe)e()}function Pt(e){return oe.push(e),()=>{const t=oe.indexOf(e);t!==-1&&oe.splice(t,1)}}function yo(){const e=XMLHttpRequest.prototype,t=e.open,n=e.setRequestHeader,r=e.send,s=new WeakMap;e.open=function(i,a,...f){return s.set(this,{method:i.toUpperCase(),url:typeof a=="string"?a:String(a),requestHeaders:{},requestSize:0,startTime:0,timestamp:0}),t.call(this,i,a,...f)},e.setRequestHeader=function(i,a){const f=s.get(this);return f&&(f.requestHeaders[i]=a),n.call(this,i,a)},e.send=function(i){const a=s.get(this);return a&&(a.requestSize=Lt(i??null),a.startTime=performance.now(),a.timestamp=Date.now(),this.addEventListener("loadend",()=>{const f=performance.now()-a.startTime,u={},l=this.getAllResponseHeaders();for(const c of l.trim().split(`\r
`)){const h=c.indexOf(": ");h!==-1&&(u[c.slice(0,h).toLowerCase()]=c.slice(h+2))}const p={id:Ae++,method:a.method,url:a.url,status:this.status,statusText:this.statusText||(this.status===0?"Network Error":""),duration:Math.round(f),requestSize:a.requestSize,responseSize:ho(this),requestHeaders:a.requestHeaders,responseHeaders:u,startTime:a.startTime,timestamp:a.timestamp};Oe(p),s.delete(this)})),r.call(this,i)}}function mo(){const e=window.fetch.bind(window);window.fetch=async(t,n)=>{const r=(n?.method??"GET").toUpperCase(),s=typeof t=="string"?t:t instanceof URL?t.href:t.url,i=Lt(n?.body??null);let a={};if(n?.headers)if(n.headers instanceof Headers)a=Ht(n.headers);else if(Array.isArray(n.headers))for(const[l,p]of n.headers)a[l]=p;else a={...n.headers};const f=performance.now(),u=Date.now();try{const l=await e(t,n),p=performance.now()-f,c=l.clone();let h=0;try{h=(await c.blob()).size}catch{h=0}const g={id:Ae++,method:r,url:s,status:l.status,statusText:l.statusText,duration:Math.round(p),requestSize:i,responseSize:h,requestHeaders:a,responseHeaders:Ht(l.headers),startTime:f,timestamp:u};return Oe(g),l}catch(l){const p=performance.now()-f,c={id:Ae++,method:r,url:s,status:0,statusText:"Network Error",duration:Math.round(p),requestSize:i,responseSize:0,requestHeaders:a,responseHeaders:{},startTime:f,timestamp:u};throw Oe(c),l}},yo()}const bo={GET:"#22c55e",POST:"#3b82f6",PUT:"#eab308",DELETE:"#ef4444",PATCH:"#a855f7"},_o="#94a3b8";function So(e){return bo[e]??_o}function vo(e){return e===0?"#ef4444":e<300?"#22c55e":e<400?"#3b82f6":e<500?"#eab308":"#ef4444"}function At(e){return e===0?"rgba(239, 68, 68, 0.15)":e<300?"rgba(34, 197, 94, 0.15)":e<400?"rgba(59, 130, 246, 0.15)":e<500?"rgba(234, 179, 8, 0.15)":"rgba(239, 68, 68, 0.15)"}function Ot(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${r}:${s}.${i}`}function Nt(e){return e<1e3?`${e}ms`:`${(e/1e3).toFixed(1)}s`}function Ft(e){return e===0?"0 B":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function wo(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}const ko={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Co={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},$o={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Bo={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},To={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},Eo={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Ro={display:"flex",flexDirection:"column",padding:"5px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",cursor:"pointer",transition:"background-color 0.1s ease",position:"relative"},Mo={display:"flex",alignItems:"center",gap:"6px",minWidth:"0"},zo={padding:"1px 5px",borderRadius:"3px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},Io={padding:"1px 4px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",flexShrink:"0"},Do={flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:d.text,fontSize:"10px",minWidth:"0"},Lo={fontSize:"10px",color:d.textMuted,flexShrink:"0",textAlign:"right",minWidth:"40px"},Ho={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Po={marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5",wordBreak:"break-all"},Ne={fontWeight:"600",color:d.textBright,marginBottom:"2px",marginTop:"6px",display:"block"},Ao={color:d.textMuted},Wt={display:"flex",gap:"4px",color:d.textMuted,padding:"1px 0"},jt={color:"#93c5fd",flexShrink:"0"},Oo={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function No({entry:e}){const t=Object.entries(e.requestHeaders),n=Object.entries(e.responseHeaders);return o("div",{style:Po},o("span",{style:{...Ne,marginTop:"0"}},"General"),o("div",{style:Ao},o("div",null,`URL: ${e.url}`),o("div",null,`Method: ${e.method}`),o("div",null,`Status: ${e.status} ${e.statusText}`),o("div",null,`Duration: ${Nt(e.duration)}`),o("div",null,`Request size: ${Ft(e.requestSize)}`),o("div",null,`Response size: ${Ft(e.responseSize)}`),o("div",null,`Time: ${Ot(e.timestamp)}`)),t.length>0?o("div",null,o("span",{style:Ne},"Request Headers"),t.map(([r,s])=>o("div",{key:r,style:Wt},o("span",{style:jt},`${r}:`),o("span",null,s)))):null,n.length>0?o("div",null,o("span",{style:Ne},"Response Headers"),n.map(([r,s])=>o("div",{key:r,style:Wt},o("span",{style:jt},`${r}:`),o("span",null,s)))):null)}function Fo(){const[e,t]=_(G),[n,r]=_(null),[s,i]=_(null);A(()=>Pt(()=>{t(G())}),[]);const a=C(()=>{xo(),t([]),r(null)},[]),f=C(u=>{r(l=>l===u?null:u)},[]);return o("div",{style:ko},o("div",{style:Co},o("span",{style:$o},`${e.length} request${e.length!==1?"s":""}`),o("button",{style:To,onClick:()=>navigator.clipboard.writeText(Gn(e)).catch(()=>{}),title:"Copy all network entries"},"Copy Network"),o("button",{style:Bo,onClick:a,title:"Clear network entries"},"Clear")),e.length===0?o("div",{style:Oo},"No network requests"):o("div",{style:Eo},e.map((u,l)=>{const p=n===u.id;return o("div",{key:u.id,style:{...Ro,backgroundColor:p?"rgba(59, 130, 246, 0.12)":At(u.status)},onClick:()=>f(u.id),onMouseEnter:()=>i(l),onMouseLeave:()=>i(null)},o("div",{style:Mo},o("span",{style:{...zo,backgroundColor:So(u.method)}},u.method),o("span",{style:{...Io,color:vo(u.status),backgroundColor:At(u.status)}},u.status===0?"ERR":String(u.status)),o("span",{style:Do,title:u.url},wo(u.url,40)),o("span",{style:Lo},Nt(u.duration)),o("span",{style:Ho},Ot(u.timestamp)),o("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:s===l?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:c=>{c.stopPropagation(),navigator.clipboard.writeText(Pe(u)).catch(()=>{})},title:"Copy row"},"⧇")),p?o(No,{entry:u}):null)})))}const Wo=100;let Ut=1;const re=[],ie=[];let Fe=null;function qt(e){Fe=e}function Xt(e){re.length>=Wo&&re.shift(),re.push(e);for(const t of ie)t();Fe&&Fe(e)}function X(){return[...re]}function jo(){re.length=0;for(const e of ie)e()}function Yt(e){return ie.push(e),()=>{const t=ie.indexOf(e);t!==-1&&ie.splice(t,1)}}function Uo(){const e=window.onerror;window.onerror=(t,n,r,s,i)=>{const a={id:Ut++,message:typeof t=="string"?t:"Unknown error",stack:i?.stack??"",source:n??"",line:r??0,col:s??0,timestamp:Date.now(),type:"error"};return Xt(a),typeof e=="function"?e(t,n,r,s,i):!1},window.addEventListener("unhandledrejection",t=>{const n=t.reason,r=n instanceof Error,s=r?n.message:typeof n=="string"?n:"Unhandled promise rejection",i=r?n.stack??"":"",a={id:Ut++,message:s,stack:i,source:"",line:0,col:0,timestamp:Date.now(),type:"unhandledrejection"};Xt(a)})}const qo="#ef4444",Xo="rgba(239, 68, 68, 0.15)",Yo="#f97316",Vo="rgba(249, 115, 22, 0.15)",Go={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Jo={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Ko={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Qo={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Zo={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},er={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},tr={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",cursor:"pointer",position:"relative"},nr={display:"flex",alignItems:"center",gap:"6px"},or={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},rr={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Vt={padding:"1px 0",wordBreak:"break-all"},ir={...Vt,opacity:"0.5"},sr={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500",backgroundColor:"#dc2626",color:"#fff"},lr={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function ar(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${r}:${s}.${i}`}function cr(e){return e==="error"?qo:Yo}function dr(e){return e==="error"?Xo:Vo}function pr(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function ur(e){return e.includes("node_modules")}function fr({onReportBug:e}){const[t,n]=_(X),[r,s]=_(null),[i,a]=_(null);A(()=>Yt(()=>{n(X())}),[]);const f=C(()=>{jo(),n([]),s(null)},[]),u=C(l=>{s(p=>p===l?null:l)},[]);return o("div",{style:Go},o("div",{style:Jo},o("span",{style:Ko},`${t.length} error${t.length!==1?"s":""}`),o("button",{style:Zo,onClick:()=>navigator.clipboard.writeText(Mt(t)).catch(()=>{}),title:"Copy all error entries"},"Copy Errors"),o("button",{style:Qo,onClick:f,title:"Clear error entries"},"Clear")),t.length===0?o("div",{style:lr},"No errors captured"):o("div",{style:er},t.map((l,p)=>{const c=r===l.id,h=pr(l.stack);return o("div",{key:l.id,style:{...tr,backgroundColor:c?"rgba(239, 68, 68, 0.12)":dr(l.type)},onClick:()=>u(l.id),onMouseEnter:()=>a(p),onMouseLeave:()=>a(null)},o("div",{style:nr},o("span",{style:{...or,backgroundColor:cr(l.type)}},l.type==="error"?"ERR":"REJ"),o("span",{style:{flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:d.text,fontSize:"10px"}},l.message),o("span",{style:rr},ar(l.timestamp)),o("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:i===p?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:g=>{g.stopPropagation(),navigator.clipboard.writeText(Et(l)).catch(()=>{})},title:"Copy row"},"⧇")),c?o("div",{style:{marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5"}},l.source?o("div",{style:{color:"#93c5fd",marginBottom:"4px"}},`${l.source}:${l.line}:${l.col}`):null,h.length>0?h.map((g,m)=>o("div",{key:m,style:ur(g)?ir:Vt},g)):o("span",{style:{color:d.textMuted}},"No stack trace available"),e?o("button",{style:{...sr,marginTop:"8px",width:"100%"},onClick:g=>{g.stopPropagation(),e(l)}},"Report Bug"):null):null)})))}const gr=["low","medium","high","critical"],hr={low:"#22c55e",medium:"#eab308",high:"#f97316",critical:"#ef4444"},Gt={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},me={fontSize:"11px",fontWeight:"600",color:d.textBright,marginBottom:"3px",display:"block"},Jt={width:"100%",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:d.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},xr={...Jt,minHeight:"60px",resize:"vertical",lineHeight:"1.4"},yr={display:"flex",gap:"4px"},mr={padding:"4px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flex:"1",textAlign:"center"},We={padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",width:"100%",marginTop:"4px"},br={...We,opacity:"0.5",cursor:"not-allowed"},Kt={padding:"8px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textAlign:"center"},_r={...Kt,backgroundColor:"rgba(34, 197, 94, 0.15)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},Sr={...Kt,backgroundColor:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"},vr={fontSize:"10px",fontFamily:"monospace",color:d.textMuted,backgroundColor:"rgba(0, 0, 0, 0.3)",padding:"6px 8px",borderRadius:"4px",maxHeight:"60px",overflowY:"auto",lineHeight:"1.4",whiteSpace:"pre-wrap",wordBreak:"break-all"},Qt={padding:"4px 8px",borderRadius:"4px",border:"none",backgroundColor:"rgba(255, 255, 255, 0.1)",color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",alignSelf:"flex-end"};function Zt({apiClient:e,projectId:t,prefillTitle:n,prefillStack:r,onClose:s}){const[i,a]=_(n??""),[f,u]=_(""),[l,p]=_("medium"),[c,h]=_("idle"),[g,m]=_(""),v=i.trim().length>0&&c!=="submitting",y=C(async()=>{if(v){h("submitting"),m("");try{const x={projectId:t,title:i.trim(),description:f.trim(),severity:l,url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()};r&&(x.stackTrace=r),await e.createBug(x),h("success"),a(""),u(""),p("medium")}catch(x){h("error");const S=x instanceof Error?x.message:"Failed to submit bug report";m(S)}}},[v,i,f,l,t,r,e]);return c==="success"?o("div",{style:Gt},o("div",{style:_r},"Bug report submitted."),o("button",{style:{...We,marginTop:"8px"},onClick:()=>h("idle")},"Report Another"),s?o("button",{style:{...Qt,marginTop:"4px",alignSelf:"center"},onClick:s},"Close"):null):o("div",{style:Gt},s?o("button",{style:Qt,onClick:s},"Back"):null,o("div",null,o("label",{style:me},"Title"),o("input",{style:Jt,type:"text",value:i,placeholder:"Describe the bug briefly",onInput:x=>{a(x.target.value)}})),o("div",null,o("label",{style:me},"Description"),o("textarea",{style:xr,value:f,placeholder:"Steps to reproduce, expected vs actual behavior",onInput:x=>{u(x.target.value)}})),r?o("div",null,o("label",{style:me},"Stack Trace"),o("div",{style:vr},r)):null,o("div",null,o("label",{style:me},"Severity"),o("div",{style:yr},gr.map(x=>o("button",{key:x,style:{...mr,backgroundColor:l===x?hr[x]:d.toolBtnBg,color:l===x?"#fff":d.textMuted},onClick:()=>p(x)},x)))),c==="error"?o("div",{style:Sr},g||"Submission failed"):null,o("button",{style:v?We:br,onClick:y,disabled:!v},c==="submitting"?"Submitting...":"Submit Bug Report"))}const wr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},kr={display:"flex",gap:"6px",flexShrink:"0"},Cr={flex:"1",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:d.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},en={padding:"6px 10px",borderRadius:"4px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",flexShrink:"0"},$r={...en,opacity:"0.5",cursor:"not-allowed"},tn={flex:"1",overflowY:"auto",fontSize:"12px",lineHeight:"1.5",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"8px",borderRadius:"4px",minHeight:"80px"},Br={...tn,color:d.textMuted,display:"flex",alignItems:"center",justifyContent:"center",fontStyle:"italic"},Tr={padding:"8px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px"};function Er(){const e=X().slice(0,5).map(s=>`- ${s.message}`).join(`
`),t=G().filter(s=>s.status>=400).slice(0,5).map(s=>`- ${s.method} ${s.url} → ${s.status}`).join(`
`),n=q().filter(s=>s.level==="error"||s.level==="warn").slice(0,5).map(s=>`[${s.level}] ${s.args.join(" ")}`).join(`
`);return[`Page: ${window.location.href}`,e&&`Recent errors:
${e}`,t&&`Network issues:
${t}`,n&&`Console issues:
${n}`].filter(Boolean).join(`

`)}function Rr({apiBase:e,pinHash:t}){const[n,r]=_(""),[s,i]=_(""),[a,f]=_("idle"),[u,l]=_(""),p=W(null),c=W(0),h=n.trim().length>0&&a!=="loading"&&a!=="streaming",g=C(async()=>{if(n.trim().length===0||a==="loading"||a==="streaming")return;const v=n.trim(),y=c.current===0?Er():"",S=(y?`Context:
${y}

---

${v}`:v).slice(0,2e3);i(""),f("loading"),l(""),p.current&&p.current.abort();const k=new AbortController;p.current=k;try{const $=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:S,context:window.location.href}),signal:k.signal});if(!$.ok)throw new Error(`Request failed (${$.status})`);const B=$.body?.getReader();if(!B)throw new Error("No response stream");f("streaming");const M=new TextDecoder;for(;;){const{done:O,value:T}=await B.read();if(O)break;const E=M.decode(T,{stream:!0});E&&i(L=>L+E)}c.current+=1,f("idle")}catch($){if($.name==="AbortError")return;f("error");const B=$ instanceof Error?$.message:"Analysis failed";l(B)}},[n,a,e,t]),m=C(v=>{v.key==="Enter"&&!v.shiftKey&&h&&(v.preventDefault(),g())},[h,g]);return o("div",{style:wr},o("div",{style:kr},o("input",{style:Cr,type:"text",value:n,placeholder:"Ask about code, errors, concepts...",onInput:v=>{r(v.target.value)},onKeyDown:m}),o("button",{style:h?en:$r,onClick:g,disabled:!h},a==="loading"||a==="streaming"?"...":"Send")),a==="error"?o("div",{style:Tr},u):null,s?o("div",{style:tn},s):o("div",{style:Br},a==="loading"?"Thinking...":"Response will appear here"))}const Mr=100,zr={LCP:[2500,4e3],CLS:[.1,.25],INP:[200,500],FCP:[1800,3e3],TTFB:[800,1800]};let Ir=1;const se=[],be=[];function Dr(e,t){const n=zr[e];return t<=n[0]?"good":t<=n[1]?"needs-improvement":"poor"}function le(e,t){const n={id:Ir++,timestamp:Date.now(),metric:e,value:Math.round(e==="CLS"?t*1e3:t)/(e==="CLS"?1e3:1),rating:Dr(e,t)};se.length>=Mr&&se.shift(),se.push(n);for(const r of be)r(n)}function nn(){return[...se]}function Lr(){se.length=0}function on(e){return be.push(e),()=>{const t=be.indexOf(e);t!==-1&&be.splice(t,1)}}function Hr(){if(!(typeof PerformanceObserver>"u")){try{new PerformanceObserver(t=>{const n=t.getEntries(),r=n[n.length-1];r&&le("LCP",r.startTime)}).observe({type:"largest-contentful-paint",buffered:!0})}catch{}try{let e=0;new PerformanceObserver(n=>{for(const r of n.getEntries()){const s=r;!s.hadRecentInput&&typeof s.value=="number"&&(e+=s.value,le("CLS",e))}}).observe({type:"layout-shift",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries())n.duration>0&&le("INP",n.duration)}).observe({type:"event",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries())n.name==="first-contentful-paint"&&le("FCP",n.startTime)}).observe({type:"paint",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries()){const r=n;r.responseStart>0&&le("TTFB",r.responseStart-r.requestStart)}}).observe({type:"navigation",buffered:!0})}catch{}}}const je={good:"#22c55e","needs-improvement":"#eab308",poor:"#ef4444"},Pr={good:"rgba(34, 197, 94, 0.15)","needs-improvement":"rgba(234, 179, 8, 0.15)",poor:"rgba(239, 68, 68, 0.15)"},Ar={LCP:"Largest Contentful Paint",CLS:"Cumulative Layout Shift",INP:"Interaction to Next Paint",FCP:"First Contentful Paint",TTFB:"Time to First Byte"},rn={LCP:"ms",CLS:"",INP:"ms",FCP:"ms",TTFB:"ms"},Or=["LCP","FCP","CLS","INP","TTFB"];function Nr(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${n}:${r}:${s}`}function Fr(e){const t={};for(const n of e){const r=t[n.metric];(!r||n.id>r.id)&&(t[n.metric]=n)}return t}const Wr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},jr={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",flexShrink:"0"},Ur={fontSize:"11px",fontWeight:"600",color:d.textBright,textTransform:"uppercase",letterSpacing:"0.5px"},qr={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Xr={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px",padding:"4px 8px 8px",flexShrink:"0"},Yr={display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",padding:"8px 6px",borderRadius:"6px",backgroundColor:d.toolBtnBg},Vr={fontSize:"16px",fontWeight:"700",fontFamily:"monospace"},Gr={fontSize:"9px",fontWeight:"500",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},Jr={height:"1px",backgroundColor:d.panelBorder,margin:"0 8px",flexShrink:"0"},Kr={fontSize:"10px",fontWeight:"600",color:d.textMuted,padding:"6px 8px 2px",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},Qr={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Zr={display:"flex",alignItems:"center",gap:"6px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace"},ei={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flexShrink:"0",color:"#fff"},ti={fontWeight:"600",color:d.text,flexShrink:"0",minWidth:"32px"},ni={color:d.textBright,flex:"1"},oi={fontSize:"10px",color:d.textMuted,flexShrink:"0"},ri={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function ii(e){return e==="good"?"Good":e==="needs-improvement"?"OK":"Poor"}function si(){const[e,t]=_(nn);A(()=>on(()=>{t(nn())}),[]);const n=C(()=>{Lr(),t([])},[]),r=Fr(e),s=Or.map(i=>{const a=r[i];if(!a)return null;const f=rn[i],u=i==="CLS"?a.value.toFixed(3):`${Math.round(a.value)}`;return{metric:i,entry:a,displayValue:u,unit:f}}).filter(Boolean);return o("div",{style:Wr},o("div",{style:jr},o("span",{style:Ur},"Web Vitals"),o("button",{style:qr,onClick:n,title:"Clear performance entries"},"Clear")),s.length>0?o("div",{style:Xr},s.map(i=>o("div",{key:i.metric,style:{...Yr,borderLeft:`3px solid ${je[i.entry.rating]}`},title:Ar[i.metric]},o("span",{style:{...Vr,color:je[i.entry.rating]}},`${i.displayValue}${i.unit}`),o("span",{style:Gr},i.metric)))):null,e.length>0?o("div",{style:Jr}):null,e.length>0?o("div",{style:Kr},"Event Log"):null,e.length===0?o("div",{style:ri},"Waiting for Web Vitals data..."):o("div",{style:Qr},[...e].reverse().map(i=>{const a=rn[i.metric],f=i.metric==="CLS"?i.value.toFixed(3):`${Math.round(i.value)}`;return o("div",{key:i.id,style:{...Zr,backgroundColor:Pr[i.rating]}},o("span",{style:{...ei,backgroundColor:je[i.rating]}},ii(i.rating)),o("span",{style:ti},i.metric),o("span",{style:ni},`${f}${a}`),o("span",{style:oi},Nr(i.timestamp)))})))}const Ue="devtools-debug-snapshots",li=5;function ai(){try{const e=localStorage.getItem(Ue);return e?JSON.parse(e):[]}catch{return[]}}function sn(e){try{localStorage.setItem(Ue,JSON.stringify(e))}catch{}}let ci=1;function ae(e){return String(e).padStart(2,"0")}function ln(e){const t=new Date(e);return`${ae(t.getHours())}:${ae(t.getMinutes())}:${ae(t.getSeconds())}`}function di(){const e=[];try{const t=Object.keys(localStorage).filter(n=>n!==Ue);if(t.length){const n=t.slice(0,30).map(r=>{const s=localStorage.getItem(r)??"";return`  ${r}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`localStorage (${t.length} keys):
${n.join(`
`)}`)}}catch{}try{const t=Object.keys(sessionStorage);if(t.length){const n=t.slice(0,30).map(r=>{const s=sessionStorage.getItem(r)??"";return`  ${r}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`sessionStorage (${t.length} keys):
${n.join(`
`)}`)}}catch{}return e.length?e.join(`

`):"(empty)"}function pi(){try{const t=performance.getEntriesByType("navigation")[0];return t?[`DNS: ${Math.round(t.domainLookupEnd-t.domainLookupStart)}ms`,`Connect: ${Math.round(t.connectEnd-t.connectStart)}ms`,`TTFB: ${Math.round(t.responseStart-t.requestStart)}ms`,`DOM Ready: ${Math.round(t.domContentLoadedEventEnd)}ms`,`Page Load: ${Math.round(t.loadEventEnd)}ms`].join(" | "):"(not available)"}catch{return"(not available)"}}function ui(){try{const e=document.cookie.split(";").map(t=>t.trim().split("=")[0]).filter(Boolean);return e.length?e.join(", "):"(none)"}catch{return"(unavailable)"}}function fi(e,t,n){const s=new Date().toISOString().replace("T"," ").slice(0,19),i=q(),a=G(),f=X(),u=t?i.filter(g=>g.level==="error"||g.level==="warn"):[...i],l=t?a.filter(g=>g.status===0||g.status>=400):[...a],p=[];p.push(`# Debug Snapshot — ${s}`),p.push(""),p.push(`**URL:** ${window.location.href}`),document.title&&p.push(`**Page:** ${document.title}`),p.push(`**Viewport:** ${window.innerWidth} x ${window.innerHeight}`),p.push(`**User-Agent:** ${navigator.userAgent}`),p.push(`**Cookies:** ${ui()}`),p.push(""),n.trim()&&(p.push("## Notes"),p.push(n.trim()),p.push("")),e.length&&(p.push(`## Screenshots (${e.length} downloaded to ~/Downloads)`),p.push(e.map(g=>g.name).join(", ")),p.push(""));const c=t?`${u.length} warnings/errors of ${i.length} total`:`${u.length} entries`;if(p.push(`## Console — ${c}`),!u.length)p.push("(none)");else for(const g of u.slice(-60))p.push(`[${ln(g.timestamp)}] ${g.level.toUpperCase().padEnd(5)} ${g.args.join(" ")}`);p.push("");const h=t?`${l.length} errors of ${a.length} total`:`${l.length} requests`;if(p.push(`## Network — ${h}`),!l.length)p.push("(none)");else for(const g of l.slice(-40)){const m=g.status===0?"ERR":String(g.status);p.push(`${g.method.padEnd(6)} ${g.url} — ${m} (${g.duration}ms)`)}if(p.push(""),p.push(`## JavaScript Errors — ${f.length}`),!f.length)p.push("(none)");else for(const g of f){const m=g.type==="unhandledrejection"?"UnhandledRejection":"Error";if(p.push(`[${ln(g.timestamp)}] ${m}: ${g.message}`),g.source&&p.push(`  at ${g.source}:${g.line}:${g.col}`),g.stack){const v=g.stack.split(`
`).slice(1,7).map(y=>y.trim()).filter(Boolean);for(const y of v)p.push(`  ${y}`)}}return p.push(""),p.push("## Storage"),p.push(di()),p.push(""),p.push("## Page Timing"),p.push(pi()),p.join(`
`)}function gi(e){for(const t of e){const n=document.createElement("a");n.href=t.url,n.download=t.name,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}async function hi(e){return new Promise(t=>{const n=URL.createObjectURL(e),r=new Image;r.onload=()=>{const s=document.createElement("canvas");s.width=r.naturalWidth,s.height=r.naturalHeight,s.getContext("2d").drawImage(r,0,0),s.toBlob(i=>t(i??e),"image/webp",.82),URL.revokeObjectURL(n)},r.onerror=()=>{URL.revokeObjectURL(n),t(e)},r.src=n})}async function xi(){let e=null;try{e=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser"},preferCurrentTab:!0});const t=document.createElement("video");t.srcObject=e,t.muted=!0,await new Promise(f=>{t.onloadedmetadata=()=>{t.play().then(f).catch(f)}}),await new Promise(f=>setTimeout(f,120));const r=Math.min(1,1440/t.videoWidth),s=document.createElement("canvas");s.width=Math.round(t.videoWidth*r),s.height=Math.round(t.videoHeight*r);const i=s.getContext("2d");let a=null;return i&&(i.drawImage(t,0,0,s.width,s.height),a=await new Promise(f=>s.toBlob(f,"image/webp",.82))),t.srcObject=null,a}finally{e?.getTracks().forEach(t=>t.stop())}}const yi={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",boxSizing:"border-box"},mi={display:"flex",flexShrink:"0",borderBottom:`1px solid ${d.panelBorder}`};function an(e){return{flex:"1",padding:"7px 4px",border:"none",borderBottom:e?`2px solid ${d.fabBg}`:"2px solid transparent",backgroundColor:"transparent",color:e?d.textBright:d.textMuted,fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"color 0.1s",boxSizing:"border-box"}}const cn={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"8px",display:"flex",flexDirection:"column",gap:"8px",boxSizing:"border-box"},qe={fontSize:"10px",fontWeight:"600",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.4px",marginBottom:"4px",display:"block"},bi={display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"4px"};function Xe(e,t){return{padding:"6px",borderRadius:"4px",backgroundColor:e>0?`${t}22`:d.toolBtnBg,border:`1px solid ${e>0?t:d.panelBorder}`,textAlign:"center"}}const Ye={fontSize:"16px",fontWeight:"700",color:d.textBright,display:"block"},Ve={fontSize:"9px",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},_i={border:`1px dashed ${d.panelBorder}`,borderRadius:"6px",padding:"10px",minHeight:"64px",display:"flex",flexDirection:"column",gap:"6px"},Si={display:"flex",flexWrap:"wrap",gap:"4px"},vi={position:"relative",width:"56px",height:"40px",borderRadius:"3px",overflow:"hidden",flexShrink:"0",border:`1px solid ${d.panelBorder}`,cursor:"default"},wi={width:"100%",height:"100%",objectFit:"cover"},ki={position:"absolute",top:"1px",right:"1px",width:"14px",height:"14px",borderRadius:"2px",border:"none",backgroundColor:"rgba(0,0,0,0.7)",color:"#fff",fontSize:"9px",lineHeight:"1",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},Ci={fontSize:"11px",color:d.textMuted,textAlign:"center"},dn={display:"flex",gap:"4px"};function _e(e="muted"){const t=e==="primary"?d.fabBg:e==="danger"?"#7f1d1d":d.toolBtnBg,n=e==="primary"?"#fff":e==="danger"?"#fca5a5":d.textMuted;return{flex:"1",padding:"5px 8px",borderRadius:"4px",border:"none",backgroundColor:t,color:n,fontSize:"11px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap"}}const $i=e=>({width:"100%",padding:"9px 12px",borderRadius:"6px",border:"none",backgroundColor:e?"#1e293b":d.fabBg,color:e?d.textMuted:"#fff",fontSize:"12px",fontWeight:"600",cursor:e?"not-allowed":"pointer"}),Bi=e=>({padding:"3px 8px",borderRadius:"4px",border:`1px solid ${e?d.fabBg:d.panelBorder}`,backgroundColor:e?`${d.fabBg}33`:"transparent",color:e?"#93c5fd":d.textMuted,fontSize:"10px",cursor:"pointer",fontWeight:"500"}),Ti={borderRadius:"6px",border:`1px solid ${d.panelBorder}`,backgroundColor:d.toolBtnBg,padding:"8px",display:"flex",flexDirection:"column",gap:"4px"},Ei={fontSize:"10px",color:d.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Ri={fontSize:"10px",color:d.textMuted},Mi={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px",padding:"20px",textAlign:"center"};function zi(){const[e,t]=_("capture"),[n,r]=_([]),s=W(n),[i,a]=_(ai),[f,u]=_(!1),[l,p]=_(null),[c,h]=_(!0),[g,m]=_("");A(()=>{s.current=n},[n]),A(()=>()=>{for(const b of s.current)URL.revokeObjectURL(b.url)},[]),A(()=>{if(e!=="capture")return;function b(z){const N=z.clipboardData?.items;if(N){for(const H of Array.from(N))if(H.type.startsWith("image/")){const Y=H.getAsFile();Y&&hi(Y).then(Ke=>v(Ke))}}}return window.addEventListener("paste",b),()=>window.removeEventListener("paste",b)},[e]);function v(b){const z=ci++,N=URL.createObjectURL(b),H=b.type==="image/webp"?"webp":b.type==="image/jpeg"?"jpg":"png";r(Y=>[...Y,{id:z,url:N,blob:b,name:`screenshot-${z}.${H}`}])}const y=C(async()=>{u(!0);try{const b=await xi();b&&v(b)}catch{}u(!1)},[]),x=C(b=>{r(z=>{const N=z.find(H=>H.id===b);return N&&URL.revokeObjectURL(N.url),z.filter(H=>H.id!==b)})},[]),S=C(()=>{r(b=>{for(const z of b)URL.revokeObjectURL(z.url);return[]})},[]),k=C(b=>{p(b),setTimeout(()=>p(null),2e3)},[]),$=C(async()=>{const b=fi(n,c,g);n.length>0&&gi(n);const z={id:String(Date.now()),timestamp:Date.now(),pageUrl:window.location.href,report:b};a(N=>{const H=[z,...N].slice(0,li);return sn(H),H}),await navigator.clipboard.writeText(b),k(z.id)},[n,c,g,k]),B=C(async b=>{await navigator.clipboard.writeText(b.report),k(b.id)},[k]),M=C(b=>{a(z=>{const N=z.filter(H=>H.id!==b);return sn(N),N})},[]),O=q(),T=G(),E=X(),L=O.filter(b=>b.level==="error"||b.level==="warn").length,I=T.filter(b=>b.status===0||b.status>=400).length;return o("div",{style:yi},o("div",{style:mi},o("button",{style:an(e==="capture"),onClick:()=>t("capture")},"Capture"),o("button",{style:an(e==="history"),onClick:()=>t("history")},`History (${i.length})`)),e==="capture"?o("div",{style:cn},o("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},o("span",{style:qe},"Report data"),o("button",{style:Bi(c),onClick:()=>h(b=>!b)},c?"Errors only":"All entries")),o("div",{style:bi},o("div",{style:Xe(L,"#eab308")},o("span",{style:Ye},String(L)),o("span",{style:Ve},"Console")),o("div",{style:Xe(I,"#ef4444")},o("span",{style:Ye},String(I)),o("span",{style:Ve},"Net Errors")),o("div",{style:Xe(E.length,"#ef4444")},o("span",{style:Ye},String(E.length)),o("span",{style:Ve},"JS Errors"))),o("div",null,o("span",{style:qe},`Screenshots (${n.length})`),o("div",{style:_i},n.length===0?o("div",{style:Ci},"Cmd+V to paste a screenshot",o("br",null),"or click Capture below"):o("div",{style:Si},n.map(b=>o("div",{key:b.id,style:vi,title:b.name},o("img",{src:b.url,style:wi,alt:b.name}),o("button",{style:ki,onClick:()=>x(b.id),title:"Remove"},"×")))),o("div",{style:dn},o("button",{style:_e("muted"),onClick:y,disabled:f,title:"Capture current screen (opens share dialog)"},f?"Capturing...":"Capture Screen"),n.length>0?o("button",{style:_e("danger"),onClick:S,title:"Delete all screenshots"},"Delete All"):null))),o("div",null,o("span",{style:qe},"Notes (optional)"),o("textarea",{value:g,onInput:b=>m(b.target.value),placeholder:"Add your own comments or context…",rows:3,style:{width:"100%",background:d.toolBtnBg,border:`1px solid ${d.panelBorder}`,borderRadius:"4px",color:d.text,fontSize:"11px",padding:"5px 6px",resize:"vertical",fontFamily:"system-ui, -apple-system, sans-serif",boxSizing:"border-box"}})),o("button",{style:$i(!1),onClick:$,title:"Copy debug report to clipboard. Screenshots (if any) download as files."},l?"Copied!":"Copy Report & Download Screenshots"),o("p",{style:{fontSize:10,color:d.textMuted,textAlign:"center",padding:"4px 8px"}},"Screenshots save to ~/Downloads · ",o("a",{style:{color:"#475569",textDecoration:"underline",cursor:"pointer"},href:"/settings/widget",target:"_blank"},"Set label in Settings"))):o("div",{style:{...cn,gap:"6px"}},i.length===0?o("div",{style:Mi},"No snapshots yet. Copy a report from the Capture tab to save it here."):i.map(b=>{const z=new Date(b.timestamp),N=`${z.toLocaleDateString()} ${ae(z.getHours())}:${ae(z.getMinutes())}`,H=l===b.id;return o("div",{key:b.id,style:Ti},o("div",{style:Ri},N),o("div",{style:Ei,title:b.pageUrl},b.pageUrl),o("div",{style:dn},o("button",{style:_e(H?"primary":"muted"),onClick:()=>B(b)},H?"Copied!":"Copy Report"),o("button",{style:_e("danger"),onClick:()=>M(b.id)},"Delete")))})))}let pn={localStorage:{},sessionStorage:{},cookies:""};function Ii(){const e={};try{for(let n=0;n<window.localStorage.length;n++){const r=window.localStorage.key(n);e[r]=window.localStorage.getItem(r)??""}}catch{}const t={};try{for(let n=0;n<window.sessionStorage.length;n++){const r=window.sessionStorage.key(n);t[r]=window.sessionStorage.getItem(r)??""}}catch{}return pn={localStorage:e,sessionStorage:t,cookies:document.cookie},pn}function Di(){const[e,t]=_({localStorage:{},sessionStorage:{},cookies:""}),[n,r]=_("ls");A(()=>{t(Ii())},[]);const s=(f,u)=>o("button",{style:{padding:"4px 10px",fontSize:11,cursor:"pointer",border:"none",fontFamily:"inherit",background:n===f?d.toolBtnBgActive:"transparent",color:n===f?"#fff":d.textMuted,borderRadius:4},onClick:()=>r(f)},u),i=n==="ls"?e.localStorage:n==="ss"?e.sessionStorage:null,a=i?Object.entries(i):[];return o("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},o("div",{style:{display:"flex",gap:4,padding:"6px 8px",borderBottom:`1px solid ${d.panelBorder}`}},s("ls","localStorage"),s("ss","sessionStorage"),s("cookies","Cookies")),o("div",{style:{flex:1,overflowY:"auto"}},n==="cookies"?o("pre",{style:{padding:12,fontSize:10,color:d.text,fontFamily:"monospace",whiteSpace:"pre-wrap"}},e.cookies||"(empty)"):a.length===0?o("p",{style:{padding:12,fontSize:11,color:d.textMuted}},"(empty)"):a.map(([f,u])=>o("div",{key:f,style:{display:"flex",gap:8,padding:"4px 12px",borderBottom:`1px solid ${d.panelBorder}`,fontSize:11}},o("span",{style:{color:d.textMuted,flexShrink:0,width:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},f),o("span",{style:{color:d.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontFamily:"monospace"}},u)))))}const un=[],Se=[];let fn=!1;function ve(e){un.push(e),Se.forEach(t=>t())}function Ge(){return[...un]}function Li(e){return Se.push(e),()=>{const t=Se.indexOf(e);t!==-1&&Se.splice(t,1)}}function Hi(){if(fn)return;fn=!0,document.querySelectorAll("img").forEach(n=>{n.complete&&n.naturalWidth===0&&n.src&&ve({severity:"error",category:"image",message:"Broken image",detail:n.src})});const e=document.querySelectorAll("img:not([alt])");e.length>0&&ve({severity:"warn",category:"alt-text",message:`${e.length} image(s) missing alt text`});const t=n=>{ve({severity:"error",category:"mixed-content",message:"Mixed content blocked",detail:n.blockedURI})};document.addEventListener("securitypolicyviolation",t);try{new PerformanceObserver(r=>{for(const s of r.getEntries()){const i=s;i.duration>2e3&&ve({severity:"warn",category:"slow-resource",message:`Slow resource: ${Math.round(i.duration)}ms`,detail:i.name})}}).observe({type:"resource",buffered:!0})}catch{}}function Pi(){const[e,t]=_([]),[n,r]=_(null);return A(()=>(t(Ge()),Li(()=>t(Ge()))),[]),o("div",{style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden"}},o("div",{style:{display:"flex",alignItems:"center",padding:"4px 12px",borderBottom:`1px solid ${d.panelBorder}`,flexShrink:0}},o("span",{style:{fontSize:10,color:d.textMuted}},`${e.length} issue${e.length!==1?"s":""}`),o("button",{style:{marginLeft:"auto",background:"none",border:`1px solid ${d.panelBorder}`,borderRadius:4,color:d.textMuted,cursor:"pointer",fontSize:10,padding:"2px 8px",fontFamily:"inherit"},onClick:()=>navigator.clipboard.writeText(zt(e)).catch(()=>{}),title:"Copy all health issues"},"Copy Health")),o("div",{style:{flex:1,overflowY:"auto"}},e.length===0?o("p",{style:{padding:16,fontSize:12,color:d.textMuted}},"No health issues detected."):e.map((s,i)=>o("div",{key:`${s.category}:${s.message}:${i}`,style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`,display:"flex",flexDirection:"column",gap:2,position:"relative"},onMouseEnter:()=>r(i),onMouseLeave:()=>r(null)},o("div",{style:{display:"flex",alignItems:"center",gap:6}},o("span",{style:{fontSize:10,fontWeight:600,color:s.severity==="error"?"#ef4444":"#f59e0b",textTransform:"uppercase"}},s.severity),o("span",{style:{fontSize:11,color:d.text}},s.message),o("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:n===i?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:a=>{a.stopPropagation(),navigator.clipboard.writeText(Rt(s)).catch(()=>{})},title:"Copy row"},"⧇")),s.detail&&o("span",{style:{fontSize:10,color:d.textMuted,fontFamily:"monospace",marginLeft:12}},s.detail)))))}function Ai({apiBase:e,pinHash:t,projectId:n}){const[r,s]=_([]),[i,a]=_(null),[f,u]=_([]),l={"X-DevTools-Pin":t,"Content-Type":"application/json"};A(()=>{const v=new AbortController,y=v.signal;return fetch(`${e}/api/routines?projectId=${n}`,{headers:l,signal:y}).then(x=>{if(!x.ok)throw new Error(x.statusText);return x.json()}).then(s).catch(()=>{}),fetch(`${e}/api/routines/runs?projectId=${n}`,{headers:l,signal:y}).then(x=>{if(!x.ok)throw new Error(x.statusText);return x.json()}).then(async x=>{if(!x)return;a(x);const S=await fetch(`${e}/api/routines/${x.checklistId}/items`,{headers:l,signal:y}).then(k=>{if(!k.ok)throw new Error(k.statusText);return k.json()}).catch(()=>[]);u(S)}).catch(()=>{}),()=>v.abort()},[n,t]);async function p(v){try{const y=await fetch(`${e}/api/routines/${v}/runs`,{method:"POST",headers:l});if(!y.ok)return;const x=await y.json(),[S,k]=await Promise.all([fetch(`${e}/api/routines/runs/${x.id}`,{headers:l}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),fetch(`${e}/api/routines/${v}/items`,{headers:l}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()})]);a(S),u(k)}catch{}}async function c(v,y){i&&(await fetch(`${e}/api/routines/runs/${i.id}/items?itemId=${v}`,{method:"PUT",headers:l,body:JSON.stringify({checked:y})}).catch(()=>{}),a(x=>x?{...x,items:x.items?.map(S=>S.itemId===v?{...S,checked:y?1:0}:S)}:null))}const h=i?.items?.length??0,g=i?.items?.filter(v=>v.checked).length??0,m=h>0?Math.round(g/h*100):0;return i?o("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},o("div",{style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`}},o("div",{style:{height:4,background:"#1e293b",borderRadius:2,overflow:"hidden"}},o("div",{style:{height:"100%",background:"#6366f1",borderRadius:2,width:`${m}%`,transition:"width .2s"}})),o("span",{style:{fontSize:10,color:d.textMuted,marginTop:4,display:"block"}},`${g} / ${h} complete`)),o("div",{style:{flex:1,overflowY:"auto",padding:"4px 0"}},(i.items??[]).map(v=>{const y=f.find(x=>x.id===v.itemId);return o("div",{key:v.id,style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`}},o("div",{style:{display:"flex",alignItems:"center",gap:8}},o("input",{type:"checkbox",checked:v.checked===1,onChange:x=>c(v.itemId,x.target.checked)}),o("span",{style:{fontSize:11,color:v.checked?d.textMuted:d.text,textDecoration:v.checked?"line-through":"none"}},y?.name??`Item ${v.itemId}`)),y?.snippet&&window.innerWidth>=768&&o("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:4,marginLeft:22}},o("code",{style:{fontSize:10,color:"#94a3b8",background:"#0a0f1a",padding:"2px 6px",borderRadius:3,fontFamily:"monospace",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},y.snippet),o("button",{style:{background:"none",border:"none",color:d.textMuted,cursor:"pointer",fontSize:12},onClick:()=>navigator.clipboard.writeText(y.snippet??"").catch(()=>{})},"⧇")))})),o("button",{style:{margin:8,padding:"6px 0",border:`1px solid ${d.panelBorder}`,borderRadius:6,background:"none",color:d.textMuted,fontSize:11,cursor:"pointer",fontFamily:"inherit"},onClick:async()=>{i&&await fetch(`${e}/api/routines/runs/${i.id}`,{method:"PUT",headers:l,body:JSON.stringify({close:!0})}).catch(()=>{}),a(null)}},"Close Run")):o("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:8}},o("p",{style:{fontSize:11,color:d.textMuted}},"Start a checklist run:"),...r.map(v=>o("button",{key:v.id,style:{padding:"7px 12px",borderRadius:6,background:d.toolBtnBg,border:`1px solid ${d.panelBorder}`,color:d.text,fontSize:11,cursor:"pointer",textAlign:"left",fontFamily:"inherit"},onClick:()=>p(v.id)},"▶ "+v.name)),r.length===0&&o("p",{style:{fontSize:10,color:d.textMuted}},"No checklists. Create one in Dashboard → Routines."))}const Oi={idea:"in-progress","in-progress":"done",done:"idea"},Ni={idea:"☆","in-progress":"◑",done:"✓"},Fi={idea:d.textMuted,"in-progress":"#6366f1",done:"#22c55e"},Wi={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},ji={display:"flex",gap:"6px",padding:"8px",borderBottom:`1px solid ${d.panelBorder}`},Ui={flex:1,padding:"5px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0,0,0,0.3)",color:d.textBright,fontSize:"12px",fontFamily:"inherit",outline:"none"},qi={padding:"5px 10px",borderRadius:"4px",border:"none",backgroundColor:"#6366f1",color:"#fff",fontSize:"11px",cursor:"pointer",flexShrink:0},Xi={flex:1,overflowY:"auto",padding:"4px 0"},Yi={display:"flex",alignItems:"center",gap:"6px",padding:"5px 8px",borderBottom:`1px solid ${d.panelBorder}`},Vi={flex:1,fontSize:"12px",color:d.textBright,lineHeight:"1.3",wordBreak:"break-word"},Gi={borderTop:`1px solid ${d.panelBorder}`,padding:"6px 8px"};function Ji({apiClient:e,projectId:t}){const[n,r]=_([]),[s,i]=_(""),[a,f]=_(!1);A(()=>{const y=new AbortController;return e.listIdeas(t).then(x=>{y.signal.aborted||r(x??[])}).catch(()=>{}),()=>y.abort()},[t]);const u=C(async()=>{const y=s.trim();if(!y||a)return;f(!0);const x={id:Date.now(),title:y,body:null,status:"idea",createdAt:null};r(S=>[x,...S]),i("");try{const S=await e.createIdea({projectId:t,title:y});r(k=>k.map($=>$.id===x.id?S:$))}catch{r(S=>S.filter(k=>k.id!==x.id))}finally{f(!1)}},[s,a,t,e]),l=C(y=>{y.key==="Enter"&&u()},[u]),p=C(async y=>{const x=Oi[y.status];r(S=>S.map(k=>k.id===y.id?{...k,status:x}:k));try{await e.updateIdea(y.id,{status:x})}catch{r(S=>S.map(k=>k.id===y.id?{...k,status:y.status}:k))}},[e]),c=C(async y=>{r(x=>x.filter(S=>S.id!==y)),await e.deleteIdea(y).catch(()=>{})},[e]),h=C(()=>{const x=n.filter(k=>k.status!=="done").map(k=>`${k.status==="in-progress"?"- [ ] (in-progress)":"- [ ]"} ${k.title}`),S=`### Ideas — ${t}
${x.join(`
`)}`;navigator.clipboard?.writeText(S).catch(()=>{})},[n,t]),g={padding:"16px 8px",fontSize:"11px",color:d.textMuted,textAlign:"center"},m=y=>({background:"none",border:"none",cursor:"pointer",fontSize:"13px",color:Fi[y],padding:"0 2px",flexShrink:0}),v={background:"none",border:"none",cursor:"pointer",fontSize:"11px",color:d.textMuted,padding:"0 2px",flexShrink:0};return o("div",{style:Wi},o("div",{style:ji},o("input",{style:Ui,placeholder:"New idea…",value:s,onInput:y=>i(y.target.value),onKeyDown:l}),o("button",{style:qi,onClick:u,disabled:a},"+")),o("div",{style:Xi},n.length===0?o("div",{style:g},"No ideas yet"):n.map(y=>o("div",{key:y.id,style:Yi},o("button",{onClick:()=>p(y),style:m(y.status),title:`Status: ${y.status} — click to cycle`},Ni[y.status]),o("span",{style:{...Vi,opacity:y.status==="done"?.5:1}},y.title),o("button",{onClick:()=>c(y.id),style:v,title:"Delete"},"×")))),o("div",{style:Gi},o("button",{style:{...Bt,width:"100%",padding:"5px 0"},onClick:h},"Copy for Claude")))}const Ki=[{id:"ideas",label:"Ideas",icon:"☆"},{id:"snapshot",label:"Snapshot",icon:"◎"},{id:"bugs",label:"Bugs",icon:"⌖"},{id:"ai",label:"AI",icon:"✦"},{id:"errors",label:"Errors",icon:"⚠"},{id:"console",label:"Console",icon:">_"},{id:"network",label:"Network",icon:"⇄"},{id:"perf",label:"Perf",icon:"⚡"},{id:"routines",label:"Routines",icon:"✓"},{id:"health",label:"Health",icon:"♥"},{id:"storage",label:"Storage",icon:"◫"},{id:"dom",label:"DOM",icon:"⬡"}];function Qi({projectId:e,isOpen:t,onClose:n,apiClient:r,apiBase:s,pinHash:i}){const[a,f]=_("ideas"),[u,l]=_(!1),[p,c]=_(!1),[h,g]=_(null),[m,v]=_(""),[y,x]=_(""),[S,k]=_({errors:0,console:0}),$=typeof window<"u"?window.location.hostname:e,B=W(null),[M,O]=_(!1);A(()=>{const w=B.current;w&&O(w.scrollLeft+w.clientWidth<w.scrollWidth-4)},[t,u]),A(()=>{const w=B.current;if(!w)return;const F=w.querySelector(`[data-tab="${a}"]`);F&&F.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[a]);const[T,E]=_(()=>{const w=typeof window<"u"?window.innerWidth:1200,F=typeof window<"u"?window.innerHeight:800,j=Math.min(F*.85,520);return{x:Math.max(0,w-De-24),y:Math.max(0,F-j-82)}}),[L,I]=_(!1),b=W(null);A(()=>{function w(){k({errors:X().length,console:q().filter(j=>j.level==="warn"||j.level==="error").length})}w();const F=setInterval(w,2e3);return()=>clearInterval(F)},[]);const[z,N]=_(0);A(()=>{function w(){r.listIdeas(e).then(j=>{N((j??[]).filter(ce=>ce.status!=="done").length)}).catch(()=>{})}w();const F=setInterval(w,1e4);return()=>clearInterval(F)},[e,r]);const H=C(w=>{w.target.closest("button")||(w.currentTarget.setPointerCapture(w.pointerId),b.current={startX:w.clientX,startY:w.clientY,originX:T.x,originY:T.y},I(!0))},[T.x,T.y]),Y=C(w=>{if(!b.current)return;const{startX:F,startY:j,originX:we,originY:ce}=b.current,As=window.innerWidth-De,Os=window.innerHeight-48;E({x:Math.max(0,Math.min(As,we+(w.clientX-F))),y:Math.max(0,Math.min(Os,ce+(w.clientY-j)))})},[]),Ke=C(()=>{b.current=null,I(!1)},[]),Ls=C(w=>{v(w.message),x(w.stack),f("bugs")},[]),Hs=C(w=>{a==="bugs"&&w!=="bugs"&&(v(""),x("")),f(w)},[a]);function Ps(){switch(a){case"console":return o(fo,null);case"network":return o(Fo,null);case"errors":return o(fr,{onReportBug:Ls});case"bugs":return o(Zt,{apiClient:r,projectId:e,prefillTitle:m||void 0,prefillStack:y||void 0});case"perf":return o(si,null);case"storage":return o(Di,null);case"health":return o(Pi,null);case"routines":return o(Ai,{apiBase:s,pinHash:i,projectId:e});case"ideas":return o(Ji,{apiClient:r,projectId:e});case"ai":return o(Rr,{apiBase:s,pinHash:i});case"snapshot":return o(zi,null);case"dom":return o("div",{style:{padding:"40px 20px",textAlign:"center",color:"#334155",fontSize:13}},"Click any element on the page to inspect it.");default:return o("div",{style:{padding:"40px 20px",textAlign:"center",color:"#334155",fontSize:13}},`${a} — coming soon`)}}return o("div",{style:{...Rn,left:`${T.x}px`,top:`${T.y}px`,height:u?"auto":"min(85vh, 520px)",opacity:t?"1":"0",transition:"opacity 0.2s ease",pointerEvents:t?"auto":"none"},"aria-hidden":!t},o("div",{style:{...Mn,cursor:L?"grabbing":"grab"},onPointerDown:H,onPointerMove:Y,onPointerUp:Ke},o("div",{style:Dn},o("div",{style:Ln}),o("span",null,$)),o("div",{style:Hn},o("button",{style:Bt,title:"Copy full page context for Claude",onClick:()=>{const w=Jn([...q()],[...G()],[...X()],Ge());navigator.clipboard.writeText(w).catch(()=>{})}},"Copy for Claude"),o("button",{style:Pn,title:"Minimize",onClick:()=>l(w=>!w)},"—"),o("button",{style:{...zn,backgroundColor:p?"#ef4444":"transparent",color:p?"#fff":"#475569"},onClick:n,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),"aria-label":"Close panel",title:"Close"},"✕"))),u?null:o("div",{style:{position:"relative",flexShrink:0}},o("div",{ref:B,style:An,onScroll:()=>{const w=B.current;w&&O(w.scrollLeft+w.clientWidth<w.scrollWidth-4)}},Ki.map(w=>{const F=a===w.id,j=w.id==="errors"?S.errors:w.id==="console"?S.console:w.id==="ideas"?z:0,we=w.id==="console",ce=w.id==="ideas";return o("button",{key:w.id,"data-tab":w.id,style:{...On,...F?Nn:{},borderBottom:F?"2px solid #6366f1":"2px solid transparent",color:F?"#a5b4fc":h===w.id?"#94a3b8":"#475569"},onClick:()=>Hs(w.id),onMouseEnter:()=>g(w.id),onMouseLeave:()=>g(null)},w.icon," ",w.label,j>0?o("span",{style:ce?{...Le,background:"#6366f1"}:we?{...Le,background:"#d97706"}:Le},j):null)})),M?o("div",{style:{position:"absolute",right:0,top:0,bottom:0,width:32,background:"linear-gradient(to right, transparent, #0f172a)",pointerEvents:"none"}}):null),u?null:o("div",{style:{...In,padding:0}},o("div",{style:{height:"100%",overflowY:"auto",padding:"10px 12px",fontSize:"13px",color:"#94a3b8"}},Ps())))}const gn={isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0,moved:!1},Zi=o("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},o("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}));function es({projectId:e,pinHash:t,apiBase:n,apiClient:r}){const[s,i]=_(!1),[a,f]=_(!1),[u,l]=_({x:0,y:0}),[p,c]=_(!1),[h,g]=_(0),m=W(gn),v=W(null);A(()=>{function B(){const O=X().length,T=q().filter(E=>E.level==="warn"||E.level==="error").length;g(O+T)}B();const M=setInterval(B,2e3);return()=>clearInterval(M)},[]);const y=C(B=>{B.currentTarget.setPointerCapture(B.pointerId),m.current={isDragging:!0,startX:B.clientX,startY:B.clientY,offsetX:u.x,offsetY:u.y,moved:!1},c(!0)},[u.x,u.y]),x=C(B=>{const M=m.current;if(!M.isDragging)return;const O=B.clientX-M.startX,T=B.clientY-M.startY;Math.sqrt(O*O+T*T)>Tn&&(m.current={...M,moved:!0}),l({x:M.offsetX+O,y:M.offsetY+T})},[]),S=C(()=>{const M=m.current.moved;m.current={...gn},c(!1),M||i(O=>!O)},[]),k=C(()=>{i(!1)},[]),$={...En,bottom:`${24-u.y}px`,right:`${24-u.x}px`,backgroundColor:a?d.fabBgHover:d.fabBg,boxShadow:a?"0 6px 20px rgba(99, 102, 241, 0.6)":"0 4px 16px rgba(99, 102, 241, 0.5)",transform:a?"scale(1.05)":"scale(1)",cursor:p?"grabbing":"grab"};return o("div",null,o("button",{ref:v,style:{...$,overflow:"visible"},title:`DevTools (${e})`,"aria-label":"Toggle DevTools panel",onPointerDown:y,onPointerMove:x,onPointerUp:S,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1)},Zi,h>0?o("span",{style:{position:"absolute",top:"-4px",right:"-4px",width:"18px",height:"18px",background:"#ef4444",borderRadius:"50%",fontSize:"9px",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",border:"2px solid #0f172a",lineHeight:"1"}},h>99?"99+":String(h)):null),o(Qi,{projectId:e,isOpen:s,onClose:k,apiClient:r,apiBase:n,pinHash:t}))}function hn(e,t){async function n(r,s={}){return(await fetch(`${e}${r}`,{...s,headers:{"Content-Type":"application/json","X-DevTools-Pin":t,...s.headers}})).json()}return{createBug:r=>n("/api/bugs",{method:"POST",body:JSON.stringify(r)}),createDevLog:r=>n("/api/devlog",{method:"POST",body:JSON.stringify(r)}),sendEvents:r=>n("/api/widget/event",{method:"POST",body:JSON.stringify({events:r})}),listIdeas:r=>n(`/api/ideas?projectId=${encodeURIComponent(r)}`),createIdea:r=>n("/api/ideas",{method:"POST",body:JSON.stringify(r)}),updateIdea:(r,s)=>n(`/api/ideas/${r}`,{method:"PATCH",body:JSON.stringify(s)}),deleteIdea:r=>n(`/api/ideas/${r}`,{method:"DELETE"})}}const ts=console.warn.bind(console),ns=1e4,os=50,rs=200,is=new Set(["log","info","warn","error","debug"]);function ss(e,t,n){let r=[];function s(p){r.length>=rs||(r.push(p),r.length>=os&&i())}function i(){if(r.length===0)return;const p=[...r];r=[],t.sendEvents(p).catch(c=>{ts("[DevTools] Failed to send events:",c)})}function a(){if(r.length===0)return;const p=[...r];r=[];const c=JSON.stringify({events:p}),h=`${n}/api/widget/event`;try{const g=new Blob([c],{type:"application/json"});navigator.sendBeacon(h,g)}catch{}}let f=0;Yt(()=>{const c=X().filter(h=>h.id>f);if(c.length>0){f=c[c.length-1].id;for(const h of c)s({type:"error",title:h.message,content:h.stack,metadata:{errorType:h.type,source:h.source,line:h.line,col:h.col},projectId:e})}}),on(p=>{s({type:"perf",title:`${p.metric}: ${p.value}`,content:`Rating: ${p.rating}`,metadata:{metric:p.metric,value:p.value,rating:p.rating},projectId:e})});let u=0;Tt(()=>{const c=q().filter(h=>h.id>u);if(c.length>0){u=c[c.length-1].id;for(const h of c){if(!is.has(h.level))continue;const g=h.args.join(" ");g.includes("/api/widget/")||g.includes("/api/ai/analyze")||s({type:"console",title:g.slice(0,500),content:h.args.join(`
`).slice(0,2e3),metadata:{level:h.level,argCount:h.args.length},projectId:e})}}});let l=0;Pt(()=>{const c=G().filter(h=>h.id>l);if(c.length>0){l=c[c.length-1].id;for(const h of c)h.url.includes("/api/widget/")||h.url.includes("/api/bugs")||h.url.includes("/api/ai/analyze")||s({type:"network",title:`${h.method} ${h.url}`.slice(0,500),content:`${h.status} ${h.statusText} (${h.duration}ms)`,metadata:{method:h.method,url:h.url,status:h.status,statusText:h.statusText,duration:h.duration,requestSize:h.requestSize,responseSize:h.responseSize},projectId:e})}}),setInterval(i,ns),window.addEventListener("beforeunload",a)}function ls(e,t,n){Yn(),mo(),Uo(),Hr();const r=hn(n,t);ss(e,r,n)}const as=1e4,cs={position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"280px",backgroundColor:"#1a0000",border:"1px solid #dc2626",borderRadius:"8px",boxShadow:"0 8px 24px rgba(220, 38, 38, 0.3)",zIndex:"999997",fontFamily:"system-ui, -apple-system, sans-serif",color:d.text,overflow:"hidden",display:"flex",flexDirection:"column"},ds={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:"rgba(220, 38, 38, 0.2)",borderBottom:"1px solid #dc2626",flexShrink:"0"},ps={fontSize:"12px",fontWeight:"600",color:"#fca5a5"},us={display:"flex",gap:"6px"},xn={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500"},fs={...xn,backgroundColor:"#dc2626",color:"#fff"},gs={...xn,backgroundColor:"rgba(255, 255, 255, 0.1)",color:d.textMuted},hs={padding:"8px 12px",overflowY:"auto",flex:"1"},xs={fontSize:"12px",fontWeight:"500",color:"#fca5a5",marginBottom:"6px",wordBreak:"break-word"},ys={fontSize:"10px",fontFamily:"monospace",lineHeight:"1.6",color:d.textMuted},yn={padding:"1px 0",wordBreak:"break-all"},ms={...yn,opacity:"0.5"};function bs(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function _s(e){return e.includes("node_modules")}function Ss({onReportBug:e}){const[t,n]=_(null),r=W(null),s=C(()=>{n(null),r.current&&(clearTimeout(r.current),r.current=null)},[]),i=C(()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{n(null),r.current=null},as)},[]);A(()=>(qt(p=>{n(p),i()}),()=>{qt(null),r.current&&clearTimeout(r.current)}),[i]);const a=C(()=>{r.current&&(clearTimeout(r.current),r.current=null)},[]),f=C(()=>{t&&i()},[t,i]),u=C(()=>{t&&(e(t),s())},[t,e,s]);if(!t)return null;const l=bs(t.stack);return o("div",{style:cs,onMouseEnter:a,onMouseLeave:f},o("div",{style:ds},o("span",{style:ps},t.type==="error"?"Uncaught Error":"Unhandled Rejection"),o("div",{style:us},o("button",{style:fs,onClick:u},"Report Bug"),o("button",{style:gs,onClick:s},"Dismiss"))),o("div",{style:hs},o("div",{style:xs},t.message),l.length>0?o("div",{style:ys},l.slice(0,8).map((p,c)=>o("div",{key:c,style:_s(p)?ms:yn},p))):null))}const vs={position:"fixed",padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",zIndex:999999,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"4px",fontFamily:"system-ui, -apple-system, sans-serif"},ws={position:"fixed",width:"360px",maxHeight:"320px",backgroundColor:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:999999,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",overflow:"hidden"},ks={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:d.panelHeaderBg,borderBottom:`1px solid ${d.panelBorder}`,flexShrink:0},Cs={fontSize:"12px",fontWeight:"600",color:d.textBright},$s={width:"24px",height:"24px",borderRadius:"4px",border:"none",backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",lineHeight:"1"},Bs={padding:"12px",overflowY:"auto",flex:1,fontSize:"13px",lineHeight:"1.5",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word"},Ts={padding:"16px 12px",fontSize:"12px",color:d.textMuted,textAlign:"center"},Es={padding:"12px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",margin:"8px 12px"};function mn(e,t,n,r){const s=Math.min(Math.max(e,8),window.innerWidth-n-8),i=Math.min(Math.max(t,8),window.innerHeight-r-8);return{x:s,y:i}}function Rs({apiBase:e,pinHash:t}){const[n,r]=_(""),[s,i]=_(null),[a,f]=_(null),[u,l]=_("idle"),[p,c]=_(""),[h,g]=_(""),[m,v]=_(!1),[y,x]=_(!1),S=W(null),k=W(null),$=C(()=>{i(null),f(null),r(""),l("idle"),c(""),g(""),S.current&&(S.current.abort(),S.current=null)},[]);A(()=>{function T(E){if(E.target.closest?.("[data-quickai]"))return;const b=window.getSelection()?.toString().trim()??"";if(b.length>10){r(b);const z=mn(E.clientX,E.clientY-40,90,30);i(z)}else a||(i(null),r(""))}return document.addEventListener("mouseup",T),()=>document.removeEventListener("mouseup",T)},[a]),A(()=>{if(!a)return;function T(L){L.target.closest?.("[data-quickai]")||$()}const E=setTimeout(()=>{document.addEventListener("mousedown",T)},100);return()=>{clearTimeout(E),document.removeEventListener("mousedown",T)}},[a,$]);const B=C(async()=>{if(!n)return;const T=s?mn(s.x,s.y+36,360,320):{x:100,y:100};f(T),i(null),l("loading"),c(""),g(""),S.current&&S.current.abort();const E=new AbortController;S.current=E;try{const L=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:n,context:window.location.href}),signal:E.signal});if(!L.ok)throw new Error(`Analysis failed (${L.status})`);const I=L.body?.getReader();if(!I)throw new Error("No response stream");l("streaming");const b=new TextDecoder;for(;;){const{done:z,value:N}=await I.read();if(z)break;const H=b.decode(N,{stream:!0});H&&c(Y=>Y+H)}l("done")}catch(L){if(L.name==="AbortError")return;l("error");const I=L instanceof Error?L.message:"Analysis failed";g(I)}},[n,s,e,t]),M=s?o("button",{"data-quickai":"btn",style:{...vs,left:`${s.x}px`,top:`${s.y}px`,backgroundColor:m?d.fabBgHover:d.fabBg},onClick:B,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},"✨ Analyze"):null,O=a?o("div",{ref:k,"data-quickai":"popup",style:{...ws,left:`${a.x}px`,top:`${a.y}px`}},o("div",{style:ks},o("span",{style:Cs},"AI Analysis"),o("button",{style:{...$s,backgroundColor:y?d.closeBtnHover:"transparent",color:y?"#fff":d.textMuted},onClick:$,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),"aria-label":"Close"},"✕")),u==="loading"?o("div",{style:Ts},"Analyzing..."):u==="error"?o("div",{style:Es},h):o("div",{style:Bs},p||"Waiting...")):null;return o("div",{"data-quickai":"root"},M,O)}const Ms=["All","Standards","Git","API","Deploy"];function zs({apiBase:e,pinHash:t,onClose:n}){const[r,s]=_(""),[i,a]=_("All"),[f,u]=_([]),[l,p]=_(null),c=W(null);A(()=>{fetch(`${e}/api/hub/kb`,{headers:{"X-DevTools-Pin":t}}).then(m=>{if(!m.ok)throw new Error(m.statusText);return m.json()}).then(m=>{Array.isArray(m)&&u(m)}).catch(()=>{}),setTimeout(()=>c.current?.focus(),50)},[e,t]);function h(m){navigator.clipboard.writeText(m.snippet??m.title).then(()=>{p(m.id),setTimeout(()=>p(null),1500)}).catch(()=>{})}const g=f.filter(m=>{const v=i==="All"||m.type===i,y=!r||m.title.toLowerCase().includes(r.toLowerCase())||(m.snippet??"").toLowerCase().includes(r.toLowerCase());return v&&y});return o("div",{style:{position:"fixed",inset:0,zIndex:2147483647,background:"rgba(0,0,0,0.75)",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:96},onClick:n},o("div",{style:{width:"100%",maxWidth:600,background:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:8,overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.8)",fontFamily:"system-ui,sans-serif"},onClick:m=>m.stopPropagation()},o("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",borderBottom:`1px solid ${d.panelBorder}`}},o("input",{ref:c,value:r,style:{flex:1,background:"transparent",border:"none",outline:"none",color:d.text,fontSize:13,fontFamily:"inherit"},placeholder:"Search knowledge base...",onInput:m=>s(m.target.value)}),o("button",{style:{background:"none",border:"none",color:d.textMuted,cursor:"pointer",fontSize:16},onClick:n},"✕")),o("div",{style:{display:"flex",gap:4,padding:"6px 10px",borderBottom:`1px solid ${d.panelBorder}`}},Ms.map(m=>o("button",{key:m,style:{padding:"2px 10px",borderRadius:99,fontSize:11,cursor:"pointer",border:"none",fontFamily:"inherit",background:i===m?d.toolBtnBgActive:d.toolBtnBg,color:i===m?"#fff":d.textMuted},onClick:()=>a(m)},m))),o("div",{style:{maxHeight:360,overflowY:"auto"}},g.length===0?o("p",{style:{padding:"24px 14px",textAlign:"center",color:d.textMuted,fontSize:12}},"No results"):g.map(m=>o("div",{key:m.id,style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"10px 14px",borderBottom:`1px solid ${d.panelBorder}`}},o("div",{style:{display:"flex",flexDirection:"column",gap:3,minWidth:0}},o("span",{style:{fontSize:12,color:d.text,fontWeight:500}},m.title),m.description&&o("span",{style:{fontSize:10,color:d.textMuted}},m.description),m.snippet&&window.innerWidth>=768&&o("code",{style:{fontSize:10,background:"#0a0f1a",color:"#94a3b8",padding:"2px 6px",borderRadius:4,fontFamily:"monospace",maxWidth:400,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},m.snippet)),m.snippet&&window.innerWidth>=768&&o("button",{style:{background:"none",border:"none",cursor:"pointer",color:l===m.id?"#34d399":d.textMuted,fontSize:14,marginLeft:8,flexShrink:0},onClick:()=>h(m)},"⧉"))))))}const Je=document.currentScript,Is=[":host { all: initial; }","#devtools-root { font-family: system-ui, sans-serif; }","* { box-sizing: border-box; }","*::-webkit-scrollbar { width: 4px; height: 4px; }","*::-webkit-scrollbar-track { background: transparent; }","*::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 2px; }","*::-webkit-scrollbar-corner { background: transparent; }","* { scrollbar-width: thin; scrollbar-color: #1e293b transparent; }"].join(`
`);function Ds({projectId:e,pinHash:t,apiBase:n,apiClient:r}){const[s,i]=_(null),a=C(u=>{i(u)},[]),f=C(()=>{i(null)},[]);return o("div",null,o(es,{projectId:e,pinHash:t,apiBase:n,apiClient:r}),o(Ss,{onReportBug:a}),o(Rs,{apiBase:n,pinHash:t}),s?o("div",{style:{position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"400px",backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:"999997",overflow:"auto"}},o(Zt,{apiClient:r,projectId:e,prefillTitle:s.message,prefillStack:s.stack,onClose:f})):null)}function bn(){if(document.getElementById("devtools-widget"))return;const e=Je?.getAttribute("data-project")||"default",t=Je?.getAttribute("data-pin")||"",n=Je?.src.replace("/widget.js","")||"",r=hn(n,t),s=document.createElement("div");s.id="devtools-widget",document.body.appendChild(s);const i=s.attachShadow({mode:"open"}),a=document.createElement("style");a.textContent=Is,i.appendChild(a);const f=document.createElement("div");f.id="devtools-root",i.appendChild(f),ft(o(Ds,{projectId:e,pinHash:t,apiBase:n,apiClient:r}),f),ls(e,t,n),Hi();let u=null;document.addEventListener("keydown",l=>{l.key.toLowerCase()==="k"&&l.metaKey&&l.shiftKey&&(l.preventDefault(),u?(i.removeChild(u),u=null):(u=document.createElement("div"),i.appendChild(u),ft(o(zs,{apiBase:n,pinHash:t,onClose:()=>{u&&(i.removeChild(u),u=null)}}),u))),l.key==="Escape"&&u&&(i.removeChild(u),u=null)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",bn):bn()})();
