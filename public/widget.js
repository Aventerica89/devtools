(function(){"use strict";var Q,w,Ee,D,Be,Te,Re,Me,ae,ce,de,F={},ze=[],Ot=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Z=Array.isArray;function L(e,t){for(var n in t)e[n]=t[n];return e}function ue(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function s(e,t,n){var o,i,r,l={};for(r in t)r=="key"?o=t[r]:r=="ref"?i=t[r]:l[r]=t[r];if(arguments.length>2&&(l.children=arguments.length>3?Q.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)l[r]===void 0&&(l[r]=e.defaultProps[r]);return ee(e,l,o,i,null)}function ee(e,t,n,o,i){var r={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Ee,__i:-1,__u:0};return i==null&&w.vnode!=null&&w.vnode(r),r}function te(e){return e.children}function ne(e,t){this.props=e,this.context=t}function A(e,t){if(t==null)return e.__?A(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?A(e):null}function He(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return He(e)}}function Pe(e){(!e.__d&&(e.__d=!0)&&D.push(e)&&!oe.__r++||Be!=w.debounceRendering)&&((Be=w.debounceRendering)||Te)(oe)}function oe(){for(var e,t,n,o,i,r,l,c=1;D.length;)D.length>c&&D.sort(Re),e=D.shift(),c=D.length,e.__d&&(n=void 0,o=void 0,i=(o=(t=e).__v).__e,r=[],l=[],t.__P&&((n=L({},o)).__v=o.__v+1,w.vnode&&w.vnode(n),pe(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[i]:null,r,i??A(o),!!(32&o.__u),l),n.__v=o.__v,n.__.__k[n.__i]=n,Ae(r,n,l),o.__e=o.__=null,n.__e!=i&&He(n)));oe.__r=0}function Le(e,t,n,o,i,r,l,c,_,d,f){var a,u,g,m,v,S,x,h=o&&o.__k||ze,C=t.length;for(_=At(n,t,h,_,C),a=0;a<C;a++)(g=n.__k[a])!=null&&(u=g.__i==-1?F:h[g.__i]||F,g.__i=a,S=pe(e,g,u,i,r,l,c,_,d,f),m=g.__e,g.ref&&u.ref!=g.ref&&(u.ref&&_e(u.ref,null,g),f.push(g.ref,g.__c||m,g)),v==null&&m!=null&&(v=m),(x=!!(4&g.__u))||u.__k===g.__k?_=Ie(g,_,e,x):typeof g.type=="function"&&S!==void 0?_=S:m&&(_=m.nextSibling),g.__u&=-7);return n.__e=v,_}function At(e,t,n,o,i){var r,l,c,_,d,f=n.length,a=f,u=0;for(e.__k=new Array(i),r=0;r<i;r++)(l=t[r])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=e.__k[r]=ee(null,l,null,null,null):Z(l)?l=e.__k[r]=ee(te,{children:l},null,null,null):l.constructor===void 0&&l.__b>0?l=e.__k[r]=ee(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):e.__k[r]=l,_=r+u,l.__=e,l.__b=e.__b+1,c=null,(d=l.__i=Nt(l,n,_,a))!=-1&&(a--,(c=n[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(i>f?u--:i<f&&u++),typeof l.type!="function"&&(l.__u|=4)):d!=_&&(d==_-1?u--:d==_+1?u++:(d>_?u--:u++,l.__u|=4))):e.__k[r]=null;if(a)for(r=0;r<f;r++)(c=n[r])!=null&&(2&c.__u)==0&&(c.__e==o&&(o=A(c)),Fe(c,c));return o}function Ie(e,t,n,o){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=Ie(i[r],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=A(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Nt(e,t,n,o){var i,r,l,c=e.key,_=e.type,d=t[n],f=d!=null&&(2&d.__u)==0;if(d===null&&c==null||f&&c==d.key&&_==d.type)return n;if(o>(f?1:0)){for(i=n-1,r=n+1;i>=0||r<t.length;)if((d=t[l=i>=0?i--:r++])!=null&&(2&d.__u)==0&&c==d.key&&_==d.type)return l}return-1}function De(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Ot.test(t)?n:n+"px"}function re(e,t,n,o,i){var r,l;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||De(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||De(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")r=t!=(t=t.replace(Me,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o?n.u=o.u:(n.u=ae,e.addEventListener(t,r?de:ce,r)):e.removeEventListener(t,r?de:ce,r);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Oe(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ae++;else if(t.t<n.u)return;return n(w.event?w.event(t):t)}}}function pe(e,t,n,o,i,r,l,c,_,d){var f,a,u,g,m,v,S,x,h,C,y,E,R,I,H,M,z,T=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(_=!!(32&n.__u),r=[c=t.__e=n.__e]),(f=w.__b)&&f(t);e:if(typeof T=="function")try{if(x=t.props,h="prototype"in T&&T.prototype.render,C=(f=T.contextType)&&o[f.__c],y=f?C?C.props.value:f.__:o,n.__c?S=(a=t.__c=n.__c).__=a.__E:(h?t.__c=a=new T(x,y):(t.__c=a=new ne(x,y),a.constructor=T,a.render=Wt),C&&C.sub(a),a.state||(a.state={}),a.__n=o,u=a.__d=!0,a.__h=[],a._sb=[]),h&&a.__s==null&&(a.__s=a.state),h&&T.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=L({},a.__s)),L(a.__s,T.getDerivedStateFromProps(x,a.__s))),g=a.props,m=a.state,a.__v=t,u)h&&T.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),h&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(h&&T.getDerivedStateFromProps==null&&x!==g&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(x,y),t.__v==n.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(x,a.__s,y)===!1){for(t.__v!=n.__v&&(a.props=x,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(P){P&&(P.__=t)}),E=0;E<a._sb.length;E++)a.__h.push(a._sb[E]);a._sb=[],a.__h.length&&l.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(x,a.__s,y),h&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(g,m,v)})}if(a.context=y,a.props=x,a.__P=e,a.__e=!1,R=w.__r,I=0,h){for(a.state=a.__s,a.__d=!1,R&&R(t),f=a.render(a.props,a.state,a.context),H=0;H<a._sb.length;H++)a.__h.push(a._sb[H]);a._sb=[]}else do a.__d=!1,R&&R(t),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++I<25);a.state=a.__s,a.getChildContext!=null&&(o=L(L({},o),a.getChildContext())),h&&!u&&a.getSnapshotBeforeUpdate!=null&&(v=a.getSnapshotBeforeUpdate(g,m)),M=f,f!=null&&f.type===te&&f.key==null&&(M=Ne(f.props.children)),c=Le(e,Z(M)?M:[M],t,n,o,i,r,l,c,_,d),a.base=t.__e,t.__u&=-161,a.__h.length&&l.push(a),S&&(a.__E=a.__=null)}catch(P){if(t.__v=null,_||r!=null)if(P.then){for(t.__u|=_?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;r[r.indexOf(c)]=null,t.__e=c}else{for(z=r.length;z--;)ue(r[z]);fe(t)}else t.__e=n.__e,t.__k=n.__k,P.then||fe(t);w.__e(P,t,n)}else r==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=Ft(n.__e,t,n,o,i,r,l,_,d);return(f=w.diffed)&&f(t),128&t.__u?void 0:c}function fe(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(fe)}function Ae(e,t,n){for(var o=0;o<n.length;o++)_e(n[o],n[++o],n[++o]);w.__c&&w.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(r){r.call(i)})}catch(r){w.__e(r,i.__v)}})}function Ne(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Z(e)?e.map(Ne):L({},e)}function Ft(e,t,n,o,i,r,l,c,_){var d,f,a,u,g,m,v,S=n.props||F,x=t.props,h=t.type;if(h=="svg"?i="http://www.w3.org/2000/svg":h=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(d=0;d<r.length;d++)if((g=r[d])&&"setAttribute"in g==!!h&&(h?g.localName==h:g.nodeType==3)){e=g,r[d]=null;break}}if(e==null){if(h==null)return document.createTextNode(x);e=document.createElementNS(i,h,x.is&&x),c&&(w.__m&&w.__m(t,r),c=!1),r=null}if(h==null)S===x||c&&e.data==x||(e.data=x);else{if(r=r&&Q.call(e.childNodes),!c&&r!=null)for(S={},d=0;d<e.attributes.length;d++)S[(g=e.attributes[d]).name]=g.value;for(d in S)if(g=S[d],d!="children"){if(d=="dangerouslySetInnerHTML")a=g;else if(!(d in x)){if(d=="value"&&"defaultValue"in x||d=="checked"&&"defaultChecked"in x)continue;re(e,d,null,g,i)}}for(d in x)g=x[d],d=="children"?u=g:d=="dangerouslySetInnerHTML"?f=g:d=="value"?m=g:d=="checked"?v=g:c&&typeof g!="function"||S[d]===g||re(e,d,g,S[d],i);if(f)c||a&&(f.__html==a.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(a&&(e.innerHTML=""),Le(t.type=="template"?e.content:e,Z(u)?u:[u],t,n,o,h=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,l,r?r[0]:n.__k&&A(n,0),c,_),r!=null)for(d=r.length;d--;)ue(r[d]);c||(d="value",h=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[d]||h=="progress"&&!m||h=="option"&&m!=S[d])&&re(e,d,m,S[d],i),d="checked",v!=null&&v!=e[d]&&re(e,d,v,S[d],i))}return e}function _e(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(i){w.__e(i,n)}}function Fe(e,t,n){var o,i;if(w.unmount&&w.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||_e(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){w.__e(r,t)}o.base=o.__P=null}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&Fe(o[i],t,n||typeof e.type!="function");n||ue(e.__e),e.__c=e.__=e.__e=void 0}function Wt(e,t,n){return this.constructor(e,n)}function Ut(e,t,n){var o,i,r,l;t==document&&(t=document.documentElement),w.__&&w.__(e,t),i=(o=!1)?null:t.__k,r=[],l=[],pe(t,e=t.__k=s(te,null,[e]),i||F,F,t.namespaceURI,i?null:t.firstChild?Q.call(t.childNodes):null,r,i?i.__e:t.firstChild,o,l),Ae(r,e,l)}Q=ze.slice,w={__e:function(e,t,n,o){for(var i,r,l;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(e)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,o||{}),l=i.__d),l)return i.__E=i}catch(c){e=c}throw e}},Ee=0,ne.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=L({},this.state),typeof e=="function"&&(e=e(L({},n),this.props)),e&&L(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Pe(this))},ne.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Pe(this))},ne.prototype.render=te,D=[],Te=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Re=function(e,t){return e.__v.__b-t.__v.__b},oe.__r=0,Me=/(PointerCapture)$|Capture$/i,ae=0,ce=Oe(!1),de=Oe(!0);var W,$,ge,We,U=0,Ue=[],B=w,je=B.__b,qe=B.__r,Xe=B.diffed,Ve=B.__c,Ye=B.unmount,Ge=B.__;function xe(e,t){B.__h&&B.__h($,e,U||t),U=0;var n=$.__H||($.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function b(e){return U=1,jt(Ze,e)}function jt(e,t,n){var o=xe(W++,2);if(o.t=e,!o.__c&&(o.__=[Ze(void 0,t),function(c){var _=o.__N?o.__N[0]:o.__[0],d=o.t(_,c);_!==d&&(o.__N=[d,o.__[1]],o.__c.setState({}))}],o.__c=$,!$.__f)){var i=function(c,_,d){if(!o.__c.__H)return!0;var f=o.__c.__H.__.filter(function(u){return!!u.__c});if(f.every(function(u){return!u.__N}))return!r||r.call(this,c,_,d);var a=o.__c.props!==c;return f.forEach(function(u){if(u.__N){var g=u.__[0];u.__=u.__N,u.__N=void 0,g!==u.__[0]&&(a=!0)}}),r&&r.call(this,c,_,d)||a};$.__f=!0;var r=$.shouldComponentUpdate,l=$.componentWillUpdate;$.componentWillUpdate=function(c,_,d){if(this.__e){var f=r;r=void 0,i(c,_,d),r=f}l&&l.call(this,c,_,d)},$.shouldComponentUpdate=i}return o.__N||o.__}function O(e,t){var n=xe(W++,3);!B.__s&&Qe(n.__H,t)&&(n.__=e,n.u=t,$.__H.__h.push(n))}function N(e){return U=5,Je(function(){return{current:e}},[])}function Je(e,t){var n=xe(W++,7);return Qe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function k(e,t){return U=8,Je(function(){return e},t)}function qt(){for(var e;e=Ue.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ie),e.__H.__h.forEach(he),e.__H.__h=[]}catch(t){e.__H.__h=[],B.__e(t,e.__v)}}B.__b=function(e){$=null,je&&je(e)},B.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ge&&Ge(e,t)},B.__r=function(e){qe&&qe(e),W=0;var t=($=e.__c).__H;t&&(ge===$?(t.__h=[],$.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(ie),t.__h.forEach(he),t.__h=[],W=0)),ge=$},B.diffed=function(e){Xe&&Xe(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Ue.push(t)!==1&&We===B.requestAnimationFrame||((We=B.requestAnimationFrame)||Xt)(qt)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ge=$=null},B.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ie),n.__h=n.__h.filter(function(o){return!o.__||he(o)})}catch(o){t.some(function(i){i.__h&&(i.__h=[])}),t=[],B.__e(o,n.__v)}}),Ve&&Ve(e,t)},B.unmount=function(e){Ye&&Ye(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{ie(o)}catch(i){t=i}}),n.__H=void 0,t&&B.__e(t,n.__v))};var Ke=typeof requestAnimationFrame=="function";function Xt(e){var t,n=function(){clearTimeout(o),Ke&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);Ke&&(t=requestAnimationFrame(n))}function ie(e){var t=$,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),$=t}function he(e){var t=$;e.__c=e.__(),$=t}function Qe(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function Ze(e,t){return typeof t=="function"?t(e):t}const p={fabBg:"#3b82f6",fabBgHover:"#2563eb",panelBg:"#0f172a",panelBorder:"#1e293b",panelHeaderBg:"#1e293b",toolBtnBg:"#1e293b",toolBtnBgHover:"#334155",toolBtnBgActive:"#3b82f6",text:"#e2e8f0",textMuted:"#94a3b8",textBright:"#f8fafc",closeBtnHover:"#ef4444",shadow:"rgba(0, 0, 0, 0.4)"},et=48,tt=300,Vt=5,Yt={position:"fixed",width:`${et}px`,height:`${et}px`,borderRadius:"50%",backgroundColor:p.fabBg,color:"#fff",border:"none",cursor:"grab",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999,boxShadow:`0 4px 12px ${p.shadow}`,transition:"background-color 0.15s ease, box-shadow 0.15s ease",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},Gt={position:"fixed",top:"0",right:"0",width:`${tt}px`,height:"100vh",backgroundColor:p.panelBg,borderLeft:`1px solid ${p.panelBorder}`,zIndex:999998,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",color:p.text,boxShadow:`-4px 0 20px ${p.shadow}`},Jt={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:p.panelHeaderBg,borderBottom:`1px solid ${p.panelBorder}`,flexShrink:"0"},Kt={fontSize:"14px",fontWeight:"600",color:p.textBright,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"220px"},Qt={width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:"transparent",color:p.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",lineHeight:"1",flexShrink:"0"},Zt={display:"flex",flexDirection:"column",gap:"4px",padding:"12px",overflowY:"auto",flex:"1"},en={display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"8px",border:"none",backgroundColor:p.toolBtnBg,color:p.text,cursor:"pointer",fontSize:"13px",fontWeight:"500",textAlign:"left",transition:"background-color 0.12s ease",width:"100%"},tn={width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",flexShrink:"0"},nn={flex:"1",padding:"16px",overflowY:"auto",fontSize:"13px",color:p.textMuted,display:"flex",alignItems:"center",justifyContent:"center"},on="translateX(0)",rn=`translateX(${tt}px)`,sn=500;let ln=1;const j=[],q=[];function an(e){if(e===null)return"null";if(e===void 0)return"undefined";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(e instanceof Error)return`${e.name}: ${e.message}`;try{return JSON.stringify(e,null,2)}catch{return String(e)}}function cn(e,t){const n={id:ln++,level:e,args:t.map(an),timestamp:Date.now()};j.length>=sn&&j.shift(),j.push(n);for(const o of q)o()}function ye(){return[...j]}function dn(){j.length=0;for(const e of q)e()}function nt(e){return q.push(e),()=>{const t=q.indexOf(e);t!==-1&&q.splice(t,1)}}function un(){const e=["log","warn","error","info"];for(const t of e){const n=console[t].bind(console);console[t]=(...o)=>{cn(t,o),n(...o)}}}const ot={log:"#94a3b8",info:"#3b82f6",warn:"#eab308",error:"#ef4444"},pn={log:"rgba(148, 163, 184, 0.15)",info:"rgba(59, 130, 246, 0.15)",warn:"rgba(234, 179, 8, 0.15)",error:"rgba(239, 68, 68, 0.15)"},rt=["log","info","warn","error"];function fn(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0"),r=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${o}:${i}.${r}`}const _n={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},gn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},xn={display:"flex",gap:"4px",flexWrap:"wrap"},hn={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:p.toolBtnBg,color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},yn={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},mn={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all"},bn={display:"flex",alignItems:"center",gap:"6px"},Sn={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},vn={fontSize:"10px",color:p.textMuted,flexShrink:"0"},wn={color:p.text,whiteSpace:"pre-wrap",lineHeight:"1.4"},kn={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px"};function Cn(e,t){return{padding:"2px 6px",borderRadius:"3px",border:"none",backgroundColor:e?ot[t]:p.toolBtnBg,color:e?"#fff":p.textMuted,cursor:"pointer",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"}}function $n(){const[e,t]=b(ye),[n,o]=b(new Set(rt));O(()=>nt(()=>{t(ye())}),[]);const i=k(()=>{dn(),t([])},[]),r=k(c=>{o(_=>{const d=new Set(_);return d.has(c)?d.delete(c):d.add(c),d})},[]),l=e.filter(c=>n.has(c.level));return s("div",{style:_n},s("div",{style:gn},s("div",{style:xn},rt.map(c=>s("button",{key:c,style:Cn(n.has(c),c),onClick:()=>r(c),title:`Toggle ${c} entries`},c))),s("button",{style:hn,onClick:i,title:"Clear console entries"},"Clear")),l.length===0?s("div",{style:kn},"No console entries"):s("div",{style:yn},l.map(c=>s("div",{key:c.id,style:{...mn,backgroundColor:pn[c.level]}},s("div",{style:bn},s("span",{style:{...Sn,backgroundColor:ot[c.level],color:"#fff"}},c.level),s("span",{style:vn},fn(c.timestamp))),s("div",{style:wn},c.args.join(" "))))))}const En=200;let it=1;const X=[],V=[];function Bn(e){if(e==null)return 0;if(typeof e=="string")return e.length;if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(e instanceof FormData){let t=0;return e.forEach(n=>{typeof n=="string"?t+=n.length:n instanceof Blob&&(t+=n.size)}),t}return e instanceof URLSearchParams?e.toString().length:0}function st(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function lt(e){X.length>=En&&X.shift(),X.push(e);for(const t of V)t()}function me(){return[...X]}function Tn(){X.length=0;for(const e of V)e()}function at(e){return V.push(e),()=>{const t=V.indexOf(e);t!==-1&&V.splice(t,1)}}function Rn(){const e=window.fetch.bind(window);window.fetch=async(t,n)=>{const o=(n?.method??"GET").toUpperCase(),i=typeof t=="string"?t:t instanceof URL?t.href:t.url,r=Bn(n?.body??null);let l={};if(n?.headers)if(n.headers instanceof Headers)l=st(n.headers);else if(Array.isArray(n.headers))for(const[d,f]of n.headers)l[d]=f;else l={...n.headers};const c=performance.now(),_=Date.now();try{const d=await e(t,n),f=performance.now()-c,a=d.clone();let u=0;try{u=(await a.blob()).size}catch{u=0}const g={id:it++,method:o,url:i,status:d.status,statusText:d.statusText,duration:Math.round(f),requestSize:r,responseSize:u,requestHeaders:l,responseHeaders:st(d.headers),startTime:c,timestamp:_};return lt(g),d}catch(d){const f=performance.now()-c,a={id:it++,method:o,url:i,status:0,statusText:"Network Error",duration:Math.round(f),requestSize:r,responseSize:0,requestHeaders:l,responseHeaders:{},startTime:c,timestamp:_};throw lt(a),d}}}const Mn={GET:"#22c55e",POST:"#3b82f6",PUT:"#eab308",DELETE:"#ef4444",PATCH:"#a855f7"},zn="#94a3b8";function Hn(e){return Mn[e]??zn}function Pn(e){return e===0?"#ef4444":e<300?"#22c55e":e<400?"#3b82f6":e<500?"#eab308":"#ef4444"}function ct(e){return e===0?"rgba(239, 68, 68, 0.15)":e<300?"rgba(34, 197, 94, 0.15)":e<400?"rgba(59, 130, 246, 0.15)":e<500?"rgba(234, 179, 8, 0.15)":"rgba(239, 68, 68, 0.15)"}function dt(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0"),r=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${o}:${i}.${r}`}function ut(e){return e<1e3?`${e}ms`:`${(e/1e3).toFixed(1)}s`}function pt(e){return e===0?"0 B":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function Ln(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}const In={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Dn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},On={fontSize:"10px",color:p.textMuted,flexShrink:"0"},An={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:p.toolBtnBg,color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Nn={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Fn={display:"flex",flexDirection:"column",padding:"5px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",cursor:"pointer",transition:"background-color 0.1s ease"},Wn={display:"flex",alignItems:"center",gap:"6px",minWidth:"0"},Un={padding:"1px 5px",borderRadius:"3px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},jn={padding:"1px 4px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",flexShrink:"0"},qn={flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:p.text,fontSize:"10px",minWidth:"0"},Xn={fontSize:"10px",color:p.textMuted,flexShrink:"0",textAlign:"right",minWidth:"40px"},Vn={fontSize:"10px",color:p.textMuted,flexShrink:"0"},Yn={marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5",wordBreak:"break-all"},be={fontWeight:"600",color:p.textBright,marginBottom:"2px",marginTop:"6px",display:"block"},Gn={color:p.textMuted},ft={display:"flex",gap:"4px",color:p.textMuted,padding:"1px 0"},_t={color:"#93c5fd",flexShrink:"0"},Jn={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px"};function Kn({entry:e}){const t=Object.entries(e.requestHeaders),n=Object.entries(e.responseHeaders);return s("div",{style:Yn},s("span",{style:{...be,marginTop:"0"}},"General"),s("div",{style:Gn},s("div",null,`URL: ${e.url}`),s("div",null,`Method: ${e.method}`),s("div",null,`Status: ${e.status} ${e.statusText}`),s("div",null,`Duration: ${ut(e.duration)}`),s("div",null,`Request size: ${pt(e.requestSize)}`),s("div",null,`Response size: ${pt(e.responseSize)}`),s("div",null,`Time: ${dt(e.timestamp)}`)),t.length>0?s("div",null,s("span",{style:be},"Request Headers"),t.map(([o,i])=>s("div",{key:o,style:ft},s("span",{style:_t},`${o}:`),s("span",null,i)))):null,n.length>0?s("div",null,s("span",{style:be},"Response Headers"),n.map(([o,i])=>s("div",{key:o,style:ft},s("span",{style:_t},`${o}:`),s("span",null,i)))):null)}function Qn(){const[e,t]=b(me),[n,o]=b(null);O(()=>at(()=>{t(me())}),[]);const i=k(()=>{Tn(),t([]),o(null)},[]),r=k(l=>{o(c=>c===l?null:l)},[]);return s("div",{style:In},s("div",{style:Dn},s("span",{style:On},`${e.length} request${e.length!==1?"s":""}`),s("button",{style:An,onClick:i,title:"Clear network entries"},"Clear")),e.length===0?s("div",{style:Jn},"No network requests"):s("div",{style:Nn},e.map(l=>{const c=n===l.id;return s("div",{key:l.id,style:{...Fn,backgroundColor:c?"rgba(59, 130, 246, 0.12)":ct(l.status)},onClick:()=>r(l.id)},s("div",{style:Wn},s("span",{style:{...Un,backgroundColor:Hn(l.method)}},l.method),s("span",{style:{...jn,color:Pn(l.status),backgroundColor:ct(l.status)}},l.status===0?"ERR":String(l.status)),s("span",{style:qn,title:l.url},Ln(l.url,40)),s("span",{style:Xn},ut(l.duration)),s("span",{style:Vn},dt(l.timestamp))),c?s(Kn,{entry:l}):null)})))}const Zn=100;let gt=1;const Y=[],G=[];let Se=null;function xt(e){Se=e}function ht(e){Y.length>=Zn&&Y.shift(),Y.push(e);for(const t of G)t();Se&&Se(e)}function ve(){return[...Y]}function eo(){Y.length=0;for(const e of G)e()}function yt(e){return G.push(e),()=>{const t=G.indexOf(e);t!==-1&&G.splice(t,1)}}function to(){const e=window.onerror;window.onerror=(t,n,o,i,r)=>{const l={id:gt++,message:typeof t=="string"?t:"Unknown error",stack:r?.stack??"",source:n??"",line:o??0,col:i??0,timestamp:Date.now(),type:"error"};return ht(l),typeof e=="function"?e(t,n,o,i,r):!1},window.addEventListener("unhandledrejection",t=>{const n=t.reason,o=n instanceof Error,i=o?n.message:typeof n=="string"?n:"Unhandled promise rejection",r=o?n.stack??"":"",l={id:gt++,message:i,stack:r,source:"",line:0,col:0,timestamp:Date.now(),type:"unhandledrejection"};ht(l)})}const no="#ef4444",oo="rgba(239, 68, 68, 0.15)",ro="#f97316",io="rgba(249, 115, 22, 0.15)",so={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},lo={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},ao={fontSize:"10px",color:p.textMuted,flexShrink:"0"},co={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:p.toolBtnBg,color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},uo={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},po={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",cursor:"pointer"},fo={display:"flex",alignItems:"center",gap:"6px"},_o={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},go={fontSize:"10px",color:p.textMuted,flexShrink:"0"},mt={padding:"1px 0",wordBreak:"break-all"},xo={...mt,opacity:"0.5"},ho={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500",backgroundColor:"#dc2626",color:"#fff"},yo={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px"};function mo(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0"),r=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${o}:${i}.${r}`}function bo(e){return e==="error"?no:ro}function So(e){return e==="error"?oo:io}function vo(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function wo(e){return e.includes("node_modules")}function ko({onReportBug:e}){const[t,n]=b(ve),[o,i]=b(null);O(()=>yt(()=>{n(ve())}),[]);const r=k(()=>{eo(),n([]),i(null)},[]),l=k(c=>{i(_=>_===c?null:c)},[]);return s("div",{style:so},s("div",{style:lo},s("span",{style:ao},`${t.length} error${t.length!==1?"s":""}`),s("button",{style:co,onClick:r,title:"Clear error entries"},"Clear")),t.length===0?s("div",{style:yo},"No errors captured"):s("div",{style:uo},t.map(c=>{const _=o===c.id,d=vo(c.stack);return s("div",{key:c.id,style:{...po,backgroundColor:_?"rgba(239, 68, 68, 0.12)":So(c.type)},onClick:()=>l(c.id)},s("div",{style:fo},s("span",{style:{..._o,backgroundColor:bo(c.type)}},c.type==="error"?"ERR":"REJ"),s("span",{style:{flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:p.text,fontSize:"10px"}},c.message),s("span",{style:go},mo(c.timestamp))),_?s("div",{style:{marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5"}},c.source?s("div",{style:{color:"#93c5fd",marginBottom:"4px"}},`${c.source}:${c.line}:${c.col}`):null,d.length>0?d.map((f,a)=>s("div",{key:a,style:wo(f)?xo:mt},f)):s("span",{style:{color:p.textMuted}},"No stack trace available"),e?s("button",{style:{...ho,marginTop:"8px",width:"100%"},onClick:f=>{f.stopPropagation(),e(c)}},"Report Bug"):null):null)})))}const Co=["low","medium","high","critical"],$o={low:"#22c55e",medium:"#eab308",high:"#f97316",critical:"#ef4444"},bt={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},se={fontSize:"11px",fontWeight:"600",color:p.textBright,marginBottom:"3px",display:"block"},St={width:"100%",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${p.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:p.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},Eo={...St,minHeight:"60px",resize:"vertical",lineHeight:"1.4"},Bo={display:"flex",gap:"4px"},To={padding:"4px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flex:"1",textAlign:"center"},we={padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:p.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",width:"100%",marginTop:"4px"},Ro={...we,opacity:"0.5",cursor:"not-allowed"},vt={padding:"8px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textAlign:"center"},Mo={...vt,backgroundColor:"rgba(34, 197, 94, 0.15)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},zo={...vt,backgroundColor:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"},Ho={fontSize:"10px",fontFamily:"monospace",color:p.textMuted,backgroundColor:"rgba(0, 0, 0, 0.3)",padding:"6px 8px",borderRadius:"4px",maxHeight:"60px",overflowY:"auto",lineHeight:"1.4",whiteSpace:"pre-wrap",wordBreak:"break-all"},wt={padding:"4px 8px",borderRadius:"4px",border:"none",backgroundColor:"rgba(255, 255, 255, 0.1)",color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",alignSelf:"flex-end"};function kt({apiClient:e,projectId:t,prefillTitle:n,prefillStack:o,onClose:i}){const[r,l]=b(n??""),[c,_]=b(""),[d,f]=b("medium"),[a,u]=b("idle"),[g,m]=b(""),v=r.trim().length>0&&a!=="submitting",S=k(async()=>{if(v){u("submitting"),m("");try{const x={projectId:t,title:r.trim(),description:c.trim(),severity:d,url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()};o&&(x.stackTrace=o),await e.createBug(x),u("success"),l(""),_(""),f("medium")}catch(x){u("error");const h=x instanceof Error?x.message:"Failed to submit bug report";m(h)}}},[v,r,c,d,t,o,e]);return a==="success"?s("div",{style:bt},s("div",{style:Mo},"Bug report submitted."),s("button",{style:{...we,marginTop:"8px"},onClick:()=>u("idle")},"Report Another"),i?s("button",{style:{...wt,marginTop:"4px",alignSelf:"center"},onClick:i},"Close"):null):s("div",{style:bt},i?s("button",{style:wt,onClick:i},"Back"):null,s("div",null,s("label",{style:se},"Title"),s("input",{style:St,type:"text",value:r,placeholder:"Describe the bug briefly",onInput:x=>{l(x.target.value)}})),s("div",null,s("label",{style:se},"Description"),s("textarea",{style:Eo,value:c,placeholder:"Steps to reproduce, expected vs actual behavior",onInput:x=>{_(x.target.value)}})),o?s("div",null,s("label",{style:se},"Stack Trace"),s("div",{style:Ho},o)):null,s("div",null,s("label",{style:se},"Severity"),s("div",{style:Bo},Co.map(x=>s("button",{key:x,style:{...To,backgroundColor:d===x?$o[x]:p.toolBtnBg,color:d===x?"#fff":p.textMuted},onClick:()=>f(x)},x)))),a==="error"?s("div",{style:zo},g||"Submission failed"):null,s("button",{style:v?we:Ro,onClick:S,disabled:!v},a==="submitting"?"Submitting...":"Submit Bug Report"))}const Po={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},Lo={display:"flex",gap:"6px",flexShrink:"0"},Io={flex:"1",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${p.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:p.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},Ct={padding:"6px 10px",borderRadius:"4px",border:"none",backgroundColor:p.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",flexShrink:"0"},Do={...Ct,opacity:"0.5",cursor:"not-allowed"},$t={flex:"1",overflowY:"auto",fontSize:"12px",lineHeight:"1.5",color:p.text,whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"8px",borderRadius:"4px",minHeight:"80px"},Oo={...$t,color:p.textMuted,display:"flex",alignItems:"center",justifyContent:"center",fontStyle:"italic"},Ao={padding:"8px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px"};function No({apiBase:e,pinHash:t}){const[n,o]=b(""),[i,r]=b(""),[l,c]=b("idle"),[_,d]=b(""),f=N(null),a=n.trim().length>0&&l!=="loading"&&l!=="streaming",u=k(async()=>{if(!a)return;const m=n.trim();r(""),c("loading"),d(""),f.current&&f.current.abort();const v=new AbortController;f.current=v;try{const S=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:m,context:window.location.href}),signal:v.signal});if(!S.ok)throw new Error(`Request failed (${S.status})`);const x=S.body?.getReader();if(!x)throw new Error("No response stream");c("streaming");const h=new TextDecoder;for(;;){const{done:C,value:y}=await x.read();if(C)break;const E=h.decode(y,{stream:!0});E&&r(R=>R+E)}c("idle")}catch(S){if(S.name==="AbortError")return;c("error");const x=S instanceof Error?S.message:"Analysis failed";d(x)}},[a,n,e,t]),g=k(m=>{m.key==="Enter"&&!m.shiftKey&&a&&(m.preventDefault(),u())},[a,u]);return s("div",{style:Po},s("div",{style:Lo},s("input",{style:Io,type:"text",value:n,placeholder:"Ask about code, errors, concepts...",onInput:m=>{o(m.target.value)},onKeyDown:g}),s("button",{style:a?Ct:Do,onClick:u,disabled:!a},l==="loading"||l==="streaming"?"...":"Send")),l==="error"?s("div",{style:Ao},_):null,i?s("div",{style:$t},i):s("div",{style:Oo},l==="loading"?"Thinking...":"Response will appear here"))}const Fo=100,Wo={LCP:[2500,4e3],CLS:[.1,.25],INP:[200,500],FCP:[1800,3e3],TTFB:[800,1800]};let Uo=1;const J=[],le=[];function jo(e,t){const n=Wo[e];return t<=n[0]?"good":t<=n[1]?"needs-improvement":"poor"}function K(e,t){const n={id:Uo++,timestamp:Date.now(),metric:e,value:Math.round(e==="CLS"?t*1e3:t)/(e==="CLS"?1e3:1),rating:jo(e,t)};J.length>=Fo&&J.shift(),J.push(n);for(const o of le)o(n)}function Et(){return[...J]}function qo(){J.length=0}function Bt(e){return le.push(e),()=>{const t=le.indexOf(e);t!==-1&&le.splice(t,1)}}function Xo(){if(!(typeof PerformanceObserver>"u")){try{new PerformanceObserver(t=>{const n=t.getEntries(),o=n[n.length-1];o&&K("LCP",o.startTime)}).observe({type:"largest-contentful-paint",buffered:!0})}catch{}try{let e=0;new PerformanceObserver(n=>{for(const o of n.getEntries()){const i=o;!i.hadRecentInput&&typeof i.value=="number"&&(e+=i.value,K("CLS",e))}}).observe({type:"layout-shift",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries())n.duration>0&&K("INP",n.duration)}).observe({type:"event",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries())n.name==="first-contentful-paint"&&K("FCP",n.startTime)}).observe({type:"paint",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries()){const o=n;o.responseStart>0&&K("TTFB",o.responseStart-o.requestStart)}}).observe({type:"navigation",buffered:!0})}catch{}}}const ke={good:"#22c55e","needs-improvement":"#eab308",poor:"#ef4444"},Vo={good:"rgba(34, 197, 94, 0.15)","needs-improvement":"rgba(234, 179, 8, 0.15)",poor:"rgba(239, 68, 68, 0.15)"},Yo={LCP:"Largest Contentful Paint",CLS:"Cumulative Layout Shift",INP:"Interaction to Next Paint",FCP:"First Contentful Paint",TTFB:"Time to First Byte"},Tt={LCP:"ms",CLS:"",INP:"ms",FCP:"ms",TTFB:"ms"},Go=["LCP","FCP","CLS","INP","TTFB"];function Jo(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0");return`${n}:${o}:${i}`}function Ko(e){const t={};for(const n of e){const o=t[n.metric];(!o||n.id>o.id)&&(t[n.metric]=n)}return t}const Qo={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Zo={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",flexShrink:"0"},er={fontSize:"11px",fontWeight:"600",color:p.textBright,textTransform:"uppercase",letterSpacing:"0.5px"},tr={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:p.toolBtnBg,color:p.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},nr={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px",padding:"4px 8px 8px",flexShrink:"0"},or={display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",padding:"8px 6px",borderRadius:"6px",backgroundColor:p.toolBtnBg},rr={fontSize:"16px",fontWeight:"700",fontFamily:"monospace"},ir={fontSize:"9px",fontWeight:"500",color:p.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},sr={height:"1px",backgroundColor:p.panelBorder,margin:"0 8px",flexShrink:"0"},lr={fontSize:"10px",fontWeight:"600",color:p.textMuted,padding:"6px 8px 2px",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},ar={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},cr={display:"flex",alignItems:"center",gap:"6px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace"},dr={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flexShrink:"0",color:"#fff"},ur={fontWeight:"600",color:p.text,flexShrink:"0",minWidth:"32px"},pr={color:p.textBright,flex:"1"},fr={fontSize:"10px",color:p.textMuted,flexShrink:"0"},_r={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:p.textMuted,fontSize:"12px"};function gr(e){return e==="good"?"Good":e==="needs-improvement"?"OK":"Poor"}function xr(){const[e,t]=b(Et);O(()=>Bt(()=>{t(Et())}),[]);const n=k(()=>{qo(),t([])},[]),o=Ko(e),i=Go.map(r=>{const l=o[r];if(!l)return null;const c=Tt[r],_=r==="CLS"?l.value.toFixed(3):`${Math.round(l.value)}`;return{metric:r,entry:l,displayValue:_,unit:c}}).filter(Boolean);return s("div",{style:Qo},s("div",{style:Zo},s("span",{style:er},"Web Vitals"),s("button",{style:tr,onClick:n,title:"Clear performance entries"},"Clear")),i.length>0?s("div",{style:nr},i.map(r=>s("div",{key:r.metric,style:{...or,borderLeft:`3px solid ${ke[r.entry.rating]}`},title:Yo[r.metric]},s("span",{style:{...rr,color:ke[r.entry.rating]}},`${r.displayValue}${r.unit}`),s("span",{style:ir},r.metric)))):null,e.length>0?s("div",{style:sr}):null,e.length>0?s("div",{style:lr},"Event Log"):null,e.length===0?s("div",{style:_r},"Waiting for Web Vitals data..."):s("div",{style:ar},[...e].reverse().map(r=>{const l=Tt[r.metric],c=r.metric==="CLS"?r.value.toFixed(3):`${Math.round(r.value)}`;return s("div",{key:r.id,style:{...cr,backgroundColor:Vo[r.rating]}},s("span",{style:{...dr,backgroundColor:ke[r.rating]}},gr(r.rating)),s("span",{style:ur},r.metric),s("span",{style:pr},`${c}${l}`),s("span",{style:fr},Jo(r.timestamp)))})))}const Rt=[{id:"console",label:"Console Viewer",icon:">"},{id:"network",label:"Network Viewer",icon:"â‡…"},{id:"errors",label:"Error Log",icon:"âš "},{id:"bugs",label:"Bug Reporter",icon:"ðŸ›"},{id:"perf",label:"Performance",icon:"âš¡"},{id:"ai",label:"AI Assistant",icon:"âœ¨"}];function hr({projectId:e,isOpen:t,onClose:n,apiClient:o,apiBase:i,pinHash:r}){const[l,c]=b(null),[_,d]=b(!1),[f,a]=b(null),[u,g]=b(""),[m,v]=b(""),S=k(y=>{c(E=>(E==="bugs"&&y!=="bugs"&&(g(""),v("")),E===y?null:y))},[]),x=k(y=>{g(y.message),v(y.stack),c("bugs")},[]),h=l?Rt.find(y=>y.id===l):null;return s("div",{style:{...Gt,transform:t?on:rn,transition:"transform 0.25s ease",pointerEvents:t?"auto":"none"},"aria-hidden":!t},s("div",{style:Jt},s("span",{style:Kt,title:e},e),s("button",{style:{...Qt,backgroundColor:_?p.closeBtnHover:"transparent",color:_?"#fff":p.textMuted},onClick:n,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),"aria-label":"Close panel",title:"Close"},"âœ•")),s("div",{style:Zt},Rt.map(y=>{const E=l===y.id,R=f===y.id;let I=p.toolBtnBg;return E?I=p.toolBtnBgActive:R&&(I=p.toolBtnBgHover),s("button",{key:y.id,style:{...en,backgroundColor:I,color:E?"#fff":p.text},onClick:()=>S(y.id),onMouseEnter:()=>a(y.id),onMouseLeave:()=>a(null)},s("span",{style:tn},y.icon),s("span",null,y.label))})),h?s("div",{style:{...nn,borderTop:`1px solid ${p.panelBorder}`,...l==="console"||l==="network"||l==="errors"||l==="bugs"||l==="perf"||l==="ai"?{alignItems:"stretch",justifyContent:"stretch",padding:"0"}:{}}},l==="console"?s($n,null):l==="network"?s(Qn,null):l==="errors"?s(ko,{onReportBug:x}):l==="bugs"?s(kt,{apiClient:o,projectId:e,prefillTitle:u||void 0,prefillStack:m||void 0}):l==="perf"?s(xr,null):l==="ai"?s(No,{apiBase:i,pinHash:r}):s("span",null,`${h.label} -- coming soon`)):null)}const Mt={isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0,moved:!1},yr=s("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},s("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}));function mr({projectId:e,pinHash:t,apiBase:n,apiClient:o}){const[i,r]=b(!1),[l,c]=b(!1),[_,d]=b({x:0,y:0}),[f,a]=b(!1),u=N(Mt),g=N(null),m=k(C=>{C.currentTarget.setPointerCapture(C.pointerId),u.current={isDragging:!0,startX:C.clientX,startY:C.clientY,offsetX:_.x,offsetY:_.y,moved:!1},a(!0)},[_.x,_.y]),v=k(C=>{const y=u.current;if(!y.isDragging)return;const E=C.clientX-y.startX,R=C.clientY-y.startY;Math.sqrt(E*E+R*R)>Vt&&(u.current={...y,moved:!0}),d({x:y.offsetX+E,y:y.offsetY+R})},[]),S=k(()=>{const y=u.current.moved;u.current={...Mt},a(!1),y||r(E=>!E)},[]),x=k(()=>{r(!1)},[]),h={...Yt,bottom:`${20-_.y}px`,right:`${20-_.x}px`,backgroundColor:l?p.fabBgHover:p.fabBg,boxShadow:l?`0 6px 16px ${p.shadow}`:`0 4px 12px ${p.shadow}`,cursor:f?"grabbing":"grab"};return s("div",null,s("button",{ref:g,style:h,title:`DevTools (${e})`,"aria-label":"Toggle DevTools panel",onPointerDown:m,onPointerMove:v,onPointerUp:S,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},yr),s(hr,{projectId:e,isOpen:i,onClose:x,apiClient:o,apiBase:n,pinHash:t}))}function zt(e,t){async function n(o,i={}){return(await fetch(`${e}${o}`,{...i,headers:{"Content-Type":"application/json","X-DevTools-Pin":t,...i.headers}})).json()}return{createBug:o=>n("/api/bugs",{method:"POST",body:JSON.stringify(o)}),createDevLog:o=>n("/api/devlog",{method:"POST",body:JSON.stringify(o)}),sendEvents:o=>n("/api/widget/event",{method:"POST",body:JSON.stringify({events:o})})}}const br=1e4,Sr=50,vr=200,wr=new Set(["log","info","warn","error","debug"]);function kr(e,t,n){let o=[];function i(f){o.length>=vr||(o=[...o,f],o.length>=Sr&&r())}function r(){if(o.length===0)return;const f=[...o];o=[],t.sendEvents(f).catch(()=>{})}function l(){if(o.length===0)return;const f=[...o];o=[];const a=JSON.stringify({events:f}),u=`${n}/api/widget/event`;try{const g=new Blob([a],{type:"application/json"});navigator.sendBeacon(u,g)}catch{}}let c=0;yt(()=>{const a=ve().filter(u=>u.id>c);if(a.length>0){c=a[a.length-1].id;for(const u of a)i({type:"error",title:u.message,content:u.stack,metadata:{errorType:u.type,source:u.source,line:u.line,col:u.col},projectId:e})}}),Bt(f=>{i({type:"perf",title:`${f.metric}: ${f.value}`,content:`Rating: ${f.rating}`,metadata:{metric:f.metric,value:f.value,rating:f.rating},projectId:e})});let _=0;nt(()=>{const a=ye().filter(u=>u.id>_);if(a.length>0){_=a[a.length-1].id;for(const u of a){if(!wr.has(u.level))continue;const g=u.args.join(" ");g.includes("/api/widget/")||g.includes("/api/ai/analyze")||i({type:"console",title:g.slice(0,500),content:u.args.join(`
`).slice(0,2e3),metadata:{level:u.level,argCount:u.args.length},projectId:e})}}});let d=0;at(()=>{const a=me().filter(u=>u.id>d);if(a.length>0){d=a[a.length-1].id;for(const u of a)u.url.includes("/api/widget/")||u.url.includes("/api/bugs")||u.url.includes("/api/ai/analyze")||i({type:"network",title:`${u.method} ${u.url}`.slice(0,500),content:`${u.status} ${u.statusText} (${u.duration}ms)`,metadata:{method:u.method,url:u.url,status:u.status,statusText:u.statusText,duration:u.duration,requestSize:u.requestSize,responseSize:u.responseSize},projectId:e})}}),setInterval(r,br),window.addEventListener("beforeunload",l)}function Cr(e,t,n){un(),Rn(),to(),Xo();const o=zt(n,t);kr(e,o,n)}const $r=1e4,Er={position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"280px",backgroundColor:"#1a0000",border:"1px solid #dc2626",borderRadius:"8px",boxShadow:"0 8px 24px rgba(220, 38, 38, 0.3)",zIndex:"999997",fontFamily:"system-ui, -apple-system, sans-serif",color:p.text,overflow:"hidden",display:"flex",flexDirection:"column"},Br={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:"rgba(220, 38, 38, 0.2)",borderBottom:"1px solid #dc2626",flexShrink:"0"},Tr={fontSize:"12px",fontWeight:"600",color:"#fca5a5"},Rr={display:"flex",gap:"6px"},Ht={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500"},Mr={...Ht,backgroundColor:"#dc2626",color:"#fff"},zr={...Ht,backgroundColor:"rgba(255, 255, 255, 0.1)",color:p.textMuted},Hr={padding:"8px 12px",overflowY:"auto",flex:"1"},Pr={fontSize:"12px",fontWeight:"500",color:"#fca5a5",marginBottom:"6px",wordBreak:"break-word"},Lr={fontSize:"10px",fontFamily:"monospace",lineHeight:"1.6",color:p.textMuted},Pt={padding:"1px 0",wordBreak:"break-all"},Ir={...Pt,opacity:"0.5"};function Dr(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function Or(e){return e.includes("node_modules")}function Ar({onReportBug:e}){const[t,n]=b(null),o=N(null),i=k(()=>{n(null),o.current&&(clearTimeout(o.current),o.current=null)},[]),r=k(()=>{o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{n(null),o.current=null},$r)},[]);O(()=>(xt(f=>{n(f),r()}),()=>{xt(null),o.current&&clearTimeout(o.current)}),[r]);const l=k(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]),c=k(()=>{t&&r()},[t,r]),_=k(()=>{t&&(e(t),i())},[t,e,i]);if(!t)return null;const d=Dr(t.stack);return s("div",{style:Er,onMouseEnter:l,onMouseLeave:c},s("div",{style:Br},s("span",{style:Tr},t.type==="error"?"Uncaught Error":"Unhandled Rejection"),s("div",{style:Rr},s("button",{style:Mr,onClick:_},"Report Bug"),s("button",{style:zr,onClick:i},"Dismiss"))),s("div",{style:Hr},s("div",{style:Pr},t.message),d.length>0?s("div",{style:Lr},d.slice(0,8).map((f,a)=>s("div",{key:a,style:Or(f)?Ir:Pt},f))):null))}const Nr={position:"fixed",padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:p.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",zIndex:999999,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"4px",fontFamily:"system-ui, -apple-system, sans-serif"},Fr={position:"fixed",width:"360px",maxHeight:"320px",backgroundColor:p.panelBg,border:`1px solid ${p.panelBorder}`,borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:999999,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",overflow:"hidden"},Wr={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:p.panelHeaderBg,borderBottom:`1px solid ${p.panelBorder}`,flexShrink:0},Ur={fontSize:"12px",fontWeight:"600",color:p.textBright},jr={width:"24px",height:"24px",borderRadius:"4px",border:"none",backgroundColor:"transparent",color:p.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",lineHeight:"1"},qr={padding:"12px",overflowY:"auto",flex:1,fontSize:"13px",lineHeight:"1.5",color:p.text,whiteSpace:"pre-wrap",wordBreak:"break-word"},Xr={padding:"16px 12px",fontSize:"12px",color:p.textMuted,textAlign:"center"},Vr={padding:"12px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",margin:"8px 12px"};function Lt(e,t,n,o){const i=Math.min(Math.max(e,8),window.innerWidth-n-8),r=Math.min(Math.max(t,8),window.innerHeight-o-8);return{x:i,y:r}}function Yr({apiBase:e,pinHash:t}){const[n,o]=b(""),[i,r]=b(null),[l,c]=b(null),[_,d]=b("idle"),[f,a]=b(""),[u,g]=b(""),[m,v]=b(!1),[S,x]=b(!1),h=N(null),C=N(null),y=k(()=>{r(null),c(null),o(""),d("idle"),a(""),g(""),h.current&&(h.current.abort(),h.current=null)},[]);O(()=>{function H(M){if(M.target.closest?.("[data-quickai]"))return;const P=window.getSelection()?.toString().trim()??"";if(P.length>10){o(P);const $e=Lt(M.clientX,M.clientY-40,90,30);r($e)}else l||(r(null),o(""))}return document.addEventListener("mouseup",H),()=>document.removeEventListener("mouseup",H)},[l]),O(()=>{if(!l)return;function H(z){z.target.closest?.("[data-quickai]")||y()}const M=setTimeout(()=>{document.addEventListener("mousedown",H)},100);return()=>{clearTimeout(M),document.removeEventListener("mousedown",H)}},[l,y]);const E=k(async()=>{if(!n)return;const H=i?Lt(i.x,i.y+36,360,320):{x:100,y:100};c(H),r(null),d("loading"),a(""),g(""),h.current&&h.current.abort();const M=new AbortController;h.current=M;try{const z=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:n,context:window.location.href}),signal:M.signal});if(!z.ok)throw new Error(`Analysis failed (${z.status})`);const T=z.body?.getReader();if(!T)throw new Error("No response stream");d("streaming");const P=new TextDecoder;for(;;){const{done:$e,value:Kr}=await T.read();if($e)break;const Dt=P.decode(Kr,{stream:!0});Dt&&a(Qr=>Qr+Dt)}d("done")}catch(z){if(z.name==="AbortError")return;d("error");const T=z instanceof Error?z.message:"Analysis failed";g(T)}},[n,i,e,t]),R=i?s("button",{"data-quickai":"btn",style:{...Nr,left:`${i.x}px`,top:`${i.y}px`,backgroundColor:m?p.fabBgHover:p.fabBg},onClick:E,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},"âœ¨ Analyze"):null,I=l?s("div",{ref:C,"data-quickai":"popup",style:{...Fr,left:`${l.x}px`,top:`${l.y}px`}},s("div",{style:Wr},s("span",{style:Ur},"AI Analysis"),s("button",{style:{...jr,backgroundColor:S?p.closeBtnHover:"transparent",color:S?"#fff":p.textMuted},onClick:y,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),"aria-label":"Close"},"âœ•")),_==="loading"?s("div",{style:Xr},"Analyzing..."):_==="error"?s("div",{style:Vr},u):s("div",{style:qr},f||"Waiting...")):null;return s("div",{"data-quickai":"root"},R,I)}const Ce=document.currentScript,Gr=[":host { all: initial; }","#devtools-root { font-family: system-ui, sans-serif; }"].join(`
`);function Jr({projectId:e,pinHash:t,apiBase:n,apiClient:o}){const[i,r]=b(null),l=k(_=>{r(_)},[]),c=k(()=>{r(null)},[]);return s("div",null,s(mr,{projectId:e,pinHash:t,apiBase:n,apiClient:o}),s(Ar,{onReportBug:l}),s(Yr,{apiBase:n,pinHash:t}),i?s("div",{style:{position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"400px",backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:"999997",overflow:"auto"}},s(kt,{apiClient:o,projectId:e,prefillTitle:i.message,prefillStack:i.stack,onClose:c})):null)}function It(){const e=Ce?.getAttribute("data-project")||"default",t=Ce?.getAttribute("data-pin")||"",n=Ce?.src.replace("/widget.js","")||"",o=zt(n,t),i=document.createElement("div");i.id="devtools-widget",document.body.appendChild(i);const r=i.attachShadow({mode:"open"}),l=document.createElement("style");l.textContent=Gr,r.appendChild(l);const c=document.createElement("div");c.id="devtools-root",r.appendChild(c),Ut(s(Jr,{projectId:e,pinHash:t,apiBase:n,apiClient:o}),c),Cr(e,t,n)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",It):It()})();
