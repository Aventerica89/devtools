(function(){"use strict";var se,E,je,j,Ue,qe,Xe,Ye,_e,be,Se,q={},Ve=[],an=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,le=Array.isArray;function O(e,t){for(var n in t)e[n]=t[n];return e}function ve(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function r(e,t,n){var o,s,i,l={};for(i in t)i=="key"?o=t[i]:i=="ref"?s=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?se.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)l[i]===void 0&&(l[i]=e.defaultProps[i]);return ae(e,l,o,s,null)}function ae(e,t,n,o,s){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++je,__i:-1,__u:0};return s==null&&E.vnode!=null&&E.vnode(i),i}function ce(e){return e.children}function de(e,t){this.props=e,this.context=t}function U(e,t){if(t==null)return e.__?U(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?U(e):null}function Ge(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Ge(e)}}function Je(e){(!e.__d&&(e.__d=!0)&&j.push(e)&&!pe.__r++||Ue!=E.debounceRendering)&&((Ue=E.debounceRendering)||qe)(pe)}function pe(){for(var e,t,n,o,s,i,l,a=1;j.length;)j.length>a&&j.sort(Xe),e=j.shift(),a=j.length,e.__d&&(n=void 0,o=void 0,s=(o=(t=e).__v).__e,i=[],l=[],t.__P&&((n=O({},o)).__v=o.__v+1,E.vnode&&E.vnode(n),we(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[s]:null,i,s??U(o),!!(32&o.__u),l),n.__v=o.__v,n.__.__k[n.__i]=n,tt(i,n,l),o.__e=o.__=null,n.__e!=s&&Ge(n)));pe.__r=0}function Ke(e,t,n,o,s,i,l,a,g,p,u){var c,f,h,x,_,b,m,v=o&&o.__k||Ve,$=t.length;for(g=cn(n,t,v,g,$),c=0;c<$;c++)(h=n.__k[c])!=null&&(f=h.__i==-1?q:v[h.__i]||q,h.__i=c,b=we(e,h,f,s,i,l,a,g,p,u),x=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&Ce(f.ref,null,h),u.push(h.ref,h.__c||x,h)),_==null&&x!=null&&(_=x),(m=!!(4&h.__u))||f.__k===h.__k?g=Qe(h,g,e,m):typeof h.type=="function"&&b!==void 0?g=b:x&&(g=x.nextSibling),h.__u&=-7);return n.__e=_,g}function cn(e,t,n,o,s){var i,l,a,g,p,u=n.length,c=u,f=0;for(e.__k=new Array(s),i=0;i<s;i++)(l=t[i])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=e.__k[i]=ae(null,l,null,null,null):le(l)?l=e.__k[i]=ae(ce,{children:l},null,null,null):l.constructor===void 0&&l.__b>0?l=e.__k[i]=ae(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):e.__k[i]=l,g=i+f,l.__=e,l.__b=e.__b+1,a=null,(p=l.__i=dn(l,n,g,c))!=-1&&(c--,(a=n[p])&&(a.__u|=2)),a==null||a.__v==null?(p==-1&&(s>u?f--:s<u&&f++),typeof l.type!="function"&&(l.__u|=4)):p!=g&&(p==g-1?f--:p==g+1?f++:(p>g?f--:f++,l.__u|=4))):e.__k[i]=null;if(c)for(i=0;i<u;i++)(a=n[i])!=null&&(2&a.__u)==0&&(a.__e==o&&(o=U(a)),ot(a,a));return o}function Qe(e,t,n,o){var s,i;if(typeof e.type=="function"){for(s=e.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=e,t=Qe(s[i],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=U(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function dn(e,t,n,o){var s,i,l,a=e.key,g=e.type,p=t[n],u=p!=null&&(2&p.__u)==0;if(p===null&&a==null||u&&a==p.key&&g==p.type)return n;if(o>(u?1:0)){for(s=n-1,i=n+1;s>=0||i<t.length;)if((p=t[l=s>=0?s--:i++])!=null&&(2&p.__u)==0&&a==p.key&&g==p.type)return l}return-1}function Ze(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||an.test(t)?n:n+"px"}function ue(e,t,n,o,s){var i,l;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Ze(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||Ze(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(Ye,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o?n.u=o.u:(n.u=_e,e.addEventListener(t,i?Se:be,i)):e.removeEventListener(t,i?Se:be,i);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function et(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=_e++;else if(t.t<n.u)return;return n(E.event?E.event(t):t)}}}function we(e,t,n,o,s,i,l,a,g,p){var u,c,f,h,x,_,b,m,v,$,k,L,H,N,P,I,D,w=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(g=!!(32&n.__u),i=[a=t.__e=n.__e]),(u=E.__b)&&u(t);e:if(typeof w=="function")try{if(m=t.props,v="prototype"in w&&w.prototype.render,$=(u=w.contextType)&&o[u.__c],k=u?$?$.props.value:u.__:o,n.__c?b=(c=t.__c=n.__c).__=c.__E:(v?t.__c=c=new w(m,k):(t.__c=c=new de(m,k),c.constructor=w,c.render=un),$&&$.sub(c),c.state||(c.state={}),c.__n=o,f=c.__d=!0,c.__h=[],c._sb=[]),v&&c.__s==null&&(c.__s=c.state),v&&w.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=O({},c.__s)),O(c.__s,w.getDerivedStateFromProps(m,c.__s))),h=c.props,x=c.state,c.__v=t,f)v&&w.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),v&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(v&&w.getDerivedStateFromProps==null&&m!==h&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(m,k),t.__v==n.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(m,c.__s,k)===!1){for(t.__v!=n.__v&&(c.props=m,c.state=c.__s,c.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(y){y&&(y.__=t)}),L=0;L<c._sb.length;L++)c.__h.push(c._sb[L]);c._sb=[],c.__h.length&&l.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(m,c.__s,k),v&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(h,x,_)})}if(c.context=k,c.props=m,c.__P=e,c.__e=!1,H=E.__r,N=0,v){for(c.state=c.__s,c.__d=!1,H&&H(t),u=c.render(c.props,c.state,c.context),P=0;P<c._sb.length;P++)c.__h.push(c._sb[P]);c._sb=[]}else do c.__d=!1,H&&H(t),u=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++N<25);c.state=c.__s,c.getChildContext!=null&&(o=O(O({},o),c.getChildContext())),v&&!f&&c.getSnapshotBeforeUpdate!=null&&(_=c.getSnapshotBeforeUpdate(h,x)),I=u,u!=null&&u.type===ce&&u.key==null&&(I=nt(u.props.children)),a=Ke(e,le(I)?I:[I],t,n,o,s,i,l,a,g,p),c.base=t.__e,t.__u&=-161,c.__h.length&&l.push(c),b&&(c.__E=c.__=null)}catch(y){if(t.__v=null,g||i!=null)if(y.then){for(t.__u|=g?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;i[i.indexOf(a)]=null,t.__e=a}else{for(D=i.length;D--;)ve(i[D]);ke(t)}else t.__e=n.__e,t.__k=n.__k,y.then||ke(t);E.__e(y,t,n)}else i==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):a=t.__e=pn(n.__e,t,n,o,s,i,l,g,p);return(u=E.diffed)&&u(t),128&t.__u?void 0:a}function ke(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(ke)}function tt(e,t,n){for(var o=0;o<n.length;o++)Ce(n[o],n[++o],n[++o]);E.__c&&E.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){E.__e(i,s.__v)}})}function nt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:le(e)?e.map(nt):O({},e)}function pn(e,t,n,o,s,i,l,a,g){var p,u,c,f,h,x,_,b=n.props||q,m=t.props,v=t.type;if(v=="svg"?s="http://www.w3.org/2000/svg":v=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(p=0;p<i.length;p++)if((h=i[p])&&"setAttribute"in h==!!v&&(v?h.localName==v:h.nodeType==3)){e=h,i[p]=null;break}}if(e==null){if(v==null)return document.createTextNode(m);e=document.createElementNS(s,v,m.is&&m),a&&(E.__m&&E.__m(t,i),a=!1),i=null}if(v==null)b===m||a&&e.data==m||(e.data=m);else{if(i=i&&se.call(e.childNodes),!a&&i!=null)for(b={},p=0;p<e.attributes.length;p++)b[(h=e.attributes[p]).name]=h.value;for(p in b)if(h=b[p],p!="children"){if(p=="dangerouslySetInnerHTML")c=h;else if(!(p in m)){if(p=="value"&&"defaultValue"in m||p=="checked"&&"defaultChecked"in m)continue;ue(e,p,null,h,s)}}for(p in m)h=m[p],p=="children"?f=h:p=="dangerouslySetInnerHTML"?u=h:p=="value"?x=h:p=="checked"?_=h:a&&typeof h!="function"||b[p]===h||ue(e,p,h,b[p],s);if(u)a||c&&(u.__html==c.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(c&&(e.innerHTML=""),Ke(t.type=="template"?e.content:e,le(f)?f:[f],t,n,o,v=="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,l,i?i[0]:n.__k&&U(n,0),a,g),i!=null)for(p=i.length;p--;)ve(i[p]);a||(p="value",v=="progress"&&x==null?e.removeAttribute("value"):x!=null&&(x!==e[p]||v=="progress"&&!x||v=="option"&&x!=b[p])&&ue(e,p,x,b[p],s),p="checked",_!=null&&_!=e[p]&&ue(e,p,_,b[p],s))}return e}function Ce(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(s){E.__e(s,n)}}function ot(e,t,n){var o,s;if(E.unmount&&E.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||Ce(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){E.__e(i,t)}o.base=o.__P=null}if(o=e.__k)for(s=0;s<o.length;s++)o[s]&&ot(o[s],t,n||typeof e.type!="function");n||ve(e.__e),e.__c=e.__=e.__e=void 0}function un(e,t,n){return this.constructor(e,n)}function rt(e,t,n){var o,s,i,l;t==document&&(t=document.documentElement),E.__&&E.__(e,t),s=(o=!1)?null:t.__k,i=[],l=[],we(t,e=t.__k=r(ce,null,[e]),s||q,q,t.namespaceURI,s?null:t.firstChild?se.call(t.childNodes):null,i,s?s.__e:t.firstChild,o,l),tt(i,e,l)}se=Ve.slice,E={__e:function(e,t,n,o){for(var s,i,l;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),l=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,o||{}),l=s.__d),l)return s.__E=s}catch(a){e=a}throw e}},je=0,de.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=O({},this.state),typeof e=="function"&&(e=e(O({},n),this.props)),e&&O(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Je(this))},de.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Je(this))},de.prototype.render=ce,j=[],qe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Xe=function(e,t){return e.__v.__b-t.__v.__b},pe.__r=0,Ye=/(PointerCapture)$|Capture$/i,_e=0,be=et(!1),Se=et(!0);var X,R,$e,it,Y=0,st=[],z=E,lt=z.__b,at=z.__r,ct=z.diffed,dt=z.__c,pt=z.unmount,ut=z.__;function Be(e,t){z.__h&&z.__h(R,e,Y||t),Y=0;var n=R.__H||(R.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function S(e){return Y=1,fn(xt,e)}function fn(e,t,n){var o=Be(X++,2);if(o.t=e,!o.__c&&(o.__=[xt(void 0,t),function(a){var g=o.__N?o.__N[0]:o.__[0],p=o.t(g,a);g!==p&&(o.__N=[p,o.__[1]],o.__c.setState({}))}],o.__c=R,!R.__f)){var s=function(a,g,p){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!i||i.call(this,a,g,p);var c=o.__c.props!==a;return u.forEach(function(f){if(f.__N){var h=f.__[0];f.__=f.__N,f.__N=void 0,h!==f.__[0]&&(c=!0)}}),i&&i.call(this,a,g,p)||c};R.__f=!0;var i=R.shouldComponentUpdate,l=R.componentWillUpdate;R.componentWillUpdate=function(a,g,p){if(this.__e){var u=i;i=void 0,s(a,g,p),i=u}l&&l.call(this,a,g,p)},R.shouldComponentUpdate=s}return o.__N||o.__}function A(e,t){var n=Be(X++,3);!z.__s&&ht(n.__H,t)&&(n.__=e,n.u=t,R.__H.__h.push(n))}function F(e){return Y=5,ft(function(){return{current:e}},[])}function ft(e,t){var n=Be(X++,7);return ht(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function C(e,t){return Y=8,ft(function(){return e},t)}function gn(){for(var e;e=st.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(fe),e.__H.__h.forEach(Ee),e.__H.__h=[]}catch(t){e.__H.__h=[],z.__e(t,e.__v)}}z.__b=function(e){R=null,lt&&lt(e)},z.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ut&&ut(e,t)},z.__r=function(e){at&&at(e),X=0;var t=(R=e.__c).__H;t&&($e===R?(t.__h=[],R.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(fe),t.__h.forEach(Ee),t.__h=[],X=0)),$e=R},z.diffed=function(e){ct&&ct(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(st.push(t)!==1&&it===z.requestAnimationFrame||((it=z.requestAnimationFrame)||hn)(gn)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),$e=R=null},z.__c=function(e,t){t.some(function(n){try{n.__h.forEach(fe),n.__h=n.__h.filter(function(o){return!o.__||Ee(o)})}catch(o){t.some(function(s){s.__h&&(s.__h=[])}),t=[],z.__e(o,n.__v)}}),dt&&dt(e,t)},z.unmount=function(e){pt&&pt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{fe(o)}catch(s){t=s}}),n.__H=void 0,t&&z.__e(t,n.__v))};var gt=typeof requestAnimationFrame=="function";function hn(e){var t,n=function(){clearTimeout(o),gt&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);gt&&(t=requestAnimationFrame(n))}function fe(e){var t=R,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),R=t}function Ee(e){var t=R;e.__c=e.__(),R=t}function ht(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function xt(e,t){return typeof t=="function"?t(e):t}const d={fabBg:"#3b82f6",fabBgHover:"#2563eb",panelBg:"#0f172a",panelBorder:"#1e293b",panelHeaderBg:"#1e293b",toolBtnBg:"#1e293b",toolBtnBgHover:"#334155",toolBtnBgActive:"#3b82f6",text:"#e2e8f0",textMuted:"#94a3b8",textBright:"#f8fafc",closeBtnHover:"#ef4444",shadow:"rgba(0, 0, 0, 0.4)"},yt=48,Te=300,xn=5,yn={position:"fixed",width:`${yt}px`,height:`${yt}px`,borderRadius:"50%",backgroundColor:d.fabBg,color:"#fff",border:"none",cursor:"grab",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999,boxShadow:`0 4px 12px ${d.shadow}`,transition:"background-color 0.15s ease, box-shadow 0.15s ease",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},mn={position:"fixed",width:`${Te}px`,backgroundColor:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:"8px",zIndex:999998,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",color:d.text,boxShadow:`0 8px 32px ${d.shadow}`,overflow:"hidden"},_n={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",backgroundColor:d.panelHeaderBg,borderBottom:`1px solid ${d.panelBorder}`,flexShrink:"0"},bn={fontSize:"14px",fontWeight:"600",color:d.textBright,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"220px"},Sn={width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",lineHeight:"1",flexShrink:"0"},vn={display:"flex",flexDirection:"column",gap:"4px",padding:"12px",overflowY:"auto",flex:"1"},wn={display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",borderRadius:"8px",border:"none",backgroundColor:d.toolBtnBg,color:d.text,cursor:"pointer",fontSize:"13px",fontWeight:"500",textAlign:"left",transition:"background-color 0.12s ease",width:"100%"},kn={width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",flexShrink:"0"},Cn={flex:"1",padding:"16px",overflowY:"auto",fontSize:"13px",color:d.textMuted,display:"flex",alignItems:"center",justifyContent:"center"},$n=500;let Bn=1;const V=[],G=[];function En(){const e=new WeakSet;return(t,n)=>{if(typeof n=="object"&&n!==null){if(e.has(n))return"[Circular]";e.add(n)}return n}}function Tn(e){if(e===null)return"null";if(e===void 0)return"undefined";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(e instanceof Error)return`${e.name}: ${e.message}`;try{return JSON.stringify(e,En(),2)}catch{return String(e)}}function Rn(e,t){const n={id:Bn++,level:e,args:t.map(Tn),timestamp:Date.now()};V.length>=$n&&V.shift(),V.push(n);for(const o of G)o()}function J(){return[...V]}function Mn(){V.length=0;for(const e of G)e()}function mt(e){return G.push(e),()=>{const t=G.indexOf(e);t!==-1&&G.splice(t,1)}}function zn(){const e=["log","warn","error","info"];for(const t of e){const n=console[t].bind(console);console[t]=(...o)=>{Rn(t,o),n(...o)}}}const _t={log:"#94a3b8",info:"#3b82f6",warn:"#eab308",error:"#ef4444"},Dn={log:"rgba(148, 163, 184, 0.15)",info:"rgba(59, 130, 246, 0.15)",warn:"rgba(234, 179, 8, 0.15)",error:"rgba(239, 68, 68, 0.15)"},bt=["log","info","warn","error"];function Ln(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${o}:${s}.${i}`}const In={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Hn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Pn={display:"flex",gap:"4px",flexWrap:"wrap"},An={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},On={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Fn={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all"},Nn={display:"flex",alignItems:"center",gap:"6px"},Wn={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},jn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Un={color:d.text,whiteSpace:"pre-wrap",lineHeight:"1.4"},qn={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function Xn(e,t){return{padding:"2px 6px",borderRadius:"3px",border:"none",backgroundColor:e?_t[t]:d.toolBtnBg,color:e?"#fff":d.textMuted,cursor:"pointer",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"}}function Yn(){const[e,t]=S(J),[n,o]=S(new Set(bt));A(()=>mt(()=>{t(J())}),[]);const s=C(()=>{Mn(),t([])},[]),i=C(a=>{o(g=>{const p=new Set(g);return p.has(a)?p.delete(a):p.add(a),p})},[]),l=e.filter(a=>n.has(a.level));return r("div",{style:In},r("div",{style:Hn},r("div",{style:Pn},bt.map(a=>r("button",{key:a,style:Xn(n.has(a),a),onClick:()=>i(a),title:`Toggle ${a} entries`},a))),r("button",{style:An,onClick:s,title:"Clear console entries"},"Clear")),l.length===0?r("div",{style:qn},"No console entries"):r("div",{style:On},l.map(a=>r("div",{key:a.id,style:{...Fn,backgroundColor:Dn[a.level]}},r("div",{style:Nn},r("span",{style:{...Wn,backgroundColor:_t[a.level],color:"#fff"}},a.level),r("span",{style:jn},Ln(a.timestamp))),r("div",{style:Un},a.args.join(" "))))))}const Vn=200;let Re=1;const K=[],Q=[];function Gn(e){if(!e.response)return 0;if(typeof e.response=="string")return e.response.length;if(e.response instanceof Blob)return e.response.size;if(e.response instanceof ArrayBuffer)return e.response.byteLength;try{return JSON.stringify(e.response).length}catch{return 0}}function St(e){if(e==null)return 0;if(typeof e=="string")return e.length;if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(e instanceof FormData){let t=0;return e.forEach(n=>{typeof n=="string"?t+=n.length:n instanceof Blob&&(t+=n.size)}),t}return e instanceof URLSearchParams?e.toString().length:0}function vt(e){const t={};return e.forEach((n,o)=>{t[o]=n}),t}function Me(e){K.length>=Vn&&K.shift(),K.push(e);for(const t of Q)t()}function Z(){return[...K]}function Jn(){K.length=0;for(const e of Q)e()}function wt(e){return Q.push(e),()=>{const t=Q.indexOf(e);t!==-1&&Q.splice(t,1)}}function Kn(){const e=XMLHttpRequest.prototype,t=e.open,n=e.setRequestHeader,o=e.send,s=new WeakMap;e.open=function(i,l,...a){return s.set(this,{method:i.toUpperCase(),url:typeof l=="string"?l:String(l),requestHeaders:{},requestSize:0,startTime:0,timestamp:0}),t.call(this,i,l,...a)},e.setRequestHeader=function(i,l){const a=s.get(this);return a&&(a.requestHeaders[i]=l),n.call(this,i,l)},e.send=function(i){const l=s.get(this);return l&&(l.requestSize=St(i??null),l.startTime=performance.now(),l.timestamp=Date.now(),this.addEventListener("loadend",()=>{const a=performance.now()-l.startTime,g={},p=this.getAllResponseHeaders();for(const c of p.trim().split(`\r
`)){const f=c.indexOf(": ");f!==-1&&(g[c.slice(0,f).toLowerCase()]=c.slice(f+2))}const u={id:Re++,method:l.method,url:l.url,status:this.status,statusText:this.statusText||(this.status===0?"Network Error":""),duration:Math.round(a),requestSize:l.requestSize,responseSize:Gn(this),requestHeaders:l.requestHeaders,responseHeaders:g,startTime:l.startTime,timestamp:l.timestamp};Me(u),s.delete(this)})),o.call(this,i)}}function Qn(){const e=window.fetch.bind(window);window.fetch=async(t,n)=>{const o=(n?.method??"GET").toUpperCase(),s=typeof t=="string"?t:t instanceof URL?t.href:t.url,i=St(n?.body??null);let l={};if(n?.headers)if(n.headers instanceof Headers)l=vt(n.headers);else if(Array.isArray(n.headers))for(const[p,u]of n.headers)l[p]=u;else l={...n.headers};const a=performance.now(),g=Date.now();try{const p=await e(t,n),u=performance.now()-a,c=p.clone();let f=0;try{f=(await c.blob()).size}catch{f=0}const h={id:Re++,method:o,url:s,status:p.status,statusText:p.statusText,duration:Math.round(u),requestSize:i,responseSize:f,requestHeaders:l,responseHeaders:vt(p.headers),startTime:a,timestamp:g};return Me(h),p}catch(p){const u=performance.now()-a,c={id:Re++,method:o,url:s,status:0,statusText:"Network Error",duration:Math.round(u),requestSize:i,responseSize:0,requestHeaders:l,responseHeaders:{},startTime:a,timestamp:g};throw Me(c),p}},Kn()}const Zn={GET:"#22c55e",POST:"#3b82f6",PUT:"#eab308",DELETE:"#ef4444",PATCH:"#a855f7"},eo="#94a3b8";function to(e){return Zn[e]??eo}function no(e){return e===0?"#ef4444":e<300?"#22c55e":e<400?"#3b82f6":e<500?"#eab308":"#ef4444"}function kt(e){return e===0?"rgba(239, 68, 68, 0.15)":e<300?"rgba(34, 197, 94, 0.15)":e<400?"rgba(59, 130, 246, 0.15)":e<500?"rgba(234, 179, 8, 0.15)":"rgba(239, 68, 68, 0.15)"}function Ct(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${o}:${s}.${i}`}function $t(e){return e<1e3?`${e}ms`:`${(e/1e3).toFixed(1)}s`}function Bt(e){return e===0?"0 B":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function oo(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}const ro={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},io={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},so={fontSize:"10px",color:d.textMuted,flexShrink:"0"},lo={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},ao={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},co={display:"flex",flexDirection:"column",padding:"5px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",cursor:"pointer",transition:"background-color 0.1s ease"},po={display:"flex",alignItems:"center",gap:"6px",minWidth:"0"},uo={padding:"1px 5px",borderRadius:"3px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},fo={padding:"1px 4px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",flexShrink:"0"},go={flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:d.text,fontSize:"10px",minWidth:"0"},ho={fontSize:"10px",color:d.textMuted,flexShrink:"0",textAlign:"right",minWidth:"40px"},xo={fontSize:"10px",color:d.textMuted,flexShrink:"0"},yo={marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5",wordBreak:"break-all"},ze={fontWeight:"600",color:d.textBright,marginBottom:"2px",marginTop:"6px",display:"block"},mo={color:d.textMuted},Et={display:"flex",gap:"4px",color:d.textMuted,padding:"1px 0"},Tt={color:"#93c5fd",flexShrink:"0"},_o={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function bo({entry:e}){const t=Object.entries(e.requestHeaders),n=Object.entries(e.responseHeaders);return r("div",{style:yo},r("span",{style:{...ze,marginTop:"0"}},"General"),r("div",{style:mo},r("div",null,`URL: ${e.url}`),r("div",null,`Method: ${e.method}`),r("div",null,`Status: ${e.status} ${e.statusText}`),r("div",null,`Duration: ${$t(e.duration)}`),r("div",null,`Request size: ${Bt(e.requestSize)}`),r("div",null,`Response size: ${Bt(e.responseSize)}`),r("div",null,`Time: ${Ct(e.timestamp)}`)),t.length>0?r("div",null,r("span",{style:ze},"Request Headers"),t.map(([o,s])=>r("div",{key:o,style:Et},r("span",{style:Tt},`${o}:`),r("span",null,s)))):null,n.length>0?r("div",null,r("span",{style:ze},"Response Headers"),n.map(([o,s])=>r("div",{key:o,style:Et},r("span",{style:Tt},`${o}:`),r("span",null,s)))):null)}function So(){const[e,t]=S(Z),[n,o]=S(null);A(()=>wt(()=>{t(Z())}),[]);const s=C(()=>{Jn(),t([]),o(null)},[]),i=C(l=>{o(a=>a===l?null:l)},[]);return r("div",{style:ro},r("div",{style:io},r("span",{style:so},`${e.length} request${e.length!==1?"s":""}`),r("button",{style:lo,onClick:s,title:"Clear network entries"},"Clear")),e.length===0?r("div",{style:_o},"No network requests"):r("div",{style:ao},e.map(l=>{const a=n===l.id;return r("div",{key:l.id,style:{...co,backgroundColor:a?"rgba(59, 130, 246, 0.12)":kt(l.status)},onClick:()=>i(l.id)},r("div",{style:po},r("span",{style:{...uo,backgroundColor:to(l.method)}},l.method),r("span",{style:{...fo,color:no(l.status),backgroundColor:kt(l.status)}},l.status===0?"ERR":String(l.status)),r("span",{style:go,title:l.url},oo(l.url,40)),r("span",{style:ho},$t(l.duration)),r("span",{style:xo},Ct(l.timestamp))),a?r(bo,{entry:l}):null)})))}const vo=100;let Rt=1;const ee=[],te=[];let De=null;function Mt(e){De=e}function zt(e){ee.length>=vo&&ee.shift(),ee.push(e);for(const t of te)t();De&&De(e)}function ne(){return[...ee]}function wo(){ee.length=0;for(const e of te)e()}function Dt(e){return te.push(e),()=>{const t=te.indexOf(e);t!==-1&&te.splice(t,1)}}function ko(){const e=window.onerror;window.onerror=(t,n,o,s,i)=>{const l={id:Rt++,message:typeof t=="string"?t:"Unknown error",stack:i?.stack??"",source:n??"",line:o??0,col:s??0,timestamp:Date.now(),type:"error"};return zt(l),typeof e=="function"?e(t,n,o,s,i):!1},window.addEventListener("unhandledrejection",t=>{const n=t.reason,o=n instanceof Error,s=o?n.message:typeof n=="string"?n:"Unhandled promise rejection",i=o?n.stack??"":"",l={id:Rt++,message:s,stack:i,source:"",line:0,col:0,timestamp:Date.now(),type:"unhandledrejection"};zt(l)})}const Co="#ef4444",$o="rgba(239, 68, 68, 0.15)",Bo="#f97316",Eo="rgba(249, 115, 22, 0.15)",To={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Ro={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Mo={fontSize:"10px",color:d.textMuted,flexShrink:"0"},zo={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Do={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Lo={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",cursor:"pointer"},Io={display:"flex",alignItems:"center",gap:"6px"},Ho={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},Po={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Lt={padding:"1px 0",wordBreak:"break-all"},Ao={...Lt,opacity:"0.5"},Oo={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500",backgroundColor:"#dc2626",color:"#fff"},Fo={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function No(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${o}:${s}.${i}`}function Wo(e){return e==="error"?Co:Bo}function jo(e){return e==="error"?$o:Eo}function Uo(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function qo(e){return e.includes("node_modules")}function Xo({onReportBug:e}){const[t,n]=S(ne),[o,s]=S(null);A(()=>Dt(()=>{n(ne())}),[]);const i=C(()=>{wo(),n([]),s(null)},[]),l=C(a=>{s(g=>g===a?null:a)},[]);return r("div",{style:To},r("div",{style:Ro},r("span",{style:Mo},`${t.length} error${t.length!==1?"s":""}`),r("button",{style:zo,onClick:i,title:"Clear error entries"},"Clear")),t.length===0?r("div",{style:Fo},"No errors captured"):r("div",{style:Do},t.map(a=>{const g=o===a.id,p=Uo(a.stack);return r("div",{key:a.id,style:{...Lo,backgroundColor:g?"rgba(239, 68, 68, 0.12)":jo(a.type)},onClick:()=>l(a.id)},r("div",{style:Io},r("span",{style:{...Ho,backgroundColor:Wo(a.type)}},a.type==="error"?"ERR":"REJ"),r("span",{style:{flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:d.text,fontSize:"10px"}},a.message),r("span",{style:Po},No(a.timestamp))),g?r("div",{style:{marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5"}},a.source?r("div",{style:{color:"#93c5fd",marginBottom:"4px"}},`${a.source}:${a.line}:${a.col}`):null,p.length>0?p.map((u,c)=>r("div",{key:c,style:qo(u)?Ao:Lt},u)):r("span",{style:{color:d.textMuted}},"No stack trace available"),e?r("button",{style:{...Oo,marginTop:"8px",width:"100%"},onClick:u=>{u.stopPropagation(),e(a)}},"Report Bug"):null):null)})))}const Yo=["low","medium","high","critical"],Vo={low:"#22c55e",medium:"#eab308",high:"#f97316",critical:"#ef4444"},It={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},ge={fontSize:"11px",fontWeight:"600",color:d.textBright,marginBottom:"3px",display:"block"},Ht={width:"100%",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:d.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},Go={...Ht,minHeight:"60px",resize:"vertical",lineHeight:"1.4"},Jo={display:"flex",gap:"4px"},Ko={padding:"4px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flex:"1",textAlign:"center"},Le={padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",width:"100%",marginTop:"4px"},Qo={...Le,opacity:"0.5",cursor:"not-allowed"},Pt={padding:"8px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textAlign:"center"},Zo={...Pt,backgroundColor:"rgba(34, 197, 94, 0.15)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},er={...Pt,backgroundColor:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"},tr={fontSize:"10px",fontFamily:"monospace",color:d.textMuted,backgroundColor:"rgba(0, 0, 0, 0.3)",padding:"6px 8px",borderRadius:"4px",maxHeight:"60px",overflowY:"auto",lineHeight:"1.4",whiteSpace:"pre-wrap",wordBreak:"break-all"},At={padding:"4px 8px",borderRadius:"4px",border:"none",backgroundColor:"rgba(255, 255, 255, 0.1)",color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",alignSelf:"flex-end"};function Ot({apiClient:e,projectId:t,prefillTitle:n,prefillStack:o,onClose:s}){const[i,l]=S(n??""),[a,g]=S(""),[p,u]=S("medium"),[c,f]=S("idle"),[h,x]=S(""),_=i.trim().length>0&&c!=="submitting",b=C(async()=>{if(_){f("submitting"),x("");try{const m={projectId:t,title:i.trim(),description:a.trim(),severity:p,url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()};o&&(m.stackTrace=o),await e.createBug(m),f("success"),l(""),g(""),u("medium")}catch(m){f("error");const v=m instanceof Error?m.message:"Failed to submit bug report";x(v)}}},[_,i,a,p,t,o,e]);return c==="success"?r("div",{style:It},r("div",{style:Zo},"Bug report submitted."),r("button",{style:{...Le,marginTop:"8px"},onClick:()=>f("idle")},"Report Another"),s?r("button",{style:{...At,marginTop:"4px",alignSelf:"center"},onClick:s},"Close"):null):r("div",{style:It},s?r("button",{style:At,onClick:s},"Back"):null,r("div",null,r("label",{style:ge},"Title"),r("input",{style:Ht,type:"text",value:i,placeholder:"Describe the bug briefly",onInput:m=>{l(m.target.value)}})),r("div",null,r("label",{style:ge},"Description"),r("textarea",{style:Go,value:a,placeholder:"Steps to reproduce, expected vs actual behavior",onInput:m=>{g(m.target.value)}})),o?r("div",null,r("label",{style:ge},"Stack Trace"),r("div",{style:tr},o)):null,r("div",null,r("label",{style:ge},"Severity"),r("div",{style:Jo},Yo.map(m=>r("button",{key:m,style:{...Ko,backgroundColor:p===m?Vo[m]:d.toolBtnBg,color:p===m?"#fff":d.textMuted},onClick:()=>u(m)},m)))),c==="error"?r("div",{style:er},h||"Submission failed"):null,r("button",{style:_?Le:Qo,onClick:b,disabled:!_},c==="submitting"?"Submitting...":"Submit Bug Report"))}const nr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},or={display:"flex",gap:"6px",flexShrink:"0"},rr={flex:"1",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:d.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},Ft={padding:"6px 10px",borderRadius:"4px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",flexShrink:"0"},ir={...Ft,opacity:"0.5",cursor:"not-allowed"},Nt={flex:"1",overflowY:"auto",fontSize:"12px",lineHeight:"1.5",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"8px",borderRadius:"4px",minHeight:"80px"},sr={...Nt,color:d.textMuted,display:"flex",alignItems:"center",justifyContent:"center",fontStyle:"italic"},lr={padding:"8px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px"};function ar({apiBase:e,pinHash:t}){const[n,o]=S(""),[s,i]=S(""),[l,a]=S("idle"),[g,p]=S(""),u=F(null),c=n.trim().length>0&&l!=="loading"&&l!=="streaming",f=C(async()=>{if(!c)return;const x=n.trim();i(""),a("loading"),p(""),u.current&&u.current.abort();const _=new AbortController;u.current=_;try{const b=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:x,context:window.location.href}),signal:_.signal});if(!b.ok)throw new Error(`Request failed (${b.status})`);const m=b.body?.getReader();if(!m)throw new Error("No response stream");a("streaming");const v=new TextDecoder;for(;;){const{done:$,value:k}=await m.read();if($)break;const L=v.decode(k,{stream:!0});L&&i(H=>H+L)}a("idle")}catch(b){if(b.name==="AbortError")return;a("error");const m=b instanceof Error?b.message:"Analysis failed";p(m)}},[c,n,e,t]),h=C(x=>{x.key==="Enter"&&!x.shiftKey&&c&&(x.preventDefault(),f())},[c,f]);return r("div",{style:nr},r("div",{style:or},r("input",{style:rr,type:"text",value:n,placeholder:"Ask about code, errors, concepts...",onInput:x=>{o(x.target.value)},onKeyDown:h}),r("button",{style:c?Ft:ir,onClick:f,disabled:!c},l==="loading"||l==="streaming"?"...":"Send")),l==="error"?r("div",{style:lr},g):null,s?r("div",{style:Nt},s):r("div",{style:sr},l==="loading"?"Thinking...":"Response will appear here"))}const cr=100,dr={LCP:[2500,4e3],CLS:[.1,.25],INP:[200,500],FCP:[1800,3e3],TTFB:[800,1800]};let pr=1;const oe=[],he=[];function ur(e,t){const n=dr[e];return t<=n[0]?"good":t<=n[1]?"needs-improvement":"poor"}function re(e,t){const n={id:pr++,timestamp:Date.now(),metric:e,value:Math.round(e==="CLS"?t*1e3:t)/(e==="CLS"?1e3:1),rating:ur(e,t)};oe.length>=cr&&oe.shift(),oe.push(n);for(const o of he)o(n)}function Wt(){return[...oe]}function fr(){oe.length=0}function jt(e){return he.push(e),()=>{const t=he.indexOf(e);t!==-1&&he.splice(t,1)}}function gr(){if(!(typeof PerformanceObserver>"u")){try{new PerformanceObserver(t=>{const n=t.getEntries(),o=n[n.length-1];o&&re("LCP",o.startTime)}).observe({type:"largest-contentful-paint",buffered:!0})}catch{}try{let e=0;new PerformanceObserver(n=>{for(const o of n.getEntries()){const s=o;!s.hadRecentInput&&typeof s.value=="number"&&(e+=s.value,re("CLS",e))}}).observe({type:"layout-shift",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries())n.duration>0&&re("INP",n.duration)}).observe({type:"event",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries())n.name==="first-contentful-paint"&&re("FCP",n.startTime)}).observe({type:"paint",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const n of t.getEntries()){const o=n;o.responseStart>0&&re("TTFB",o.responseStart-o.requestStart)}}).observe({type:"navigation",buffered:!0})}catch{}}}const Ie={good:"#22c55e","needs-improvement":"#eab308",poor:"#ef4444"},hr={good:"rgba(34, 197, 94, 0.15)","needs-improvement":"rgba(234, 179, 8, 0.15)",poor:"rgba(239, 68, 68, 0.15)"},xr={LCP:"Largest Contentful Paint",CLS:"Cumulative Layout Shift",INP:"Interaction to Next Paint",FCP:"First Contentful Paint",TTFB:"Time to First Byte"},Ut={LCP:"ms",CLS:"",INP:"ms",FCP:"ms",TTFB:"ms"},yr=["LCP","FCP","CLS","INP","TTFB"];function mr(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${n}:${o}:${s}`}function _r(e){const t={};for(const n of e){const o=t[n.metric];(!o||n.id>o.id)&&(t[n.metric]=n)}return t}const br={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Sr={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",flexShrink:"0"},vr={fontSize:"11px",fontWeight:"600",color:d.textBright,textTransform:"uppercase",letterSpacing:"0.5px"},wr={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},kr={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px",padding:"4px 8px 8px",flexShrink:"0"},Cr={display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",padding:"8px 6px",borderRadius:"6px",backgroundColor:d.toolBtnBg},$r={fontSize:"16px",fontWeight:"700",fontFamily:"monospace"},Br={fontSize:"9px",fontWeight:"500",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},Er={height:"1px",backgroundColor:d.panelBorder,margin:"0 8px",flexShrink:"0"},Tr={fontSize:"10px",fontWeight:"600",color:d.textMuted,padding:"6px 8px 2px",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},Rr={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Mr={display:"flex",alignItems:"center",gap:"6px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace"},zr={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flexShrink:"0",color:"#fff"},Dr={fontWeight:"600",color:d.text,flexShrink:"0",minWidth:"32px"},Lr={color:d.textBright,flex:"1"},Ir={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Hr={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function Pr(e){return e==="good"?"Good":e==="needs-improvement"?"OK":"Poor"}function Ar(){const[e,t]=S(Wt);A(()=>jt(()=>{t(Wt())}),[]);const n=C(()=>{fr(),t([])},[]),o=_r(e),s=yr.map(i=>{const l=o[i];if(!l)return null;const a=Ut[i],g=i==="CLS"?l.value.toFixed(3):`${Math.round(l.value)}`;return{metric:i,entry:l,displayValue:g,unit:a}}).filter(Boolean);return r("div",{style:br},r("div",{style:Sr},r("span",{style:vr},"Web Vitals"),r("button",{style:wr,onClick:n,title:"Clear performance entries"},"Clear")),s.length>0?r("div",{style:kr},s.map(i=>r("div",{key:i.metric,style:{...Cr,borderLeft:`3px solid ${Ie[i.entry.rating]}`},title:xr[i.metric]},r("span",{style:{...$r,color:Ie[i.entry.rating]}},`${i.displayValue}${i.unit}`),r("span",{style:Br},i.metric)))):null,e.length>0?r("div",{style:Er}):null,e.length>0?r("div",{style:Tr},"Event Log"):null,e.length===0?r("div",{style:Hr},"Waiting for Web Vitals data..."):r("div",{style:Rr},[...e].reverse().map(i=>{const l=Ut[i.metric],a=i.metric==="CLS"?i.value.toFixed(3):`${Math.round(i.value)}`;return r("div",{key:i.id,style:{...Mr,backgroundColor:hr[i.rating]}},r("span",{style:{...zr,backgroundColor:Ie[i.rating]}},Pr(i.rating)),r("span",{style:Dr},i.metric),r("span",{style:Lr},`${a}${l}`),r("span",{style:Ir},mr(i.timestamp)))})))}const He="devtools-debug-snapshots",Or=5;function Fr(){try{const e=localStorage.getItem(He);return e?JSON.parse(e):[]}catch{return[]}}function qt(e){try{localStorage.setItem(He,JSON.stringify(e))}catch{}}let Nr=1;function ie(e){return String(e).padStart(2,"0")}function Xt(e){const t=new Date(e);return`${ie(t.getHours())}:${ie(t.getMinutes())}:${ie(t.getSeconds())}`}function Wr(){const e=[];try{const t=Object.keys(localStorage).filter(n=>n!==He);if(t.length){const n=t.slice(0,30).map(o=>{const s=localStorage.getItem(o)??"";return`  ${o}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`localStorage (${t.length} keys):
${n.join(`
`)}`)}}catch{}try{const t=Object.keys(sessionStorage);if(t.length){const n=t.slice(0,30).map(o=>{const s=sessionStorage.getItem(o)??"";return`  ${o}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`sessionStorage (${t.length} keys):
${n.join(`
`)}`)}}catch{}return e.length?e.join(`

`):"(empty)"}function jr(){try{const t=performance.getEntriesByType("navigation")[0];return t?[`DNS: ${Math.round(t.domainLookupEnd-t.domainLookupStart)}ms`,`Connect: ${Math.round(t.connectEnd-t.connectStart)}ms`,`TTFB: ${Math.round(t.responseStart-t.requestStart)}ms`,`DOM Ready: ${Math.round(t.domContentLoadedEventEnd)}ms`,`Page Load: ${Math.round(t.loadEventEnd)}ms`].join(" | "):"(not available)"}catch{return"(not available)"}}function Ur(){try{const e=document.cookie.split(";").map(t=>t.trim().split("=")[0]).filter(Boolean);return e.length?e.join(", "):"(none)"}catch{return"(unavailable)"}}function qr(e,t,n){const s=new Date().toISOString().replace("T"," ").slice(0,19),i=J(),l=Z(),a=ne(),g=t?i.filter(h=>h.level==="error"||h.level==="warn"):[...i],p=t?l.filter(h=>h.status===0||h.status>=400):[...l],u=[];u.push(`# Debug Snapshot — ${s}`),u.push(""),u.push(`**URL:** ${window.location.href}`),document.title&&u.push(`**Page:** ${document.title}`),u.push(`**Viewport:** ${window.innerWidth} x ${window.innerHeight}`),u.push(`**User-Agent:** ${navigator.userAgent}`),u.push(`**Cookies:** ${Ur()}`),u.push(""),n.trim()&&(u.push("## Notes"),u.push(n.trim()),u.push("")),e.length&&(u.push(`## Screenshots (${e.length} downloaded to ~/Downloads)`),u.push(e.map(h=>h.name).join(", ")),u.push(""));const c=t?`${g.length} warnings/errors of ${i.length} total`:`${g.length} entries`;if(u.push(`## Console — ${c}`),!g.length)u.push("(none)");else for(const h of g.slice(-60))u.push(`[${Xt(h.timestamp)}] ${h.level.toUpperCase().padEnd(5)} ${h.args.join(" ")}`);u.push("");const f=t?`${p.length} errors of ${l.length} total`:`${p.length} requests`;if(u.push(`## Network — ${f}`),!p.length)u.push("(none)");else for(const h of p.slice(-40)){const x=h.status===0?"ERR":String(h.status);u.push(`${h.method.padEnd(6)} ${h.url} — ${x} (${h.duration}ms)`)}if(u.push(""),u.push(`## JavaScript Errors — ${a.length}`),!a.length)u.push("(none)");else for(const h of a){const x=h.type==="unhandledrejection"?"UnhandledRejection":"Error";if(u.push(`[${Xt(h.timestamp)}] ${x}: ${h.message}`),h.source&&u.push(`  at ${h.source}:${h.line}:${h.col}`),h.stack){const _=h.stack.split(`
`).slice(1,7).map(b=>b.trim()).filter(Boolean);for(const b of _)u.push(`  ${b}`)}}return u.push(""),u.push("## Storage"),u.push(Wr()),u.push(""),u.push("## Page Timing"),u.push(jr()),u.join(`
`)}function Xr(e){for(const t of e){const n=document.createElement("a");n.href=t.url,n.download=t.name,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}async function Yr(e){return new Promise(t=>{const n=URL.createObjectURL(e),o=new Image;o.onload=()=>{const s=document.createElement("canvas");s.width=o.naturalWidth,s.height=o.naturalHeight,s.getContext("2d").drawImage(o,0,0),s.toBlob(i=>t(i??e),"image/webp",.82),URL.revokeObjectURL(n)},o.onerror=()=>{URL.revokeObjectURL(n),t(e)},o.src=n})}async function Vr(){let e=null;try{e=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser"},preferCurrentTab:!0});const t=document.createElement("video");t.srcObject=e,t.muted=!0,await new Promise(a=>{t.onloadedmetadata=()=>{t.play().then(a).catch(a)}}),await new Promise(a=>setTimeout(a,120));const o=Math.min(1,1440/t.videoWidth),s=document.createElement("canvas");s.width=Math.round(t.videoWidth*o),s.height=Math.round(t.videoHeight*o);const i=s.getContext("2d");let l=null;return i&&(i.drawImage(t,0,0,s.width,s.height),l=await new Promise(a=>s.toBlob(a,"image/webp",.82))),t.srcObject=null,l}finally{e?.getTracks().forEach(t=>t.stop())}}const Gr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",boxSizing:"border-box"},Jr={display:"flex",flexShrink:"0",borderBottom:`1px solid ${d.panelBorder}`};function Yt(e){return{flex:"1",padding:"7px 4px",border:"none",borderBottom:e?`2px solid ${d.fabBg}`:"2px solid transparent",backgroundColor:"transparent",color:e?d.textBright:d.textMuted,fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"color 0.1s",boxSizing:"border-box"}}const Vt={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"8px",display:"flex",flexDirection:"column",gap:"8px",boxSizing:"border-box"},Pe={fontSize:"10px",fontWeight:"600",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.4px",marginBottom:"4px",display:"block"},Kr={display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"4px"};function Ae(e,t){return{padding:"6px",borderRadius:"4px",backgroundColor:e>0?`${t}22`:d.toolBtnBg,border:`1px solid ${e>0?t:d.panelBorder}`,textAlign:"center"}}const Oe={fontSize:"16px",fontWeight:"700",color:d.textBright,display:"block"},Fe={fontSize:"9px",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},Qr={border:`1px dashed ${d.panelBorder}`,borderRadius:"6px",padding:"10px",minHeight:"64px",display:"flex",flexDirection:"column",gap:"6px"},Zr={display:"flex",flexWrap:"wrap",gap:"4px"},ei={position:"relative",width:"56px",height:"40px",borderRadius:"3px",overflow:"hidden",flexShrink:"0",border:`1px solid ${d.panelBorder}`,cursor:"default"},ti={width:"100%",height:"100%",objectFit:"cover"},ni={position:"absolute",top:"1px",right:"1px",width:"14px",height:"14px",borderRadius:"2px",border:"none",backgroundColor:"rgba(0,0,0,0.7)",color:"#fff",fontSize:"9px",lineHeight:"1",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},oi={fontSize:"11px",color:d.textMuted,textAlign:"center"},Gt={display:"flex",gap:"4px"};function xe(e="muted"){const t=e==="primary"?d.fabBg:e==="danger"?"#7f1d1d":d.toolBtnBg,n=e==="primary"?"#fff":e==="danger"?"#fca5a5":d.textMuted;return{flex:"1",padding:"5px 8px",borderRadius:"4px",border:"none",backgroundColor:t,color:n,fontSize:"11px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap"}}const ri=e=>({width:"100%",padding:"9px 12px",borderRadius:"6px",border:"none",backgroundColor:e?"#1e293b":d.fabBg,color:e?d.textMuted:"#fff",fontSize:"12px",fontWeight:"600",cursor:e?"not-allowed":"pointer"}),ii=e=>({padding:"3px 8px",borderRadius:"4px",border:`1px solid ${e?d.fabBg:d.panelBorder}`,backgroundColor:e?`${d.fabBg}33`:"transparent",color:e?"#93c5fd":d.textMuted,fontSize:"10px",cursor:"pointer",fontWeight:"500"}),si={borderRadius:"6px",border:`1px solid ${d.panelBorder}`,backgroundColor:d.toolBtnBg,padding:"8px",display:"flex",flexDirection:"column",gap:"4px"},li={fontSize:"10px",color:d.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},ai={fontSize:"10px",color:d.textMuted},ci={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px",padding:"20px",textAlign:"center"};function di(){const[e,t]=S("capture"),[n,o]=S([]),s=F(n),[i,l]=S(Fr),[a,g]=S(!1),[p,u]=S(null),[c,f]=S(!0),[h,x]=S("");A(()=>{s.current=n},[n]),A(()=>()=>{for(const y of s.current)URL.revokeObjectURL(y.url)},[]),A(()=>{if(e!=="capture")return;function y(B){const T=B.clipboardData?.items;if(T){for(const M of Array.from(T))if(M.type.startsWith("image/")){const W=M.getAsFile();W&&Yr(W).then(We=>_(We))}}}return window.addEventListener("paste",y),()=>window.removeEventListener("paste",y)},[e]);function _(y){const B=Nr++,T=URL.createObjectURL(y),M=y.type==="image/webp"?"webp":y.type==="image/jpeg"?"jpg":"png";o(W=>[...W,{id:B,url:T,blob:y,name:`screenshot-${B}.${M}`}])}const b=C(async()=>{g(!0);try{const y=await Vr();y&&_(y)}catch{}g(!1)},[]),m=C(y=>{o(B=>{const T=B.find(M=>M.id===y);return T&&URL.revokeObjectURL(T.url),B.filter(M=>M.id!==y)})},[]),v=C(()=>{o(y=>{for(const B of y)URL.revokeObjectURL(B.url);return[]})},[]),$=C(y=>{u(y),setTimeout(()=>u(null),2e3)},[]),k=C(async()=>{const y=qr(n,c,h);n.length>0&&Xr(n);const B={id:String(Date.now()),timestamp:Date.now(),pageUrl:window.location.href,report:y};l(T=>{const M=[B,...T].slice(0,Or);return qt(M),M}),await navigator.clipboard.writeText(y),$(B.id)},[n,c,h,$]),L=C(async y=>{await navigator.clipboard.writeText(y.report),$(y.id)},[$]),H=C(y=>{l(B=>{const T=B.filter(M=>M.id!==y);return qt(T),T})},[]),N=J(),P=Z(),I=ne(),D=N.filter(y=>y.level==="error"||y.level==="warn").length,w=P.filter(y=>y.status===0||y.status>=400).length;return r("div",{style:Gr},r("div",{style:Jr},r("button",{style:Yt(e==="capture"),onClick:()=>t("capture")},"Capture"),r("button",{style:Yt(e==="history"),onClick:()=>t("history")},`History (${i.length})`)),e==="capture"?r("div",{style:Vt},r("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r("span",{style:Pe},"Report data"),r("button",{style:ii(c),onClick:()=>f(y=>!y)},c?"Errors only":"All entries")),r("div",{style:Kr},r("div",{style:Ae(D,"#eab308")},r("span",{style:Oe},String(D)),r("span",{style:Fe},"Console")),r("div",{style:Ae(w,"#ef4444")},r("span",{style:Oe},String(w)),r("span",{style:Fe},"Net Errors")),r("div",{style:Ae(I.length,"#ef4444")},r("span",{style:Oe},String(I.length)),r("span",{style:Fe},"JS Errors"))),r("div",null,r("span",{style:Pe},`Screenshots (${n.length})`),r("div",{style:Qr},n.length===0?r("div",{style:oi},"Cmd+V to paste a screenshot",r("br",null),"or click Capture below"):r("div",{style:Zr},n.map(y=>r("div",{key:y.id,style:ei,title:y.name},r("img",{src:y.url,style:ti,alt:y.name}),r("button",{style:ni,onClick:()=>m(y.id),title:"Remove"},"×")))),r("div",{style:Gt},r("button",{style:xe("muted"),onClick:b,disabled:a,title:"Capture current screen (opens share dialog)"},a?"Capturing...":"Capture Screen"),n.length>0?r("button",{style:xe("danger"),onClick:v,title:"Delete all screenshots"},"Delete All"):null))),r("div",null,r("span",{style:Pe},"Notes (optional)"),r("textarea",{value:h,onInput:y=>x(y.target.value),placeholder:"Add your own comments or context…",rows:3,style:{width:"100%",background:d.toolBtnBg,border:`1px solid ${d.panelBorder}`,borderRadius:"4px",color:d.text,fontSize:"11px",padding:"5px 6px",resize:"vertical",fontFamily:"system-ui, -apple-system, sans-serif",boxSizing:"border-box"}})),r("button",{style:ri(!1),onClick:k,title:"Copy debug report to clipboard. Screenshots (if any) download as files."},p?"Copied!":"Copy Report & Download Screenshots"),r("p",{style:{fontSize:10,color:d.textMuted,textAlign:"center",padding:"4px 8px"}},"Screenshots save to ~/Downloads · ",r("a",{style:{color:"#475569",textDecoration:"underline",cursor:"pointer"},href:"/settings/widget",target:"_blank"},"Set label in Settings"))):r("div",{style:{...Vt,gap:"6px"}},i.length===0?r("div",{style:ci},"No snapshots yet. Copy a report from the Capture tab to save it here."):i.map(y=>{const B=new Date(y.timestamp),T=`${B.toLocaleDateString()} ${ie(B.getHours())}:${ie(B.getMinutes())}`,M=p===y.id;return r("div",{key:y.id,style:si},r("div",{style:ai},T),r("div",{style:li,title:y.pageUrl},y.pageUrl),r("div",{style:Gt},r("button",{style:xe(M?"primary":"muted"),onClick:()=>L(y)},M?"Copied!":"Copy Report"),r("button",{style:xe("danger"),onClick:()=>H(y.id)},"Delete")))})))}let Jt={localStorage:{},sessionStorage:{},cookies:""};function pi(){const e={};try{for(let n=0;n<window.localStorage.length;n++){const o=window.localStorage.key(n);e[o]=window.localStorage.getItem(o)??""}}catch{}const t={};try{for(let n=0;n<window.sessionStorage.length;n++){const o=window.sessionStorage.key(n);t[o]=window.sessionStorage.getItem(o)??""}}catch{}return Jt={localStorage:e,sessionStorage:t,cookies:document.cookie},Jt}function ui(){const[e,t]=S({localStorage:{},sessionStorage:{},cookies:""}),[n,o]=S("ls");A(()=>{t(pi())},[]);const s=(a,g)=>r("button",{style:{padding:"4px 10px",fontSize:11,cursor:"pointer",border:"none",fontFamily:"inherit",background:n===a?d.toolBtnBgActive:"transparent",color:n===a?"#fff":d.textMuted,borderRadius:4},onClick:()=>o(a)},g),i=n==="ls"?e.localStorage:n==="ss"?e.sessionStorage:null,l=i?Object.entries(i):[];return r("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},r("div",{style:{display:"flex",gap:4,padding:"6px 8px",borderBottom:`1px solid ${d.panelBorder}`}},s("ls","localStorage"),s("ss","sessionStorage"),s("cookies","Cookies")),r("div",{style:{flex:1,overflowY:"auto"}},n==="cookies"?r("pre",{style:{padding:12,fontSize:10,color:d.text,fontFamily:"monospace",whiteSpace:"pre-wrap"}},e.cookies||"(empty)"):l.length===0?r("p",{style:{padding:12,fontSize:11,color:d.textMuted}},"(empty)"):l.map(([a,g])=>r("div",{key:a,style:{display:"flex",gap:8,padding:"4px 12px",borderBottom:`1px solid ${d.panelBorder}`,fontSize:11}},r("span",{style:{color:d.textMuted,flexShrink:0,width:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},a),r("span",{style:{color:d.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontFamily:"monospace"}},g)))))}const Kt=[],ye=[];let Qt=!1;function me(e){Kt.push(e),ye.forEach(t=>t())}function Zt(){return[...Kt]}function fi(e){return ye.push(e),()=>{const t=ye.indexOf(e);t!==-1&&ye.splice(t,1)}}function gi(){if(Qt)return;Qt=!0,document.querySelectorAll("img").forEach(n=>{n.complete&&n.naturalWidth===0&&n.src&&me({severity:"error",category:"image",message:"Broken image",detail:n.src})});const e=document.querySelectorAll("img:not([alt])");e.length>0&&me({severity:"warn",category:"alt-text",message:`${e.length} image(s) missing alt text`});const t=n=>{me({severity:"error",category:"mixed-content",message:"Mixed content blocked",detail:n.blockedURI})};document.addEventListener("securitypolicyviolation",t);try{new PerformanceObserver(o=>{for(const s of o.getEntries()){const i=s;i.duration>2e3&&me({severity:"warn",category:"slow-resource",message:`Slow resource: ${Math.round(i.duration)}ms`,detail:i.name})}}).observe({type:"resource",buffered:!0})}catch{}}function hi(){const[e,t]=S([]);return A(()=>(t(Zt()),fi(()=>t(Zt()))),[]),r("div",{style:{flex:1,overflowY:"auto"}},e.length===0?r("p",{style:{padding:16,fontSize:12,color:d.textMuted}},"No health issues detected."):e.map((n,o)=>r("div",{key:`${n.category}:${n.message}:${o}`,style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`,display:"flex",flexDirection:"column",gap:2}},r("div",{style:{display:"flex",alignItems:"center",gap:6}},r("span",{style:{fontSize:10,fontWeight:600,color:n.severity==="error"?"#ef4444":"#f59e0b",textTransform:"uppercase"}},n.severity),r("span",{style:{fontSize:11,color:d.text}},n.message)),n.detail&&r("span",{style:{fontSize:10,color:d.textMuted,fontFamily:"monospace",marginLeft:12}},n.detail))))}function xi({apiBase:e,pinHash:t,projectId:n}){const[o,s]=S([]),[i,l]=S(null),[a,g]=S([]),p={"X-DevTools-Pin":t,"Content-Type":"application/json"};A(()=>{fetch(`${e}/api/routines?projectId=${n}`,{headers:p}).then(_=>{if(!_.ok)throw new Error(_.statusText);return _.json()}).then(s).catch(()=>{})},[n]);async function u(_){const b=await fetch(`${e}/api/routines/${_}/runs`,{method:"POST",headers:p});if(!b.ok)return;const m=await b.json(),[v,$]=await Promise.all([fetch(`${e}/api/routines/runs/${m.id}`,{headers:p}).then(k=>{if(!k.ok)throw new Error(k.statusText);return k.json()}),fetch(`${e}/api/routines/${_}/items`,{headers:p}).then(k=>{if(!k.ok)throw new Error(k.statusText);return k.json()})]);l(v),g($)}async function c(_,b){i&&(await fetch(`${e}/api/routines/runs/${i.id}/items?itemId=${_}`,{method:"PUT",headers:p,body:JSON.stringify({checked:b})}).catch(()=>{}),l(m=>m?{...m,items:m.items?.map(v=>v.itemId===_?{...v,checked:b?1:0}:v)}:null))}const f=i?.items?.length??0,h=i?.items?.filter(_=>_.checked).length??0,x=f>0?Math.round(h/f*100):0;return i?r("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},r("div",{style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`}},r("div",{style:{height:4,background:"#1e293b",borderRadius:2,overflow:"hidden"}},r("div",{style:{height:"100%",background:"#6366f1",borderRadius:2,width:`${x}%`,transition:"width .2s"}})),r("span",{style:{fontSize:10,color:d.textMuted,marginTop:4,display:"block"}},`${h} / ${f} complete`)),r("div",{style:{flex:1,overflowY:"auto",padding:"4px 0"}},(i.items??[]).map(_=>{const b=a.find(m=>m.id===_.itemId);return r("div",{key:_.id,style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`}},r("div",{style:{display:"flex",alignItems:"center",gap:8}},r("input",{type:"checkbox",checked:_.checked===1,onChange:m=>c(_.itemId,m.target.checked)}),r("span",{style:{fontSize:11,color:_.checked?d.textMuted:d.text,textDecoration:_.checked?"line-through":"none"}},b?.name??`Item ${_.itemId}`)),b?.snippet&&r("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:4,marginLeft:22}},r("code",{style:{fontSize:10,color:"#94a3b8",background:"#0a0f1a",padding:"2px 6px",borderRadius:3,fontFamily:"monospace",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},b.snippet),r("button",{style:{background:"none",border:"none",color:d.textMuted,cursor:"pointer",fontSize:12},onClick:()=>navigator.clipboard.writeText(b.snippet??"").catch(()=>{})},"⧇")))})),r("button",{style:{margin:8,padding:"6px 0",border:`1px solid ${d.panelBorder}`,borderRadius:6,background:"none",color:d.textMuted,fontSize:11,cursor:"pointer",fontFamily:"inherit"},onClick:()=>l(null)},"Close Run")):r("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:8}},r("p",{style:{fontSize:11,color:d.textMuted}},"Start a checklist run:"),...o.map(_=>r("button",{key:_.id,style:{padding:"7px 12px",borderRadius:6,background:d.toolBtnBg,border:`1px solid ${d.panelBorder}`,color:d.text,fontSize:11,cursor:"pointer",textAlign:"left",fontFamily:"inherit"},onClick:()=>u(_.id)},"▶ "+_.name)),o.length===0&&r("p",{style:{fontSize:10,color:d.textMuted}},"No checklists. Create one in Dashboard → Routines."))}const en=[{id:"debug",label:"Debug Snapshot",icon:"⊚"},{id:"console",label:"Console Viewer",icon:">"},{id:"network",label:"Network Viewer",icon:"⇅"},{id:"errors",label:"Error Log",icon:"⚠"},{id:"bugs",label:"Bug Reporter",icon:"🐛"},{id:"perf",label:"Performance",icon:"⚡"},{id:"storage",label:"Storage",icon:"🗄"},{id:"health",label:"Health",icon:"❤"},{id:"routines",label:"Routines",icon:"✓"},{id:"ai",label:"AI Assistant",icon:"✨"}];function yi({projectId:e,isOpen:t,onClose:n,apiClient:o,apiBase:s,pinHash:i}){const[l,a]=S(null),[g,p]=S(!1),[u,c]=S(null),[f,h]=S(""),[x,_]=S(""),[b,m]=S(()=>({x:Math.max(0,window.innerWidth-Te-4),y:0})),[v,$]=S(!1),k=F(null),L=C(w=>{w.target.closest("button")||(w.currentTarget.setPointerCapture(w.pointerId),k.current={startX:w.clientX,startY:w.clientY,originX:b.x,originY:b.y},$(!0))},[b.x,b.y]),H=C(w=>{if(!k.current)return;const{startX:y,startY:B,originX:T,originY:M}=k.current,W=window.innerWidth-Te,We=window.innerHeight-48;m({x:Math.max(0,Math.min(W,T+(w.clientX-y))),y:Math.max(0,Math.min(We,M+(w.clientY-B)))})},[]),N=C(()=>{k.current=null,$(!1)},[]),P=C(w=>{a(y=>(y==="bugs"&&w!=="bugs"&&(h(""),_("")),y===w?null:w))},[]),I=C(w=>{h(w.message),_(w.stack),a("bugs")},[]),D=l?en.find(w=>w.id===l):null;return r("div",{style:{...mn,left:`${b.x}px`,top:`${b.y}px`,height:"min(85vh, 700px)",opacity:t?"1":"0",transition:"opacity 0.2s ease",pointerEvents:t?"auto":"none"},"aria-hidden":!t},r("div",{style:{..._n,cursor:v?"grabbing":"grab",userSelect:"none"},onPointerDown:L,onPointerMove:H,onPointerUp:N},r("span",{style:bn,title:e},e),r("button",{style:{...Sn,backgroundColor:g?d.closeBtnHover:"transparent",color:g?"#fff":d.textMuted},onClick:n,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),"aria-label":"Close panel",title:"Close"},"✕")),r("div",{style:vn},en.map(w=>{const y=l===w.id,B=u===w.id;let T=d.toolBtnBg;return y?T=d.toolBtnBgActive:B&&(T=d.toolBtnBgHover),r("button",{key:w.id,style:{...wn,backgroundColor:T,color:y?"#fff":d.text},onClick:()=>P(w.id),onMouseEnter:()=>c(w.id),onMouseLeave:()=>c(null)},r("span",{style:kn},w.icon),r("span",null,w.label))})),D?r("div",{style:{...Cn,borderTop:`1px solid ${d.panelBorder}`,...l==="debug"||l==="console"||l==="network"||l==="errors"||l==="bugs"||l==="perf"||l==="storage"||l==="health"||l==="routines"||l==="ai"?{alignItems:"stretch",justifyContent:"stretch",padding:"0"}:{}}},l==="debug"?r(di,null):l==="console"?r(Yn,null):l==="network"?r(So,null):l==="errors"?r(Xo,{onReportBug:I}):l==="bugs"?r(Ot,{apiClient:o,projectId:e,prefillTitle:f||void 0,prefillStack:x||void 0}):l==="perf"?r(Ar,null):l==="storage"?r(ui,null):l==="health"?r(hi,null):l==="routines"?r(xi,{apiBase:s,pinHash:i,projectId:e}):l==="ai"?r(ar,{apiBase:s,pinHash:i}):r("span",null,`${D.label} -- coming soon`)):null)}const tn={isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0,moved:!1},mi=r("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},r("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}));function _i({projectId:e,pinHash:t,apiBase:n,apiClient:o}){const[s,i]=S(!1),[l,a]=S(!1),[g,p]=S({x:0,y:0}),[u,c]=S(!1),f=F(tn),h=F(null),x=C($=>{$.currentTarget.setPointerCapture($.pointerId),f.current={isDragging:!0,startX:$.clientX,startY:$.clientY,offsetX:g.x,offsetY:g.y,moved:!1},c(!0)},[g.x,g.y]),_=C($=>{const k=f.current;if(!k.isDragging)return;const L=$.clientX-k.startX,H=$.clientY-k.startY;Math.sqrt(L*L+H*H)>xn&&(f.current={...k,moved:!0}),p({x:k.offsetX+L,y:k.offsetY+H})},[]),b=C(()=>{const k=f.current.moved;f.current={...tn},c(!1),k||i(L=>!L)},[]),m=C(()=>{i(!1)},[]),v={...yn,bottom:`${20-g.y}px`,right:`${20-g.x}px`,backgroundColor:l?d.fabBgHover:d.fabBg,boxShadow:l?`0 6px 16px ${d.shadow}`:`0 4px 12px ${d.shadow}`,cursor:u?"grabbing":"grab"};return r("div",null,r("button",{ref:h,style:v,title:`DevTools (${e})`,"aria-label":"Toggle DevTools panel",onPointerDown:x,onPointerMove:_,onPointerUp:b,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},mi),r(yi,{projectId:e,isOpen:s,onClose:m,apiClient:o,apiBase:n,pinHash:t}))}function nn(e,t){async function n(o,s={}){return(await fetch(`${e}${o}`,{...s,headers:{"Content-Type":"application/json","X-DevTools-Pin":t,...s.headers}})).json()}return{createBug:o=>n("/api/bugs",{method:"POST",body:JSON.stringify(o)}),createDevLog:o=>n("/api/devlog",{method:"POST",body:JSON.stringify(o)}),sendEvents:o=>n("/api/widget/event",{method:"POST",body:JSON.stringify({events:o})})}}const bi=console.warn.bind(console),Si=1e4,vi=50,wi=200,ki=new Set(["log","info","warn","error","debug"]);function Ci(e,t,n){let o=[];function s(u){o.length>=wi||(o.push(u),o.length>=vi&&i())}function i(){if(o.length===0)return;const u=[...o];o=[],t.sendEvents(u).catch(c=>{bi("[DevTools] Failed to send events:",c)})}function l(){if(o.length===0)return;const u=[...o];o=[];const c=JSON.stringify({events:u}),f=`${n}/api/widget/event`;try{const h=new Blob([c],{type:"application/json"});navigator.sendBeacon(f,h)}catch{}}let a=0;Dt(()=>{const c=ne().filter(f=>f.id>a);if(c.length>0){a=c[c.length-1].id;for(const f of c)s({type:"error",title:f.message,content:f.stack,metadata:{errorType:f.type,source:f.source,line:f.line,col:f.col},projectId:e})}}),jt(u=>{s({type:"perf",title:`${u.metric}: ${u.value}`,content:`Rating: ${u.rating}`,metadata:{metric:u.metric,value:u.value,rating:u.rating},projectId:e})});let g=0;mt(()=>{const c=J().filter(f=>f.id>g);if(c.length>0){g=c[c.length-1].id;for(const f of c){if(!ki.has(f.level))continue;const h=f.args.join(" ");h.includes("/api/widget/")||h.includes("/api/ai/analyze")||s({type:"console",title:h.slice(0,500),content:f.args.join(`
`).slice(0,2e3),metadata:{level:f.level,argCount:f.args.length},projectId:e})}}});let p=0;wt(()=>{const c=Z().filter(f=>f.id>p);if(c.length>0){p=c[c.length-1].id;for(const f of c)f.url.includes("/api/widget/")||f.url.includes("/api/bugs")||f.url.includes("/api/ai/analyze")||s({type:"network",title:`${f.method} ${f.url}`.slice(0,500),content:`${f.status} ${f.statusText} (${f.duration}ms)`,metadata:{method:f.method,url:f.url,status:f.status,statusText:f.statusText,duration:f.duration,requestSize:f.requestSize,responseSize:f.responseSize},projectId:e})}}),setInterval(i,Si),window.addEventListener("beforeunload",l)}function $i(e,t,n){zn(),Qn(),ko(),gr();const o=nn(n,t);Ci(e,o,n)}const Bi=1e4,Ei={position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"280px",backgroundColor:"#1a0000",border:"1px solid #dc2626",borderRadius:"8px",boxShadow:"0 8px 24px rgba(220, 38, 38, 0.3)",zIndex:"999997",fontFamily:"system-ui, -apple-system, sans-serif",color:d.text,overflow:"hidden",display:"flex",flexDirection:"column"},Ti={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:"rgba(220, 38, 38, 0.2)",borderBottom:"1px solid #dc2626",flexShrink:"0"},Ri={fontSize:"12px",fontWeight:"600",color:"#fca5a5"},Mi={display:"flex",gap:"6px"},on={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500"},zi={...on,backgroundColor:"#dc2626",color:"#fff"},Di={...on,backgroundColor:"rgba(255, 255, 255, 0.1)",color:d.textMuted},Li={padding:"8px 12px",overflowY:"auto",flex:"1"},Ii={fontSize:"12px",fontWeight:"500",color:"#fca5a5",marginBottom:"6px",wordBreak:"break-word"},Hi={fontSize:"10px",fontFamily:"monospace",lineHeight:"1.6",color:d.textMuted},rn={padding:"1px 0",wordBreak:"break-all"},Pi={...rn,opacity:"0.5"};function Ai(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function Oi(e){return e.includes("node_modules")}function Fi({onReportBug:e}){const[t,n]=S(null),o=F(null),s=C(()=>{n(null),o.current&&(clearTimeout(o.current),o.current=null)},[]),i=C(()=>{o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{n(null),o.current=null},Bi)},[]);A(()=>(Mt(u=>{n(u),i()}),()=>{Mt(null),o.current&&clearTimeout(o.current)}),[i]);const l=C(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]),a=C(()=>{t&&i()},[t,i]),g=C(()=>{t&&(e(t),s())},[t,e,s]);if(!t)return null;const p=Ai(t.stack);return r("div",{style:Ei,onMouseEnter:l,onMouseLeave:a},r("div",{style:Ti},r("span",{style:Ri},t.type==="error"?"Uncaught Error":"Unhandled Rejection"),r("div",{style:Mi},r("button",{style:zi,onClick:g},"Report Bug"),r("button",{style:Di,onClick:s},"Dismiss"))),r("div",{style:Li},r("div",{style:Ii},t.message),p.length>0?r("div",{style:Hi},p.slice(0,8).map((u,c)=>r("div",{key:c,style:Oi(u)?Pi:rn},u))):null))}const Ni={position:"fixed",padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",zIndex:999999,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"4px",fontFamily:"system-ui, -apple-system, sans-serif"},Wi={position:"fixed",width:"360px",maxHeight:"320px",backgroundColor:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:999999,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",overflow:"hidden"},ji={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:d.panelHeaderBg,borderBottom:`1px solid ${d.panelBorder}`,flexShrink:0},Ui={fontSize:"12px",fontWeight:"600",color:d.textBright},qi={width:"24px",height:"24px",borderRadius:"4px",border:"none",backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",lineHeight:"1"},Xi={padding:"12px",overflowY:"auto",flex:1,fontSize:"13px",lineHeight:"1.5",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word"},Yi={padding:"16px 12px",fontSize:"12px",color:d.textMuted,textAlign:"center"},Vi={padding:"12px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",margin:"8px 12px"};function sn(e,t,n,o){const s=Math.min(Math.max(e,8),window.innerWidth-n-8),i=Math.min(Math.max(t,8),window.innerHeight-o-8);return{x:s,y:i}}function Gi({apiBase:e,pinHash:t}){const[n,o]=S(""),[s,i]=S(null),[l,a]=S(null),[g,p]=S("idle"),[u,c]=S(""),[f,h]=S(""),[x,_]=S(!1),[b,m]=S(!1),v=F(null),$=F(null),k=C(()=>{i(null),a(null),o(""),p("idle"),c(""),h(""),v.current&&(v.current.abort(),v.current=null)},[]);A(()=>{function P(I){if(I.target.closest?.("[data-quickai]"))return;const y=window.getSelection()?.toString().trim()??"";if(y.length>10){o(y);const B=sn(I.clientX,I.clientY-40,90,30);i(B)}else l||(i(null),o(""))}return document.addEventListener("mouseup",P),()=>document.removeEventListener("mouseup",P)},[l]),A(()=>{if(!l)return;function P(D){D.target.closest?.("[data-quickai]")||k()}const I=setTimeout(()=>{document.addEventListener("mousedown",P)},100);return()=>{clearTimeout(I),document.removeEventListener("mousedown",P)}},[l,k]);const L=C(async()=>{if(!n)return;const P=s?sn(s.x,s.y+36,360,320):{x:100,y:100};a(P),i(null),p("loading"),c(""),h(""),v.current&&v.current.abort();const I=new AbortController;v.current=I;try{const D=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:n,context:window.location.href}),signal:I.signal});if(!D.ok)throw new Error(`Analysis failed (${D.status})`);const w=D.body?.getReader();if(!w)throw new Error("No response stream");p("streaming");const y=new TextDecoder;for(;;){const{done:B,value:T}=await w.read();if(B)break;const M=y.decode(T,{stream:!0});M&&c(W=>W+M)}p("done")}catch(D){if(D.name==="AbortError")return;p("error");const w=D instanceof Error?D.message:"Analysis failed";h(w)}},[n,s,e,t]),H=s?r("button",{"data-quickai":"btn",style:{...Ni,left:`${s.x}px`,top:`${s.y}px`,backgroundColor:x?d.fabBgHover:d.fabBg},onClick:L,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1)},"✨ Analyze"):null,N=l?r("div",{ref:$,"data-quickai":"popup",style:{...Wi,left:`${l.x}px`,top:`${l.y}px`}},r("div",{style:ji},r("span",{style:Ui},"AI Analysis"),r("button",{style:{...qi,backgroundColor:b?d.closeBtnHover:"transparent",color:b?"#fff":d.textMuted},onClick:k,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),"aria-label":"Close"},"✕")),g==="loading"?r("div",{style:Yi},"Analyzing..."):g==="error"?r("div",{style:Vi},f):r("div",{style:Xi},u||"Waiting...")):null;return r("div",{"data-quickai":"root"},H,N)}const Ji=["All","Standards","Git","API","Deploy"];function Ki({apiBase:e,pinHash:t,onClose:n}){const[o,s]=S(""),[i,l]=S("All"),[a,g]=S([]),[p,u]=S(null),c=F(null);A(()=>{fetch(`${e}/api/hub/kb`,{headers:{"X-DevTools-Pin":t}}).then(x=>{if(!x.ok)throw new Error(x.statusText);return x.json()}).then(x=>{Array.isArray(x)&&g(x)}).catch(()=>{}),setTimeout(()=>c.current?.focus(),50)},[e,t]);function f(x){navigator.clipboard.writeText(x.snippet??x.title).then(()=>{u(x.id),setTimeout(()=>u(null),1500)}).catch(()=>{})}const h=a.filter(x=>{const _=i==="All"||x.type===i,b=!o||x.title.toLowerCase().includes(o.toLowerCase())||(x.snippet??"").toLowerCase().includes(o.toLowerCase());return _&&b});return r("div",{style:{position:"fixed",inset:0,zIndex:2147483647,background:"rgba(0,0,0,0.75)",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:96},onClick:n},r("div",{style:{width:"100%",maxWidth:600,background:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:8,overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.8)",fontFamily:"system-ui,sans-serif"},onClick:x=>x.stopPropagation()},r("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",borderBottom:`1px solid ${d.panelBorder}`}},r("input",{ref:c,value:o,style:{flex:1,background:"transparent",border:"none",outline:"none",color:d.text,fontSize:13,fontFamily:"inherit"},placeholder:"Search knowledge base...",onInput:x=>s(x.target.value)}),r("button",{style:{background:"none",border:"none",color:d.textMuted,cursor:"pointer",fontSize:16},onClick:n},"✕")),r("div",{style:{display:"flex",gap:4,padding:"6px 10px",borderBottom:`1px solid ${d.panelBorder}`}},Ji.map(x=>r("button",{key:x,style:{padding:"2px 10px",borderRadius:99,fontSize:11,cursor:"pointer",border:"none",fontFamily:"inherit",background:i===x?d.toolBtnBgActive:d.toolBtnBg,color:i===x?"#fff":d.textMuted},onClick:()=>l(x)},x))),r("div",{style:{maxHeight:360,overflowY:"auto"}},h.length===0?r("p",{style:{padding:"24px 14px",textAlign:"center",color:d.textMuted,fontSize:12}},"No results"):h.map(x=>r("div",{key:x.id,style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"10px 14px",borderBottom:`1px solid ${d.panelBorder}`}},r("div",{style:{display:"flex",flexDirection:"column",gap:3,minWidth:0}},r("span",{style:{fontSize:12,color:d.text,fontWeight:500}},x.title),x.description&&r("span",{style:{fontSize:10,color:d.textMuted}},x.description),x.snippet&&r("code",{style:{fontSize:10,background:"#0a0f1a",color:"#94a3b8",padding:"2px 6px",borderRadius:4,fontFamily:"monospace",maxWidth:400,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},x.snippet)),x.snippet&&r("button",{style:{background:"none",border:"none",cursor:"pointer",color:p===x.id?"#34d399":d.textMuted,fontSize:14,marginLeft:8,flexShrink:0},onClick:()=>f(x)},"⧉"))))))}const Ne=document.currentScript,Qi=[":host { all: initial; }","#devtools-root { font-family: system-ui, sans-serif; }"].join(`
`);function Zi({projectId:e,pinHash:t,apiBase:n,apiClient:o}){const[s,i]=S(null),l=C(g=>{i(g)},[]),a=C(()=>{i(null)},[]);return r("div",null,r(_i,{projectId:e,pinHash:t,apiBase:n,apiClient:o}),r(Fi,{onReportBug:l}),r(Gi,{apiBase:n,pinHash:t}),s?r("div",{style:{position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"400px",backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:"999997",overflow:"auto"}},r(Ot,{apiClient:o,projectId:e,prefillTitle:s.message,prefillStack:s.stack,onClose:a})):null)}function ln(){if(document.getElementById("devtools-widget"))return;const e=Ne?.getAttribute("data-project")||"default",t=Ne?.getAttribute("data-pin")||"",n=Ne?.src.replace("/widget.js","")||"",o=nn(n,t),s=document.createElement("div");s.id="devtools-widget",document.body.appendChild(s);const i=s.attachShadow({mode:"open"}),l=document.createElement("style");l.textContent=Qi,i.appendChild(l);const a=document.createElement("div");a.id="devtools-root",i.appendChild(a),rt(r(Zi,{projectId:e,pinHash:t,apiBase:n,apiClient:o}),a),$i(e,t,n),gi();let g=null;document.addEventListener("keydown",p=>{p.key.toLowerCase()==="k"&&p.metaKey&&p.shiftKey&&(p.preventDefault(),g?(i.removeChild(g),g=null):(g=document.createElement("div"),i.appendChild(g),rt(r(Ki,{apiBase:n,pinHash:t,onClose:()=>{g&&(i.removeChild(g),g=null)}}),g))),p.key==="Escape"&&g&&(i.removeChild(g),g=null)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ln):ln()})();
