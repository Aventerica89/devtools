(function(){"use strict";var ae,E,Ve,Y,Ge,Je,Ke,Qe,Se,ve,we,J={},Ze=[],xo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ce=Array.isArray;function j(e,t){for(var o in t)e[o]=t[o];return e}function ke(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function n(e,t,o){var r,s,i,a={};for(i in t)i=="key"?r=t[i]:i=="ref"?s=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?ae.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return de(e,a,r,s,null)}function de(e,t,o,r,s){var i={type:e,props:t,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Ve,__i:-1,__u:0};return s==null&&E.vnode!=null&&E.vnode(i),i}function pe(e){return e.children}function ue(e,t){this.props=e,this.context=t}function G(e,t){if(t==null)return e.__?G(e.__,e.__i+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?G(e):null}function et(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return et(e)}}function tt(e){(!e.__d&&(e.__d=!0)&&Y.push(e)&&!fe.__r++||Ge!=E.debounceRendering)&&((Ge=E.debounceRendering)||Je)(fe)}function fe(){for(var e,t,o,r,s,i,a,u=1;Y.length;)Y.length>u&&Y.sort(Ke),e=Y.shift(),u=Y.length,e.__d&&(o=void 0,r=void 0,s=(r=(t=e).__v).__e,i=[],a=[],t.__P&&((o=j({},r)).__v=r.__v+1,E.vnode&&E.vnode(o),Ce(t.__P,o,r,t.__n,t.__P.namespaceURI,32&r.__u?[s]:null,i,s??G(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,st(i,o,a),r.__e=r.__=null,o.__e!=s&&et(o)));fe.__r=0}function ot(e,t,o,r,s,i,a,u,f,l,p){var c,h,g,x,b,S,y,v=r&&r.__k||Ze,T=t.length;for(f=yo(o,t,v,f,T),c=0;c<T;c++)(g=o.__k[c])!=null&&(h=g.__i==-1?J:v[g.__i]||J,g.__i=c,S=Ce(e,g,h,s,i,a,u,f,l,p),x=g.__e,g.ref&&h.ref!=g.ref&&(h.ref&&Be(h.ref,null,g),p.push(g.ref,g.__c||x,g)),b==null&&x!=null&&(b=x),(y=!!(4&g.__u))||h.__k===g.__k?f=nt(g,f,e,y):typeof g.type=="function"&&S!==void 0?f=S:x&&(f=x.nextSibling),g.__u&=-7);return o.__e=b,f}function yo(e,t,o,r,s){var i,a,u,f,l,p=o.length,c=p,h=0;for(e.__k=new Array(s),i=0;i<s;i++)(a=t[i])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[i]=de(null,a,null,null,null):ce(a)?a=e.__k[i]=de(pe,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=e.__k[i]=de(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[i]=a,f=i+h,a.__=e,a.__b=e.__b+1,u=null,(l=a.__i=mo(a,o,f,c))!=-1&&(c--,(u=o[l])&&(u.__u|=2)),u==null||u.__v==null?(l==-1&&(s>p?h--:s<p&&h++),typeof a.type!="function"&&(a.__u|=4)):l!=f&&(l==f-1?h--:l==f+1?h++:(l>f?h--:h++,a.__u|=4))):e.__k[i]=null;if(c)for(i=0;i<p;i++)(u=o[i])!=null&&(2&u.__u)==0&&(u.__e==r&&(r=G(u)),at(u,u));return r}function nt(e,t,o,r){var s,i;if(typeof e.type=="function"){for(s=e.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=e,t=nt(s[i],t,o,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=G(e)),o.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function mo(e,t,o,r){var s,i,a,u=e.key,f=e.type,l=t[o],p=l!=null&&(2&l.__u)==0;if(l===null&&u==null||p&&u==l.key&&f==l.type)return o;if(r>(p?1:0)){for(s=o-1,i=o+1;s>=0||i<t.length;)if((l=t[a=s>=0?s--:i++])!=null&&(2&l.__u)==0&&u==l.key&&f==l.type)return a}return-1}function rt(e,t,o){t[0]=="-"?e.setProperty(t,o??""):e[t]=o==null?"":typeof o!="number"||xo.test(t)?o:o+"px"}function ge(e,t,o,r,s){var i,a;e:if(t=="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)o&&t in o||rt(e.style,t,"");if(o)for(t in o)r&&o[t]==r[t]||rt(e.style,t,o[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(Qe,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=o,o?r?o.u=r.u:(o.u=Se,e.addEventListener(t,i?we:ve,i)):e.removeEventListener(t,i?we:ve,i);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&o==1?"":o))}}function it(e){return function(t){if(this.l){var o=this.l[t.type+e];if(t.t==null)t.t=Se++;else if(t.t<o.u)return;return o(E.event?E.event(t):t)}}}function Ce(e,t,o,r,s,i,a,u,f,l){var p,c,h,g,x,b,S,y,v,T,C,$,R,A,M,B,D,I=t.type;if(t.constructor!==void 0)return null;128&o.__u&&(f=!!(32&o.__u),i=[u=t.__e=o.__e]),(p=E.__b)&&p(t);e:if(typeof I=="function")try{if(y=t.props,v="prototype"in I&&I.prototype.render,T=(p=I.contextType)&&r[p.__c],C=p?T?T.props.value:p.__:r,o.__c?S=(c=t.__c=o.__c).__=c.__E:(v?t.__c=c=new I(y,C):(t.__c=c=new ue(y,C),c.constructor=I,c.render=_o),T&&T.sub(c),c.state||(c.state={}),c.__n=r,h=c.__d=!0,c.__h=[],c._sb=[]),v&&c.__s==null&&(c.__s=c.state),v&&I.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=j({},c.__s)),j(c.__s,I.getDerivedStateFromProps(y,c.__s))),g=c.props,x=c.state,c.__v=t,h)v&&I.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),v&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(v&&I.getDerivedStateFromProps==null&&y!==g&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(y,C),t.__v==o.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(y,c.__s,C)===!1){for(t.__v!=o.__v&&(c.props=y,c.state=c.__s,c.__d=!1),t.__e=o.__e,t.__k=o.__k,t.__k.some(function(m){m&&(m.__=t)}),$=0;$<c._sb.length;$++)c.__h.push(c._sb[$]);c._sb=[],c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(y,c.__s,C),v&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(g,x,b)})}if(c.context=C,c.props=y,c.__P=e,c.__e=!1,R=E.__r,A=0,v){for(c.state=c.__s,c.__d=!1,R&&R(t),p=c.render(c.props,c.state,c.context),M=0;M<c._sb.length;M++)c.__h.push(c._sb[M]);c._sb=[]}else do c.__d=!1,R&&R(t),p=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++A<25);c.state=c.__s,c.getChildContext!=null&&(r=j(j({},r),c.getChildContext())),v&&!h&&c.getSnapshotBeforeUpdate!=null&&(b=c.getSnapshotBeforeUpdate(g,x)),B=p,p!=null&&p.type===pe&&p.key==null&&(B=lt(p.props.children)),u=ot(e,ce(B)?B:[B],t,o,r,s,i,a,u,f,l),c.base=t.__e,t.__u&=-161,c.__h.length&&a.push(c),S&&(c.__E=c.__=null)}catch(m){if(t.__v=null,f||i!=null)if(m.then){for(t.__u|=f?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;i[i.indexOf(u)]=null,t.__e=u}else{for(D=i.length;D--;)ke(i[D]);$e(t)}else t.__e=o.__e,t.__k=o.__k,m.then||$e(t);E.__e(m,t,o)}else i==null&&t.__v==o.__v?(t.__k=o.__k,t.__e=o.__e):u=t.__e=bo(o.__e,t,o,r,s,i,a,f,l);return(p=E.diffed)&&p(t),128&t.__u?void 0:u}function $e(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach($e)}function st(e,t,o){for(var r=0;r<o.length;r++)Be(o[r],o[++r],o[++r]);E.__c&&E.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){E.__e(i,s.__v)}})}function lt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ce(e)?e.map(lt):j({},e)}function bo(e,t,o,r,s,i,a,u,f){var l,p,c,h,g,x,b,S=o.props||J,y=t.props,v=t.type;if(v=="svg"?s="http://www.w3.org/2000/svg":v=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((g=i[l])&&"setAttribute"in g==!!v&&(v?g.localName==v:g.nodeType==3)){e=g,i[l]=null;break}}if(e==null){if(v==null)return document.createTextNode(y);e=document.createElementNS(s,v,y.is&&y),u&&(E.__m&&E.__m(t,i),u=!1),i=null}if(v==null)S===y||u&&e.data==y||(e.data=y);else{if(i=i&&ae.call(e.childNodes),!u&&i!=null)for(S={},l=0;l<e.attributes.length;l++)S[(g=e.attributes[l]).name]=g.value;for(l in S)if(g=S[l],l!="children"){if(l=="dangerouslySetInnerHTML")c=g;else if(!(l in y)){if(l=="value"&&"defaultValue"in y||l=="checked"&&"defaultChecked"in y)continue;ge(e,l,null,g,s)}}for(l in y)g=y[l],l=="children"?h=g:l=="dangerouslySetInnerHTML"?p=g:l=="value"?x=g:l=="checked"?b=g:u&&typeof g!="function"||S[l]===g||ge(e,l,g,S[l],s);if(p)u||c&&(p.__html==c.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(c&&(e.innerHTML=""),ot(t.type=="template"?e.content:e,ce(h)?h:[h],t,o,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,a,i?i[0]:o.__k&&G(o,0),u,f),i!=null)for(l=i.length;l--;)ke(i[l]);u||(l="value",v=="progress"&&x==null?e.removeAttribute("value"):x!=null&&(x!==e[l]||v=="progress"&&!x||v=="option"&&x!=S[l])&&ge(e,l,x,S[l],s),l="checked",b!=null&&b!=e[l]&&ge(e,l,b,S[l],s))}return e}function Be(e,t,o){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(s){E.__e(s,o)}}function at(e,t,o){var r,s;if(E.unmount&&E.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||Be(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){E.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&at(r[s],t,o||typeof e.type!="function");o||ke(e.__e),e.__c=e.__=e.__e=void 0}function _o(e,t,o){return this.constructor(e,o)}function ct(e,t,o){var r,s,i,a;t==document&&(t=document.documentElement),E.__&&E.__(e,t),s=(r=!1)?null:t.__k,i=[],a=[],Ce(t,e=t.__k=n(pe,null,[e]),s||J,J,t.namespaceURI,s?null:t.firstChild?ae.call(t.childNodes):null,i,s?s.__e:t.firstChild,r,a),st(i,e,a)}ae=Ze.slice,E={__e:function(e,t,o,r){for(var s,i,a;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),a=s.__d),a)return s.__E=s}catch(u){e=u}throw e}},Ve=0,ue.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=j({},this.state),typeof e=="function"&&(e=e(j({},o),this.props)),e&&j(o,e),e!=null&&this.__v&&(t&&this._sb.push(t),tt(this))},ue.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),tt(this))},ue.prototype.render=pe,Y=[],Je=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ke=function(e,t){return e.__v.__b-t.__v.__b},fe.__r=0,Qe=/(PointerCapture)$|Capture$/i,Se=0,ve=it(!1),we=it(!0);var K,L,Te,dt,Q=0,pt=[],P=E,ut=P.__b,ft=P.__r,gt=P.diffed,ht=P.__c,xt=P.unmount,yt=P.__;function Ee(e,t){P.__h&&P.__h(L,e,Q||t),Q=0;var o=L.__H||(L.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function _(e){return Q=1,So(St,e)}function So(e,t,o){var r=Ee(K++,2);if(r.t=e,!r.__c&&(r.__=[St(void 0,t),function(u){var f=r.__N?r.__N[0]:r.__[0],l=r.t(f,u);f!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=L,!L.__f)){var s=function(u,f,l){if(!r.__c.__H)return!0;var p=r.__c.__H.__.filter(function(h){return!!h.__c});if(p.every(function(h){return!h.__N}))return!i||i.call(this,u,f,l);var c=r.__c.props!==u;return p.forEach(function(h){if(h.__N){var g=h.__[0];h.__=h.__N,h.__N=void 0,g!==h.__[0]&&(c=!0)}}),i&&i.call(this,u,f,l)||c};L.__f=!0;var i=L.shouldComponentUpdate,a=L.componentWillUpdate;L.componentWillUpdate=function(u,f,l){if(this.__e){var p=i;i=void 0,s(u,f,l),i=p}a&&a.call(this,u,f,l)},L.shouldComponentUpdate=s}return r.__N||r.__}function F(e,t){var o=Ee(K++,3);!P.__s&&_t(o.__H,t)&&(o.__=e,o.u=t,L.__H.__h.push(o))}function W(e){return Q=5,mt(function(){return{current:e}},[])}function mt(e,t){var o=Ee(K++,7);return _t(o.__H,t)&&(o.__=e(),o.__H=t,o.__h=e),o.__}function k(e,t){return Q=8,mt(function(){return e},t)}function vo(){for(var e;e=pt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(he),e.__H.__h.forEach(Re),e.__H.__h=[]}catch(t){e.__H.__h=[],P.__e(t,e.__v)}}P.__b=function(e){L=null,ut&&ut(e)},P.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),yt&&yt(e,t)},P.__r=function(e){ft&&ft(e),K=0;var t=(L=e.__c).__H;t&&(Te===L?(t.__h=[],L.__h=[],t.__.forEach(function(o){o.__N&&(o.__=o.__N),o.u=o.__N=void 0})):(t.__h.forEach(he),t.__h.forEach(Re),t.__h=[],K=0)),Te=L},P.diffed=function(e){gt&&gt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(pt.push(t)!==1&&dt===P.requestAnimationFrame||((dt=P.requestAnimationFrame)||wo)(vo)),t.__H.__.forEach(function(o){o.u&&(o.__H=o.u),o.u=void 0})),Te=L=null},P.__c=function(e,t){t.some(function(o){try{o.__h.forEach(he),o.__h=o.__h.filter(function(r){return!r.__||Re(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],P.__e(r,o.__v)}}),ht&&ht(e,t)},P.unmount=function(e){xt&&xt(e);var t,o=e.__c;o&&o.__H&&(o.__H.__.forEach(function(r){try{he(r)}catch(s){t=s}}),o.__H=void 0,t&&P.__e(t,o.__v))};var bt=typeof requestAnimationFrame=="function";function wo(e){var t,o=function(){clearTimeout(r),bt&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(o,35);bt&&(t=requestAnimationFrame(o))}function he(e){var t=L,o=e.__c;typeof o=="function"&&(e.__c=void 0,o()),L=t}function Re(e){var t=L;e.__c=e.__(),L=t}function _t(e,t){return!e||e.length!==t.length||t.some(function(o,r){return o!==e[r]})}function St(e,t){return typeof t=="function"?t(e):t}const d={fabBg:"#6366f1",fabBgHover:"#4f46e5",panelBg:"#0f172a",panelBorder:"#1e293b",panelHeaderBg:"#1e293b",toolBtnBg:"#1e293b",toolBtnBgActive:"#3b82f6",text:"#e2e8f0",textMuted:"#94a3b8",textBright:"#f8fafc",closeBtnHover:"#ef4444"},vt=48,Me=580,ko=5,Co={position:"fixed",width:`${vt}px`,height:`${vt}px`,borderRadius:"50%",backgroundColor:d.fabBg,color:"#fff",border:"none",cursor:"grab",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999,boxShadow:"0 4px 16px rgba(99, 102, 241, 0.5)",transition:"background-color 0.15s ease, box-shadow 0.15s ease, transform 0.15s ease",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},$o={position:"fixed",width:`${Me}px`,backgroundColor:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:"12px",zIndex:999998,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",color:d.text,boxShadow:"0 24px 64px rgba(0,0,0,0.7)",overflow:"hidden"},Bo={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px 0",flexShrink:0,cursor:"grab",userSelect:"none"},To={width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",lineHeight:"1",flexShrink:"0"},Eo={flex:1,overflowY:"auto",padding:"10px 12px",fontSize:"13px",color:d.textMuted,display:"block"},Ro={fontSize:11,color:"#475569",display:"flex",alignItems:"center",gap:4},Mo={width:6,height:6,borderRadius:"50%",background:"#4ade80",flexShrink:0},zo={display:"flex",gap:4,alignItems:"center"},Io={background:"none",border:"none",color:"#475569",cursor:"pointer",padding:4,borderRadius:4,fontSize:12,lineHeight:"1",display:"flex",alignItems:"center",justifyContent:"center"},Lo={background:"#1a2547",border:"1px solid #2d3b6e",color:"#a5b4fc",fontSize:10,padding:"3px 8px",borderRadius:4,whiteSpace:"nowrap",fontFamily:"inherit",lineHeight:"1.4",cursor:"pointer"},Do={display:"flex",borderBottom:`1px solid ${d.panelBorder}`,overflowX:"auto",scrollbarWidth:"none",flexShrink:0,marginTop:6},Ho={padding:"6px 10px",fontSize:11,color:"#475569",cursor:"pointer",borderBottom:"2px solid transparent",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:4,flexShrink:0,userSelect:"none",background:"none",border:"none",fontFamily:"inherit"},Po={color:"#a5b4fc",borderBottom:"2px solid #6366f1"},wt={background:"#ef4444",color:"#fff",borderRadius:6,padding:"0 4px",fontSize:9,fontWeight:"700",lineHeight:"14px"},Ao=500;let Oo=1;const Z=[],ee=[];function Fo(){const e=new WeakSet;return(t,o)=>{if(typeof o=="object"&&o!==null){if(e.has(o))return"[Circular]";e.add(o)}return o}}function No(e){if(e===null)return"null";if(e===void 0)return"undefined";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(e instanceof Error)return`${e.name}: ${e.message}`;try{return JSON.stringify(e,Fo(),2)}catch{return String(e)}}function Wo(e,t){const o={id:Oo++,level:e,args:t.map(No),timestamp:Date.now()};Z.length>=Ao&&Z.shift(),Z.push(o);for(const r of ee)r()}function U(){return[...Z]}function jo(){Z.length=0;for(const e of ee)e()}function kt(e){return ee.push(e),()=>{const t=ee.indexOf(e);t!==-1&&ee.splice(t,1)}}function Uo(){const e=["log","warn","error","info"];for(const t of e){const o=console[t].bind(console);console[t]=(...r)=>{Wo(t,r),o(...r)}}}function ze(e){const t=new Date(e.timestamp).toLocaleTimeString();return`[${e.level.toUpperCase()}] ${e.args.join(" ")} — ${t}`}function Ie(e){return`[NETWORK] ${e.method} ${e.url} → ${e.status}  ${e.duration}ms`}function Ct(e){const t=e.stack?`
  ${e.stack}`:"";return`[ERROR] ${e.message}${t}`}function $t(e){return`[${e.severity.toUpperCase()}] ${e.message}${e.detail?` — ${e.detail}`:""}`}function qo(e){return`### Console (${e.length})
${e.map(ze).join(`
`)}`}function Xo(e){return`### Network (${e.length})
${e.map(Ie).join(`
`)}`}function Bt(e){return`### Errors (${e.length})
${e.map(Ct).join(`

`)}`}function Tt(e){return`### Health Issues (${e.length})
${e.map($t).join(`
`)}`}function Yo(e,t,o,r){const s=o.slice(0,10),i=e.filter(l=>l.level==="warn").slice(0,10),a=t.filter(l=>l.status>=400).slice(0,10),u=new Date().toLocaleString(),f=[`## Page Context — ${window.location.href}`,`**Captured:** ${u}`];return s.length>0&&f.push(Bt(s)),i.length>0&&f.push(`### Console Warnings (${i.length})
${i.map(ze).join(`
`)}`),a.length>0&&f.push(`### Network Issues (${a.length})
${a.map(Ie).join(`
`)}`),r.length>0&&f.push(Tt(r)),f.join(`

`)}const Et={log:"#94a3b8",info:"#3b82f6",warn:"#eab308",error:"#ef4444"},Vo={log:"rgba(148, 163, 184, 0.15)",info:"rgba(59, 130, 246, 0.15)",warn:"rgba(234, 179, 8, 0.15)",error:"rgba(239, 68, 68, 0.15)"},Rt=["log","info","warn","error"];function Go(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${o}:${r}:${s}.${i}`}const Jo={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Ko={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Qo={display:"flex",gap:"4px",flexWrap:"wrap"},Zo={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},en={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},tn={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},on={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",position:"relative"},nn={display:"flex",alignItems:"center",gap:"6px"},rn={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},sn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},ln={color:d.text,whiteSpace:"pre-wrap",lineHeight:"1.4"},an={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function cn(e,t){return{padding:"2px 6px",borderRadius:"3px",border:"none",backgroundColor:e?Et[t]:d.toolBtnBg,color:e?"#fff":d.textMuted,cursor:"pointer",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"}}function dn(){const[e,t]=_(U),[o,r]=_(new Set(Rt)),[s,i]=_(null);F(()=>kt(()=>{t(U())}),[]);const a=k(()=>{jo(),t([])},[]),u=k(l=>{r(p=>{const c=new Set(p);return c.has(l)?c.delete(l):c.add(l),c})},[]),f=e.filter(l=>o.has(l.level));return n("div",{style:Jo},n("div",{style:Ko},n("div",{style:Qo},Rt.map(l=>n("button",{key:l,style:cn(o.has(l),l),onClick:()=>u(l),title:`Toggle ${l} entries`},l))),n("button",{style:en,onClick:()=>navigator.clipboard.writeText(qo(f)).catch(()=>{}),title:"Copy all console entries"},"Copy Console"),n("button",{style:Zo,onClick:a,title:"Clear console entries"},"Clear")),f.length===0?n("div",{style:an},"No console entries"):n("div",{style:tn},f.map((l,p)=>n("div",{key:l.id,style:{...on,backgroundColor:Vo[l.level]},onMouseEnter:()=>i(p),onMouseLeave:()=>i(null)},n("div",{style:nn},n("span",{style:{...rn,backgroundColor:Et[l.level],color:"#fff"}},l.level),n("span",{style:sn},Go(l.timestamp)),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:s===p?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:c=>{c.stopPropagation(),navigator.clipboard.writeText(ze(l)).catch(()=>{})},title:"Copy row"},"⧇")),n("div",{style:ln},l.args.join(" "))))))}const pn=200;let Le=1;const te=[],oe=[];function un(e){if(!e.response)return 0;if(typeof e.response=="string")return e.response.length;if(e.response instanceof Blob)return e.response.size;if(e.response instanceof ArrayBuffer)return e.response.byteLength;try{return JSON.stringify(e.response).length}catch{return 0}}function Mt(e){if(e==null)return 0;if(typeof e=="string")return e.length;if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(e instanceof FormData){let t=0;return e.forEach(o=>{typeof o=="string"?t+=o.length:o instanceof Blob&&(t+=o.size)}),t}return e instanceof URLSearchParams?e.toString().length:0}function zt(e){const t={};return e.forEach((o,r)=>{t[r]=o}),t}function De(e){te.length>=pn&&te.shift(),te.push(e);for(const t of oe)t()}function V(){return[...te]}function fn(){te.length=0;for(const e of oe)e()}function It(e){return oe.push(e),()=>{const t=oe.indexOf(e);t!==-1&&oe.splice(t,1)}}function gn(){const e=XMLHttpRequest.prototype,t=e.open,o=e.setRequestHeader,r=e.send,s=new WeakMap;e.open=function(i,a,...u){return s.set(this,{method:i.toUpperCase(),url:typeof a=="string"?a:String(a),requestHeaders:{},requestSize:0,startTime:0,timestamp:0}),t.call(this,i,a,...u)},e.setRequestHeader=function(i,a){const u=s.get(this);return u&&(u.requestHeaders[i]=a),o.call(this,i,a)},e.send=function(i){const a=s.get(this);return a&&(a.requestSize=Mt(i??null),a.startTime=performance.now(),a.timestamp=Date.now(),this.addEventListener("loadend",()=>{const u=performance.now()-a.startTime,f={},l=this.getAllResponseHeaders();for(const c of l.trim().split(`\r
`)){const h=c.indexOf(": ");h!==-1&&(f[c.slice(0,h).toLowerCase()]=c.slice(h+2))}const p={id:Le++,method:a.method,url:a.url,status:this.status,statusText:this.statusText||(this.status===0?"Network Error":""),duration:Math.round(u),requestSize:a.requestSize,responseSize:un(this),requestHeaders:a.requestHeaders,responseHeaders:f,startTime:a.startTime,timestamp:a.timestamp};De(p),s.delete(this)})),r.call(this,i)}}function hn(){const e=window.fetch.bind(window);window.fetch=async(t,o)=>{const r=(o?.method??"GET").toUpperCase(),s=typeof t=="string"?t:t instanceof URL?t.href:t.url,i=Mt(o?.body??null);let a={};if(o?.headers)if(o.headers instanceof Headers)a=zt(o.headers);else if(Array.isArray(o.headers))for(const[l,p]of o.headers)a[l]=p;else a={...o.headers};const u=performance.now(),f=Date.now();try{const l=await e(t,o),p=performance.now()-u,c=l.clone();let h=0;try{h=(await c.blob()).size}catch{h=0}const g={id:Le++,method:r,url:s,status:l.status,statusText:l.statusText,duration:Math.round(p),requestSize:i,responseSize:h,requestHeaders:a,responseHeaders:zt(l.headers),startTime:u,timestamp:f};return De(g),l}catch(l){const p=performance.now()-u,c={id:Le++,method:r,url:s,status:0,statusText:"Network Error",duration:Math.round(p),requestSize:i,responseSize:0,requestHeaders:a,responseHeaders:{},startTime:u,timestamp:f};throw De(c),l}},gn()}const xn={GET:"#22c55e",POST:"#3b82f6",PUT:"#eab308",DELETE:"#ef4444",PATCH:"#a855f7"},yn="#94a3b8";function mn(e){return xn[e]??yn}function bn(e){return e===0?"#ef4444":e<300?"#22c55e":e<400?"#3b82f6":e<500?"#eab308":"#ef4444"}function Lt(e){return e===0?"rgba(239, 68, 68, 0.15)":e<300?"rgba(34, 197, 94, 0.15)":e<400?"rgba(59, 130, 246, 0.15)":e<500?"rgba(234, 179, 8, 0.15)":"rgba(239, 68, 68, 0.15)"}function Dt(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${o}:${r}:${s}.${i}`}function Ht(e){return e<1e3?`${e}ms`:`${(e/1e3).toFixed(1)}s`}function Pt(e){return e===0?"0 B":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function _n(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}const Sn={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},vn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},wn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},kn={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Cn={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},$n={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Bn={display:"flex",flexDirection:"column",padding:"5px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",cursor:"pointer",transition:"background-color 0.1s ease",position:"relative"},Tn={display:"flex",alignItems:"center",gap:"6px",minWidth:"0"},En={padding:"1px 5px",borderRadius:"3px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},Rn={padding:"1px 4px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",flexShrink:"0"},Mn={flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:d.text,fontSize:"10px",minWidth:"0"},zn={fontSize:"10px",color:d.textMuted,flexShrink:"0",textAlign:"right",minWidth:"40px"},In={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Ln={marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5",wordBreak:"break-all"},He={fontWeight:"600",color:d.textBright,marginBottom:"2px",marginTop:"6px",display:"block"},Dn={color:d.textMuted},At={display:"flex",gap:"4px",color:d.textMuted,padding:"1px 0"},Ot={color:"#93c5fd",flexShrink:"0"},Hn={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function Pn({entry:e}){const t=Object.entries(e.requestHeaders),o=Object.entries(e.responseHeaders);return n("div",{style:Ln},n("span",{style:{...He,marginTop:"0"}},"General"),n("div",{style:Dn},n("div",null,`URL: ${e.url}`),n("div",null,`Method: ${e.method}`),n("div",null,`Status: ${e.status} ${e.statusText}`),n("div",null,`Duration: ${Ht(e.duration)}`),n("div",null,`Request size: ${Pt(e.requestSize)}`),n("div",null,`Response size: ${Pt(e.responseSize)}`),n("div",null,`Time: ${Dt(e.timestamp)}`)),t.length>0?n("div",null,n("span",{style:He},"Request Headers"),t.map(([r,s])=>n("div",{key:r,style:At},n("span",{style:Ot},`${r}:`),n("span",null,s)))):null,o.length>0?n("div",null,n("span",{style:He},"Response Headers"),o.map(([r,s])=>n("div",{key:r,style:At},n("span",{style:Ot},`${r}:`),n("span",null,s)))):null)}function An(){const[e,t]=_(V),[o,r]=_(null),[s,i]=_(null);F(()=>It(()=>{t(V())}),[]);const a=k(()=>{fn(),t([]),r(null)},[]),u=k(f=>{r(l=>l===f?null:f)},[]);return n("div",{style:Sn},n("div",{style:vn},n("span",{style:wn},`${e.length} request${e.length!==1?"s":""}`),n("button",{style:Cn,onClick:()=>navigator.clipboard.writeText(Xo(e)).catch(()=>{}),title:"Copy all network entries"},"Copy Network"),n("button",{style:kn,onClick:a,title:"Clear network entries"},"Clear")),e.length===0?n("div",{style:Hn},"No network requests"):n("div",{style:$n},e.map((f,l)=>{const p=o===f.id;return n("div",{key:f.id,style:{...Bn,backgroundColor:p?"rgba(59, 130, 246, 0.12)":Lt(f.status)},onClick:()=>u(f.id),onMouseEnter:()=>i(l),onMouseLeave:()=>i(null)},n("div",{style:Tn},n("span",{style:{...En,backgroundColor:mn(f.method)}},f.method),n("span",{style:{...Rn,color:bn(f.status),backgroundColor:Lt(f.status)}},f.status===0?"ERR":String(f.status)),n("span",{style:Mn,title:f.url},_n(f.url,40)),n("span",{style:zn},Ht(f.duration)),n("span",{style:In},Dt(f.timestamp)),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:s===l?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:c=>{c.stopPropagation(),navigator.clipboard.writeText(Ie(f)).catch(()=>{})},title:"Copy row"},"⧇")),p?n(Pn,{entry:f}):null)})))}const On=100;let Ft=1;const ne=[],re=[];let Pe=null;function Nt(e){Pe=e}function Wt(e){ne.length>=On&&ne.shift(),ne.push(e);for(const t of re)t();Pe&&Pe(e)}function q(){return[...ne]}function Fn(){ne.length=0;for(const e of re)e()}function jt(e){return re.push(e),()=>{const t=re.indexOf(e);t!==-1&&re.splice(t,1)}}function Nn(){const e=window.onerror;window.onerror=(t,o,r,s,i)=>{const a={id:Ft++,message:typeof t=="string"?t:"Unknown error",stack:i?.stack??"",source:o??"",line:r??0,col:s??0,timestamp:Date.now(),type:"error"};return Wt(a),typeof e=="function"?e(t,o,r,s,i):!1},window.addEventListener("unhandledrejection",t=>{const o=t.reason,r=o instanceof Error,s=r?o.message:typeof o=="string"?o:"Unhandled promise rejection",i=r?o.stack??"":"",a={id:Ft++,message:s,stack:i,source:"",line:0,col:0,timestamp:Date.now(),type:"unhandledrejection"};Wt(a)})}const Wn="#ef4444",jn="rgba(239, 68, 68, 0.15)",Un="#f97316",qn="rgba(249, 115, 22, 0.15)",Xn={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Yn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Vn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Gn={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Jn={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},Kn={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Qn={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",cursor:"pointer",position:"relative"},Zn={display:"flex",alignItems:"center",gap:"6px"},er={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},tr={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Ut={padding:"1px 0",wordBreak:"break-all"},or={...Ut,opacity:"0.5"},nr={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500",backgroundColor:"#dc2626",color:"#fff"},rr={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function ir(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${o}:${r}:${s}.${i}`}function sr(e){return e==="error"?Wn:Un}function lr(e){return e==="error"?jn:qn}function ar(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function cr(e){return e.includes("node_modules")}function dr({onReportBug:e}){const[t,o]=_(q),[r,s]=_(null),[i,a]=_(null);F(()=>jt(()=>{o(q())}),[]);const u=k(()=>{Fn(),o([]),s(null)},[]),f=k(l=>{s(p=>p===l?null:l)},[]);return n("div",{style:Xn},n("div",{style:Yn},n("span",{style:Vn},`${t.length} error${t.length!==1?"s":""}`),n("button",{style:Jn,onClick:()=>navigator.clipboard.writeText(Bt(t)).catch(()=>{}),title:"Copy all error entries"},"Copy Errors"),n("button",{style:Gn,onClick:u,title:"Clear error entries"},"Clear")),t.length===0?n("div",{style:rr},"No errors captured"):n("div",{style:Kn},t.map((l,p)=>{const c=r===l.id,h=ar(l.stack);return n("div",{key:l.id,style:{...Qn,backgroundColor:c?"rgba(239, 68, 68, 0.12)":lr(l.type)},onClick:()=>f(l.id),onMouseEnter:()=>a(p),onMouseLeave:()=>a(null)},n("div",{style:Zn},n("span",{style:{...er,backgroundColor:sr(l.type)}},l.type==="error"?"ERR":"REJ"),n("span",{style:{flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:d.text,fontSize:"10px"}},l.message),n("span",{style:tr},ir(l.timestamp)),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:i===p?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:g=>{g.stopPropagation(),navigator.clipboard.writeText(Ct(l)).catch(()=>{})},title:"Copy row"},"⧇")),c?n("div",{style:{marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5"}},l.source?n("div",{style:{color:"#93c5fd",marginBottom:"4px"}},`${l.source}:${l.line}:${l.col}`):null,h.length>0?h.map((g,x)=>n("div",{key:x,style:cr(g)?or:Ut},g)):n("span",{style:{color:d.textMuted}},"No stack trace available"),e?n("button",{style:{...nr,marginTop:"8px",width:"100%"},onClick:g=>{g.stopPropagation(),e(l)}},"Report Bug"):null):null)})))}const pr=["low","medium","high","critical"],ur={low:"#22c55e",medium:"#eab308",high:"#f97316",critical:"#ef4444"},qt={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},xe={fontSize:"11px",fontWeight:"600",color:d.textBright,marginBottom:"3px",display:"block"},Xt={width:"100%",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:d.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},fr={...Xt,minHeight:"60px",resize:"vertical",lineHeight:"1.4"},gr={display:"flex",gap:"4px"},hr={padding:"4px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flex:"1",textAlign:"center"},Ae={padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",width:"100%",marginTop:"4px"},xr={...Ae,opacity:"0.5",cursor:"not-allowed"},Yt={padding:"8px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textAlign:"center"},yr={...Yt,backgroundColor:"rgba(34, 197, 94, 0.15)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},mr={...Yt,backgroundColor:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"},br={fontSize:"10px",fontFamily:"monospace",color:d.textMuted,backgroundColor:"rgba(0, 0, 0, 0.3)",padding:"6px 8px",borderRadius:"4px",maxHeight:"60px",overflowY:"auto",lineHeight:"1.4",whiteSpace:"pre-wrap",wordBreak:"break-all"},Vt={padding:"4px 8px",borderRadius:"4px",border:"none",backgroundColor:"rgba(255, 255, 255, 0.1)",color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",alignSelf:"flex-end"};function Gt({apiClient:e,projectId:t,prefillTitle:o,prefillStack:r,onClose:s}){const[i,a]=_(o??""),[u,f]=_(""),[l,p]=_("medium"),[c,h]=_("idle"),[g,x]=_(""),b=i.trim().length>0&&c!=="submitting",S=k(async()=>{if(b){h("submitting"),x("");try{const y={projectId:t,title:i.trim(),description:u.trim(),severity:l,url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()};r&&(y.stackTrace=r),await e.createBug(y),h("success"),a(""),f(""),p("medium")}catch(y){h("error");const v=y instanceof Error?y.message:"Failed to submit bug report";x(v)}}},[b,i,u,l,t,r,e]);return c==="success"?n("div",{style:qt},n("div",{style:yr},"Bug report submitted."),n("button",{style:{...Ae,marginTop:"8px"},onClick:()=>h("idle")},"Report Another"),s?n("button",{style:{...Vt,marginTop:"4px",alignSelf:"center"},onClick:s},"Close"):null):n("div",{style:qt},s?n("button",{style:Vt,onClick:s},"Back"):null,n("div",null,n("label",{style:xe},"Title"),n("input",{style:Xt,type:"text",value:i,placeholder:"Describe the bug briefly",onInput:y=>{a(y.target.value)}})),n("div",null,n("label",{style:xe},"Description"),n("textarea",{style:fr,value:u,placeholder:"Steps to reproduce, expected vs actual behavior",onInput:y=>{f(y.target.value)}})),r?n("div",null,n("label",{style:xe},"Stack Trace"),n("div",{style:br},r)):null,n("div",null,n("label",{style:xe},"Severity"),n("div",{style:gr},pr.map(y=>n("button",{key:y,style:{...hr,backgroundColor:l===y?ur[y]:d.toolBtnBg,color:l===y?"#fff":d.textMuted},onClick:()=>p(y)},y)))),c==="error"?n("div",{style:mr},g||"Submission failed"):null,n("button",{style:b?Ae:xr,onClick:S,disabled:!b},c==="submitting"?"Submitting...":"Submit Bug Report"))}const _r={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},Sr={display:"flex",gap:"6px",flexShrink:"0"},vr={flex:"1",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:d.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},Jt={padding:"6px 10px",borderRadius:"4px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",flexShrink:"0"},wr={...Jt,opacity:"0.5",cursor:"not-allowed"},Kt={flex:"1",overflowY:"auto",fontSize:"12px",lineHeight:"1.5",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"8px",borderRadius:"4px",minHeight:"80px"},kr={...Kt,color:d.textMuted,display:"flex",alignItems:"center",justifyContent:"center",fontStyle:"italic"},Cr={padding:"8px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px"};function $r(){const e=q().slice(0,5).map(s=>`- ${s.message}`).join(`
`),t=V().filter(s=>s.status>=400).slice(0,5).map(s=>`- ${s.method} ${s.url} → ${s.status}`).join(`
`),o=U().filter(s=>s.level==="error"||s.level==="warn").slice(0,5).map(s=>`[${s.level}] ${s.args.join(" ")}`).join(`
`);return[`Page: ${window.location.href}`,e&&`Recent errors:
${e}`,t&&`Network issues:
${t}`,o&&`Console issues:
${o}`].filter(Boolean).join(`

`)}function Br({apiBase:e,pinHash:t}){const[o,r]=_(""),[s,i]=_(""),[a,u]=_("idle"),[f,l]=_(""),p=W(null),c=W(0),h=o.trim().length>0&&a!=="loading"&&a!=="streaming",g=k(async()=>{if(o.trim().length===0||a==="loading"||a==="streaming")return;const b=o.trim(),S=c.current===0?$r():"",v=(S?`Context:
${S}

---

${b}`:b).slice(0,2e3);i(""),u("loading"),l(""),p.current&&p.current.abort();const T=new AbortController;p.current=T;try{const C=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:v,context:window.location.href}),signal:T.signal});if(!C.ok)throw new Error(`Request failed (${C.status})`);const $=C.body?.getReader();if(!$)throw new Error("No response stream");u("streaming");const R=new TextDecoder;for(;;){const{done:A,value:M}=await $.read();if(A)break;const B=R.decode(M,{stream:!0});B&&i(D=>D+B)}c.current+=1,u("idle")}catch(C){if(C.name==="AbortError")return;u("error");const $=C instanceof Error?C.message:"Analysis failed";l($)}},[o,a,e,t]),x=k(b=>{b.key==="Enter"&&!b.shiftKey&&h&&(b.preventDefault(),g())},[h,g]);return n("div",{style:_r},n("div",{style:Sr},n("input",{style:vr,type:"text",value:o,placeholder:"Ask about code, errors, concepts...",onInput:b=>{r(b.target.value)},onKeyDown:x}),n("button",{style:h?Jt:wr,onClick:g,disabled:!h},a==="loading"||a==="streaming"?"...":"Send")),a==="error"?n("div",{style:Cr},f):null,s?n("div",{style:Kt},s):n("div",{style:kr},a==="loading"?"Thinking...":"Response will appear here"))}const Tr=100,Er={LCP:[2500,4e3],CLS:[.1,.25],INP:[200,500],FCP:[1800,3e3],TTFB:[800,1800]};let Rr=1;const ie=[],ye=[];function Mr(e,t){const o=Er[e];return t<=o[0]?"good":t<=o[1]?"needs-improvement":"poor"}function se(e,t){const o={id:Rr++,timestamp:Date.now(),metric:e,value:Math.round(e==="CLS"?t*1e3:t)/(e==="CLS"?1e3:1),rating:Mr(e,t)};ie.length>=Tr&&ie.shift(),ie.push(o);for(const r of ye)r(o)}function Qt(){return[...ie]}function zr(){ie.length=0}function Zt(e){return ye.push(e),()=>{const t=ye.indexOf(e);t!==-1&&ye.splice(t,1)}}function Ir(){if(!(typeof PerformanceObserver>"u")){try{new PerformanceObserver(t=>{const o=t.getEntries(),r=o[o.length-1];r&&se("LCP",r.startTime)}).observe({type:"largest-contentful-paint",buffered:!0})}catch{}try{let e=0;new PerformanceObserver(o=>{for(const r of o.getEntries()){const s=r;!s.hadRecentInput&&typeof s.value=="number"&&(e+=s.value,se("CLS",e))}}).observe({type:"layout-shift",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const o of t.getEntries())o.duration>0&&se("INP",o.duration)}).observe({type:"event",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const o of t.getEntries())o.name==="first-contentful-paint"&&se("FCP",o.startTime)}).observe({type:"paint",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const o of t.getEntries()){const r=o;r.responseStart>0&&se("TTFB",r.responseStart-r.requestStart)}}).observe({type:"navigation",buffered:!0})}catch{}}}const Oe={good:"#22c55e","needs-improvement":"#eab308",poor:"#ef4444"},Lr={good:"rgba(34, 197, 94, 0.15)","needs-improvement":"rgba(234, 179, 8, 0.15)",poor:"rgba(239, 68, 68, 0.15)"},Dr={LCP:"Largest Contentful Paint",CLS:"Cumulative Layout Shift",INP:"Interaction to Next Paint",FCP:"First Contentful Paint",TTFB:"Time to First Byte"},eo={LCP:"ms",CLS:"",INP:"ms",FCP:"ms",TTFB:"ms"},Hr=["LCP","FCP","CLS","INP","TTFB"];function Pr(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${o}:${r}:${s}`}function Ar(e){const t={};for(const o of e){const r=t[o.metric];(!r||o.id>r.id)&&(t[o.metric]=o)}return t}const Or={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Fr={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",flexShrink:"0"},Nr={fontSize:"11px",fontWeight:"600",color:d.textBright,textTransform:"uppercase",letterSpacing:"0.5px"},Wr={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},jr={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px",padding:"4px 8px 8px",flexShrink:"0"},Ur={display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",padding:"8px 6px",borderRadius:"6px",backgroundColor:d.toolBtnBg},qr={fontSize:"16px",fontWeight:"700",fontFamily:"monospace"},Xr={fontSize:"9px",fontWeight:"500",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},Yr={height:"1px",backgroundColor:d.panelBorder,margin:"0 8px",flexShrink:"0"},Vr={fontSize:"10px",fontWeight:"600",color:d.textMuted,padding:"6px 8px 2px",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},Gr={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Jr={display:"flex",alignItems:"center",gap:"6px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace"},Kr={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flexShrink:"0",color:"#fff"},Qr={fontWeight:"600",color:d.text,flexShrink:"0",minWidth:"32px"},Zr={color:d.textBright,flex:"1"},ei={fontSize:"10px",color:d.textMuted,flexShrink:"0"},ti={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function oi(e){return e==="good"?"Good":e==="needs-improvement"?"OK":"Poor"}function ni(){const[e,t]=_(Qt);F(()=>Zt(()=>{t(Qt())}),[]);const o=k(()=>{zr(),t([])},[]),r=Ar(e),s=Hr.map(i=>{const a=r[i];if(!a)return null;const u=eo[i],f=i==="CLS"?a.value.toFixed(3):`${Math.round(a.value)}`;return{metric:i,entry:a,displayValue:f,unit:u}}).filter(Boolean);return n("div",{style:Or},n("div",{style:Fr},n("span",{style:Nr},"Web Vitals"),n("button",{style:Wr,onClick:o,title:"Clear performance entries"},"Clear")),s.length>0?n("div",{style:jr},s.map(i=>n("div",{key:i.metric,style:{...Ur,borderLeft:`3px solid ${Oe[i.entry.rating]}`},title:Dr[i.metric]},n("span",{style:{...qr,color:Oe[i.entry.rating]}},`${i.displayValue}${i.unit}`),n("span",{style:Xr},i.metric)))):null,e.length>0?n("div",{style:Yr}):null,e.length>0?n("div",{style:Vr},"Event Log"):null,e.length===0?n("div",{style:ti},"Waiting for Web Vitals data..."):n("div",{style:Gr},[...e].reverse().map(i=>{const a=eo[i.metric],u=i.metric==="CLS"?i.value.toFixed(3):`${Math.round(i.value)}`;return n("div",{key:i.id,style:{...Jr,backgroundColor:Lr[i.rating]}},n("span",{style:{...Kr,backgroundColor:Oe[i.rating]}},oi(i.rating)),n("span",{style:Qr},i.metric),n("span",{style:Zr},`${u}${a}`),n("span",{style:ei},Pr(i.timestamp)))})))}const Fe="devtools-debug-snapshots",ri=5;function ii(){try{const e=localStorage.getItem(Fe);return e?JSON.parse(e):[]}catch{return[]}}function to(e){try{localStorage.setItem(Fe,JSON.stringify(e))}catch{}}let si=1;function le(e){return String(e).padStart(2,"0")}function oo(e){const t=new Date(e);return`${le(t.getHours())}:${le(t.getMinutes())}:${le(t.getSeconds())}`}function li(){const e=[];try{const t=Object.keys(localStorage).filter(o=>o!==Fe);if(t.length){const o=t.slice(0,30).map(r=>{const s=localStorage.getItem(r)??"";return`  ${r}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`localStorage (${t.length} keys):
${o.join(`
`)}`)}}catch{}try{const t=Object.keys(sessionStorage);if(t.length){const o=t.slice(0,30).map(r=>{const s=sessionStorage.getItem(r)??"";return`  ${r}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`sessionStorage (${t.length} keys):
${o.join(`
`)}`)}}catch{}return e.length?e.join(`

`):"(empty)"}function ai(){try{const t=performance.getEntriesByType("navigation")[0];return t?[`DNS: ${Math.round(t.domainLookupEnd-t.domainLookupStart)}ms`,`Connect: ${Math.round(t.connectEnd-t.connectStart)}ms`,`TTFB: ${Math.round(t.responseStart-t.requestStart)}ms`,`DOM Ready: ${Math.round(t.domContentLoadedEventEnd)}ms`,`Page Load: ${Math.round(t.loadEventEnd)}ms`].join(" | "):"(not available)"}catch{return"(not available)"}}function ci(){try{const e=document.cookie.split(";").map(t=>t.trim().split("=")[0]).filter(Boolean);return e.length?e.join(", "):"(none)"}catch{return"(unavailable)"}}function di(e,t,o){const s=new Date().toISOString().replace("T"," ").slice(0,19),i=U(),a=V(),u=q(),f=t?i.filter(g=>g.level==="error"||g.level==="warn"):[...i],l=t?a.filter(g=>g.status===0||g.status>=400):[...a],p=[];p.push(`# Debug Snapshot — ${s}`),p.push(""),p.push(`**URL:** ${window.location.href}`),document.title&&p.push(`**Page:** ${document.title}`),p.push(`**Viewport:** ${window.innerWidth} x ${window.innerHeight}`),p.push(`**User-Agent:** ${navigator.userAgent}`),p.push(`**Cookies:** ${ci()}`),p.push(""),o.trim()&&(p.push("## Notes"),p.push(o.trim()),p.push("")),e.length&&(p.push(`## Screenshots (${e.length} downloaded to ~/Downloads)`),p.push(e.map(g=>g.name).join(", ")),p.push(""));const c=t?`${f.length} warnings/errors of ${i.length} total`:`${f.length} entries`;if(p.push(`## Console — ${c}`),!f.length)p.push("(none)");else for(const g of f.slice(-60))p.push(`[${oo(g.timestamp)}] ${g.level.toUpperCase().padEnd(5)} ${g.args.join(" ")}`);p.push("");const h=t?`${l.length} errors of ${a.length} total`:`${l.length} requests`;if(p.push(`## Network — ${h}`),!l.length)p.push("(none)");else for(const g of l.slice(-40)){const x=g.status===0?"ERR":String(g.status);p.push(`${g.method.padEnd(6)} ${g.url} — ${x} (${g.duration}ms)`)}if(p.push(""),p.push(`## JavaScript Errors — ${u.length}`),!u.length)p.push("(none)");else for(const g of u){const x=g.type==="unhandledrejection"?"UnhandledRejection":"Error";if(p.push(`[${oo(g.timestamp)}] ${x}: ${g.message}`),g.source&&p.push(`  at ${g.source}:${g.line}:${g.col}`),g.stack){const b=g.stack.split(`
`).slice(1,7).map(S=>S.trim()).filter(Boolean);for(const S of b)p.push(`  ${S}`)}}return p.push(""),p.push("## Storage"),p.push(li()),p.push(""),p.push("## Page Timing"),p.push(ai()),p.join(`
`)}function pi(e){for(const t of e){const o=document.createElement("a");o.href=t.url,o.download=t.name,document.body.appendChild(o),o.click(),document.body.removeChild(o)}}async function ui(e){return new Promise(t=>{const o=URL.createObjectURL(e),r=new Image;r.onload=()=>{const s=document.createElement("canvas");s.width=r.naturalWidth,s.height=r.naturalHeight,s.getContext("2d").drawImage(r,0,0),s.toBlob(i=>t(i??e),"image/webp",.82),URL.revokeObjectURL(o)},r.onerror=()=>{URL.revokeObjectURL(o),t(e)},r.src=o})}async function fi(){let e=null;try{e=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser"},preferCurrentTab:!0});const t=document.createElement("video");t.srcObject=e,t.muted=!0,await new Promise(u=>{t.onloadedmetadata=()=>{t.play().then(u).catch(u)}}),await new Promise(u=>setTimeout(u,120));const r=Math.min(1,1440/t.videoWidth),s=document.createElement("canvas");s.width=Math.round(t.videoWidth*r),s.height=Math.round(t.videoHeight*r);const i=s.getContext("2d");let a=null;return i&&(i.drawImage(t,0,0,s.width,s.height),a=await new Promise(u=>s.toBlob(u,"image/webp",.82))),t.srcObject=null,a}finally{e?.getTracks().forEach(t=>t.stop())}}const gi={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",boxSizing:"border-box"},hi={display:"flex",flexShrink:"0",borderBottom:`1px solid ${d.panelBorder}`};function no(e){return{flex:"1",padding:"7px 4px",border:"none",borderBottom:e?`2px solid ${d.fabBg}`:"2px solid transparent",backgroundColor:"transparent",color:e?d.textBright:d.textMuted,fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"color 0.1s",boxSizing:"border-box"}}const ro={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"8px",display:"flex",flexDirection:"column",gap:"8px",boxSizing:"border-box"},Ne={fontSize:"10px",fontWeight:"600",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.4px",marginBottom:"4px",display:"block"},xi={display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"4px"};function We(e,t){return{padding:"6px",borderRadius:"4px",backgroundColor:e>0?`${t}22`:d.toolBtnBg,border:`1px solid ${e>0?t:d.panelBorder}`,textAlign:"center"}}const je={fontSize:"16px",fontWeight:"700",color:d.textBright,display:"block"},Ue={fontSize:"9px",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},yi={border:`1px dashed ${d.panelBorder}`,borderRadius:"6px",padding:"10px",minHeight:"64px",display:"flex",flexDirection:"column",gap:"6px"},mi={display:"flex",flexWrap:"wrap",gap:"4px"},bi={position:"relative",width:"56px",height:"40px",borderRadius:"3px",overflow:"hidden",flexShrink:"0",border:`1px solid ${d.panelBorder}`,cursor:"default"},_i={width:"100%",height:"100%",objectFit:"cover"},Si={position:"absolute",top:"1px",right:"1px",width:"14px",height:"14px",borderRadius:"2px",border:"none",backgroundColor:"rgba(0,0,0,0.7)",color:"#fff",fontSize:"9px",lineHeight:"1",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},vi={fontSize:"11px",color:d.textMuted,textAlign:"center"},io={display:"flex",gap:"4px"};function me(e="muted"){const t=e==="primary"?d.fabBg:e==="danger"?"#7f1d1d":d.toolBtnBg,o=e==="primary"?"#fff":e==="danger"?"#fca5a5":d.textMuted;return{flex:"1",padding:"5px 8px",borderRadius:"4px",border:"none",backgroundColor:t,color:o,fontSize:"11px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap"}}const wi=e=>({width:"100%",padding:"9px 12px",borderRadius:"6px",border:"none",backgroundColor:e?"#1e293b":d.fabBg,color:e?d.textMuted:"#fff",fontSize:"12px",fontWeight:"600",cursor:e?"not-allowed":"pointer"}),ki=e=>({padding:"3px 8px",borderRadius:"4px",border:`1px solid ${e?d.fabBg:d.panelBorder}`,backgroundColor:e?`${d.fabBg}33`:"transparent",color:e?"#93c5fd":d.textMuted,fontSize:"10px",cursor:"pointer",fontWeight:"500"}),Ci={borderRadius:"6px",border:`1px solid ${d.panelBorder}`,backgroundColor:d.toolBtnBg,padding:"8px",display:"flex",flexDirection:"column",gap:"4px"},$i={fontSize:"10px",color:d.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Bi={fontSize:"10px",color:d.textMuted},Ti={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px",padding:"20px",textAlign:"center"};function Ei(){const[e,t]=_("capture"),[o,r]=_([]),s=W(o),[i,a]=_(ii),[u,f]=_(!1),[l,p]=_(null),[c,h]=_(!0),[g,x]=_("");F(()=>{s.current=o},[o]),F(()=>()=>{for(const m of s.current)URL.revokeObjectURL(m.url)},[]),F(()=>{if(e!=="capture")return;function m(z){const O=z.clipboardData?.items;if(O){for(const H of Array.from(O))if(H.type.startsWith("image/")){const w=H.getAsFile();w&&ui(w).then(N=>b(N))}}}return window.addEventListener("paste",m),()=>window.removeEventListener("paste",m)},[e]);function b(m){const z=si++,O=URL.createObjectURL(m),H=m.type==="image/webp"?"webp":m.type==="image/jpeg"?"jpg":"png";r(w=>[...w,{id:z,url:O,blob:m,name:`screenshot-${z}.${H}`}])}const S=k(async()=>{f(!0);try{const m=await fi();m&&b(m)}catch{}f(!1)},[]),y=k(m=>{r(z=>{const O=z.find(H=>H.id===m);return O&&URL.revokeObjectURL(O.url),z.filter(H=>H.id!==m)})},[]),v=k(()=>{r(m=>{for(const z of m)URL.revokeObjectURL(z.url);return[]})},[]),T=k(m=>{p(m),setTimeout(()=>p(null),2e3)},[]),C=k(async()=>{const m=di(o,c,g);o.length>0&&pi(o);const z={id:String(Date.now()),timestamp:Date.now(),pageUrl:window.location.href,report:m};a(O=>{const H=[z,...O].slice(0,ri);return to(H),H}),await navigator.clipboard.writeText(m),T(z.id)},[o,c,g,T]),$=k(async m=>{await navigator.clipboard.writeText(m.report),T(m.id)},[T]),R=k(m=>{a(z=>{const O=z.filter(H=>H.id!==m);return to(O),O})},[]),A=U(),M=V(),B=q(),D=A.filter(m=>m.level==="error"||m.level==="warn").length,I=M.filter(m=>m.status===0||m.status>=400).length;return n("div",{style:gi},n("div",{style:hi},n("button",{style:no(e==="capture"),onClick:()=>t("capture")},"Capture"),n("button",{style:no(e==="history"),onClick:()=>t("history")},`History (${i.length})`)),e==="capture"?n("div",{style:ro},n("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},n("span",{style:Ne},"Report data"),n("button",{style:ki(c),onClick:()=>h(m=>!m)},c?"Errors only":"All entries")),n("div",{style:xi},n("div",{style:We(D,"#eab308")},n("span",{style:je},String(D)),n("span",{style:Ue},"Console")),n("div",{style:We(I,"#ef4444")},n("span",{style:je},String(I)),n("span",{style:Ue},"Net Errors")),n("div",{style:We(B.length,"#ef4444")},n("span",{style:je},String(B.length)),n("span",{style:Ue},"JS Errors"))),n("div",null,n("span",{style:Ne},`Screenshots (${o.length})`),n("div",{style:yi},o.length===0?n("div",{style:vi},"Cmd+V to paste a screenshot",n("br",null),"or click Capture below"):n("div",{style:mi},o.map(m=>n("div",{key:m.id,style:bi,title:m.name},n("img",{src:m.url,style:_i,alt:m.name}),n("button",{style:Si,onClick:()=>y(m.id),title:"Remove"},"×")))),n("div",{style:io},n("button",{style:me("muted"),onClick:S,disabled:u,title:"Capture current screen (opens share dialog)"},u?"Capturing...":"Capture Screen"),o.length>0?n("button",{style:me("danger"),onClick:v,title:"Delete all screenshots"},"Delete All"):null))),n("div",null,n("span",{style:Ne},"Notes (optional)"),n("textarea",{value:g,onInput:m=>x(m.target.value),placeholder:"Add your own comments or context…",rows:3,style:{width:"100%",background:d.toolBtnBg,border:`1px solid ${d.panelBorder}`,borderRadius:"4px",color:d.text,fontSize:"11px",padding:"5px 6px",resize:"vertical",fontFamily:"system-ui, -apple-system, sans-serif",boxSizing:"border-box"}})),n("button",{style:wi(!1),onClick:C,title:"Copy debug report to clipboard. Screenshots (if any) download as files."},l?"Copied!":"Copy Report & Download Screenshots"),n("p",{style:{fontSize:10,color:d.textMuted,textAlign:"center",padding:"4px 8px"}},"Screenshots save to ~/Downloads · ",n("a",{style:{color:"#475569",textDecoration:"underline",cursor:"pointer"},href:"/settings/widget",target:"_blank"},"Set label in Settings"))):n("div",{style:{...ro,gap:"6px"}},i.length===0?n("div",{style:Ti},"No snapshots yet. Copy a report from the Capture tab to save it here."):i.map(m=>{const z=new Date(m.timestamp),O=`${z.toLocaleDateString()} ${le(z.getHours())}:${le(z.getMinutes())}`,H=l===m.id;return n("div",{key:m.id,style:Ci},n("div",{style:Bi},O),n("div",{style:$i,title:m.pageUrl},m.pageUrl),n("div",{style:io},n("button",{style:me(H?"primary":"muted"),onClick:()=>$(m)},H?"Copied!":"Copy Report"),n("button",{style:me("danger"),onClick:()=>R(m.id)},"Delete")))})))}let so={localStorage:{},sessionStorage:{},cookies:""};function Ri(){const e={};try{for(let o=0;o<window.localStorage.length;o++){const r=window.localStorage.key(o);e[r]=window.localStorage.getItem(r)??""}}catch{}const t={};try{for(let o=0;o<window.sessionStorage.length;o++){const r=window.sessionStorage.key(o);t[r]=window.sessionStorage.getItem(r)??""}}catch{}return so={localStorage:e,sessionStorage:t,cookies:document.cookie},so}function Mi(){const[e,t]=_({localStorage:{},sessionStorage:{},cookies:""}),[o,r]=_("ls");F(()=>{t(Ri())},[]);const s=(u,f)=>n("button",{style:{padding:"4px 10px",fontSize:11,cursor:"pointer",border:"none",fontFamily:"inherit",background:o===u?d.toolBtnBgActive:"transparent",color:o===u?"#fff":d.textMuted,borderRadius:4},onClick:()=>r(u)},f),i=o==="ls"?e.localStorage:o==="ss"?e.sessionStorage:null,a=i?Object.entries(i):[];return n("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},n("div",{style:{display:"flex",gap:4,padding:"6px 8px",borderBottom:`1px solid ${d.panelBorder}`}},s("ls","localStorage"),s("ss","sessionStorage"),s("cookies","Cookies")),n("div",{style:{flex:1,overflowY:"auto"}},o==="cookies"?n("pre",{style:{padding:12,fontSize:10,color:d.text,fontFamily:"monospace",whiteSpace:"pre-wrap"}},e.cookies||"(empty)"):a.length===0?n("p",{style:{padding:12,fontSize:11,color:d.textMuted}},"(empty)"):a.map(([u,f])=>n("div",{key:u,style:{display:"flex",gap:8,padding:"4px 12px",borderBottom:`1px solid ${d.panelBorder}`,fontSize:11}},n("span",{style:{color:d.textMuted,flexShrink:0,width:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},u),n("span",{style:{color:d.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontFamily:"monospace"}},f)))))}const lo=[],be=[];let ao=!1;function _e(e){lo.push(e),be.forEach(t=>t())}function qe(){return[...lo]}function zi(e){return be.push(e),()=>{const t=be.indexOf(e);t!==-1&&be.splice(t,1)}}function Ii(){if(ao)return;ao=!0,document.querySelectorAll("img").forEach(o=>{o.complete&&o.naturalWidth===0&&o.src&&_e({severity:"error",category:"image",message:"Broken image",detail:o.src})});const e=document.querySelectorAll("img:not([alt])");e.length>0&&_e({severity:"warn",category:"alt-text",message:`${e.length} image(s) missing alt text`});const t=o=>{_e({severity:"error",category:"mixed-content",message:"Mixed content blocked",detail:o.blockedURI})};document.addEventListener("securitypolicyviolation",t);try{new PerformanceObserver(r=>{for(const s of r.getEntries()){const i=s;i.duration>2e3&&_e({severity:"warn",category:"slow-resource",message:`Slow resource: ${Math.round(i.duration)}ms`,detail:i.name})}}).observe({type:"resource",buffered:!0})}catch{}}function Li(){const[e,t]=_([]),[o,r]=_(null);return F(()=>(t(qe()),zi(()=>t(qe()))),[]),n("div",{style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden"}},n("div",{style:{display:"flex",alignItems:"center",padding:"4px 12px",borderBottom:`1px solid ${d.panelBorder}`,flexShrink:0}},n("span",{style:{fontSize:10,color:d.textMuted}},`${e.length} issue${e.length!==1?"s":""}`),n("button",{style:{marginLeft:"auto",background:"none",border:`1px solid ${d.panelBorder}`,borderRadius:4,color:d.textMuted,cursor:"pointer",fontSize:10,padding:"2px 8px",fontFamily:"inherit"},onClick:()=>navigator.clipboard.writeText(Tt(e)).catch(()=>{}),title:"Copy all health issues"},"Copy Health")),n("div",{style:{flex:1,overflowY:"auto"}},e.length===0?n("p",{style:{padding:16,fontSize:12,color:d.textMuted}},"No health issues detected."):e.map((s,i)=>n("div",{key:`${s.category}:${s.message}:${i}`,style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`,display:"flex",flexDirection:"column",gap:2,position:"relative"},onMouseEnter:()=>r(i),onMouseLeave:()=>r(null)},n("div",{style:{display:"flex",alignItems:"center",gap:6}},n("span",{style:{fontSize:10,fontWeight:600,color:s.severity==="error"?"#ef4444":"#f59e0b",textTransform:"uppercase"}},s.severity),n("span",{style:{fontSize:11,color:d.text}},s.message),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:o===i?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:a=>{a.stopPropagation(),navigator.clipboard.writeText($t(s)).catch(()=>{})},title:"Copy row"},"⧇")),s.detail&&n("span",{style:{fontSize:10,color:d.textMuted,fontFamily:"monospace",marginLeft:12}},s.detail)))))}function Di({apiBase:e,pinHash:t,projectId:o}){const[r,s]=_([]),[i,a]=_(null),[u,f]=_([]),l={"X-DevTools-Pin":t,"Content-Type":"application/json"};F(()=>{const b=new AbortController,S=b.signal;return fetch(`${e}/api/routines?projectId=${o}`,{headers:l,signal:S}).then(y=>{if(!y.ok)throw new Error(y.statusText);return y.json()}).then(s).catch(()=>{}),fetch(`${e}/api/routines/runs?projectId=${o}`,{headers:l,signal:S}).then(y=>{if(!y.ok)throw new Error(y.statusText);return y.json()}).then(async y=>{if(!y)return;a(y);const v=await fetch(`${e}/api/routines/${y.checklistId}/items`,{headers:l,signal:S}).then(T=>{if(!T.ok)throw new Error(T.statusText);return T.json()}).catch(()=>[]);f(v)}).catch(()=>{}),()=>b.abort()},[o,t]);async function p(b){try{const S=await fetch(`${e}/api/routines/${b}/runs`,{method:"POST",headers:l});if(!S.ok)return;const y=await S.json(),[v,T]=await Promise.all([fetch(`${e}/api/routines/runs/${y.id}`,{headers:l}).then(C=>{if(!C.ok)throw new Error(C.statusText);return C.json()}),fetch(`${e}/api/routines/${b}/items`,{headers:l}).then(C=>{if(!C.ok)throw new Error(C.statusText);return C.json()})]);a(v),f(T)}catch{}}async function c(b,S){i&&(await fetch(`${e}/api/routines/runs/${i.id}/items?itemId=${b}`,{method:"PUT",headers:l,body:JSON.stringify({checked:S})}).catch(()=>{}),a(y=>y?{...y,items:y.items?.map(v=>v.itemId===b?{...v,checked:S?1:0}:v)}:null))}const h=i?.items?.length??0,g=i?.items?.filter(b=>b.checked).length??0,x=h>0?Math.round(g/h*100):0;return i?n("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},n("div",{style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`}},n("div",{style:{height:4,background:"#1e293b",borderRadius:2,overflow:"hidden"}},n("div",{style:{height:"100%",background:"#6366f1",borderRadius:2,width:`${x}%`,transition:"width .2s"}})),n("span",{style:{fontSize:10,color:d.textMuted,marginTop:4,display:"block"}},`${g} / ${h} complete`)),n("div",{style:{flex:1,overflowY:"auto",padding:"4px 0"}},(i.items??[]).map(b=>{const S=u.find(y=>y.id===b.itemId);return n("div",{key:b.id,style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`}},n("div",{style:{display:"flex",alignItems:"center",gap:8}},n("input",{type:"checkbox",checked:b.checked===1,onChange:y=>c(b.itemId,y.target.checked)}),n("span",{style:{fontSize:11,color:b.checked?d.textMuted:d.text,textDecoration:b.checked?"line-through":"none"}},S?.name??`Item ${b.itemId}`)),S?.snippet&&window.innerWidth>=768&&n("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:4,marginLeft:22}},n("code",{style:{fontSize:10,color:"#94a3b8",background:"#0a0f1a",padding:"2px 6px",borderRadius:3,fontFamily:"monospace",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},S.snippet),n("button",{style:{background:"none",border:"none",color:d.textMuted,cursor:"pointer",fontSize:12},onClick:()=>navigator.clipboard.writeText(S.snippet??"").catch(()=>{})},"⧇")))})),n("button",{style:{margin:8,padding:"6px 0",border:`1px solid ${d.panelBorder}`,borderRadius:6,background:"none",color:d.textMuted,fontSize:11,cursor:"pointer",fontFamily:"inherit"},onClick:async()=>{i&&await fetch(`${e}/api/routines/runs/${i.id}`,{method:"PUT",headers:l,body:JSON.stringify({close:!0})}).catch(()=>{}),a(null)}},"Close Run")):n("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:8}},n("p",{style:{fontSize:11,color:d.textMuted}},"Start a checklist run:"),...r.map(b=>n("button",{key:b.id,style:{padding:"7px 12px",borderRadius:6,background:d.toolBtnBg,border:`1px solid ${d.panelBorder}`,color:d.text,fontSize:11,cursor:"pointer",textAlign:"left",fontFamily:"inherit"},onClick:()=>p(b.id)},"▶ "+b.name)),r.length===0&&n("p",{style:{fontSize:10,color:d.textMuted}},"No checklists. Create one in Dashboard → Routines."))}const Hi=[{id:"console",label:"Console",icon:">_"},{id:"network",label:"Network",icon:"⇄"},{id:"errors",label:"Errors",icon:"⚠"},{id:"perf",label:"Perf",icon:"⚡"},{id:"storage",label:"Storage",icon:"◫"},{id:"dom",label:"DOM",icon:"⬡"},{id:"health",label:"Health",icon:"♥"},{id:"routines",label:"Routines",icon:"✓"},{id:"ai",label:"AI",icon:"✦"},{id:"bugs",label:"Bugs",icon:"⌖"},{id:"snapshot",label:"Snapshot",icon:"◎"}];function Pi({projectId:e,isOpen:t,onClose:o,apiClient:r,apiBase:s,pinHash:i}){const[a,u]=_("errors"),[f,l]=_(!1),[p,c]=_(!1),[h,g]=_(null),[x,b]=_(""),[S,y]=_(""),[v,T]=_({errors:0,console:0}),C=typeof window<"u"?window.location.hostname:e,[$,R]=_(()=>{const w=typeof window<"u"?window.innerWidth:1200,N=typeof window<"u"?window.innerHeight:800,X=Math.min(N*.85,520);return{x:Math.max(0,w-Me-24),y:Math.max(0,N-X-82)}}),[A,M]=_(!1),B=W(null);F(()=>{function w(){T({errors:q().length,console:U().filter(X=>X.level==="warn"||X.level==="error").length})}w();const N=setInterval(w,2e3);return()=>clearInterval(N)},[]);const D=k(w=>{w.target.closest("button")||(w.currentTarget.setPointerCapture(w.pointerId),B.current={startX:w.clientX,startY:w.clientY,originX:$.x,originY:$.y},M(!0))},[$.x,$.y]),I=k(w=>{if(!B.current)return;const{startX:N,startY:X,originX:Ye,originY:_s}=B.current,Ss=window.innerWidth-Me,vs=window.innerHeight-48;R({x:Math.max(0,Math.min(Ss,Ye+(w.clientX-N))),y:Math.max(0,Math.min(vs,_s+(w.clientY-X)))})},[]),m=k(()=>{B.current=null,M(!1)},[]),z=k(w=>{b(w.message),y(w.stack),u("bugs")},[]),O=k(w=>{a==="bugs"&&w!=="bugs"&&(b(""),y("")),u(w)},[a]);function H(){switch(a){case"console":return n(dn,null);case"network":return n(An,null);case"errors":return n(dr,{onReportBug:z});case"bugs":return n(Gt,{apiClient:r,projectId:e,prefillTitle:x||void 0,prefillStack:S||void 0});case"perf":return n(ni,null);case"storage":return n(Mi,null);case"health":return n(Li,null);case"routines":return n(Di,{apiBase:s,pinHash:i,projectId:e});case"ai":return n(Br,{apiBase:s,pinHash:i});case"snapshot":return n(Ei,null);case"dom":return n("div",{style:{padding:"40px 20px",textAlign:"center",color:"#334155",fontSize:13}},"Click any element on the page to inspect it.");default:return n("div",{style:{padding:"40px 20px",textAlign:"center",color:"#334155",fontSize:13}},`${a} — coming soon`)}}return n("div",{style:{...$o,left:`${$.x}px`,top:`${$.y}px`,height:f?"auto":"min(85vh, 520px)",opacity:t?"1":"0",transition:"opacity 0.2s ease",pointerEvents:t?"auto":"none"},"aria-hidden":!t},n("div",{style:{...Bo,cursor:A?"grabbing":"grab"},onPointerDown:D,onPointerMove:I,onPointerUp:m},n("div",{style:Ro},n("div",{style:Mo}),n("span",null,C)),n("div",{style:zo},n("button",{style:Lo,title:"Copy full page context for Claude",onClick:()=>{const w=Yo([...U()],[...V()],[...q()],qe());navigator.clipboard.writeText(w).catch(()=>{})}},"Copy for Claude"),n("button",{style:Io,title:"Minimize",onClick:()=>l(w=>!w)},"—"),n("button",{style:{...To,backgroundColor:p?"#ef4444":"transparent",color:p?"#fff":"#475569"},onClick:o,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),"aria-label":"Close panel",title:"Close"},"✕"))),f?null:n("div",{style:Do},Hi.map(w=>{const N=a===w.id,X=w.id==="errors"?v.errors:w.id==="console"?v.console:0,Ye=w.id==="console";return n("button",{key:w.id,style:{...Ho,...N?Po:{},borderBottom:N?"2px solid #6366f1":"2px solid transparent",color:N?"#a5b4fc":h===w.id?"#94a3b8":"#475569"},onClick:()=>O(w.id),onMouseEnter:()=>g(w.id),onMouseLeave:()=>g(null)},w.icon," ",w.label,X>0?n("span",{style:Ye?{...wt,background:"#d97706"}:wt},X):null)})),f?null:n("div",{style:{...Eo,padding:0}},n("div",{style:{height:"100%",overflowY:"auto",padding:"10px 12px",fontSize:"13px",color:"#94a3b8"}},H())))}const co={isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0,moved:!1},Ai=n("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},n("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}));function Oi({projectId:e,pinHash:t,apiBase:o,apiClient:r}){const[s,i]=_(!1),[a,u]=_(!1),[f,l]=_({x:0,y:0}),[p,c]=_(!1),[h,g]=_(0),x=W(co),b=W(null);F(()=>{function $(){const A=q().length,M=U().filter(B=>B.level==="warn"||B.level==="error").length;g(A+M)}$();const R=setInterval($,2e3);return()=>clearInterval(R)},[]);const S=k($=>{$.currentTarget.setPointerCapture($.pointerId),x.current={isDragging:!0,startX:$.clientX,startY:$.clientY,offsetX:f.x,offsetY:f.y,moved:!1},c(!0)},[f.x,f.y]),y=k($=>{const R=x.current;if(!R.isDragging)return;const A=$.clientX-R.startX,M=$.clientY-R.startY;Math.sqrt(A*A+M*M)>ko&&(x.current={...R,moved:!0}),l({x:R.offsetX+A,y:R.offsetY+M})},[]),v=k(()=>{const R=x.current.moved;x.current={...co},c(!1),R||i(A=>!A)},[]),T=k(()=>{i(!1)},[]),C={...Co,bottom:`${24-f.y}px`,right:`${24-f.x}px`,backgroundColor:a?d.fabBgHover:d.fabBg,boxShadow:a?"0 6px 20px rgba(99, 102, 241, 0.6)":"0 4px 16px rgba(99, 102, 241, 0.5)",transform:a?"scale(1.05)":"scale(1)",cursor:p?"grabbing":"grab"};return n("div",null,n("button",{ref:b,style:{...C,overflow:"visible"},title:`DevTools (${e})`,"aria-label":"Toggle DevTools panel",onPointerDown:S,onPointerMove:y,onPointerUp:v,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)},Ai,h>0?n("span",{style:{position:"absolute",top:"-4px",right:"-4px",width:"18px",height:"18px",background:"#ef4444",borderRadius:"50%",fontSize:"9px",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",border:"2px solid #0f172a",lineHeight:"1"}},h>99?"99+":String(h)):null),n(Pi,{projectId:e,isOpen:s,onClose:T,apiClient:r,apiBase:o,pinHash:t}))}function po(e,t){async function o(r,s={}){return(await fetch(`${e}${r}`,{...s,headers:{"Content-Type":"application/json","X-DevTools-Pin":t,...s.headers}})).json()}return{createBug:r=>o("/api/bugs",{method:"POST",body:JSON.stringify(r)}),createDevLog:r=>o("/api/devlog",{method:"POST",body:JSON.stringify(r)}),sendEvents:r=>o("/api/widget/event",{method:"POST",body:JSON.stringify({events:r})})}}const Fi=console.warn.bind(console),Ni=1e4,Wi=50,ji=200,Ui=new Set(["log","info","warn","error","debug"]);function qi(e,t,o){let r=[];function s(p){r.length>=ji||(r.push(p),r.length>=Wi&&i())}function i(){if(r.length===0)return;const p=[...r];r=[],t.sendEvents(p).catch(c=>{Fi("[DevTools] Failed to send events:",c)})}function a(){if(r.length===0)return;const p=[...r];r=[];const c=JSON.stringify({events:p}),h=`${o}/api/widget/event`;try{const g=new Blob([c],{type:"application/json"});navigator.sendBeacon(h,g)}catch{}}let u=0;jt(()=>{const c=q().filter(h=>h.id>u);if(c.length>0){u=c[c.length-1].id;for(const h of c)s({type:"error",title:h.message,content:h.stack,metadata:{errorType:h.type,source:h.source,line:h.line,col:h.col},projectId:e})}}),Zt(p=>{s({type:"perf",title:`${p.metric}: ${p.value}`,content:`Rating: ${p.rating}`,metadata:{metric:p.metric,value:p.value,rating:p.rating},projectId:e})});let f=0;kt(()=>{const c=U().filter(h=>h.id>f);if(c.length>0){f=c[c.length-1].id;for(const h of c){if(!Ui.has(h.level))continue;const g=h.args.join(" ");g.includes("/api/widget/")||g.includes("/api/ai/analyze")||s({type:"console",title:g.slice(0,500),content:h.args.join(`
`).slice(0,2e3),metadata:{level:h.level,argCount:h.args.length},projectId:e})}}});let l=0;It(()=>{const c=V().filter(h=>h.id>l);if(c.length>0){l=c[c.length-1].id;for(const h of c)h.url.includes("/api/widget/")||h.url.includes("/api/bugs")||h.url.includes("/api/ai/analyze")||s({type:"network",title:`${h.method} ${h.url}`.slice(0,500),content:`${h.status} ${h.statusText} (${h.duration}ms)`,metadata:{method:h.method,url:h.url,status:h.status,statusText:h.statusText,duration:h.duration,requestSize:h.requestSize,responseSize:h.responseSize},projectId:e})}}),setInterval(i,Ni),window.addEventListener("beforeunload",a)}function Xi(e,t,o){Uo(),hn(),Nn(),Ir();const r=po(o,t);qi(e,r,o)}const Yi=1e4,Vi={position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"280px",backgroundColor:"#1a0000",border:"1px solid #dc2626",borderRadius:"8px",boxShadow:"0 8px 24px rgba(220, 38, 38, 0.3)",zIndex:"999997",fontFamily:"system-ui, -apple-system, sans-serif",color:d.text,overflow:"hidden",display:"flex",flexDirection:"column"},Gi={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:"rgba(220, 38, 38, 0.2)",borderBottom:"1px solid #dc2626",flexShrink:"0"},Ji={fontSize:"12px",fontWeight:"600",color:"#fca5a5"},Ki={display:"flex",gap:"6px"},uo={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500"},Qi={...uo,backgroundColor:"#dc2626",color:"#fff"},Zi={...uo,backgroundColor:"rgba(255, 255, 255, 0.1)",color:d.textMuted},es={padding:"8px 12px",overflowY:"auto",flex:"1"},ts={fontSize:"12px",fontWeight:"500",color:"#fca5a5",marginBottom:"6px",wordBreak:"break-word"},os={fontSize:"10px",fontFamily:"monospace",lineHeight:"1.6",color:d.textMuted},fo={padding:"1px 0",wordBreak:"break-all"},ns={...fo,opacity:"0.5"};function rs(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function is(e){return e.includes("node_modules")}function ss({onReportBug:e}){const[t,o]=_(null),r=W(null),s=k(()=>{o(null),r.current&&(clearTimeout(r.current),r.current=null)},[]),i=k(()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{o(null),r.current=null},Yi)},[]);F(()=>(Nt(p=>{o(p),i()}),()=>{Nt(null),r.current&&clearTimeout(r.current)}),[i]);const a=k(()=>{r.current&&(clearTimeout(r.current),r.current=null)},[]),u=k(()=>{t&&i()},[t,i]),f=k(()=>{t&&(e(t),s())},[t,e,s]);if(!t)return null;const l=rs(t.stack);return n("div",{style:Vi,onMouseEnter:a,onMouseLeave:u},n("div",{style:Gi},n("span",{style:Ji},t.type==="error"?"Uncaught Error":"Unhandled Rejection"),n("div",{style:Ki},n("button",{style:Qi,onClick:f},"Report Bug"),n("button",{style:Zi,onClick:s},"Dismiss"))),n("div",{style:es},n("div",{style:ts},t.message),l.length>0?n("div",{style:os},l.slice(0,8).map((p,c)=>n("div",{key:c,style:is(p)?ns:fo},p))):null))}const ls={position:"fixed",padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",zIndex:999999,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"4px",fontFamily:"system-ui, -apple-system, sans-serif"},as={position:"fixed",width:"360px",maxHeight:"320px",backgroundColor:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:999999,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",overflow:"hidden"},cs={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:d.panelHeaderBg,borderBottom:`1px solid ${d.panelBorder}`,flexShrink:0},ds={fontSize:"12px",fontWeight:"600",color:d.textBright},ps={width:"24px",height:"24px",borderRadius:"4px",border:"none",backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",lineHeight:"1"},us={padding:"12px",overflowY:"auto",flex:1,fontSize:"13px",lineHeight:"1.5",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word"},fs={padding:"16px 12px",fontSize:"12px",color:d.textMuted,textAlign:"center"},gs={padding:"12px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",margin:"8px 12px"};function go(e,t,o,r){const s=Math.min(Math.max(e,8),window.innerWidth-o-8),i=Math.min(Math.max(t,8),window.innerHeight-r-8);return{x:s,y:i}}function hs({apiBase:e,pinHash:t}){const[o,r]=_(""),[s,i]=_(null),[a,u]=_(null),[f,l]=_("idle"),[p,c]=_(""),[h,g]=_(""),[x,b]=_(!1),[S,y]=_(!1),v=W(null),T=W(null),C=k(()=>{i(null),u(null),r(""),l("idle"),c(""),g(""),v.current&&(v.current.abort(),v.current=null)},[]);F(()=>{function M(B){if(B.target.closest?.("[data-quickai]"))return;const m=window.getSelection()?.toString().trim()??"";if(m.length>10){r(m);const z=go(B.clientX,B.clientY-40,90,30);i(z)}else a||(i(null),r(""))}return document.addEventListener("mouseup",M),()=>document.removeEventListener("mouseup",M)},[a]),F(()=>{if(!a)return;function M(D){D.target.closest?.("[data-quickai]")||C()}const B=setTimeout(()=>{document.addEventListener("mousedown",M)},100);return()=>{clearTimeout(B),document.removeEventListener("mousedown",M)}},[a,C]);const $=k(async()=>{if(!o)return;const M=s?go(s.x,s.y+36,360,320):{x:100,y:100};u(M),i(null),l("loading"),c(""),g(""),v.current&&v.current.abort();const B=new AbortController;v.current=B;try{const D=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:o,context:window.location.href}),signal:B.signal});if(!D.ok)throw new Error(`Analysis failed (${D.status})`);const I=D.body?.getReader();if(!I)throw new Error("No response stream");l("streaming");const m=new TextDecoder;for(;;){const{done:z,value:O}=await I.read();if(z)break;const H=m.decode(O,{stream:!0});H&&c(w=>w+H)}l("done")}catch(D){if(D.name==="AbortError")return;l("error");const I=D instanceof Error?D.message:"Analysis failed";g(I)}},[o,s,e,t]),R=s?n("button",{"data-quickai":"btn",style:{...ls,left:`${s.x}px`,top:`${s.y}px`,backgroundColor:x?d.fabBgHover:d.fabBg},onClick:$,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)},"✨ Analyze"):null,A=a?n("div",{ref:T,"data-quickai":"popup",style:{...as,left:`${a.x}px`,top:`${a.y}px`}},n("div",{style:cs},n("span",{style:ds},"AI Analysis"),n("button",{style:{...ps,backgroundColor:S?d.closeBtnHover:"transparent",color:S?"#fff":d.textMuted},onClick:C,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),"aria-label":"Close"},"✕")),f==="loading"?n("div",{style:fs},"Analyzing..."):f==="error"?n("div",{style:gs},h):n("div",{style:us},p||"Waiting...")):null;return n("div",{"data-quickai":"root"},R,A)}const xs=["All","Standards","Git","API","Deploy"];function ys({apiBase:e,pinHash:t,onClose:o}){const[r,s]=_(""),[i,a]=_("All"),[u,f]=_([]),[l,p]=_(null),c=W(null);F(()=>{fetch(`${e}/api/hub/kb`,{headers:{"X-DevTools-Pin":t}}).then(x=>{if(!x.ok)throw new Error(x.statusText);return x.json()}).then(x=>{Array.isArray(x)&&f(x)}).catch(()=>{}),setTimeout(()=>c.current?.focus(),50)},[e,t]);function h(x){navigator.clipboard.writeText(x.snippet??x.title).then(()=>{p(x.id),setTimeout(()=>p(null),1500)}).catch(()=>{})}const g=u.filter(x=>{const b=i==="All"||x.type===i,S=!r||x.title.toLowerCase().includes(r.toLowerCase())||(x.snippet??"").toLowerCase().includes(r.toLowerCase());return b&&S});return n("div",{style:{position:"fixed",inset:0,zIndex:2147483647,background:"rgba(0,0,0,0.75)",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:96},onClick:o},n("div",{style:{width:"100%",maxWidth:600,background:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:8,overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.8)",fontFamily:"system-ui,sans-serif"},onClick:x=>x.stopPropagation()},n("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",borderBottom:`1px solid ${d.panelBorder}`}},n("input",{ref:c,value:r,style:{flex:1,background:"transparent",border:"none",outline:"none",color:d.text,fontSize:13,fontFamily:"inherit"},placeholder:"Search knowledge base...",onInput:x=>s(x.target.value)}),n("button",{style:{background:"none",border:"none",color:d.textMuted,cursor:"pointer",fontSize:16},onClick:o},"✕")),n("div",{style:{display:"flex",gap:4,padding:"6px 10px",borderBottom:`1px solid ${d.panelBorder}`}},xs.map(x=>n("button",{key:x,style:{padding:"2px 10px",borderRadius:99,fontSize:11,cursor:"pointer",border:"none",fontFamily:"inherit",background:i===x?d.toolBtnBgActive:d.toolBtnBg,color:i===x?"#fff":d.textMuted},onClick:()=>a(x)},x))),n("div",{style:{maxHeight:360,overflowY:"auto"}},g.length===0?n("p",{style:{padding:"24px 14px",textAlign:"center",color:d.textMuted,fontSize:12}},"No results"):g.map(x=>n("div",{key:x.id,style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"10px 14px",borderBottom:`1px solid ${d.panelBorder}`}},n("div",{style:{display:"flex",flexDirection:"column",gap:3,minWidth:0}},n("span",{style:{fontSize:12,color:d.text,fontWeight:500}},x.title),x.description&&n("span",{style:{fontSize:10,color:d.textMuted}},x.description),x.snippet&&window.innerWidth>=768&&n("code",{style:{fontSize:10,background:"#0a0f1a",color:"#94a3b8",padding:"2px 6px",borderRadius:4,fontFamily:"monospace",maxWidth:400,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},x.snippet)),x.snippet&&window.innerWidth>=768&&n("button",{style:{background:"none",border:"none",cursor:"pointer",color:l===x.id?"#34d399":d.textMuted,fontSize:14,marginLeft:8,flexShrink:0},onClick:()=>h(x)},"⧉"))))))}const Xe=document.currentScript,ms=[":host { all: initial; }","#devtools-root { font-family: system-ui, sans-serif; }","* { box-sizing: border-box; }","*::-webkit-scrollbar { width: 4px; height: 4px; }","*::-webkit-scrollbar-track { background: transparent; }","*::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 2px; }","*::-webkit-scrollbar-corner { background: transparent; }","* { scrollbar-width: thin; scrollbar-color: #1e293b transparent; }"].join(`
`);function bs({projectId:e,pinHash:t,apiBase:o,apiClient:r}){const[s,i]=_(null),a=k(f=>{i(f)},[]),u=k(()=>{i(null)},[]);return n("div",null,n(Oi,{projectId:e,pinHash:t,apiBase:o,apiClient:r}),n(ss,{onReportBug:a}),n(hs,{apiBase:o,pinHash:t}),s?n("div",{style:{position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"400px",backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:"999997",overflow:"auto"}},n(Gt,{apiClient:r,projectId:e,prefillTitle:s.message,prefillStack:s.stack,onClose:u})):null)}function ho(){if(document.getElementById("devtools-widget"))return;const e=Xe?.getAttribute("data-project")||"default",t=Xe?.getAttribute("data-pin")||"",o=Xe?.src.replace("/widget.js","")||"",r=po(o,t),s=document.createElement("div");s.id="devtools-widget",document.body.appendChild(s);const i=s.attachShadow({mode:"open"}),a=document.createElement("style");a.textContent=ms,i.appendChild(a);const u=document.createElement("div");u.id="devtools-root",i.appendChild(u),ct(n(bs,{projectId:e,pinHash:t,apiBase:o,apiClient:r}),u),Xi(e,t,o),Ii();let f=null;document.addEventListener("keydown",l=>{l.key.toLowerCase()==="k"&&l.metaKey&&l.shiftKey&&(l.preventDefault(),f?(i.removeChild(f),f=null):(f=document.createElement("div"),i.appendChild(f),ct(n(ys,{apiBase:o,pinHash:t,onClose:()=>{f&&(i.removeChild(f),f=null)}}),f))),l.key==="Escape"&&f&&(i.removeChild(f),f=null)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ho):ho()})();
