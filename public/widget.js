(function(){"use strict";var de,E,Qe,V,Ze,et,tt,ot,ke,Ce,$e,K={},nt=[],_o=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,pe=Array.isArray;function U(e,t){for(var o in t)e[o]=t[o];return e}function Be(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function n(e,t,o){var r,s,i,a={};for(i in t)i=="key"?r=t[i]:i=="ref"?s=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?de.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return ue(e,a,r,s,null)}function ue(e,t,o,r,s){var i={type:e,props:t,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Qe,__i:-1,__u:0};return s==null&&E.vnode!=null&&E.vnode(i),i}function fe(e){return e.children}function ge(e,t){this.props=e,this.context=t}function J(e,t){if(t==null)return e.__?J(e.__,e.__i+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?J(e):null}function rt(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return rt(e)}}function it(e){(!e.__d&&(e.__d=!0)&&V.push(e)&&!he.__r++||Ze!=E.debounceRendering)&&((Ze=E.debounceRendering)||et)(he)}function he(){for(var e,t,o,r,s,i,a,f=1;V.length;)V.length>f&&V.sort(tt),e=V.shift(),f=V.length,e.__d&&(o=void 0,r=void 0,s=(r=(t=e).__v).__e,i=[],a=[],t.__P&&((o=U({},r)).__v=r.__v+1,E.vnode&&E.vnode(o),Te(t.__P,o,r,t.__n,t.__P.namespaceURI,32&r.__u?[s]:null,i,s??J(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,dt(i,o,a),r.__e=r.__=null,o.__e!=s&&rt(o)));he.__r=0}function st(e,t,o,r,s,i,a,f,u,l,p){var c,h,g,m,S,y,x,b=r&&r.__k||nt,w=t.length;for(u=So(o,t,b,u,w),c=0;c<w;c++)(g=o.__k[c])!=null&&(h=g.__i==-1?K:b[g.__i]||K,g.__i=c,y=Te(e,g,h,s,i,a,f,u,l,p),m=g.__e,g.ref&&h.ref!=g.ref&&(h.ref&&Re(h.ref,null,g),p.push(g.ref,g.__c||m,g)),S==null&&m!=null&&(S=m),(x=!!(4&g.__u))||h.__k===g.__k?u=lt(g,u,e,x):typeof g.type=="function"&&y!==void 0?u=y:m&&(u=m.nextSibling),g.__u&=-7);return o.__e=S,u}function So(e,t,o,r,s){var i,a,f,u,l,p=o.length,c=p,h=0;for(e.__k=new Array(s),i=0;i<s;i++)(a=t[i])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[i]=ue(null,a,null,null,null):pe(a)?a=e.__k[i]=ue(fe,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=e.__k[i]=ue(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[i]=a,u=i+h,a.__=e,a.__b=e.__b+1,f=null,(l=a.__i=vo(a,o,u,c))!=-1&&(c--,(f=o[l])&&(f.__u|=2)),f==null||f.__v==null?(l==-1&&(s>p?h--:s<p&&h++),typeof a.type!="function"&&(a.__u|=4)):l!=u&&(l==u-1?h--:l==u+1?h++:(l>u?h--:h++,a.__u|=4))):e.__k[i]=null;if(c)for(i=0;i<p;i++)(f=o[i])!=null&&(2&f.__u)==0&&(f.__e==r&&(r=J(f)),ut(f,f));return r}function lt(e,t,o,r){var s,i;if(typeof e.type=="function"){for(s=e.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=e,t=lt(s[i],t,o,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=J(e)),o.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function vo(e,t,o,r){var s,i,a,f=e.key,u=e.type,l=t[o],p=l!=null&&(2&l.__u)==0;if(l===null&&f==null||p&&f==l.key&&u==l.type)return o;if(r>(p?1:0)){for(s=o-1,i=o+1;s>=0||i<t.length;)if((l=t[a=s>=0?s--:i++])!=null&&(2&l.__u)==0&&f==l.key&&u==l.type)return a}return-1}function at(e,t,o){t[0]=="-"?e.setProperty(t,o??""):e[t]=o==null?"":typeof o!="number"||_o.test(t)?o:o+"px"}function xe(e,t,o,r,s){var i,a;e:if(t=="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)o&&t in o||at(e.style,t,"");if(o)for(t in o)r&&o[t]==r[t]||at(e.style,t,o[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(ot,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=o,o?r?o.u=r.u:(o.u=ke,e.addEventListener(t,i?$e:Ce,i)):e.removeEventListener(t,i?$e:Ce,i);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&o==1?"":o))}}function ct(e){return function(t){if(this.l){var o=this.l[t.type+e];if(t.t==null)t.t=ke++;else if(t.t<o.u)return;return o(E.event?E.event(t):t)}}}function Te(e,t,o,r,s,i,a,f,u,l){var p,c,h,g,m,S,y,x,b,w,$,B,R,O,M,T,L,I=t.type;if(t.constructor!==void 0)return null;128&o.__u&&(u=!!(32&o.__u),i=[f=t.__e=o.__e]),(p=E.__b)&&p(t);e:if(typeof I=="function")try{if(x=t.props,b="prototype"in I&&I.prototype.render,w=(p=I.contextType)&&r[p.__c],$=p?w?w.props.value:p.__:r,o.__c?y=(c=t.__c=o.__c).__=c.__E:(b?t.__c=c=new I(x,$):(t.__c=c=new ge(x,$),c.constructor=I,c.render=ko),w&&w.sub(c),c.state||(c.state={}),c.__n=r,h=c.__d=!0,c.__h=[],c._sb=[]),b&&c.__s==null&&(c.__s=c.state),b&&I.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=U({},c.__s)),U(c.__s,I.getDerivedStateFromProps(x,c.__s))),g=c.props,m=c.state,c.__v=t,h)b&&I.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),b&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(b&&I.getDerivedStateFromProps==null&&x!==g&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(x,$),t.__v==o.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(x,c.__s,$)===!1){for(t.__v!=o.__v&&(c.props=x,c.state=c.__s,c.__d=!1),t.__e=o.__e,t.__k=o.__k,t.__k.some(function(v){v&&(v.__=t)}),B=0;B<c._sb.length;B++)c.__h.push(c._sb[B]);c._sb=[],c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(x,c.__s,$),b&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(g,m,S)})}if(c.context=$,c.props=x,c.__P=e,c.__e=!1,R=E.__r,O=0,b){for(c.state=c.__s,c.__d=!1,R&&R(t),p=c.render(c.props,c.state,c.context),M=0;M<c._sb.length;M++)c.__h.push(c._sb[M]);c._sb=[]}else do c.__d=!1,R&&R(t),p=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++O<25);c.state=c.__s,c.getChildContext!=null&&(r=U(U({},r),c.getChildContext())),b&&!h&&c.getSnapshotBeforeUpdate!=null&&(S=c.getSnapshotBeforeUpdate(g,m)),T=p,p!=null&&p.type===fe&&p.key==null&&(T=pt(p.props.children)),f=st(e,pe(T)?T:[T],t,o,r,s,i,a,f,u,l),c.base=t.__e,t.__u&=-161,c.__h.length&&a.push(c),y&&(c.__E=c.__=null)}catch(v){if(t.__v=null,u||i!=null)if(v.then){for(t.__u|=u?160:128;f&&f.nodeType==8&&f.nextSibling;)f=f.nextSibling;i[i.indexOf(f)]=null,t.__e=f}else{for(L=i.length;L--;)Be(i[L]);Ee(t)}else t.__e=o.__e,t.__k=o.__k,v.then||Ee(t);E.__e(v,t,o)}else i==null&&t.__v==o.__v?(t.__k=o.__k,t.__e=o.__e):f=t.__e=wo(o.__e,t,o,r,s,i,a,u,l);return(p=E.diffed)&&p(t),128&t.__u?void 0:f}function Ee(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Ee)}function dt(e,t,o){for(var r=0;r<o.length;r++)Re(o[r],o[++r],o[++r]);E.__c&&E.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){E.__e(i,s.__v)}})}function pt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:pe(e)?e.map(pt):U({},e)}function wo(e,t,o,r,s,i,a,f,u){var l,p,c,h,g,m,S,y=o.props||K,x=t.props,b=t.type;if(b=="svg"?s="http://www.w3.org/2000/svg":b=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((g=i[l])&&"setAttribute"in g==!!b&&(b?g.localName==b:g.nodeType==3)){e=g,i[l]=null;break}}if(e==null){if(b==null)return document.createTextNode(x);e=document.createElementNS(s,b,x.is&&x),f&&(E.__m&&E.__m(t,i),f=!1),i=null}if(b==null)y===x||f&&e.data==x||(e.data=x);else{if(i=i&&de.call(e.childNodes),!f&&i!=null)for(y={},l=0;l<e.attributes.length;l++)y[(g=e.attributes[l]).name]=g.value;for(l in y)if(g=y[l],l!="children"){if(l=="dangerouslySetInnerHTML")c=g;else if(!(l in x)){if(l=="value"&&"defaultValue"in x||l=="checked"&&"defaultChecked"in x)continue;xe(e,l,null,g,s)}}for(l in x)g=x[l],l=="children"?h=g:l=="dangerouslySetInnerHTML"?p=g:l=="value"?m=g:l=="checked"?S=g:f&&typeof g!="function"||y[l]===g||xe(e,l,g,y[l],s);if(p)f||c&&(p.__html==c.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(c&&(e.innerHTML=""),st(t.type=="template"?e.content:e,pe(h)?h:[h],t,o,r,b=="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,a,i?i[0]:o.__k&&J(o,0),f,u),i!=null)for(l=i.length;l--;)Be(i[l]);f||(l="value",b=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[l]||b=="progress"&&!m||b=="option"&&m!=y[l])&&xe(e,l,m,y[l],s),l="checked",S!=null&&S!=e[l]&&xe(e,l,S,y[l],s))}return e}function Re(e,t,o){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(s){E.__e(s,o)}}function ut(e,t,o){var r,s;if(E.unmount&&E.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||Re(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){E.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&ut(r[s],t,o||typeof e.type!="function");o||Be(e.__e),e.__c=e.__=e.__e=void 0}function ko(e,t,o){return this.constructor(e,o)}function ft(e,t,o){var r,s,i,a;t==document&&(t=document.documentElement),E.__&&E.__(e,t),s=(r=!1)?null:t.__k,i=[],a=[],Te(t,e=t.__k=n(fe,null,[e]),s||K,K,t.namespaceURI,s?null:t.firstChild?de.call(t.childNodes):null,i,s?s.__e:t.firstChild,r,a),dt(i,e,a)}de=nt.slice,E={__e:function(e,t,o,r){for(var s,i,a;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),a=s.__d),a)return s.__E=s}catch(f){e=f}throw e}},Qe=0,ge.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=U({},this.state),typeof e=="function"&&(e=e(U({},o),this.props)),e&&U(o,e),e!=null&&this.__v&&(t&&this._sb.push(t),it(this))},ge.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),it(this))},ge.prototype.render=fe,V=[],et=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tt=function(e,t){return e.__v.__b-t.__v.__b},he.__r=0,ot=/(PointerCapture)$|Capture$/i,ke=0,Ce=ct(!1),$e=ct(!0);var Q,D,Me,gt,Z=0,ht=[],P=E,xt=P.__b,yt=P.__r,mt=P.diffed,bt=P.__c,_t=P.unmount,St=P.__;function ze(e,t){P.__h&&P.__h(D,e,Z||t),Z=0;var o=D.__H||(D.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function _(e){return Z=1,Co(Ct,e)}function Co(e,t,o){var r=ze(Q++,2);if(r.t=e,!r.__c&&(r.__=[Ct(void 0,t),function(f){var u=r.__N?r.__N[0]:r.__[0],l=r.t(u,f);u!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=D,!D.__f)){var s=function(f,u,l){if(!r.__c.__H)return!0;var p=r.__c.__H.__.filter(function(h){return!!h.__c});if(p.every(function(h){return!h.__N}))return!i||i.call(this,f,u,l);var c=r.__c.props!==f;return p.forEach(function(h){if(h.__N){var g=h.__[0];h.__=h.__N,h.__N=void 0,g!==h.__[0]&&(c=!0)}}),i&&i.call(this,f,u,l)||c};D.__f=!0;var i=D.shouldComponentUpdate,a=D.componentWillUpdate;D.componentWillUpdate=function(f,u,l){if(this.__e){var p=i;i=void 0,s(f,u,l),i=p}a&&a.call(this,f,u,l)},D.shouldComponentUpdate=s}return r.__N||r.__}function A(e,t){var o=ze(Q++,3);!P.__s&&kt(o.__H,t)&&(o.__=e,o.u=t,D.__H.__h.push(o))}function j(e){return Z=5,vt(function(){return{current:e}},[])}function vt(e,t){var o=ze(Q++,7);return kt(o.__H,t)&&(o.__=e(),o.__H=t,o.__h=e),o.__}function k(e,t){return Z=8,vt(function(){return e},t)}function $o(){for(var e;e=ht.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ye),e.__H.__h.forEach(Ie),e.__H.__h=[]}catch(t){e.__H.__h=[],P.__e(t,e.__v)}}P.__b=function(e){D=null,xt&&xt(e)},P.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),St&&St(e,t)},P.__r=function(e){yt&&yt(e),Q=0;var t=(D=e.__c).__H;t&&(Me===D?(t.__h=[],D.__h=[],t.__.forEach(function(o){o.__N&&(o.__=o.__N),o.u=o.__N=void 0})):(t.__h.forEach(ye),t.__h.forEach(Ie),t.__h=[],Q=0)),Me=D},P.diffed=function(e){mt&&mt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ht.push(t)!==1&&gt===P.requestAnimationFrame||((gt=P.requestAnimationFrame)||Bo)($o)),t.__H.__.forEach(function(o){o.u&&(o.__H=o.u),o.u=void 0})),Me=D=null},P.__c=function(e,t){t.some(function(o){try{o.__h.forEach(ye),o.__h=o.__h.filter(function(r){return!r.__||Ie(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],P.__e(r,o.__v)}}),bt&&bt(e,t)},P.unmount=function(e){_t&&_t(e);var t,o=e.__c;o&&o.__H&&(o.__H.__.forEach(function(r){try{ye(r)}catch(s){t=s}}),o.__H=void 0,t&&P.__e(t,o.__v))};var wt=typeof requestAnimationFrame=="function";function Bo(e){var t,o=function(){clearTimeout(r),wt&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(o,35);wt&&(t=requestAnimationFrame(o))}function ye(e){var t=D,o=e.__c;typeof o=="function"&&(e.__c=void 0,o()),D=t}function Ie(e){var t=D;e.__c=e.__(),D=t}function kt(e,t){return!e||e.length!==t.length||t.some(function(o,r){return o!==e[r]})}function Ct(e,t){return typeof t=="function"?t(e):t}const d={fabBg:"#6366f1",fabBgHover:"#4f46e5",panelBg:"#0f172a",panelBorder:"#1e293b",panelHeaderBg:"#1e293b",toolBtnBg:"#1e293b",toolBtnBgActive:"#3b82f6",text:"#e2e8f0",textMuted:"#94a3b8",textBright:"#f8fafc",closeBtnHover:"#ef4444"},$t=48,De=580,To=5,Eo={position:"fixed",width:`${$t}px`,height:`${$t}px`,borderRadius:"50%",backgroundColor:d.fabBg,color:"#fff",border:"none",cursor:"grab",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999,boxShadow:"0 4px 16px rgba(99, 102, 241, 0.5)",transition:"background-color 0.15s ease, box-shadow 0.15s ease, transform 0.15s ease",touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},Ro={position:"fixed",width:`${De}px`,backgroundColor:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:"12px",zIndex:999998,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",color:d.text,boxShadow:"0 24px 64px rgba(0,0,0,0.7)",overflow:"hidden"},Mo={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px 0",flexShrink:0,cursor:"grab",userSelect:"none"},zo={width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",lineHeight:"1",flexShrink:"0"},Io={flex:1,overflowY:"auto",padding:"10px 12px",fontSize:"13px",color:d.textMuted,display:"block"},Do={fontSize:11,color:"#475569",display:"flex",alignItems:"center",gap:4},Lo={width:6,height:6,borderRadius:"50%",background:"#4ade80",flexShrink:0},Ho={display:"flex",gap:4,alignItems:"center"},Po={background:"none",border:"none",color:"#475569",cursor:"pointer",padding:4,borderRadius:4,fontSize:12,lineHeight:"1",display:"flex",alignItems:"center",justifyContent:"center"},Bt={background:"#1a2547",border:"1px solid #2d3b6e",color:"#a5b4fc",fontSize:10,padding:"3px 8px",borderRadius:4,whiteSpace:"nowrap",fontFamily:"inherit",lineHeight:"1.4",cursor:"pointer"},Ao={display:"flex",borderBottom:`1px solid ${d.panelBorder}`,overflowX:"auto",scrollbarWidth:"none",flexShrink:0,marginTop:6},Oo={padding:"6px 10px",fontSize:11,color:"#475569",cursor:"pointer",borderBottom:"2px solid transparent",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:4,flexShrink:0,userSelect:"none",background:"none",border:"none",fontFamily:"inherit"},No={color:"#a5b4fc",borderBottom:"2px solid #6366f1"},Le={background:"#ef4444",color:"#fff",borderRadius:6,padding:"0 4px",fontSize:9,fontWeight:"700",lineHeight:"14px"},Fo=500;let Wo=1;const ee=[],te=[];function jo(){const e=new WeakSet;return(t,o)=>{if(typeof o=="object"&&o!==null){if(e.has(o))return"[Circular]";e.add(o)}return o}}function Uo(e){if(e===null)return"null";if(e===void 0)return"undefined";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(e instanceof Error)return`${e.name}: ${e.message}`;try{return JSON.stringify(e,jo(),2)}catch{return String(e)}}function qo(e,t){const o={id:Wo++,level:e,args:t.map(Uo),timestamp:Date.now()};ee.length>=Fo&&ee.shift(),ee.push(o);for(const r of te)r()}function q(){return[...ee]}function Xo(){ee.length=0;for(const e of te)e()}function Tt(e){return te.push(e),()=>{const t=te.indexOf(e);t!==-1&&te.splice(t,1)}}function Yo(){const e=["log","warn","error","info"];for(const t of e){const o=console[t].bind(console);console[t]=(...r)=>{qo(t,r),o(...r)}}}function He(e){const t=new Date(e.timestamp).toLocaleTimeString();return`[${e.level.toUpperCase()}] ${e.args.join(" ")} — ${t}`}function Pe(e){return`[NETWORK] ${e.method} ${e.url} → ${e.status}  ${e.duration}ms`}function Et(e){const t=e.stack?`
  ${e.stack}`:"";return`[ERROR] ${e.message}${t}`}function Rt(e){return`[${e.severity.toUpperCase()}] ${e.message}${e.detail?` — ${e.detail}`:""}`}function Vo(e){return`### Console (${e.length})
${e.map(He).join(`
`)}`}function Go(e){return`### Network (${e.length})
${e.map(Pe).join(`
`)}`}function Mt(e){return`### Errors (${e.length})
${e.map(Et).join(`

`)}`}function zt(e){return`### Health Issues (${e.length})
${e.map(Rt).join(`
`)}`}function Jo(e,t,o,r){const s=o.slice(0,10),i=e.filter(l=>l.level==="warn").slice(0,10),a=t.filter(l=>l.status>=400).slice(0,10),f=new Date().toLocaleString(),u=[`## Page Context — ${window.location.href}`,`**Captured:** ${f}`];return s.length>0&&u.push(Mt(s)),i.length>0&&u.push(`### Console Warnings (${i.length})
${i.map(He).join(`
`)}`),a.length>0&&u.push(`### Network Issues (${a.length})
${a.map(Pe).join(`
`)}`),r.length>0&&u.push(zt(r)),u.join(`

`)}const It={log:"#94a3b8",info:"#3b82f6",warn:"#eab308",error:"#ef4444"},Ko={log:"rgba(148, 163, 184, 0.15)",info:"rgba(59, 130, 246, 0.15)",warn:"rgba(234, 179, 8, 0.15)",error:"rgba(239, 68, 68, 0.15)"},Dt=["log","info","warn","error"];function Qo(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${o}:${r}:${s}.${i}`}const Zo={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},en={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},tn={display:"flex",gap:"4px",flexWrap:"wrap"},on={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},nn={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},rn={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},sn={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",position:"relative"},ln={display:"flex",alignItems:"center",gap:"6px"},an={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},cn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},dn={color:d.text,whiteSpace:"pre-wrap",lineHeight:"1.4"},pn={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function un(e,t){return{padding:"2px 6px",borderRadius:"3px",border:"none",backgroundColor:e?It[t]:d.toolBtnBg,color:e?"#fff":d.textMuted,cursor:"pointer",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"}}function fn(){const[e,t]=_(q),[o,r]=_(new Set(Dt)),[s,i]=_(null);A(()=>Tt(()=>{t(q())}),[]);const a=k(()=>{Xo(),t([])},[]),f=k(l=>{r(p=>{const c=new Set(p);return c.has(l)?c.delete(l):c.add(l),c})},[]),u=e.filter(l=>o.has(l.level));return n("div",{style:Zo},n("div",{style:en},n("div",{style:tn},Dt.map(l=>n("button",{key:l,style:un(o.has(l),l),onClick:()=>f(l),title:`Toggle ${l} entries`},l))),n("button",{style:nn,onClick:()=>navigator.clipboard.writeText(Vo(u)).catch(()=>{}),title:"Copy all console entries"},"Copy Console"),n("button",{style:on,onClick:a,title:"Clear console entries"},"Clear")),u.length===0?n("div",{style:pn},"No console entries"):n("div",{style:rn},u.map((l,p)=>n("div",{key:l.id,style:{...sn,backgroundColor:Ko[l.level]},onMouseEnter:()=>i(p),onMouseLeave:()=>i(null)},n("div",{style:ln},n("span",{style:{...an,backgroundColor:It[l.level],color:"#fff"}},l.level),n("span",{style:cn},Qo(l.timestamp)),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:s===p?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:c=>{c.stopPropagation(),navigator.clipboard.writeText(He(l)).catch(()=>{})},title:"Copy row"},"⧇")),n("div",{style:dn},l.args.join(" "))))))}const gn=200;let Ae=1;const oe=[],ne=[];function hn(e){if(!e.response)return 0;if(typeof e.response=="string")return e.response.length;if(e.response instanceof Blob)return e.response.size;if(e.response instanceof ArrayBuffer)return e.response.byteLength;try{return JSON.stringify(e.response).length}catch{return 0}}function Lt(e){if(e==null)return 0;if(typeof e=="string")return e.length;if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(e instanceof FormData){let t=0;return e.forEach(o=>{typeof o=="string"?t+=o.length:o instanceof Blob&&(t+=o.size)}),t}return e instanceof URLSearchParams?e.toString().length:0}function Ht(e){const t={};return e.forEach((o,r)=>{t[r]=o}),t}function Oe(e){oe.length>=gn&&oe.shift(),oe.push(e);for(const t of ne)t()}function G(){return[...oe]}function xn(){oe.length=0;for(const e of ne)e()}function Pt(e){return ne.push(e),()=>{const t=ne.indexOf(e);t!==-1&&ne.splice(t,1)}}function yn(){const e=XMLHttpRequest.prototype,t=e.open,o=e.setRequestHeader,r=e.send,s=new WeakMap;e.open=function(i,a,...f){return s.set(this,{method:i.toUpperCase(),url:typeof a=="string"?a:String(a),requestHeaders:{},requestSize:0,startTime:0,timestamp:0}),t.call(this,i,a,...f)},e.setRequestHeader=function(i,a){const f=s.get(this);return f&&(f.requestHeaders[i]=a),o.call(this,i,a)},e.send=function(i){const a=s.get(this);return a&&(a.requestSize=Lt(i??null),a.startTime=performance.now(),a.timestamp=Date.now(),this.addEventListener("loadend",()=>{const f=performance.now()-a.startTime,u={},l=this.getAllResponseHeaders();for(const c of l.trim().split(`\r
`)){const h=c.indexOf(": ");h!==-1&&(u[c.slice(0,h).toLowerCase()]=c.slice(h+2))}const p={id:Ae++,method:a.method,url:a.url,status:this.status,statusText:this.statusText||(this.status===0?"Network Error":""),duration:Math.round(f),requestSize:a.requestSize,responseSize:hn(this),requestHeaders:a.requestHeaders,responseHeaders:u,startTime:a.startTime,timestamp:a.timestamp};Oe(p),s.delete(this)})),r.call(this,i)}}function mn(){const e=window.fetch.bind(window);window.fetch=async(t,o)=>{const r=(o?.method??"GET").toUpperCase(),s=typeof t=="string"?t:t instanceof URL?t.href:t.url,i=Lt(o?.body??null);let a={};if(o?.headers)if(o.headers instanceof Headers)a=Ht(o.headers);else if(Array.isArray(o.headers))for(const[l,p]of o.headers)a[l]=p;else a={...o.headers};const f=performance.now(),u=Date.now();try{const l=await e(t,o),p=performance.now()-f,c=l.clone();let h=0;try{h=(await c.blob()).size}catch{h=0}const g={id:Ae++,method:r,url:s,status:l.status,statusText:l.statusText,duration:Math.round(p),requestSize:i,responseSize:h,requestHeaders:a,responseHeaders:Ht(l.headers),startTime:f,timestamp:u};return Oe(g),l}catch(l){const p=performance.now()-f,c={id:Ae++,method:r,url:s,status:0,statusText:"Network Error",duration:Math.round(p),requestSize:i,responseSize:0,requestHeaders:a,responseHeaders:{},startTime:f,timestamp:u};throw Oe(c),l}},yn()}const bn={GET:"#22c55e",POST:"#3b82f6",PUT:"#eab308",DELETE:"#ef4444",PATCH:"#a855f7"},_n="#94a3b8";function Sn(e){return bn[e]??_n}function vn(e){return e===0?"#ef4444":e<300?"#22c55e":e<400?"#3b82f6":e<500?"#eab308":"#ef4444"}function At(e){return e===0?"rgba(239, 68, 68, 0.15)":e<300?"rgba(34, 197, 94, 0.15)":e<400?"rgba(59, 130, 246, 0.15)":e<500?"rgba(234, 179, 8, 0.15)":"rgba(239, 68, 68, 0.15)"}function Ot(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${o}:${r}:${s}.${i}`}function Nt(e){return e<1e3?`${e}ms`:`${(e/1e3).toFixed(1)}s`}function Ft(e){return e===0?"0 B":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function wn(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}const kn={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Cn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},$n={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Bn={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Tn={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},En={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Rn={display:"flex",flexDirection:"column",padding:"5px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",cursor:"pointer",transition:"background-color 0.1s ease",position:"relative"},Mn={display:"flex",alignItems:"center",gap:"6px",minWidth:"0"},zn={padding:"1px 5px",borderRadius:"3px",fontSize:"9px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},In={padding:"1px 4px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",flexShrink:"0"},Dn={flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:d.text,fontSize:"10px",minWidth:"0"},Ln={fontSize:"10px",color:d.textMuted,flexShrink:"0",textAlign:"right",minWidth:"40px"},Hn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Pn={marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5",wordBreak:"break-all"},Ne={fontWeight:"600",color:d.textBright,marginBottom:"2px",marginTop:"6px",display:"block"},An={color:d.textMuted},Wt={display:"flex",gap:"4px",color:d.textMuted,padding:"1px 0"},jt={color:"#93c5fd",flexShrink:"0"},On={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function Nn({entry:e}){const t=Object.entries(e.requestHeaders),o=Object.entries(e.responseHeaders);return n("div",{style:Pn},n("span",{style:{...Ne,marginTop:"0"}},"General"),n("div",{style:An},n("div",null,`URL: ${e.url}`),n("div",null,`Method: ${e.method}`),n("div",null,`Status: ${e.status} ${e.statusText}`),n("div",null,`Duration: ${Nt(e.duration)}`),n("div",null,`Request size: ${Ft(e.requestSize)}`),n("div",null,`Response size: ${Ft(e.responseSize)}`),n("div",null,`Time: ${Ot(e.timestamp)}`)),t.length>0?n("div",null,n("span",{style:Ne},"Request Headers"),t.map(([r,s])=>n("div",{key:r,style:Wt},n("span",{style:jt},`${r}:`),n("span",null,s)))):null,o.length>0?n("div",null,n("span",{style:Ne},"Response Headers"),o.map(([r,s])=>n("div",{key:r,style:Wt},n("span",{style:jt},`${r}:`),n("span",null,s)))):null)}function Fn(){const[e,t]=_(G),[o,r]=_(null),[s,i]=_(null);A(()=>Pt(()=>{t(G())}),[]);const a=k(()=>{xn(),t([]),r(null)},[]),f=k(u=>{r(l=>l===u?null:u)},[]);return n("div",{style:kn},n("div",{style:Cn},n("span",{style:$n},`${e.length} request${e.length!==1?"s":""}`),n("button",{style:Tn,onClick:()=>navigator.clipboard.writeText(Go(e)).catch(()=>{}),title:"Copy all network entries"},"Copy Network"),n("button",{style:Bn,onClick:a,title:"Clear network entries"},"Clear")),e.length===0?n("div",{style:On},"No network requests"):n("div",{style:En},e.map((u,l)=>{const p=o===u.id;return n("div",{key:u.id,style:{...Rn,backgroundColor:p?"rgba(59, 130, 246, 0.12)":At(u.status)},onClick:()=>f(u.id),onMouseEnter:()=>i(l),onMouseLeave:()=>i(null)},n("div",{style:Mn},n("span",{style:{...zn,backgroundColor:Sn(u.method)}},u.method),n("span",{style:{...In,color:vn(u.status),backgroundColor:At(u.status)}},u.status===0?"ERR":String(u.status)),n("span",{style:Dn,title:u.url},wn(u.url,40)),n("span",{style:Ln},Nt(u.duration)),n("span",{style:Hn},Ot(u.timestamp)),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:s===l?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:c=>{c.stopPropagation(),navigator.clipboard.writeText(Pe(u)).catch(()=>{})},title:"Copy row"},"⧇")),p?n(Nn,{entry:u}):null)})))}const Wn=100;let Ut=1;const re=[],ie=[];let Fe=null;function qt(e){Fe=e}function Xt(e){re.length>=Wn&&re.shift(),re.push(e);for(const t of ie)t();Fe&&Fe(e)}function X(){return[...re]}function jn(){re.length=0;for(const e of ie)e()}function Yt(e){return ie.push(e),()=>{const t=ie.indexOf(e);t!==-1&&ie.splice(t,1)}}function Un(){const e=window.onerror;window.onerror=(t,o,r,s,i)=>{const a={id:Ut++,message:typeof t=="string"?t:"Unknown error",stack:i?.stack??"",source:o??"",line:r??0,col:s??0,timestamp:Date.now(),type:"error"};return Xt(a),typeof e=="function"?e(t,o,r,s,i):!1},window.addEventListener("unhandledrejection",t=>{const o=t.reason,r=o instanceof Error,s=r?o.message:typeof o=="string"?o:"Unhandled promise rejection",i=r?o.stack??"":"",a={id:Ut++,message:s,stack:i,source:"",line:0,col:0,timestamp:Date.now(),type:"unhandledrejection"};Xt(a)})}const qn="#ef4444",Xn="rgba(239, 68, 68, 0.15)",Yn="#f97316",Vn="rgba(249, 115, 22, 0.15)",Gn={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},Jn={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",gap:"6px",flexShrink:"0"},Kn={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Qn={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Zn={padding:"2px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",fontSize:"10px",fontFamily:"inherit",flexShrink:"0"},er={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},tr={display:"flex",flexDirection:"column",gap:"2px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace",wordBreak:"break-all",cursor:"pointer",position:"relative"},or={display:"flex",alignItems:"center",gap:"6px"},nr={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0",color:"#fff"},rr={fontSize:"10px",color:d.textMuted,flexShrink:"0"},Vt={padding:"1px 0",wordBreak:"break-all"},ir={...Vt,opacity:"0.5"},sr={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500",backgroundColor:"#dc2626",color:"#fff"},lr={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function ar(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),i=String(t.getMilliseconds()).padStart(3,"0");return`${o}:${r}:${s}.${i}`}function cr(e){return e==="error"?qn:Yn}function dr(e){return e==="error"?Xn:Vn}function pr(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function ur(e){return e.includes("node_modules")}function fr({onReportBug:e}){const[t,o]=_(X),[r,s]=_(null),[i,a]=_(null);A(()=>Yt(()=>{o(X())}),[]);const f=k(()=>{jn(),o([]),s(null)},[]),u=k(l=>{s(p=>p===l?null:l)},[]);return n("div",{style:Gn},n("div",{style:Jn},n("span",{style:Kn},`${t.length} error${t.length!==1?"s":""}`),n("button",{style:Zn,onClick:()=>navigator.clipboard.writeText(Mt(t)).catch(()=>{}),title:"Copy all error entries"},"Copy Errors"),n("button",{style:Qn,onClick:f,title:"Clear error entries"},"Clear")),t.length===0?n("div",{style:lr},"No errors captured"):n("div",{style:er},t.map((l,p)=>{const c=r===l.id,h=pr(l.stack);return n("div",{key:l.id,style:{...tr,backgroundColor:c?"rgba(239, 68, 68, 0.12)":dr(l.type)},onClick:()=>u(l.id),onMouseEnter:()=>a(p),onMouseLeave:()=>a(null)},n("div",{style:or},n("span",{style:{...nr,backgroundColor:cr(l.type)}},l.type==="error"?"ERR":"REJ"),n("span",{style:{flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:d.text,fontSize:"10px"}},l.message),n("span",{style:rr},ar(l.timestamp)),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:i===p?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:g=>{g.stopPropagation(),navigator.clipboard.writeText(Et(l)).catch(()=>{})},title:"Copy row"},"⧇")),c?n("div",{style:{marginTop:"6px",padding:"6px 8px",borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, 0.25)",fontSize:"10px",fontFamily:"monospace",lineHeight:"1.5"}},l.source?n("div",{style:{color:"#93c5fd",marginBottom:"4px"}},`${l.source}:${l.line}:${l.col}`):null,h.length>0?h.map((g,m)=>n("div",{key:m,style:ur(g)?ir:Vt},g)):n("span",{style:{color:d.textMuted}},"No stack trace available"),e?n("button",{style:{...sr,marginTop:"8px",width:"100%"},onClick:g=>{g.stopPropagation(),e(l)}},"Report Bug"):null):null)})))}const gr=["low","medium","high","critical"],hr={low:"#22c55e",medium:"#eab308",high:"#f97316",critical:"#ef4444"},Gt={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},me={fontSize:"11px",fontWeight:"600",color:d.textBright,marginBottom:"3px",display:"block"},Jt={width:"100%",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:d.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},xr={...Jt,minHeight:"60px",resize:"vertical",lineHeight:"1.4"},yr={display:"flex",gap:"4px"},mr={padding:"4px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flex:"1",textAlign:"center"},We={padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",width:"100%",marginTop:"4px"},br={...We,opacity:"0.5",cursor:"not-allowed"},Kt={padding:"8px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",textAlign:"center"},_r={...Kt,backgroundColor:"rgba(34, 197, 94, 0.15)",color:"#22c55e",border:"1px solid rgba(34, 197, 94, 0.3)"},Sr={...Kt,backgroundColor:"rgba(239, 68, 68, 0.15)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.3)"},vr={fontSize:"10px",fontFamily:"monospace",color:d.textMuted,backgroundColor:"rgba(0, 0, 0, 0.3)",padding:"6px 8px",borderRadius:"4px",maxHeight:"60px",overflowY:"auto",lineHeight:"1.4",whiteSpace:"pre-wrap",wordBreak:"break-all"},Qt={padding:"4px 8px",borderRadius:"4px",border:"none",backgroundColor:"rgba(255, 255, 255, 0.1)",color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",alignSelf:"flex-end"};function Zt({apiClient:e,projectId:t,prefillTitle:o,prefillStack:r,onClose:s}){const[i,a]=_(o??""),[f,u]=_(""),[l,p]=_("medium"),[c,h]=_("idle"),[g,m]=_(""),S=i.trim().length>0&&c!=="submitting",y=k(async()=>{if(S){h("submitting"),m("");try{const x={projectId:t,title:i.trim(),description:f.trim(),severity:l,url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()};r&&(x.stackTrace=r),await e.createBug(x),h("success"),a(""),u(""),p("medium")}catch(x){h("error");const b=x instanceof Error?x.message:"Failed to submit bug report";m(b)}}},[S,i,f,l,t,r,e]);return c==="success"?n("div",{style:Gt},n("div",{style:_r},"Bug report submitted."),n("button",{style:{...We,marginTop:"8px"},onClick:()=>h("idle")},"Report Another"),s?n("button",{style:{...Qt,marginTop:"4px",alignSelf:"center"},onClick:s},"Close"):null):n("div",{style:Gt},s?n("button",{style:Qt,onClick:s},"Back"):null,n("div",null,n("label",{style:me},"Title"),n("input",{style:Jt,type:"text",value:i,placeholder:"Describe the bug briefly",onInput:x=>{a(x.target.value)}})),n("div",null,n("label",{style:me},"Description"),n("textarea",{style:xr,value:f,placeholder:"Steps to reproduce, expected vs actual behavior",onInput:x=>{u(x.target.value)}})),r?n("div",null,n("label",{style:me},"Stack Trace"),n("div",{style:vr},r)):null,n("div",null,n("label",{style:me},"Severity"),n("div",{style:yr},gr.map(x=>n("button",{key:x,style:{...mr,backgroundColor:l===x?hr[x]:d.toolBtnBg,color:l===x?"#fff":d.textMuted},onClick:()=>p(x)},x)))),c==="error"?n("div",{style:Sr},g||"Submission failed"):null,n("button",{style:S?We:br,onClick:y,disabled:!S},c==="submitting"?"Submitting...":"Submit Bug Report"))}const wr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",padding:"8px",gap:"8px",boxSizing:"border-box"},kr={display:"flex",gap:"6px",flexShrink:"0"},Cr={flex:"1",padding:"6px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0, 0, 0, 0.3)",color:d.text,fontSize:"12px",fontFamily:"system-ui, -apple-system, sans-serif",outline:"none",boxSizing:"border-box"},eo={padding:"6px 10px",borderRadius:"4px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",flexShrink:"0"},$r={...eo,opacity:"0.5",cursor:"not-allowed"},to={flex:"1",overflowY:"auto",fontSize:"12px",lineHeight:"1.5",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"8px",borderRadius:"4px",minHeight:"80px"},Br={...to,color:d.textMuted,display:"flex",alignItems:"center",justifyContent:"center",fontStyle:"italic"},Tr={padding:"8px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px"};function Er(){const e=X().slice(0,5).map(s=>`- ${s.message}`).join(`
`),t=G().filter(s=>s.status>=400).slice(0,5).map(s=>`- ${s.method} ${s.url} → ${s.status}`).join(`
`),o=q().filter(s=>s.level==="error"||s.level==="warn").slice(0,5).map(s=>`[${s.level}] ${s.args.join(" ")}`).join(`
`);return[`Page: ${window.location.href}`,e&&`Recent errors:
${e}`,t&&`Network issues:
${t}`,o&&`Console issues:
${o}`].filter(Boolean).join(`

`)}function Rr({apiBase:e,pinHash:t}){const[o,r]=_(""),[s,i]=_(""),[a,f]=_("idle"),[u,l]=_(""),p=j(null),c=j(0),h=o.trim().length>0&&a!=="loading"&&a!=="streaming",g=k(async()=>{if(o.trim().length===0||a==="loading"||a==="streaming")return;const S=o.trim(),y=c.current===0?Er():"",b=(y?`Context:
${y}

---

${S}`:S).slice(0,2e3);i(""),f("loading"),l(""),p.current&&p.current.abort();const w=new AbortController;p.current=w;try{const $=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:b,context:window.location.href}),signal:w.signal});if(!$.ok)throw new Error(`Request failed (${$.status})`);const B=$.body?.getReader();if(!B)throw new Error("No response stream");f("streaming");const R=new TextDecoder;for(;;){const{done:O,value:M}=await B.read();if(O)break;const T=R.decode(M,{stream:!0});T&&i(L=>L+T)}c.current+=1,f("idle")}catch($){if($.name==="AbortError")return;f("error");const B=$ instanceof Error?$.message:"Analysis failed";l(B)}},[o,a,e,t]),m=k(S=>{S.key==="Enter"&&!S.shiftKey&&h&&(S.preventDefault(),g())},[h,g]);return n("div",{style:wr},n("div",{style:kr},n("input",{style:Cr,type:"text",value:o,placeholder:"Ask about code, errors, concepts...",onInput:S=>{r(S.target.value)},onKeyDown:m}),n("button",{style:h?eo:$r,onClick:g,disabled:!h},a==="loading"||a==="streaming"?"...":"Send")),a==="error"?n("div",{style:Tr},u):null,s?n("div",{style:to},s):n("div",{style:Br},a==="loading"?"Thinking...":"Response will appear here"))}const Mr=100,zr={LCP:[2500,4e3],CLS:[.1,.25],INP:[200,500],FCP:[1800,3e3],TTFB:[800,1800]};let Ir=1;const se=[],be=[];function Dr(e,t){const o=zr[e];return t<=o[0]?"good":t<=o[1]?"needs-improvement":"poor"}function le(e,t){const o={id:Ir++,timestamp:Date.now(),metric:e,value:Math.round(e==="CLS"?t*1e3:t)/(e==="CLS"?1e3:1),rating:Dr(e,t)};se.length>=Mr&&se.shift(),se.push(o);for(const r of be)r(o)}function oo(){return[...se]}function Lr(){se.length=0}function no(e){return be.push(e),()=>{const t=be.indexOf(e);t!==-1&&be.splice(t,1)}}function Hr(){if(!(typeof PerformanceObserver>"u")){try{new PerformanceObserver(t=>{const o=t.getEntries(),r=o[o.length-1];r&&le("LCP",r.startTime)}).observe({type:"largest-contentful-paint",buffered:!0})}catch{}try{let e=0;new PerformanceObserver(o=>{for(const r of o.getEntries()){const s=r;!s.hadRecentInput&&typeof s.value=="number"&&(e+=s.value,le("CLS",e))}}).observe({type:"layout-shift",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const o of t.getEntries())o.duration>0&&le("INP",o.duration)}).observe({type:"event",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const o of t.getEntries())o.name==="first-contentful-paint"&&le("FCP",o.startTime)}).observe({type:"paint",buffered:!0})}catch{}try{new PerformanceObserver(t=>{for(const o of t.getEntries()){const r=o;r.responseStart>0&&le("TTFB",r.responseStart-r.requestStart)}}).observe({type:"navigation",buffered:!0})}catch{}}}const je={good:"#22c55e","needs-improvement":"#eab308",poor:"#ef4444"},Pr={good:"rgba(34, 197, 94, 0.15)","needs-improvement":"rgba(234, 179, 8, 0.15)",poor:"rgba(239, 68, 68, 0.15)"},Ar={LCP:"Largest Contentful Paint",CLS:"Cumulative Layout Shift",INP:"Interaction to Next Paint",FCP:"First Contentful Paint",TTFB:"Time to First Byte"},ro={LCP:"ms",CLS:"",INP:"ms",FCP:"ms",TTFB:"ms"},Or=["LCP","FCP","CLS","INP","TTFB"];function Nr(e){const t=new Date(e),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${o}:${r}:${s}`}function Fr(e){const t={};for(const o of e){const r=t[o.metric];(!r||o.id>r.id)&&(t[o.metric]=o)}return t}const Wr={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},jr={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 8px",flexShrink:"0"},Ur={fontSize:"11px",fontWeight:"600",color:d.textBright,textTransform:"uppercase",letterSpacing:"0.5px"},qr={padding:"3px 8px",borderRadius:"4px",border:"none",backgroundColor:d.toolBtnBg,color:d.textMuted,cursor:"pointer",fontSize:"11px",fontWeight:"500",flexShrink:"0"},Xr={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px",padding:"4px 8px 8px",flexShrink:"0"},Yr={display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",padding:"8px 6px",borderRadius:"6px",backgroundColor:d.toolBtnBg},Vr={fontSize:"16px",fontWeight:"700",fontFamily:"monospace"},Gr={fontSize:"9px",fontWeight:"500",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},Jr={height:"1px",backgroundColor:d.panelBorder,margin:"0 8px",flexShrink:"0"},Kr={fontSize:"10px",fontWeight:"600",color:d.textMuted,padding:"6px 8px 2px",textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:"0"},Qr={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"0 4px 4px"},Zr={display:"flex",alignItems:"center",gap:"6px",padding:"4px 6px",borderRadius:"4px",marginBottom:"2px",fontSize:"11px",fontFamily:"monospace"},ei={padding:"1px 5px",borderRadius:"3px",fontSize:"10px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.3px",flexShrink:"0",color:"#fff"},ti={fontWeight:"600",color:d.text,flexShrink:"0",minWidth:"32px"},oi={color:d.textBright,flex:"1"},ni={fontSize:"10px",color:d.textMuted,flexShrink:"0"},ri={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px"};function ii(e){return e==="good"?"Good":e==="needs-improvement"?"OK":"Poor"}function si(){const[e,t]=_(oo);A(()=>no(()=>{t(oo())}),[]);const o=k(()=>{Lr(),t([])},[]),r=Fr(e),s=Or.map(i=>{const a=r[i];if(!a)return null;const f=ro[i],u=i==="CLS"?a.value.toFixed(3):`${Math.round(a.value)}`;return{metric:i,entry:a,displayValue:u,unit:f}}).filter(Boolean);return n("div",{style:Wr},n("div",{style:jr},n("span",{style:Ur},"Web Vitals"),n("button",{style:qr,onClick:o,title:"Clear performance entries"},"Clear")),s.length>0?n("div",{style:Xr},s.map(i=>n("div",{key:i.metric,style:{...Yr,borderLeft:`3px solid ${je[i.entry.rating]}`},title:Ar[i.metric]},n("span",{style:{...Vr,color:je[i.entry.rating]}},`${i.displayValue}${i.unit}`),n("span",{style:Gr},i.metric)))):null,e.length>0?n("div",{style:Jr}):null,e.length>0?n("div",{style:Kr},"Event Log"):null,e.length===0?n("div",{style:ri},"Waiting for Web Vitals data..."):n("div",{style:Qr},[...e].reverse().map(i=>{const a=ro[i.metric],f=i.metric==="CLS"?i.value.toFixed(3):`${Math.round(i.value)}`;return n("div",{key:i.id,style:{...Zr,backgroundColor:Pr[i.rating]}},n("span",{style:{...ei,backgroundColor:je[i.rating]}},ii(i.rating)),n("span",{style:ti},i.metric),n("span",{style:oi},`${f}${a}`),n("span",{style:ni},Nr(i.timestamp)))})))}const Ue="devtools-debug-snapshots",li=5;function ai(){try{const e=localStorage.getItem(Ue);return e?JSON.parse(e):[]}catch{return[]}}function io(e){try{localStorage.setItem(Ue,JSON.stringify(e))}catch{}}let ci=1;function ae(e){return String(e).padStart(2,"0")}function so(e){const t=new Date(e);return`${ae(t.getHours())}:${ae(t.getMinutes())}:${ae(t.getSeconds())}`}function di(){const e=[];try{const t=Object.keys(localStorage).filter(o=>o!==Ue);if(t.length){const o=t.slice(0,30).map(r=>{const s=localStorage.getItem(r)??"";return`  ${r}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`localStorage (${t.length} keys):
${o.join(`
`)}`)}}catch{}try{const t=Object.keys(sessionStorage);if(t.length){const o=t.slice(0,30).map(r=>{const s=sessionStorage.getItem(r)??"";return`  ${r}: ${s.length>120?s.slice(0,120)+"…":s}`});e.push(`sessionStorage (${t.length} keys):
${o.join(`
`)}`)}}catch{}return e.length?e.join(`

`):"(empty)"}function pi(){try{const t=performance.getEntriesByType("navigation")[0];return t?[`DNS: ${Math.round(t.domainLookupEnd-t.domainLookupStart)}ms`,`Connect: ${Math.round(t.connectEnd-t.connectStart)}ms`,`TTFB: ${Math.round(t.responseStart-t.requestStart)}ms`,`DOM Ready: ${Math.round(t.domContentLoadedEventEnd)}ms`,`Page Load: ${Math.round(t.loadEventEnd)}ms`].join(" | "):"(not available)"}catch{return"(not available)"}}function ui(){try{const e=document.cookie.split(";").map(t=>t.trim().split("=")[0]).filter(Boolean);return e.length?e.join(", "):"(none)"}catch{return"(unavailable)"}}function fi(e,t,o){const s=new Date().toISOString().replace("T"," ").slice(0,19),i=q(),a=G(),f=X(),u=t?i.filter(g=>g.level==="error"||g.level==="warn"):[...i],l=t?a.filter(g=>g.status===0||g.status>=400):[...a],p=[];p.push(`# Debug Snapshot — ${s}`),p.push(""),p.push(`**URL:** ${window.location.href}`),document.title&&p.push(`**Page:** ${document.title}`),p.push(`**Viewport:** ${window.innerWidth} x ${window.innerHeight}`),p.push(`**User-Agent:** ${navigator.userAgent}`),p.push(`**Cookies:** ${ui()}`),p.push(""),o.trim()&&(p.push("## Notes"),p.push(o.trim()),p.push("")),e.length&&(p.push(`## Screenshots (${e.length} downloaded to ~/Downloads)`),p.push(e.map(g=>g.name).join(", ")),p.push(""));const c=t?`${u.length} warnings/errors of ${i.length} total`:`${u.length} entries`;if(p.push(`## Console — ${c}`),!u.length)p.push("(none)");else for(const g of u.slice(-60))p.push(`[${so(g.timestamp)}] ${g.level.toUpperCase().padEnd(5)} ${g.args.join(" ")}`);p.push("");const h=t?`${l.length} errors of ${a.length} total`:`${l.length} requests`;if(p.push(`## Network — ${h}`),!l.length)p.push("(none)");else for(const g of l.slice(-40)){const m=g.status===0?"ERR":String(g.status);p.push(`${g.method.padEnd(6)} ${g.url} — ${m} (${g.duration}ms)`)}if(p.push(""),p.push(`## JavaScript Errors — ${f.length}`),!f.length)p.push("(none)");else for(const g of f){const m=g.type==="unhandledrejection"?"UnhandledRejection":"Error";if(p.push(`[${so(g.timestamp)}] ${m}: ${g.message}`),g.source&&p.push(`  at ${g.source}:${g.line}:${g.col}`),g.stack){const S=g.stack.split(`
`).slice(1,7).map(y=>y.trim()).filter(Boolean);for(const y of S)p.push(`  ${y}`)}}return p.push(""),p.push("## Storage"),p.push(di()),p.push(""),p.push("## Page Timing"),p.push(pi()),p.join(`
`)}function gi(e){for(const t of e){const o=document.createElement("a");o.href=t.url,o.download=t.name,document.body.appendChild(o),o.click(),document.body.removeChild(o)}}async function hi(e){return new Promise(t=>{const o=URL.createObjectURL(e),r=new Image;r.onload=()=>{const s=document.createElement("canvas");s.width=r.naturalWidth,s.height=r.naturalHeight,s.getContext("2d").drawImage(r,0,0),s.toBlob(i=>t(i??e),"image/webp",.82),URL.revokeObjectURL(o)},r.onerror=()=>{URL.revokeObjectURL(o),t(e)},r.src=o})}async function xi(){let e=null;try{e=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser"},preferCurrentTab:!0});const t=document.createElement("video");t.srcObject=e,t.muted=!0,await new Promise(f=>{t.onloadedmetadata=()=>{t.play().then(f).catch(f)}}),await new Promise(f=>setTimeout(f,120));const r=Math.min(1,1440/t.videoWidth),s=document.createElement("canvas");s.width=Math.round(t.videoWidth*r),s.height=Math.round(t.videoHeight*r);const i=s.getContext("2d");let a=null;return i&&(i.drawImage(t,0,0,s.width,s.height),a=await new Promise(f=>s.toBlob(f,"image/webp",.82))),t.srcObject=null,a}finally{e?.getTracks().forEach(t=>t.stop())}}const yi={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",boxSizing:"border-box"},mi={display:"flex",flexShrink:"0",borderBottom:`1px solid ${d.panelBorder}`};function lo(e){return{flex:"1",padding:"7px 4px",border:"none",borderBottom:e?`2px solid ${d.fabBg}`:"2px solid transparent",backgroundColor:"transparent",color:e?d.textBright:d.textMuted,fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"color 0.1s",boxSizing:"border-box"}}const ao={flex:"1",overflowY:"auto",overflowX:"hidden",padding:"8px",display:"flex",flexDirection:"column",gap:"8px",boxSizing:"border-box"},qe={fontSize:"10px",fontWeight:"600",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.4px",marginBottom:"4px",display:"block"},bi={display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"4px"};function Xe(e,t){return{padding:"6px",borderRadius:"4px",backgroundColor:e>0?`${t}22`:d.toolBtnBg,border:`1px solid ${e>0?t:d.panelBorder}`,textAlign:"center"}}const Ye={fontSize:"16px",fontWeight:"700",color:d.textBright,display:"block"},Ve={fontSize:"9px",color:d.textMuted,textTransform:"uppercase",letterSpacing:"0.3px"},_i={border:`1px dashed ${d.panelBorder}`,borderRadius:"6px",padding:"10px",minHeight:"64px",display:"flex",flexDirection:"column",gap:"6px"},Si={display:"flex",flexWrap:"wrap",gap:"4px"},vi={position:"relative",width:"56px",height:"40px",borderRadius:"3px",overflow:"hidden",flexShrink:"0",border:`1px solid ${d.panelBorder}`,cursor:"default"},wi={width:"100%",height:"100%",objectFit:"cover"},ki={position:"absolute",top:"1px",right:"1px",width:"14px",height:"14px",borderRadius:"2px",border:"none",backgroundColor:"rgba(0,0,0,0.7)",color:"#fff",fontSize:"9px",lineHeight:"1",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},Ci={fontSize:"11px",color:d.textMuted,textAlign:"center"},co={display:"flex",gap:"4px"};function _e(e="muted"){const t=e==="primary"?d.fabBg:e==="danger"?"#7f1d1d":d.toolBtnBg,o=e==="primary"?"#fff":e==="danger"?"#fca5a5":d.textMuted;return{flex:"1",padding:"5px 8px",borderRadius:"4px",border:"none",backgroundColor:t,color:o,fontSize:"11px",fontWeight:"500",cursor:"pointer",whiteSpace:"nowrap"}}const $i=e=>({width:"100%",padding:"9px 12px",borderRadius:"6px",border:"none",backgroundColor:e?"#1e293b":d.fabBg,color:e?d.textMuted:"#fff",fontSize:"12px",fontWeight:"600",cursor:e?"not-allowed":"pointer"}),Bi=e=>({padding:"3px 8px",borderRadius:"4px",border:`1px solid ${e?d.fabBg:d.panelBorder}`,backgroundColor:e?`${d.fabBg}33`:"transparent",color:e?"#93c5fd":d.textMuted,fontSize:"10px",cursor:"pointer",fontWeight:"500"}),Ti={borderRadius:"6px",border:`1px solid ${d.panelBorder}`,backgroundColor:d.toolBtnBg,padding:"8px",display:"flex",flexDirection:"column",gap:"4px"},Ei={fontSize:"10px",color:d.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Ri={fontSize:"10px",color:d.textMuted},Mi={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:d.textMuted,fontSize:"12px",padding:"20px",textAlign:"center"};function zi(){const[e,t]=_("capture"),[o,r]=_([]),s=j(o),[i,a]=_(ai),[f,u]=_(!1),[l,p]=_(null),[c,h]=_(!0),[g,m]=_("");A(()=>{s.current=o},[o]),A(()=>()=>{for(const v of s.current)URL.revokeObjectURL(v.url)},[]),A(()=>{if(e!=="capture")return;function v(z){const N=z.clipboardData?.items;if(N){for(const H of Array.from(N))if(H.type.startsWith("image/")){const Y=H.getAsFile();Y&&hi(Y).then(Ke=>S(Ke))}}}return window.addEventListener("paste",v),()=>window.removeEventListener("paste",v)},[e]);function S(v){const z=ci++,N=URL.createObjectURL(v),H=v.type==="image/webp"?"webp":v.type==="image/jpeg"?"jpg":"png";r(Y=>[...Y,{id:z,url:N,blob:v,name:`screenshot-${z}.${H}`}])}const y=k(async()=>{u(!0);try{const v=await xi();v&&S(v)}catch{}u(!1)},[]),x=k(v=>{r(z=>{const N=z.find(H=>H.id===v);return N&&URL.revokeObjectURL(N.url),z.filter(H=>H.id!==v)})},[]),b=k(()=>{r(v=>{for(const z of v)URL.revokeObjectURL(z.url);return[]})},[]),w=k(v=>{p(v),setTimeout(()=>p(null),2e3)},[]),$=k(async()=>{const v=fi(o,c,g);o.length>0&&gi(o);const z={id:String(Date.now()),timestamp:Date.now(),pageUrl:window.location.href,report:v};a(N=>{const H=[z,...N].slice(0,li);return io(H),H}),await navigator.clipboard.writeText(v),w(z.id)},[o,c,g,w]),B=k(async v=>{await navigator.clipboard.writeText(v.report),w(v.id)},[w]),R=k(v=>{a(z=>{const N=z.filter(H=>H.id!==v);return io(N),N})},[]),O=q(),M=G(),T=X(),L=O.filter(v=>v.level==="error"||v.level==="warn").length,I=M.filter(v=>v.status===0||v.status>=400).length;return n("div",{style:yi},n("div",{style:mi},n("button",{style:lo(e==="capture"),onClick:()=>t("capture")},"Capture"),n("button",{style:lo(e==="history"),onClick:()=>t("history")},`History (${i.length})`)),e==="capture"?n("div",{style:ao},n("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},n("span",{style:qe},"Report data"),n("button",{style:Bi(c),onClick:()=>h(v=>!v)},c?"Errors only":"All entries")),n("div",{style:bi},n("div",{style:Xe(L,"#eab308")},n("span",{style:Ye},String(L)),n("span",{style:Ve},"Console")),n("div",{style:Xe(I,"#ef4444")},n("span",{style:Ye},String(I)),n("span",{style:Ve},"Net Errors")),n("div",{style:Xe(T.length,"#ef4444")},n("span",{style:Ye},String(T.length)),n("span",{style:Ve},"JS Errors"))),n("div",null,n("span",{style:qe},`Screenshots (${o.length})`),n("div",{style:_i},o.length===0?n("div",{style:Ci},"Cmd+V to paste a screenshot",n("br",null),"or click Capture below"):n("div",{style:Si},o.map(v=>n("div",{key:v.id,style:vi,title:v.name},n("img",{src:v.url,style:wi,alt:v.name}),n("button",{style:ki,onClick:()=>x(v.id),title:"Remove"},"×")))),n("div",{style:co},n("button",{style:_e("muted"),onClick:y,disabled:f,title:"Capture current screen (opens share dialog)"},f?"Capturing...":"Capture Screen"),o.length>0?n("button",{style:_e("danger"),onClick:b,title:"Delete all screenshots"},"Delete All"):null))),n("div",null,n("span",{style:qe},"Notes (optional)"),n("textarea",{value:g,onInput:v=>m(v.target.value),placeholder:"Add your own comments or context…",rows:3,style:{width:"100%",background:d.toolBtnBg,border:`1px solid ${d.panelBorder}`,borderRadius:"4px",color:d.text,fontSize:"11px",padding:"5px 6px",resize:"vertical",fontFamily:"system-ui, -apple-system, sans-serif",boxSizing:"border-box"}})),n("button",{style:$i(!1),onClick:$,title:"Copy debug report to clipboard. Screenshots (if any) download as files."},l?"Copied!":"Copy Report & Download Screenshots"),n("p",{style:{fontSize:10,color:d.textMuted,textAlign:"center",padding:"4px 8px"}},"Screenshots save to ~/Downloads · ",n("a",{style:{color:"#475569",textDecoration:"underline",cursor:"pointer"},href:"/settings/widget",target:"_blank"},"Set label in Settings"))):n("div",{style:{...ao,gap:"6px"}},i.length===0?n("div",{style:Mi},"No snapshots yet. Copy a report from the Capture tab to save it here."):i.map(v=>{const z=new Date(v.timestamp),N=`${z.toLocaleDateString()} ${ae(z.getHours())}:${ae(z.getMinutes())}`,H=l===v.id;return n("div",{key:v.id,style:Ti},n("div",{style:Ri},N),n("div",{style:Ei,title:v.pageUrl},v.pageUrl),n("div",{style:co},n("button",{style:_e(H?"primary":"muted"),onClick:()=>B(v)},H?"Copied!":"Copy Report"),n("button",{style:_e("danger"),onClick:()=>R(v.id)},"Delete")))})))}let po={localStorage:{},sessionStorage:{},cookies:""};function Ii(){const e={};try{for(let o=0;o<window.localStorage.length;o++){const r=window.localStorage.key(o);e[r]=window.localStorage.getItem(r)??""}}catch{}const t={};try{for(let o=0;o<window.sessionStorage.length;o++){const r=window.sessionStorage.key(o);t[r]=window.sessionStorage.getItem(r)??""}}catch{}return po={localStorage:e,sessionStorage:t,cookies:document.cookie},po}function Di(){const[e,t]=_({localStorage:{},sessionStorage:{},cookies:""}),[o,r]=_("ls");A(()=>{t(Ii())},[]);const s=(f,u)=>n("button",{style:{padding:"4px 10px",fontSize:11,cursor:"pointer",border:"none",fontFamily:"inherit",background:o===f?d.toolBtnBgActive:"transparent",color:o===f?"#fff":d.textMuted,borderRadius:4},onClick:()=>r(f)},u),i=o==="ls"?e.localStorage:o==="ss"?e.sessionStorage:null,a=i?Object.entries(i):[];return n("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},n("div",{style:{display:"flex",gap:4,padding:"6px 8px",borderBottom:`1px solid ${d.panelBorder}`}},s("ls","localStorage"),s("ss","sessionStorage"),s("cookies","Cookies")),n("div",{style:{flex:1,overflowY:"auto"}},o==="cookies"?n("pre",{style:{padding:12,fontSize:10,color:d.text,fontFamily:"monospace",whiteSpace:"pre-wrap"}},e.cookies||"(empty)"):a.length===0?n("p",{style:{padding:12,fontSize:11,color:d.textMuted}},"(empty)"):a.map(([f,u])=>n("div",{key:f,style:{display:"flex",gap:8,padding:"4px 12px",borderBottom:`1px solid ${d.panelBorder}`,fontSize:11}},n("span",{style:{color:d.textMuted,flexShrink:0,width:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},f),n("span",{style:{color:d.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontFamily:"monospace"}},u)))))}const uo=[],Se=[];let fo=!1;function ve(e){uo.push(e),Se.forEach(t=>t())}function Ge(){return[...uo]}function Li(e){return Se.push(e),()=>{const t=Se.indexOf(e);t!==-1&&Se.splice(t,1)}}function Hi(){if(fo)return;fo=!0,document.querySelectorAll("img").forEach(o=>{o.complete&&o.naturalWidth===0&&o.src&&ve({severity:"error",category:"image",message:"Broken image",detail:o.src})});const e=document.querySelectorAll("img:not([alt])");e.length>0&&ve({severity:"warn",category:"alt-text",message:`${e.length} image(s) missing alt text`});const t=o=>{ve({severity:"error",category:"mixed-content",message:"Mixed content blocked",detail:o.blockedURI})};document.addEventListener("securitypolicyviolation",t);try{new PerformanceObserver(r=>{for(const s of r.getEntries()){const i=s;i.duration>2e3&&ve({severity:"warn",category:"slow-resource",message:`Slow resource: ${Math.round(i.duration)}ms`,detail:i.name})}}).observe({type:"resource",buffered:!0})}catch{}}function Pi(){const[e,t]=_([]),[o,r]=_(null);return A(()=>(t(Ge()),Li(()=>t(Ge()))),[]),n("div",{style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden"}},n("div",{style:{display:"flex",alignItems:"center",padding:"4px 12px",borderBottom:`1px solid ${d.panelBorder}`,flexShrink:0}},n("span",{style:{fontSize:10,color:d.textMuted}},`${e.length} issue${e.length!==1?"s":""}`),n("button",{style:{marginLeft:"auto",background:"none",border:`1px solid ${d.panelBorder}`,borderRadius:4,color:d.textMuted,cursor:"pointer",fontSize:10,padding:"2px 8px",fontFamily:"inherit"},onClick:()=>navigator.clipboard.writeText(zt(e)).catch(()=>{}),title:"Copy all health issues"},"Copy Health")),n("div",{style:{flex:1,overflowY:"auto"}},e.length===0?n("p",{style:{padding:16,fontSize:12,color:d.textMuted}},"No health issues detected."):e.map((s,i)=>n("div",{key:`${s.category}:${s.message}:${i}`,style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`,display:"flex",flexDirection:"column",gap:2,position:"relative"},onMouseEnter:()=>r(i),onMouseLeave:()=>r(null)},n("div",{style:{display:"flex",alignItems:"center",gap:6}},n("span",{style:{fontSize:10,fontWeight:600,color:s.severity==="error"?"#ef4444":"#f59e0b",textTransform:"uppercase"}},s.severity),n("span",{style:{fontSize:11,color:d.text}},s.message),n("button",{style:{background:"none",border:"none",cursor:"pointer",marginLeft:"auto",flexShrink:0,color:d.textMuted,fontSize:12,opacity:o===i?1:0,transition:"opacity .1s",padding:"0 4px"},onClick:a=>{a.stopPropagation(),navigator.clipboard.writeText(Rt(s)).catch(()=>{})},title:"Copy row"},"⧇")),s.detail&&n("span",{style:{fontSize:10,color:d.textMuted,fontFamily:"monospace",marginLeft:12}},s.detail)))))}function Ai({apiBase:e,pinHash:t,projectId:o}){const[r,s]=_([]),[i,a]=_(null),[f,u]=_([]),l={"X-DevTools-Pin":t,"Content-Type":"application/json"};A(()=>{const S=new AbortController,y=S.signal;return fetch(`${e}/api/routines?projectId=${o}`,{headers:l,signal:y}).then(x=>{if(!x.ok)throw new Error(x.statusText);return x.json()}).then(s).catch(()=>{}),fetch(`${e}/api/routines/runs?projectId=${o}`,{headers:l,signal:y}).then(x=>{if(!x.ok)throw new Error(x.statusText);return x.json()}).then(async x=>{if(!x)return;a(x);const b=await fetch(`${e}/api/routines/${x.checklistId}/items`,{headers:l,signal:y}).then(w=>{if(!w.ok)throw new Error(w.statusText);return w.json()}).catch(()=>[]);u(b)}).catch(()=>{}),()=>S.abort()},[o,t]);async function p(S){try{const y=await fetch(`${e}/api/routines/${S}/runs`,{method:"POST",headers:l});if(!y.ok)return;const x=await y.json(),[b,w]=await Promise.all([fetch(`${e}/api/routines/runs/${x.id}`,{headers:l}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()}),fetch(`${e}/api/routines/${S}/items`,{headers:l}).then($=>{if(!$.ok)throw new Error($.statusText);return $.json()})]);a(b),u(w)}catch{}}async function c(S,y){i&&(await fetch(`${e}/api/routines/runs/${i.id}/items?itemId=${S}`,{method:"PUT",headers:l,body:JSON.stringify({checked:y})}).catch(()=>{}),a(x=>x?{...x,items:x.items?.map(b=>b.itemId===S?{...b,checked:y?1:0}:b)}:null))}const h=i?.items?.length??0,g=i?.items?.filter(S=>S.checked).length??0,m=h>0?Math.round(g/h*100):0;return i?n("div",{style:{display:"flex",flexDirection:"column",height:"100%"}},n("div",{style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`}},n("div",{style:{height:4,background:"#1e293b",borderRadius:2,overflow:"hidden"}},n("div",{style:{height:"100%",background:"#6366f1",borderRadius:2,width:`${m}%`,transition:"width .2s"}})),n("span",{style:{fontSize:10,color:d.textMuted,marginTop:4,display:"block"}},`${g} / ${h} complete`)),n("div",{style:{flex:1,overflowY:"auto",padding:"4px 0"}},(i.items??[]).map(S=>{const y=f.find(x=>x.id===S.itemId);return n("div",{key:S.id,style:{padding:"8px 12px",borderBottom:`1px solid ${d.panelBorder}`}},n("div",{style:{display:"flex",alignItems:"center",gap:8}},n("input",{type:"checkbox",checked:S.checked===1,onChange:x=>c(S.itemId,x.target.checked)}),n("span",{style:{fontSize:11,color:S.checked?d.textMuted:d.text,textDecoration:S.checked?"line-through":"none"}},y?.name??`Item ${S.itemId}`)),y?.snippet&&window.innerWidth>=768&&n("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:4,marginLeft:22}},n("code",{style:{fontSize:10,color:"#94a3b8",background:"#0a0f1a",padding:"2px 6px",borderRadius:3,fontFamily:"monospace",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},y.snippet),n("button",{style:{background:"none",border:"none",color:d.textMuted,cursor:"pointer",fontSize:12},onClick:()=>navigator.clipboard.writeText(y.snippet??"").catch(()=>{})},"⧇")))})),n("button",{style:{margin:8,padding:"6px 0",border:`1px solid ${d.panelBorder}`,borderRadius:6,background:"none",color:d.textMuted,fontSize:11,cursor:"pointer",fontFamily:"inherit"},onClick:async()=>{i&&await fetch(`${e}/api/routines/runs/${i.id}`,{method:"PUT",headers:l,body:JSON.stringify({close:!0})}).catch(()=>{}),a(null)}},"Close Run")):n("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:8}},n("p",{style:{fontSize:11,color:d.textMuted}},"Start a checklist run:"),...r.map(S=>n("button",{key:S.id,style:{padding:"7px 12px",borderRadius:6,background:d.toolBtnBg,border:`1px solid ${d.panelBorder}`,color:d.text,fontSize:11,cursor:"pointer",textAlign:"left",fontFamily:"inherit"},onClick:()=>p(S.id)},"▶ "+S.name)),r.length===0&&n("p",{style:{fontSize:10,color:d.textMuted}},"No checklists. Create one in Dashboard → Routines."))}const Oi={idea:"in-progress","in-progress":"done",done:"idea"},Ni={idea:"☆","in-progress":"◑",done:"✓"},Fi={idea:d.textMuted,"in-progress":"#6366f1",done:"#22c55e"},Wi={display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden"},ji={display:"flex",gap:"6px",padding:"8px",borderBottom:`1px solid ${d.panelBorder}`},Ui={flex:1,padding:"5px 8px",borderRadius:"4px",border:`1px solid ${d.panelBorder}`,backgroundColor:"rgba(0,0,0,0.3)",color:d.textBright,fontSize:"12px",fontFamily:"inherit",outline:"none"},qi={padding:"5px 10px",borderRadius:"4px",border:"none",backgroundColor:"#6366f1",color:"#fff",fontSize:"11px",cursor:"pointer",flexShrink:0},Xi={flex:1,overflowY:"auto",padding:"4px 0"},Yi={display:"flex",alignItems:"center",gap:"6px",padding:"5px 8px",borderBottom:`1px solid ${d.panelBorder}`},Vi={flex:1,fontSize:"12px",color:d.textBright,lineHeight:"1.3",wordBreak:"break-word"},Gi={borderTop:`1px solid ${d.panelBorder}`,padding:"6px 8px"};function Ji({apiClient:e,projectId:t}){const[o,r]=_([]),[s,i]=_(""),[a,f]=_(!1);A(()=>{const y=new AbortController;return e.listIdeas(t).then(x=>{y.signal.aborted||r(x??[])}).catch(()=>{}),()=>y.abort()},[t]);const u=k(async()=>{const y=s.trim();if(!y||a)return;f(!0);const x={id:Date.now(),title:y,body:null,status:"idea",createdAt:null};r(b=>[x,...b]),i("");try{const b=await e.createIdea({projectId:t,title:y});r(w=>w.map($=>$.id===x.id?b:$))}catch{r(b=>b.filter(w=>w.id!==x.id))}finally{f(!1)}},[s,a,t,e]),l=k(y=>{y.key==="Enter"&&u()},[u]),p=k(async y=>{const x=Oi[y.status];r(b=>b.map(w=>w.id===y.id?{...w,status:x}:w));try{await e.updateIdea(y.id,{status:x})}catch{r(b=>b.map(w=>w.id===y.id?{...w,status:y.status}:w))}},[e]),c=k(async y=>{r(x=>x.filter(b=>b.id!==y)),await e.deleteIdea(y).catch(()=>{})},[e]),h=k(()=>{const x=o.filter(w=>w.status!=="done").map(w=>`${w.status==="in-progress"?"- [ ] (in-progress)":"- [ ]"} ${w.title}`),b=`### Ideas — ${t}
${x.join(`
`)}`;navigator.clipboard?.writeText(b).catch(()=>{})},[o,t]),g={padding:"16px 8px",fontSize:"11px",color:d.textMuted,textAlign:"center"},m=y=>({background:"none",border:"none",cursor:"pointer",fontSize:"13px",color:Fi[y],padding:"0 2px",flexShrink:0}),S={background:"none",border:"none",cursor:"pointer",fontSize:"11px",color:d.textMuted,padding:"0 2px",flexShrink:0};return n("div",{style:Wi},n("div",{style:ji},n("input",{style:Ui,placeholder:"New idea…",value:s,onInput:y=>i(y.target.value),onKeyDown:l}),n("button",{style:qi,onClick:u,disabled:a},"+")),n("div",{style:Xi},o.length===0?n("div",{style:g},"No ideas yet"):o.map(y=>n("div",{key:y.id,style:Yi},n("button",{onClick:()=>p(y),style:m(y.status),title:`Status: ${y.status} — click to cycle`},Ni[y.status]),n("span",{style:{...Vi,opacity:y.status==="done"?.5:1}},y.title),n("button",{onClick:()=>c(y.id),style:S,title:"Delete"},"×")))),n("div",{style:Gi},n("button",{style:{...Bt,width:"100%",padding:"5px 0"},onClick:h},"Copy for Claude")))}const Ki=[{id:"console",label:"Console",icon:">_"},{id:"network",label:"Network",icon:"⇄"},{id:"errors",label:"Errors",icon:"⚠"},{id:"perf",label:"Perf",icon:"⚡"},{id:"storage",label:"Storage",icon:"◫"},{id:"dom",label:"DOM",icon:"⬡"},{id:"health",label:"Health",icon:"♥"},{id:"routines",label:"Routines",icon:"✓"},{id:"ideas",label:"Ideas",icon:"☆"},{id:"ai",label:"AI",icon:"✦"},{id:"bugs",label:"Bugs",icon:"⌖"},{id:"snapshot",label:"Snapshot",icon:"◎"}];function Qi({projectId:e,isOpen:t,onClose:o,apiClient:r,apiBase:s,pinHash:i}){const[a,f]=_("errors"),[u,l]=_(!1),[p,c]=_(!1),[h,g]=_(null),[m,S]=_(""),[y,x]=_(""),[b,w]=_({errors:0,console:0}),$=typeof window<"u"?window.location.hostname:e,[B,R]=_(()=>{const C=typeof window<"u"?window.innerWidth:1200,F=typeof window<"u"?window.innerHeight:800,W=Math.min(F*.85,520);return{x:Math.max(0,C-De-24),y:Math.max(0,F-W-82)}}),[O,M]=_(!1),T=j(null);A(()=>{function C(){w({errors:X().length,console:q().filter(W=>W.level==="warn"||W.level==="error").length})}C();const F=setInterval(C,2e3);return()=>clearInterval(F)},[]);const[L,I]=_(0);A(()=>{function C(){r.listIdeas(e).then(W=>{I((W??[]).filter(ce=>ce.status!=="done").length)}).catch(()=>{})}C();const F=setInterval(C,1e4);return()=>clearInterval(F)},[e,r]);const v=k(C=>{C.target.closest("button")||(C.currentTarget.setPointerCapture(C.pointerId),T.current={startX:C.clientX,startY:C.clientY,originX:B.x,originY:B.y},M(!0))},[B.x,B.y]),z=k(C=>{if(!T.current)return;const{startX:F,startY:W,originX:we,originY:ce}=T.current,Ls=window.innerWidth-De,Hs=window.innerHeight-48;R({x:Math.max(0,Math.min(Ls,we+(C.clientX-F))),y:Math.max(0,Math.min(Hs,ce+(C.clientY-W)))})},[]),N=k(()=>{T.current=null,M(!1)},[]),H=k(C=>{S(C.message),x(C.stack),f("bugs")},[]),Y=k(C=>{a==="bugs"&&C!=="bugs"&&(S(""),x("")),f(C)},[a]);function Ke(){switch(a){case"console":return n(fn,null);case"network":return n(Fn,null);case"errors":return n(fr,{onReportBug:H});case"bugs":return n(Zt,{apiClient:r,projectId:e,prefillTitle:m||void 0,prefillStack:y||void 0});case"perf":return n(si,null);case"storage":return n(Di,null);case"health":return n(Pi,null);case"routines":return n(Ai,{apiBase:s,pinHash:i,projectId:e});case"ideas":return n(Ji,{apiClient:r,projectId:e});case"ai":return n(Rr,{apiBase:s,pinHash:i});case"snapshot":return n(zi,null);case"dom":return n("div",{style:{padding:"40px 20px",textAlign:"center",color:"#334155",fontSize:13}},"Click any element on the page to inspect it.");default:return n("div",{style:{padding:"40px 20px",textAlign:"center",color:"#334155",fontSize:13}},`${a} — coming soon`)}}return n("div",{style:{...Ro,left:`${B.x}px`,top:`${B.y}px`,height:u?"auto":"min(85vh, 520px)",opacity:t?"1":"0",transition:"opacity 0.2s ease",pointerEvents:t?"auto":"none"},"aria-hidden":!t},n("div",{style:{...Mo,cursor:O?"grabbing":"grab"},onPointerDown:v,onPointerMove:z,onPointerUp:N},n("div",{style:Do},n("div",{style:Lo}),n("span",null,$)),n("div",{style:Ho},n("button",{style:Bt,title:"Copy full page context for Claude",onClick:()=>{const C=Jo([...q()],[...G()],[...X()],Ge());navigator.clipboard.writeText(C).catch(()=>{})}},"Copy for Claude"),n("button",{style:Po,title:"Minimize",onClick:()=>l(C=>!C)},"—"),n("button",{style:{...zo,backgroundColor:p?"#ef4444":"transparent",color:p?"#fff":"#475569"},onClick:o,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),"aria-label":"Close panel",title:"Close"},"✕"))),u?null:n("div",{style:Ao},Ki.map(C=>{const F=a===C.id,W=C.id==="errors"?b.errors:C.id==="console"?b.console:C.id==="ideas"?L:0,we=C.id==="console",ce=C.id==="ideas";return n("button",{key:C.id,style:{...Oo,...F?No:{},borderBottom:F?"2px solid #6366f1":"2px solid transparent",color:F?"#a5b4fc":h===C.id?"#94a3b8":"#475569"},onClick:()=>Y(C.id),onMouseEnter:()=>g(C.id),onMouseLeave:()=>g(null)},C.icon," ",C.label,W>0?n("span",{style:ce?{...Le,background:"#6366f1"}:we?{...Le,background:"#d97706"}:Le},W):null)})),u?null:n("div",{style:{...Io,padding:0}},n("div",{style:{height:"100%",overflowY:"auto",padding:"10px 12px",fontSize:"13px",color:"#94a3b8"}},Ke())))}const go={isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0,moved:!1},Zi=n("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},n("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}));function es({projectId:e,pinHash:t,apiBase:o,apiClient:r}){const[s,i]=_(!1),[a,f]=_(!1),[u,l]=_({x:0,y:0}),[p,c]=_(!1),[h,g]=_(0),m=j(go),S=j(null);A(()=>{function B(){const O=X().length,M=q().filter(T=>T.level==="warn"||T.level==="error").length;g(O+M)}B();const R=setInterval(B,2e3);return()=>clearInterval(R)},[]);const y=k(B=>{B.currentTarget.setPointerCapture(B.pointerId),m.current={isDragging:!0,startX:B.clientX,startY:B.clientY,offsetX:u.x,offsetY:u.y,moved:!1},c(!0)},[u.x,u.y]),x=k(B=>{const R=m.current;if(!R.isDragging)return;const O=B.clientX-R.startX,M=B.clientY-R.startY;Math.sqrt(O*O+M*M)>To&&(m.current={...R,moved:!0}),l({x:R.offsetX+O,y:R.offsetY+M})},[]),b=k(()=>{const R=m.current.moved;m.current={...go},c(!1),R||i(O=>!O)},[]),w=k(()=>{i(!1)},[]),$={...Eo,bottom:`${24-u.y}px`,right:`${24-u.x}px`,backgroundColor:a?d.fabBgHover:d.fabBg,boxShadow:a?"0 6px 20px rgba(99, 102, 241, 0.6)":"0 4px 16px rgba(99, 102, 241, 0.5)",transform:a?"scale(1.05)":"scale(1)",cursor:p?"grabbing":"grab"};return n("div",null,n("button",{ref:S,style:{...$,overflow:"visible"},title:`DevTools (${e})`,"aria-label":"Toggle DevTools panel",onPointerDown:y,onPointerMove:x,onPointerUp:b,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1)},Zi,h>0?n("span",{style:{position:"absolute",top:"-4px",right:"-4px",width:"18px",height:"18px",background:"#ef4444",borderRadius:"50%",fontSize:"9px",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",border:"2px solid #0f172a",lineHeight:"1"}},h>99?"99+":String(h)):null),n(Qi,{projectId:e,isOpen:s,onClose:w,apiClient:r,apiBase:o,pinHash:t}))}function ho(e,t){async function o(r,s={}){return(await fetch(`${e}${r}`,{...s,headers:{"Content-Type":"application/json","X-DevTools-Pin":t,...s.headers}})).json()}return{createBug:r=>o("/api/bugs",{method:"POST",body:JSON.stringify(r)}),createDevLog:r=>o("/api/devlog",{method:"POST",body:JSON.stringify(r)}),sendEvents:r=>o("/api/widget/event",{method:"POST",body:JSON.stringify({events:r})}),listIdeas:r=>o(`/api/ideas?projectId=${encodeURIComponent(r)}`),createIdea:r=>o("/api/ideas",{method:"POST",body:JSON.stringify(r)}),updateIdea:(r,s)=>o(`/api/ideas/${r}`,{method:"PATCH",body:JSON.stringify(s)}),deleteIdea:r=>o(`/api/ideas/${r}`,{method:"DELETE"})}}const ts=console.warn.bind(console),os=1e4,ns=50,rs=200,is=new Set(["log","info","warn","error","debug"]);function ss(e,t,o){let r=[];function s(p){r.length>=rs||(r.push(p),r.length>=ns&&i())}function i(){if(r.length===0)return;const p=[...r];r=[],t.sendEvents(p).catch(c=>{ts("[DevTools] Failed to send events:",c)})}function a(){if(r.length===0)return;const p=[...r];r=[];const c=JSON.stringify({events:p}),h=`${o}/api/widget/event`;try{const g=new Blob([c],{type:"application/json"});navigator.sendBeacon(h,g)}catch{}}let f=0;Yt(()=>{const c=X().filter(h=>h.id>f);if(c.length>0){f=c[c.length-1].id;for(const h of c)s({type:"error",title:h.message,content:h.stack,metadata:{errorType:h.type,source:h.source,line:h.line,col:h.col},projectId:e})}}),no(p=>{s({type:"perf",title:`${p.metric}: ${p.value}`,content:`Rating: ${p.rating}`,metadata:{metric:p.metric,value:p.value,rating:p.rating},projectId:e})});let u=0;Tt(()=>{const c=q().filter(h=>h.id>u);if(c.length>0){u=c[c.length-1].id;for(const h of c){if(!is.has(h.level))continue;const g=h.args.join(" ");g.includes("/api/widget/")||g.includes("/api/ai/analyze")||s({type:"console",title:g.slice(0,500),content:h.args.join(`
`).slice(0,2e3),metadata:{level:h.level,argCount:h.args.length},projectId:e})}}});let l=0;Pt(()=>{const c=G().filter(h=>h.id>l);if(c.length>0){l=c[c.length-1].id;for(const h of c)h.url.includes("/api/widget/")||h.url.includes("/api/bugs")||h.url.includes("/api/ai/analyze")||s({type:"network",title:`${h.method} ${h.url}`.slice(0,500),content:`${h.status} ${h.statusText} (${h.duration}ms)`,metadata:{method:h.method,url:h.url,status:h.status,statusText:h.statusText,duration:h.duration,requestSize:h.requestSize,responseSize:h.responseSize},projectId:e})}}),setInterval(i,os),window.addEventListener("beforeunload",a)}function ls(e,t,o){Yo(),mn(),Un(),Hr();const r=ho(o,t);ss(e,r,o)}const as=1e4,cs={position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"280px",backgroundColor:"#1a0000",border:"1px solid #dc2626",borderRadius:"8px",boxShadow:"0 8px 24px rgba(220, 38, 38, 0.3)",zIndex:"999997",fontFamily:"system-ui, -apple-system, sans-serif",color:d.text,overflow:"hidden",display:"flex",flexDirection:"column"},ds={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:"rgba(220, 38, 38, 0.2)",borderBottom:"1px solid #dc2626",flexShrink:"0"},ps={fontSize:"12px",fontWeight:"600",color:"#fca5a5"},us={display:"flex",gap:"6px"},xo={padding:"3px 8px",borderRadius:"4px",border:"none",cursor:"pointer",fontSize:"11px",fontWeight:"500"},fs={...xo,backgroundColor:"#dc2626",color:"#fff"},gs={...xo,backgroundColor:"rgba(255, 255, 255, 0.1)",color:d.textMuted},hs={padding:"8px 12px",overflowY:"auto",flex:"1"},xs={fontSize:"12px",fontWeight:"500",color:"#fca5a5",marginBottom:"6px",wordBreak:"break-word"},ys={fontSize:"10px",fontFamily:"monospace",lineHeight:"1.6",color:d.textMuted},yo={padding:"1px 0",wordBreak:"break-all"},ms={...yo,opacity:"0.5"};function bs(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0):[]}function _s(e){return e.includes("node_modules")}function Ss({onReportBug:e}){const[t,o]=_(null),r=j(null),s=k(()=>{o(null),r.current&&(clearTimeout(r.current),r.current=null)},[]),i=k(()=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{o(null),r.current=null},as)},[]);A(()=>(qt(p=>{o(p),i()}),()=>{qt(null),r.current&&clearTimeout(r.current)}),[i]);const a=k(()=>{r.current&&(clearTimeout(r.current),r.current=null)},[]),f=k(()=>{t&&i()},[t,i]),u=k(()=>{t&&(e(t),s())},[t,e,s]);if(!t)return null;const l=bs(t.stack);return n("div",{style:cs,onMouseEnter:a,onMouseLeave:f},n("div",{style:ds},n("span",{style:ps},t.type==="error"?"Uncaught Error":"Unhandled Rejection"),n("div",{style:us},n("button",{style:fs,onClick:u},"Report Bug"),n("button",{style:gs,onClick:s},"Dismiss"))),n("div",{style:hs},n("div",{style:xs},t.message),l.length>0?n("div",{style:ys},l.slice(0,8).map((p,c)=>n("div",{key:c,style:_s(p)?ms:yo},p))):null))}const vs={position:"fixed",padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:d.fabBg,color:"#fff",cursor:"pointer",fontSize:"12px",fontWeight:"600",zIndex:999999,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",gap:"4px",fontFamily:"system-ui, -apple-system, sans-serif"},ws={position:"fixed",width:"360px",maxHeight:"320px",backgroundColor:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:999999,display:"flex",flexDirection:"column",fontFamily:"system-ui, -apple-system, sans-serif",overflow:"hidden"},ks={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",backgroundColor:d.panelHeaderBg,borderBottom:`1px solid ${d.panelBorder}`,flexShrink:0},Cs={fontSize:"12px",fontWeight:"600",color:d.textBright},$s={width:"24px",height:"24px",borderRadius:"4px",border:"none",backgroundColor:"transparent",color:d.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",lineHeight:"1"},Bs={padding:"12px",overflowY:"auto",flex:1,fontSize:"13px",lineHeight:"1.5",color:d.text,whiteSpace:"pre-wrap",wordBreak:"break-word"},Ts={padding:"16px 12px",fontSize:"12px",color:d.textMuted,textAlign:"center"},Es={padding:"12px",fontSize:"12px",color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",margin:"8px 12px"};function mo(e,t,o,r){const s=Math.min(Math.max(e,8),window.innerWidth-o-8),i=Math.min(Math.max(t,8),window.innerHeight-r-8);return{x:s,y:i}}function Rs({apiBase:e,pinHash:t}){const[o,r]=_(""),[s,i]=_(null),[a,f]=_(null),[u,l]=_("idle"),[p,c]=_(""),[h,g]=_(""),[m,S]=_(!1),[y,x]=_(!1),b=j(null),w=j(null),$=k(()=>{i(null),f(null),r(""),l("idle"),c(""),g(""),b.current&&(b.current.abort(),b.current=null)},[]);A(()=>{function M(T){if(T.target.closest?.("[data-quickai]"))return;const v=window.getSelection()?.toString().trim()??"";if(v.length>10){r(v);const z=mo(T.clientX,T.clientY-40,90,30);i(z)}else a||(i(null),r(""))}return document.addEventListener("mouseup",M),()=>document.removeEventListener("mouseup",M)},[a]),A(()=>{if(!a)return;function M(L){L.target.closest?.("[data-quickai]")||$()}const T=setTimeout(()=>{document.addEventListener("mousedown",M)},100);return()=>{clearTimeout(T),document.removeEventListener("mousedown",M)}},[a,$]);const B=k(async()=>{if(!o)return;const M=s?mo(s.x,s.y+36,360,320):{x:100,y:100};f(M),i(null),l("loading"),c(""),g(""),b.current&&b.current.abort();const T=new AbortController;b.current=T;try{const L=await fetch(`${e}/api/ai/analyze`,{method:"POST",headers:{"Content-Type":"application/json","X-DevTools-Pin":t},body:JSON.stringify({text:o,context:window.location.href}),signal:T.signal});if(!L.ok)throw new Error(`Analysis failed (${L.status})`);const I=L.body?.getReader();if(!I)throw new Error("No response stream");l("streaming");const v=new TextDecoder;for(;;){const{done:z,value:N}=await I.read();if(z)break;const H=v.decode(N,{stream:!0});H&&c(Y=>Y+H)}l("done")}catch(L){if(L.name==="AbortError")return;l("error");const I=L instanceof Error?L.message:"Analysis failed";g(I)}},[o,s,e,t]),R=s?n("button",{"data-quickai":"btn",style:{...vs,left:`${s.x}px`,top:`${s.y}px`,backgroundColor:m?d.fabBgHover:d.fabBg},onClick:B,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1)},"✨ Analyze"):null,O=a?n("div",{ref:w,"data-quickai":"popup",style:{...ws,left:`${a.x}px`,top:`${a.y}px`}},n("div",{style:ks},n("span",{style:Cs},"AI Analysis"),n("button",{style:{...$s,backgroundColor:y?d.closeBtnHover:"transparent",color:y?"#fff":d.textMuted},onClick:$,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),"aria-label":"Close"},"✕")),u==="loading"?n("div",{style:Ts},"Analyzing..."):u==="error"?n("div",{style:Es},h):n("div",{style:Bs},p||"Waiting...")):null;return n("div",{"data-quickai":"root"},R,O)}const Ms=["All","Standards","Git","API","Deploy"];function zs({apiBase:e,pinHash:t,onClose:o}){const[r,s]=_(""),[i,a]=_("All"),[f,u]=_([]),[l,p]=_(null),c=j(null);A(()=>{fetch(`${e}/api/hub/kb`,{headers:{"X-DevTools-Pin":t}}).then(m=>{if(!m.ok)throw new Error(m.statusText);return m.json()}).then(m=>{Array.isArray(m)&&u(m)}).catch(()=>{}),setTimeout(()=>c.current?.focus(),50)},[e,t]);function h(m){navigator.clipboard.writeText(m.snippet??m.title).then(()=>{p(m.id),setTimeout(()=>p(null),1500)}).catch(()=>{})}const g=f.filter(m=>{const S=i==="All"||m.type===i,y=!r||m.title.toLowerCase().includes(r.toLowerCase())||(m.snippet??"").toLowerCase().includes(r.toLowerCase());return S&&y});return n("div",{style:{position:"fixed",inset:0,zIndex:2147483647,background:"rgba(0,0,0,0.75)",display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:96},onClick:o},n("div",{style:{width:"100%",maxWidth:600,background:d.panelBg,border:`1px solid ${d.panelBorder}`,borderRadius:8,overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.8)",fontFamily:"system-ui,sans-serif"},onClick:m=>m.stopPropagation()},n("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 14px",borderBottom:`1px solid ${d.panelBorder}`}},n("input",{ref:c,value:r,style:{flex:1,background:"transparent",border:"none",outline:"none",color:d.text,fontSize:13,fontFamily:"inherit"},placeholder:"Search knowledge base...",onInput:m=>s(m.target.value)}),n("button",{style:{background:"none",border:"none",color:d.textMuted,cursor:"pointer",fontSize:16},onClick:o},"✕")),n("div",{style:{display:"flex",gap:4,padding:"6px 10px",borderBottom:`1px solid ${d.panelBorder}`}},Ms.map(m=>n("button",{key:m,style:{padding:"2px 10px",borderRadius:99,fontSize:11,cursor:"pointer",border:"none",fontFamily:"inherit",background:i===m?d.toolBtnBgActive:d.toolBtnBg,color:i===m?"#fff":d.textMuted},onClick:()=>a(m)},m))),n("div",{style:{maxHeight:360,overflowY:"auto"}},g.length===0?n("p",{style:{padding:"24px 14px",textAlign:"center",color:d.textMuted,fontSize:12}},"No results"):g.map(m=>n("div",{key:m.id,style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"10px 14px",borderBottom:`1px solid ${d.panelBorder}`}},n("div",{style:{display:"flex",flexDirection:"column",gap:3,minWidth:0}},n("span",{style:{fontSize:12,color:d.text,fontWeight:500}},m.title),m.description&&n("span",{style:{fontSize:10,color:d.textMuted}},m.description),m.snippet&&window.innerWidth>=768&&n("code",{style:{fontSize:10,background:"#0a0f1a",color:"#94a3b8",padding:"2px 6px",borderRadius:4,fontFamily:"monospace",maxWidth:400,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},m.snippet)),m.snippet&&window.innerWidth>=768&&n("button",{style:{background:"none",border:"none",cursor:"pointer",color:l===m.id?"#34d399":d.textMuted,fontSize:14,marginLeft:8,flexShrink:0},onClick:()=>h(m)},"⧉"))))))}const Je=document.currentScript,Is=[":host { all: initial; }","#devtools-root { font-family: system-ui, sans-serif; }","* { box-sizing: border-box; }","*::-webkit-scrollbar { width: 4px; height: 4px; }","*::-webkit-scrollbar-track { background: transparent; }","*::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 2px; }","*::-webkit-scrollbar-corner { background: transparent; }","* { scrollbar-width: thin; scrollbar-color: #1e293b transparent; }"].join(`
`);function Ds({projectId:e,pinHash:t,apiBase:o,apiClient:r}){const[s,i]=_(null),a=k(u=>{i(u)},[]),f=k(()=>{i(null)},[]);return n("div",null,n(es,{projectId:e,pinHash:t,apiBase:o,apiClient:r}),n(Ss,{onReportBug:a}),n(Rs,{apiBase:o,pinHash:t}),s?n("div",{style:{position:"fixed",bottom:"80px",right:"20px",width:"340px",maxHeight:"400px",backgroundColor:"#0f172a",border:"1px solid #1e293b",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:"999997",overflow:"auto"}},n(Zt,{apiClient:r,projectId:e,prefillTitle:s.message,prefillStack:s.stack,onClose:f})):null)}function bo(){if(document.getElementById("devtools-widget"))return;const e=Je?.getAttribute("data-project")||"default",t=Je?.getAttribute("data-pin")||"",o=Je?.src.replace("/widget.js","")||"",r=ho(o,t),s=document.createElement("div");s.id="devtools-widget",document.body.appendChild(s);const i=s.attachShadow({mode:"open"}),a=document.createElement("style");a.textContent=Is,i.appendChild(a);const f=document.createElement("div");f.id="devtools-root",i.appendChild(f),ft(n(Ds,{projectId:e,pinHash:t,apiBase:o,apiClient:r}),f),ls(e,t,o),Hi();let u=null;document.addEventListener("keydown",l=>{l.key.toLowerCase()==="k"&&l.metaKey&&l.shiftKey&&(l.preventDefault(),u?(i.removeChild(u),u=null):(u=document.createElement("div"),i.appendChild(u),ft(n(zs,{apiBase:o,pinHash:t,onClose:()=>{u&&(i.removeChild(u),u=null)}}),u))),l.key==="Escape"&&u&&(i.removeChild(u),u=null)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",bo):bo()})();
